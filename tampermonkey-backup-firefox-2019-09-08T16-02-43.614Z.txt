{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Skrypt umożliwiający pobieranie materiałów ze znanych serwisów VOD.","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*www.ipla.tv/*","*getmedia.redefine.pl/*","*player.pl/*","*vod.pl/*","*qi.ckm.onetapi.pl/*","*tvp.pl/*","*www.cda.pl/*"],"merge_includes":true,"use_matches":[],"orig_matches":["http://www.ipla.tv/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1540408179454,"data":{}},"enabled":true,"position":1,"uuid":"38f03da0-ec99-4c18-bb14-6db622aec819","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBTa3J5cHQgdW1vxbxsaXdpYWrEhWN5IHBvYmllcmFuaWUgbWF0ZXJpYcWCw7N3IHplIHpuYW55Y2ggc2Vyd2lzw7N3IFZPRC4KLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vd3d3LmlwbGEudHYvCi8vIEBpbmNsdWRlICAgICAgKnd3dy5pcGxhLnR2LyoKLy8gQGluY2x1ZGUgICAgICAqZ2V0bWVkaWEucmVkZWZpbmUucGwvKgovLyBAaW5jbHVkZSAgICAgICpwbGF5ZXIucGwvKgovLyBAaW5jbHVkZSAgICAgICp2b2QucGwvKgovLyBAaW5jbHVkZSAgICAgICpxaS5ja20ub25ldGFwaS5wbC8qCi8vIEBpbmNsdWRlICAgICAgKnR2cC5wbC8qCi8vIEBpbmNsdWRlICAgICAgKnd3dy5jZGEucGwvKgovLyBAdmVyc2lvbiAgICAgIDQuOQovLyBAZGVzY3JpcHRpb24gIFNrcnlwdCB1bW/FvGxpd2lhasSFY3kgcG9iaWVyYW5pZSBtYXRlcmlhxYLDs3cgeiBzZXJ3aXPDs3c6IGlwbGEudHYsIHBsYXllci5wbCwgdm9kLnBsLCB2b2QudHZwLnBsLCBjZGEucGwuIER6aWHFgmEgdHlsa28geiByb3pzemVyemVuaWVtIFRhbXBlcm1vbmtleS4KLy8gQGF1dGhvciAgICAgICBQcnplbWVrCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL3d3dy5pcGxhLnR2LyoKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQovL1dhxbxuZToKLy9Ta3J5cHQgb3BpZXJhIHNpxJkgbmEgc2tyeXB0YWNoIHVtaWVzemN6b255Y2ggbmEgc3Ryb25pZTogbWluaXNrcnlwdC5ibG9nc3BvdC5jb20KLy9vcmF6OiBtaW5pc2tyeXB0Lmh1YmFpaXR2LnBsLiBNb2plIHJvenN6ZXJ6ZW5pZSB0eWxrbyBpIHd5xYLEhWN6bmllIGRvZGFqZSB3eWdvZG5lCi8vdyB1xbx5Y2l1IHByenljaXNraSwgamVkbmFrIG5pZSBqZXN0ZW0gYXV0b3JlbSB3acSZa3N6b8WbY2kga29kdS4KLy9Ta3J5cHQgamVzdCBuaWVwdWJsaWN6bnksIGEgZG9zdMSZcCBkbyBuaWVnbyBtYWrEhSB0eWxrbyBpIHd5xYLEhWN6bmllIG9zb2J5IHogbGlua2llbS4KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gS09ORklHVVJBQ0pBIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwp2YXIgV2xhY3pfc2tyeXB0ID0gdHJ1ZTsgLy8gdHJ1ZSA9IHNrcnlwdCB3xYLEhWN6b255LCBmYWxzZSA9IHNrcnlwdCB3ecWCxIVjem9ueS4KLy8vLy8vLy8vLy8vLy8vLy8vLy8gS09OSUVDIEtPTkZJR1VSQUNKSSAvLy8vLy8vLy8vLy8vLy8vLy8vLwoKdmFyIFNrcnlwdEtvcGl1alRleHQgPSAiZnVuY3Rpb24gY29weVRleHQoZSl7ZnVuY3Rpb24gdChlKXtpZihkb2N1bWVudC5zZWxlY3Rpb24pe3ZhciB0PWRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7dC5tb3ZlVG9FbGVtZW50VGV4dChlKSx0LnNlbGVjdCgpfWVsc2UgaWYod2luZG93LmdldFNlbGVjdGlvbil7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTt0LnNlbGVjdE5vZGUoZSksd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpLHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5hZGRSYW5nZSh0KX19dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTtuLnRleHRDb250ZW50PWUsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKSx0KG4pLGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKSxuLnJlbW92ZSgpfSAiOwp2YXIgU3R5bGVUZXh0ID0gIjxzdHlsZT5ib2R5e2ZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCI7fS5jbGlja2Vke2JhY2tncm91bmQtY29sb3I6ICM3Q0ZDMDA7fTwvc3R5bGU+IjsKCmZ1bmN0aW9uIGFkZEV2ZW50KG9iaiwgZXZlbnQsIGZ1bmMpIHsKICAgIGlmIChvYmouYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgewogICAgICAgIG9iai5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGZ1bmMpOwogICAgfSBlbHNlIHsKICAgICAgICB2YXIgZiA9IG9ialsnb24nICsgZXZlbnRdOwogICAgICAgIG9ialsnb24nICsgZXZlbnRdID0gdHlwZW9mIGYgPT09ICdmdW5jdGlvbicgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGYoKTsKICAgICAgICAgICAgZnVuYygpOwogICAgICAgIH0KICAgICAgICA6IGZ1bmM7CiAgICB9Cn0KCmZ1bmN0aW9uIFNob3dQcm9tcHRXaXRoSW5mbyhsb2wsIGluZm8gPSBudWxsKSB7CiAgICB2YXIgaW5mb3RleHQgPSAnQWJ5IHNrb3Bpb3dhxIcgbGluaywgd2NpxZtuaWo6IENUUkwrQywgcG90ZW06IEVOVEVSIGFieSByb3pwb2N6xIXEhyBwb2JpZXJhbmllLCBsdWIgRVNDIGFieSB6YWtvxYRjennEhyBkemlhxYJhbmllIHNrcnlwdHUnOwogICAgaWYoaW5mbyAhPT0gbnVsbCl7CiAgICAgICAgaW5mb3RleHQgPSBpbmZvdGV4dCArICIuICIgKyBpbmZvOwogICAgfQogICAgaWYgKHdpbmRvdy5wcm9tcHQoaW5mb3RleHQsIGxvbCkpIHsKICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gbG9sOwogICAgfQp9CgpmdW5jdGlvbiBTaG93UHJvbXB0KGxvbCkgewogICAgd2luZG93LnByb21wdCgnQWJ5IHNrb3Bpb3dhxIcgbGluaywgd2NpxZtuaWo6IENUUkwrQywgcG90ZW06IEVOVEVSJywgbG9sKTsKfQoKZnVuY3Rpb24gbWFrZWlkKCkKewogICAgdmFyIHRleHQgPSAnJzsKICAgIHZhciBwb3NzaWJsZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKICAgIHJldHVybiB0ZXh0Owp9Cgp2YXIgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSAnJzsKZnVuY3Rpb24gZmlyZU5ld1RhYigpIHsKICAgIGZ1bmN0aW9uIG1ha2VpZDIoKSB7CiAgICAgICAgdmFyIHRleHQgPSAnJzsKICAgICAgICB2YXIgcG9zc2libGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKQogICAgICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKICAgICAgICByZXR1cm4gdGV4dDsKICAgIH0KICAgIHZhciByYW5kb21UZXh0ID0gbWFrZWlkMigpOwogICAgdmFyIG5ld1RhYiA9IHdpbmRvdy5vcGVuKCdhYm91dDpibGFuaycsICdNc2dXaW5kb3ctJyArIHJhbmRvbVRleHQpOwogICAgbmV3VGFiLmRvY3VtZW50LndyaXRlKCJEb2N1bWVudFdyaXRlRmlyZWZveEZpeCIpOwogICAgbmV3VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy9hbGVydCgnaGkyJyk7CiAgICAgICAgdmFyIGRlc3REb2MgPSBuZXdUYWIuZG9jdW1lbnQ7CiAgICAgICAgZGVzdERvYy5vcGVuKCk7CiAgICAgICAgZGVzdERvYy53cml0ZSgiRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXgiKTsKICAgICAgICBkZXN0RG9jLmNsb3NlKCk7CiAgICB9LCBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICApOwp9CmZ1bmN0aW9uIGFkZHNsYXNoZXMoIHN0ciApIHsKICAgIHJldHVybiAoc3RyICsgJycpLnJlcGxhY2UoL1tcXCInXS9nLCAnXFwkJicpLnJlcGxhY2UoL1x1MDAwMC9nLCAnXFwwJyk7Cn0KCmZ1bmN0aW9uIGFkZEpTX05vZGUodGV4dCwgc19VUkwsIGZ1bmNUb1J1biwgcnVuT25Mb2FkKSB7CiAgICB2YXIgRCA9IGRvY3VtZW50OwogICAgdmFyIHNjcmlwdE5vZGUgPSBELmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgaWYgKHJ1bk9uTG9hZCkgewogICAgICAgIHNjcmlwdE5vZGUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJ1bk9uTG9hZCwgZmFsc2UpOwogICAgfQogICAgc2NyaXB0Tm9kZS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICBpZiAodGV4dCkgc2NyaXB0Tm9kZS50ZXh0Q29udGVudCA9IHRleHQ7CiAgICBpZiAoc19VUkwpIHNjcmlwdE5vZGUuc3JjID0gc19VUkw7CiAgICB2YXIgc3RyID0gZnVuY1RvUnVuLnRvU3RyaW5nKCk7CiAgICB2YXIgdGVzID0gYWRkc2xhc2hlcyhEb2N1bWVudFdyaXRlRmlyZWZveEZpeCk7CiAgICB2YXIgcmVzID0gc3RyLnJlcGxhY2UoIkRvY3VtZW50V3JpdGVGaXJlZm94Rml4IiwgdGVzKTsKICAgIHJlcyA9IHJlcy5yZXBsYWNlKCJEb2N1bWVudFdyaXRlRmlyZWZveEZpeCIsIHRlcyk7CiAgICBpZiAoZnVuY1RvUnVuKSBzY3JpcHROb2RlLnRleHRDb250ZW50ID0gJygnICsgcmVzICsgJykoKSc7CgogICAgdmFyIHRhcmcgPSBELmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJykgWzBdIHx8IEQuYm9keSB8fCBELmRvY3VtZW50RWxlbWVudDsKICAgIHRhcmcuYXBwZW5kQ2hpbGQoc2NyaXB0Tm9kZSk7Cn0KCmZ1bmN0aW9uIFBva2F6TGlua1RWTk5vd3koKSB7CiAgICB0cnkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjZGV0YWlsRXBpc29kZSIpLmdldEF0dHJpYnV0ZSgiZGF0YS1hcnRpY2xlLWlkIik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB2YXIgcGFnZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICB2YXIgbGFzdENvbW1hID0gcGFnZVVSTC5sYXN0SW5kZXhPZigiLCIpOwogICAgICAgICAgICBpZiAobGFzdENvbW1hID4gLSAxKSB7CiAgICAgICAgICAgICAgICBuID0gcGFnZVVSTC5zdWJzdHJpbmcobGFzdENvbW1hKzEpOwogICAgICAgICAgICAgICAgbiA9IHBhcnNlSW50KG4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICB4bWxodHRwLm9wZW4oIkdFVCIsICIvYXBpLz9wbGF0Zm9ybT1Db25uZWN0ZWRUViZ0ZXJtaW5hbD1QYW5hc29uaWMmZm9ybWF0PWpzb24mYXV0aEtleT0wNjRmZGE1YWIyNmRjMWRkOTM2ZjVjNmU4NGI3ZDNjMiZ2PTMuMSZtPWdldEl0ZW0maWQ9IiArIG4sIGZhbHNlKTsKICAgICAgICB4bWxodHRwLnNlbmQoKTsKICAgICAgICBvID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgbHQgPSBvLml0ZW0udmlkZW9zLm1haW4udmlkZW9fY29udGVudF9saWNlbnNlX3R5cGU7CiAgICAgICAgZGQgPSBvLml0ZW0udmlkZW9zLm1haW4udmlkZW9fY29udGVudDsKICAgICAgICB0aXRsZSA9IG8uaXRlbS5zZXJpZV90aXRsZSArICIgLSBTIiArIG8uaXRlbS5zZWFzb24gKyAiRSIgKyBvLml0ZW0uZXBpc29kZTsKICAgICAgICBpZiAobHQgIT09IG51bGwpIHsKICAgICAgICAgICAgYWxlcnQoJ0RSTSBsdWIgYnJhayBtYXRlcmlhxYJ1IFRWIDooJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSAiIjsKICAgICAgICB2YXIgcmFuZG9tVGV4dCA9IG1ha2VpZCgpOwogICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyAnPHA+VHl0dcWCOiAnICsgdGl0bGUgKyAnPC9wPic7CiAgICAgICAgdmFyIEhpZ2hlc3RSZXNvbHV0aW9uID0gMDsKICAgICAgICB2YXIgSGlnaGVzdFJlc29sdXRpb25MaW5rID0gJyc7CiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGRkLmxlbmd0aDsgaiA8IGxlbjsgaiA9IGogKyAxKSB7CiAgICAgICAgICAgIEhpZ2hlc3RSZXNvbHV0aW9uID0gSGlnaGVzdFJlc29sdXRpb24gKyAxOwogICAgICAgICAgICBkbHVybCA9IGRkW2pdLnVybDsKICAgICAgICAgICAgaWYoaiA8IDIpewogICAgICAgICAgICAgICAgSGlnaGVzdFJlc29sdXRpb25MaW5rID0gZGx1cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcG4gPSBkZFtqXS5wcm9maWxlX25hbWU7CiAgICAgICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyAiPHA+SmFrb8WbxIcgbWF0ZXJpYcWCdTogIiArIHBuICsgIjxicj4iOwogICAgICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgIkxpbmsgZG8gbWF0ZXJpYcWCdTogPGJ1dHRvbiBpZD1cImJ1dHRvbi0iICsgaiArICJcIiB0eXBlPVwiYnV0dG9uXCI+S29waXVqPC9idXR0b24+PGJyPjxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIiICsgZGx1cmwgKyAiXCI+IiArIGRsdXJsICsgIjwvYT48L3A+IjsKICAgICAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICI8c2NyaXB0PnZhciBidXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uLSIraisiJyk7YnV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtjb3B5VGV4dChcIiIrIGRsdXJsICsiXCIpO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b24tIitqKyInKS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNsaWNrZWRcIik7fSk8L3NjcmlwdD4iOwogICAgICAgIH0KICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgU3R5bGVUZXh0ICsgJzxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+ZnVuY3Rpb24gU2hvd1Byb21wdFdpdGhJbmZvKGxvbCl7aWYgKHdpbmRvdy5wcm9tcHQoIkFieSBza29waW93YcSHIGxpbmssIHdjacWbbmlqOiBDVFJMK0MsIHBvdGVtOiBFTlRFUiBhYnkgcm96cG9jesSFxIcgcG9iaWVyYW5pZSwgbHViIEVTQyBhYnkgemFrb8WEY3p5xIcgZHppYcWCYW5pZSBza3J5cHR1IiwgbG9sKSl7ZG9jdW1lbnQubG9jYXRpb24uaHJlZj1sb2w7fX1zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtTaG93UHJvbXB0V2l0aEluZm8oIicgKyBIaWdoZXN0UmVzb2x1dGlvbkxpbmsgKyAnIik7fSwgMTAwMCk7JyArIFNrcnlwdEtvcGl1alRleHQgKyAnPC9zY3JpcHQ+JzsKICAgICAgICBhZGRKU19Ob2RlKG51bGwsIG51bGwsIGZpcmVOZXdUYWIpOwoKICAgIH0gY2F0Y2ggKGUpIHt9Cn0KCmZ1bmN0aW9uIFBva2F6TGlua1BvYmllcmFuaWVJcGxhKCkgewogICAgLy9hbGVydCgnaXBsYScpOwogICAgbm4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdwcmUnKS50ZXh0Q29udGVudDsKICAgIHYgPSBKU09OLnBhcnNlKG5uKTsKICAgIGlmICh2LnZvZC5kcm0gPT0gdHJ1ZSkgewogICAgICAgIGFsZXJ0KCdOaWVzdGV0eSwgYWxlIG1hdGVyaWHFgiBqZXN0IHphYmV6cGllY3pvbnkgRFJNIGkgcHJhd2RvcG9kb2JuaWUgbmllIGLEmWR6aWUgbW/FvG5hIGdvIHBvYnJhxIcgOignKTsKICAgIH0KICAgIHZhciBRdWFsaXR5QXJyYXkgPSBbXTsKICAgIHZhciBjb3BpZXMgPSB2LnZvZC5jb3BpZXM7CiAgICBpZihjb3BpZXMgIT09IG51bGwpewogICAgICAgIGlmKGNvcGllcy5sZW5ndGggPiAwKXsKICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBjb3BpZXMpIHsKICAgICAgICAgICAgICAgIHZhciBjb3B5ID0gY29waWVzW3Byb3BdOwogICAgICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gW2NvcHkucXVhbGl0eV9wLCBjb3B5LnVybF07CiAgICAgICAgICAgICAgICBRdWFsaXR5QXJyYXkucHVzaChuZXdBcnJheSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoUXVhbGl0eUFycmF5ICE9PSBudWxsKXsKICAgICAgICAgICAgICAgIHZhciBjb3VudEFycmF5ID0gUXVhbGl0eUFycmF5Lmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmKGNvdW50QXJyYXkgPiAwKXsKICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRBcnJheUVsZW1lbnQgPSBjb3VudEFycmF5IC0gMTsKICAgICAgICAgICAgICAgICAgICB2YXIgYmVzdFF1YWxpdHkgPSBRdWFsaXR5QXJyYXlbY291bnRBcnJheUVsZW1lbnRdWzBdOwogICAgICAgICAgICAgICAgICAgIHZhciBiZXN0UXVhbGl0eUxpbmsgPSBRdWFsaXR5QXJyYXlbY291bnRBcnJheUVsZW1lbnRdWzFdOwogICAgICAgICAgICAgICAgICAgIFNob3dQcm9tcHRXaXRoSW5mbyhiZXN0UXVhbGl0eUxpbmssIlxuV3licmFuYSBqYWtvxZvEhyBtYXRlcmlhxYJ1IHRvOiAiICsgYmVzdFF1YWxpdHkgKyAiLiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgpmdW5jdGlvbiBQb2thekxpbmtJcGxhKCkgewogICAgaWYgKGxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwW3NdPzpcL1wvd3d3XC5pcGxhXC50dlwvLykpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgbWlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZvZC1wbGF5ZXInKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdm9kLWpzb24nKTsKICAgICAgICAgICAgdmFyIGlkbiA9IEpTT04ucGFyc2UobWlkKS5taWQ7CiAgICAgICAgICAgIC8vdG9wLmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly9nZXRtZWRpYS5yZWRlZmluZS5wbC92b2RzL2dldF92b2QvP2NwaWQ9MSZ1YT1taXBsYV9pb3MvMTIyJm1lZGlhX2lkPScgKyBpZG47CiAgICAgICAgICAgIHRvcC5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vZ2V0bWVkaWEucmVkZWZpbmUucGwvdm9kcy9nZXRfdm9kLz9jcGlkPTEmdWE9d3d3X2lwbGF0dl9odG1sNS8xMjM0NSZtZWRpYV9pZD0nICsgaWRuOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciB4ID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIGlkbiA9IHgubWF0Y2goL1tcYS16XGRdezMyfS8pWzBdOwogICAgICAgICAgICAvL3RvcC5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vZ2V0bWVkaWEucmVkZWZpbmUucGwvdm9kcy9nZXRfdm9kLz9jcGlkPTEmdWE9bWlwbGFfaW9zLzEyMiZtZWRpYV9pZD0nICsgaWRuOwogICAgICAgICAgICB0b3AubG9jYXRpb24uaHJlZiA9ICdodHRwczovL2dldG1lZGlhLnJlZGVmaW5lLnBsL3ZvZHMvZ2V0X3ZvZC8/Y3BpZD0xJnVhPXd3d19pcGxhdHZfaHRtbDUvMTIzNDUmbWVkaWFfaWQ9JyArIGlkbjsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgdmFyIHBhZ2VVUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgiPyIpWzBdOwogICAgICAgICAgICAgICAgdmFyIHBhZ2VVUkxUZW1wID0gcGFnZVVSTC5zdWJzdHJpbmcoMCwgcGFnZVVSTC5sZW5ndGggLSAzKTsKICAgICAgICAgICAgICAgIHZhciBsYXN0Q29tbWEgPSBwYWdlVVJMVGVtcC5sYXN0SW5kZXhPZigiLyIpOwogICAgICAgICAgICAgICAgaWYgKGxhc3RDb21tYSA+IC0gMSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBwYWdlVVJMLnN1YnN0cmluZyhsYXN0Q29tbWErMSk7CiAgICAgICAgICAgICAgICAgICAgbWlkID0gbjsKICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSAnaHR0cDovL2dldG1lZGlhLnJlZGVmaW5lLnBsL3ZvZHMvZ2V0X3ZvZC8/Y3BpZD0xJnVhPW1pcGxhX2lvcy8xMjImbWVkaWFfaWQ9JyArIG1pZDsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gJ2h0dHA6Ly9nZXRtZWRpYS5yZWRlZmluZS5wbC92b2RzL2dldF92b2QvP2NwaWQ9MSZ1YT13d3dfaXBsYXR2X2h0bWw1LzEyMzQ1Jm1lZGlhX2lkPScgKyBtaWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KZnVuY3Rpb24gUG9rYXpMaW5rT25ldCgpIHsKdHJ5ewogICAgICAgCWkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubXZwIikuZ2V0QXR0cmlidXRlKCdpZCcpOwoJCW0gPSBpLm1hdGNoKC9tdnA6KC4rKS8pWzFdOwoJCWkgPSBkb2N1bWVudC5ib2R5LmlubmVySFRNTDsKCQl0aXRsZSA9IGkubWF0Y2goL3RpdGxlOiBcJyguKilcJywvKVsxXTsKCQl1cmwgPSAiYUhSMGNITTZMeTl3YkdGNVpYSXRZWEJwTG1SeVpXRnRiR0ZpTG5Cc0x6OWliMlI1VzJsa1hUMHJiU3NtWW05a2VWdHFjMjl1Y25CalhUMHlMakFtWW05a2VWdHRaWFJvYjJSZFBXZGxkRjloYzNObGRGOWtaWFJoYVd3bVltOWtlVnR3WVhKaGJYTmRXMGxFWDFCMVlteHBhMkZqYW1sZFBTdHRLeVppYjJSNVczQmhjbUZ0YzExYlUyVnlkbWxqWlYwOWRtOWtMbTl1WlhRdWNHd21ZMjl1ZEdWdWRDMTBlWEJsUFdGd2NHeHBZMkYwYVc5dUwycHpiMjV3Sm5ndGIyNWxkQzFoY0hBOWNHeGhlV1Z5TG1aeWIyNTBMbTl1WlhSaGNHa3VjR3dtWTJGc2JHSmhZMnM5IjsKCQl1cmwgPSAoYXRvYih1cmwpKS5yZXBsYWNlKC9cK21cKy9nLCBtKTsKCQl4aHIgPSBuZXcgICBYTUxIdHRwUmVxdWVzdCgpOwoJCXhoci5vcGVuKCdHRVQnLCB1cmwsIGZhbHNlKTsKCQl4aHIuc2VuZChudWxsKTsKCQl2ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTsKCQl2YyA9IHYucmVzdWx0WzBdLmZvcm1hdHMud2lkZW9bIm1wNC11aGQiXTsKCQlpZiAoIXZjKSB7CgkJCWFsZXJ0KCdOaWVzdGV0eSwgYWxlIG1hdGVyaWHFgiBqZXN0IHphYmV6cGllY3pvbnkgRFJNIGkgbmllIGLEmWR6aWUgbW/FvG5hIGdvIHBvYnJhxIcgOignKTsKCQkJcmV0dXJuOwoJCX07CgkJdGl0bGUgPSB2LnJlc3VsdFswXS5tZXRhLnRpdGxlOwoJCWZvciAodmFyICAgaSA9IC0xLCBjYyA9IFtdLCBkZCA9IFtdLCBsID0gdmMubGVuZ3RoID4+PiAwOyArK2kgIT09IGw7IG51bGwpIHsKCQkJZGRbaV0gPSBjY1tpXSA9IHZjW2ldLnZpZGVvX2JpdHJhdGU7CgkJfTsKCQlkZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CgkJCXJldHVybiAgIGIgLSBhOwoJCX0pOwoJCS8vcGFnZWNyZWF0ZSh0aXRsZSk7CgkJRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSAiIjsKICAgICAgICB2YXIgcmFuZG9tVGV4dCA9IG1ha2VpZCgpOwogICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyAnPHA+VHl0dcWCOiAnICsgdGl0bGUgKyAnPC9wPic7CiAgICAgICAgdmFyIEhpZ2hlc3RSZXNvbHV0aW9uID0gMDsKICAgICAgICB2YXIgSGlnaGVzdFJlc29sdXRpb25MaW5rID0gJyc7CiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGRkLmxlbmd0aDsgaiA8IGxlbjsgaiA9IGogKyAxKSB7CiAgICAgICAgICAgIGRsdXJsID0gdmNbY2MuaW5kZXhPZihkZFtqXSldLnVybDsKICAgICAgICAgICAgYml0cmF0ZSA9IHZjW2NjLmluZGV4T2YoZGRbal0pXS52aWRlb19iaXRyYXRlOwogICAgICAgICAgICB2ZXJ0aWNhbF9yZXNvbHV0aW9uID0gdmNbY2MuaW5kZXhPZihkZFtqXSldLnZlcnRpY2FsX3Jlc29sdXRpb247CiAgICAgICAgICAgIC8qY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoInByZSIsIHt9LCB7CiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogIkJpdHJhdGU6ICIgKyBiaXRyYXRlICsgIiAtIFJvemR6aWVsY3pvxZvEhyBwaW9ub3dhOiAiICsgdmVydGljYWxfcmVzb2x1dGlvbgogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHcgPSAnd2dldCAtLXJlc3RyaWN0LWZpbGUtbmFtZXM9d2luZG93cyAtLXByb2dyZXNzPWJhciAtLWhlYWRlcj0iVXNlci1BZ2VudDpBQkMiIC1jIC1PICInICsgdGl0bGUgKyAnLm1wNCIgJyArIGRsdXJsOwogICAgICAgICAgICBidXR0b25jcmVhdGUoZGx1cmwsIHRpdGxlLCB3KTsqLwogICAgICAgICAgICBpZiAodmVydGljYWxfcmVzb2x1dGlvbiA+IEhpZ2hlc3RSZXNvbHV0aW9uKSB7CiAgICAgICAgICAgICAgICBIaWdoZXN0UmVzb2x1dGlvbiA9IHZlcnRpY2FsX3Jlc29sdXRpb247CiAgICAgICAgICAgICAgICBIaWdoZXN0UmVzb2x1dGlvbkxpbmsgPSBkbHVybDsKICAgICAgICAgICAgfQogICAgICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgJzxwPkJpdHJhdGU6ICcgKyBiaXRyYXRlICsgJyAtIFJvemR6aWVsY3pvxZvEhyBwaW9ub3dhOiAnICsgdmVydGljYWxfcmVzb2x1dGlvbiArICc8YnI+JzsKICAgICAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICJMaW5rIGRvIG1hdGVyaWHFgnU6IDxidXR0b24gaWQ9XCJidXR0b24tIiArIGogKyAiXCIgdHlwZT1cImJ1dHRvblwiPktvcGl1ajwvYnV0dG9uPjxicj48YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiIiArIGRsdXJsICsgIlwiPiIgKyBkbHVybCArICI8L2E+PC9wPiI7CiAgICAgICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyAiPHNjcmlwdD52YXIgYnV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbi0iK2orIicpO2J1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7Y29weVRleHQoXCIiKyBkbHVybCArIlwiKTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uLSIraisiJykuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjbGlja2VkXCIpO30pPC9zY3JpcHQ+IjsKICAgICAgICB9CiAgICAgICAgaWYgKEhpZ2hlc3RSZXNvbHV0aW9uID4gMCkgewogICAgICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgU3R5bGVUZXh0ICsgJzxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+ZnVuY3Rpb24gU2hvd1Byb21wdFdpdGhJbmZvKGxvbCl7aWYgKHdpbmRvdy5wcm9tcHQoIkFieSBza29waW93YcSHIGxpbmssIHdjacWbbmlqOiBDVFJMK0MsIHBvdGVtOiBFTlRFUiBhYnkgcm96cG9jesSFxIcgcG9iaWVyYW5pZSwgbHViIEVTQyBhYnkgemFrb8WEY3p5xIcgZHppYcWCYW5pZSBza3J5cHR1IiwgbG9sKSl7ZG9jdW1lbnQubG9jYXRpb24uaHJlZj1sb2w7fX1zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtTaG93UHJvbXB0V2l0aEluZm8oIicgKyBIaWdoZXN0UmVzb2x1dGlvbkxpbmsgKyAnIik7fSwgMTAwMCk7JyArIFNrcnlwdEtvcGl1alRleHQgKyAnPC9zY3JpcHQ+JzsKICAgICAgICAgICAgYWRkSlNfTm9kZShudWxsLCBudWxsLCBmaXJlTmV3VGFiKTsKICAgICAgICB9CiAgICB9CiAgICBjYXRjaCAoZSl7CiAgICAgICAgaWYgKGxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwW3NdPzpcL1wvdm9kXC5wbFwvLykgfHwgbG9jYXRpb24uaHJlZi5tYXRjaCgvXmh0dHBbc10/OlwvXC9iYWpraVwub25ldFwucGxcLy8pKSB7CiAgICAgICAgICAgIHZhciBpID0gZG9jdW1lbnQuYm9keS5pbm5lckhUTUw7CiAgICAgICAgICAgIG0gPSBpLm1hdGNoKC9tdnA6KFtcZFwuXSspXHgyMi8pOwogICAgICAgICAgICB2YXIgdXJsID0gImh0dHA6Ly9xaS5ja20ub25ldGFwaS5wbC8/Ym9keVtpZF09MjJENEIzQkMwMTRBM0MyMDBCQ0ExNENERkYzQUMwMTgmYm9keVtqc29ucnBjXT0yLjAmYm9keVttZXRob2RdPWdldF9hc3NldF9kZXRhaWwmYm9keVtwYXJhbXNdW0lEX1B1Ymxpa2FjamldPSIgKyBtWzFdICsgIiZib2R5W3BhcmFtc11bU2VydmljZV09dm9kLm9uZXQucGwmY29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb25wJngtb25ldC1hcHA9cGxheWVyLmZyb250Lm9uZXRhcGkucGwmXz0xNDg3NTM2OTk2MzMzIjsKICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVybDsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwPzpcL1wvcWlcLmNrbS5cb25ldGFwaVwucGxcLy8pKSB7CiAgICAgICAgICAgIG5uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigicHJlIikudGV4dENvbnRlbnQ7CiAgICAgICAgICAgIHYgPSBKU09OLnBhcnNlKG5uKTsKICAgICAgICAgICAgdmMgPSB2LnJlc3VsdFswXS5mb3JtYXRzLndpZGVvLm1wNDsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IC0xLCBjYyA9IFtdLCBkZCA9IFtdLCBsID0gdmMubGVuZ3RoID4+PiAwOyArK2kgIT09IGw7IG51bGwpIHsKICAgICAgICAgICAgICAgIGRkW2ldID0gY2NbaV0gPSB2Y1tpXS52aWRlb19iaXRyYXRlOwogICAgICAgICAgICB9OwogICAgICAgICAgICBkZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBiIC0gYTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBkZC5sZW5ndGg7IGogPCBsZW47IGogPSBqICsgMSkgewogICAgICAgICAgICAgICAgdmFyIGRsdXJsID0gdmNbY2MuaW5kZXhPZihkZFtqXSldLnVybDsKICAgICAgICAgICAgICAgIGlmIChkbHVybCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSBkbHVybDsKICAgICAgICB9CiAgICB9Cn0KCmZ1bmN0aW9uIFBva2F6TGlua09uZXRPbGQoKSB7CiAgICB0cnl7CiAgICAgICAgaSA9IGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MOwogICAgICAgIG0gPSBpLm1hdGNoKC9tdnA6KFtcZF17N31cLltcZF17MSwxMH0pLylbMV07CiAgICAgICAgdGl0bGUgPSBpLm1hdGNoKC90aXRsZTogXCcoLiopXCcsLylbMV07CiAgICAgICAgdXJsID0gImFIUjBjSE02THk5d2JHRjVaWEl0WVhCcExtUnlaV0Z0YkdGaUxuQnNMejlpYjJSNVcybGtYVDByYlNzbVltOWtlVnRxYzI5dWNuQmpYVDB5TGpBbVltOWtlVnR0WlhSb2IyUmRQV2RsZEY5aGMzTmxkRjlrWlhSaGFXd21ZbTlrZVZ0d1lYSmhiWE5kVzBsRVgxQjFZbXhwYTJGamFtbGRQU3R0S3laaWIyUjVXM0JoY21GdGMxMWJVMlZ5ZG1salpWMDlkbTlrTG05dVpYUXVjR3dtWTI5dWRHVnVkQzEwZVhCbFBXRndjR3hwWTJGMGFXOXVMMnB6YjI1d0puZ3RiMjVsZEMxaGNIQTljR3hoZVdWeUxtWnliMjUwTG05dVpYUmhjR2t1Y0d3bVkyRnNiR0poWTJzOSI7CiAgICAgICAgdXJsID0gKGF0b2IodXJsKSkucmVwbGFjZSgvXCttXCsvZywgbSk7CiAgICAgICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgZmFsc2UpOwogICAgICAgIHhoci5zZW5kKG51bGwpOwogICAgICAgIHYgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpOwogICAgICAgIHZjID0gdi5yZXN1bHRbMF0uZm9ybWF0cy53aWRlby5tcDQ7CiAgICAgICAgaWYgKCF2YykgewogICAgICAgICAgICBhbGVydCgnTmllc3RldHksIGFsZSBtYXRlcmlhxYIgamVzdCB6YWJlenBpZWN6b255IERSTSBpIG5pZSBixJlkemllIG1vxbxuYSBnbyBwb2JyYcSHIDooJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGl0bGUgPSB2LnJlc3VsdFswXS5tZXRhLnRpdGxlOwogICAgICAgIGZvciAodmFyIGkgPSAtMSwgY2MgPSBbXSwgZGQgPSBbXSwgbCA9IHZjLmxlbmd0aCA+Pj4gMDsgKytpICE9PSBsOyBudWxsKSB7CiAgICAgICAgICAgIGRkW2ldID0gY2NbaV0gPSB2Y1tpXS52aWRlb19iaXRyYXRlOwogICAgICAgIH0KICAgICAgICBkZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIGIgLSBhOwogICAgICAgIH0pOwogICAgICAgIC8vcGFnZWNyZWF0ZSh0aXRsZSk7CgogICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gIiI7CiAgICAgICAgdmFyIHJhbmRvbVRleHQgPSBtYWtlaWQoKTsKICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgJzxwPlR5dHXFgjogJyArIHRpdGxlICsgJzwvcD4nOwogICAgICAgIHZhciBIaWdoZXN0UmVzb2x1dGlvbiA9IDA7CiAgICAgICAgdmFyIEhpZ2hlc3RSZXNvbHV0aW9uTGluayA9ICcnOwogICAgICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBkZC5sZW5ndGg7IGogPCBsZW47IGogPSBqICsgMSkgewogICAgICAgICAgICBkbHVybCA9IHZjW2NjLmluZGV4T2YoZGRbal0pXS51cmw7CiAgICAgICAgICAgIGJpdHJhdGUgPSB2Y1tjYy5pbmRleE9mKGRkW2pdKV0udmlkZW9fYml0cmF0ZTsKICAgICAgICAgICAgdmVydGljYWxfcmVzb2x1dGlvbiA9IHZjW2NjLmluZGV4T2YoZGRbal0pXS52ZXJ0aWNhbF9yZXNvbHV0aW9uOwogICAgICAgICAgICAvKmNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVOb2RlKCJwcmUiLCB7fSwgewogICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6ICJCaXRyYXRlOiAiICsgYml0cmF0ZSArICIgLSBSb3pkemllbGN6b8WbxIcgcGlvbm93YTogIiArIHZlcnRpY2FsX3Jlc29sdXRpb24KICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB3ID0gJ3dnZXQgLS1yZXN0cmljdC1maWxlLW5hbWVzPXdpbmRvd3MgLS1wcm9ncmVzcz1iYXIgLS1oZWFkZXI9IlVzZXItQWdlbnQ6QUJDIiAtYyAtTyAiJyArIHRpdGxlICsgJy5tcDQiICcgKyBkbHVybDsKICAgICAgICAgICAgYnV0dG9uY3JlYXRlKGRsdXJsLCB0aXRsZSwgdyk7Ki8KICAgICAgICAgICAgaWYgKHZlcnRpY2FsX3Jlc29sdXRpb24gPiBIaWdoZXN0UmVzb2x1dGlvbikgewogICAgICAgICAgICAgICAgSGlnaGVzdFJlc29sdXRpb24gPSB2ZXJ0aWNhbF9yZXNvbHV0aW9uOwogICAgICAgICAgICAgICAgSGlnaGVzdFJlc29sdXRpb25MaW5rID0gZGx1cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICc8cD5CaXRyYXRlOiAnICsgYml0cmF0ZSArICcgLSBSb3pkemllbGN6b8WbxIcgcGlvbm93YTogJyArIHZlcnRpY2FsX3Jlc29sdXRpb24gKyAnPGJyPic7CiAgICAgICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyAiTGluayBkbyBtYXRlcmlhxYJ1OiA8YnV0dG9uIGlkPVwiYnV0dG9uLSIgKyBqICsgIlwiIHR5cGU9XCJidXR0b25cIj5Lb3BpdWo8L2J1dHRvbj48YnI+PGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiIgKyBkbHVybCArICJcIj4iICsgZGx1cmwgKyAiPC9hPjwvcD4iOwogICAgICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgIjxzY3JpcHQ+dmFyIGJ1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b24tIitqKyInKTtidXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe2NvcHlUZXh0KFwiIisgZGx1cmwgKyJcIik7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbi0iK2orIicpLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2xpY2tlZFwiKTt9KTwvc2NyaXB0PiI7CiAgICAgICAgfQogICAgICAgIGlmIChIaWdoZXN0UmVzb2x1dGlvbiA+IDApIHsKICAgICAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArIFN0eWxlVGV4dCArICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPmZ1bmN0aW9uIFNob3dQcm9tcHRXaXRoSW5mbyhsb2wpe2lmICh3aW5kb3cucHJvbXB0KCJBYnkgc2tvcGlvd2HEhyBsaW5rLCB3Y2nFm25pajogQ1RSTCtDLCBwb3RlbTogRU5URVIgYWJ5IHJvenBvY3rEhcSHIHBvYmllcmFuaWUsIGx1YiBFU0MgYWJ5IHpha2/FhGN6ecSHIGR6aWHFgmFuaWUgc2tyeXB0dSIsIGxvbCkpe2RvY3VtZW50LmxvY2F0aW9uLmhyZWY9bG9sO319c2V0VGltZW91dChmdW5jdGlvbiAoKSB7U2hvd1Byb21wdFdpdGhJbmZvKCInICsgSGlnaGVzdFJlc29sdXRpb25MaW5rICsgJyIpO30sIDEwMDApOycgKyBTa3J5cHRLb3BpdWpUZXh0ICsgJzwvc2NyaXB0Pic7CiAgICAgICAgICAgIGFkZEpTX05vZGUobnVsbCwgbnVsbCwgZmlyZU5ld1RhYik7CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggKGUpewogICAgICAgIGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9eaHR0cFtzXT86XC9cL3ZvZFwucGxcLy8pIHx8IGxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwW3NdPzpcL1wvYmFqa2lcLm9uZXRcLnBsXC8vKSkgewogICAgICAgICAgICB2YXIgaSA9IGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MOwogICAgICAgICAgICBtID0gaS5tYXRjaCgvbXZwOihbXGRcLl0rKVx4MjIvKTsKICAgICAgICAgICAgdmFyIHVybCA9ICJodHRwOi8vcWkuY2ttLm9uZXRhcGkucGwvP2JvZHlbaWRdPTIyRDRCM0JDMDE0QTNDMjAwQkNBMTRDREZGM0FDMDE4JmJvZHlbanNvbnJwY109Mi4wJmJvZHlbbWV0aG9kXT1nZXRfYXNzZXRfZGV0YWlsJmJvZHlbcGFyYW1zXVtJRF9QdWJsaWthY2ppXT0iICsgbVsxXSArICImYm9keVtwYXJhbXNdW1NlcnZpY2VdPXZvZC5vbmV0LnBsJmNvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29ucCZ4LW9uZXQtYXBwPXBsYXllci5mcm9udC5vbmV0YXBpLnBsJl89MTQ4NzUzNjk5NjMzMyI7CiAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSB1cmw7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9eaHR0cD86XC9cL3FpXC5ja20uXG9uZXRhcGlcLnBsXC8vKSkgewogICAgICAgICAgICBubiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInByZSIpLnRleHRDb250ZW50OwogICAgICAgICAgICB2ID0gSlNPTi5wYXJzZShubik7CiAgICAgICAgICAgIHZjID0gdi5yZXN1bHRbMF0uZm9ybWF0cy53aWRlby5tcDQ7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAtMSwgY2MgPSBbXSwgZGQgPSBbXSwgbCA9IHZjLmxlbmd0aCA+Pj4gMDsgKytpICE9PSBsOyBudWxsKSB7CiAgICAgICAgICAgICAgICBkZFtpXSA9IGNjW2ldID0gdmNbaV0udmlkZW9fYml0cmF0ZTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZGQuc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYiAtIGE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gZGQubGVuZ3RoOyBqIDwgbGVuOyBqID0gaiArIDEpIHsKICAgICAgICAgICAgICAgIHZhciBkbHVybCA9IHZjW2NjLmluZGV4T2YoZGRbal0pXS51cmw7CiAgICAgICAgICAgICAgICBpZiAoZGx1cmwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gZGx1cmw7CiAgICAgICAgfQogICAgfQp9CgpmdW5jdGlvbiBQb2thekxpbmtPbmV0QXBpKCl7CiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIGZhbHNlKTsKICAgIHhoci5zZW5kKG51bGwpOwogICAgdiA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7CgkJdmMgPSB2LnJlc3VsdFswXS5mb3JtYXRzLndpZGVvWyJtcDQtdWhkIl07CgkJaWYgKCF2YykgewoJCQlhbGVydCgnTmllc3RldHksIGFsZSBtYXRlcmlhxYIgamVzdCB6YWJlenBpZWN6b255IERSTSBpIG5pZSBixJlkemllIG1vxbxuYSBnbyBwb2JyYcSHIDooJyk7CgkJCXJldHVybjsKCQl9OwoJCXRpdGxlID0gdi5yZXN1bHRbMF0ubWV0YS50aXRsZTsKCQlmb3IgKHZhciAgIGkgPSAtMSwgY2MgPSBbXSwgZGQgPSBbXSwgbCA9IHZjLmxlbmd0aCA+Pj4gMDsgKytpICE9PSBsOyBudWxsKSB7CgkJCWRkW2ldID0gY2NbaV0gPSB2Y1tpXS52aWRlb19iaXRyYXRlOwogICAgICAgICAgICBhbGVydChkZFtpXSk7CgkJfTsKCQlkZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CgkJCXJldHVybiAgIGIgLSBhOwoJCX0pOwogICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSAiIjsKICAgIHZhciByYW5kb21UZXh0ID0gbWFrZWlkKCk7CiAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgJzxwPlR5dHXFgjogJyArIHRpdGxlICsgJzwvcD4nOwogICAgdmFyIEhpZ2hlc3RSZXNvbHV0aW9uID0gMDsKICAgIHZhciBIaWdoZXN0UmVzb2x1dGlvbkxpbmsgPSAnJzsKICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBkZC5sZW5ndGg7IGogPCBsZW47IGogPSBqICsgMSkgewogICAgICAgIGRsdXJsID0gdmNbY2MuaW5kZXhPZihkZFtqXSldLnVybDsKICAgICAgICBiaXRyYXRlID0gdmNbY2MuaW5kZXhPZihkZFtqXSldLnZpZGVvX2JpdHJhdGU7CiAgICAgICAgdmVydGljYWxfcmVzb2x1dGlvbiA9IHZjW2NjLmluZGV4T2YoZGRbal0pXS52ZXJ0aWNhbF9yZXNvbHV0aW9uOwogICAgICAgIC8qY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoInByZSIsIHt9LCB7CiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogIkJpdHJhdGU6ICIgKyBiaXRyYXRlICsgIiAtIFJvemR6aWVsY3pvxZvEhyBwaW9ub3dhOiAiICsgdmVydGljYWxfcmVzb2x1dGlvbgogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHcgPSAnd2dldCAtLXJlc3RyaWN0LWZpbGUtbmFtZXM9d2luZG93cyAtLXByb2dyZXNzPWJhciAtLWhlYWRlcj0iVXNlci1BZ2VudDpBQkMiIC1jIC1PICInICsgdGl0bGUgKyAnLm1wNCIgJyArIGRsdXJsOwogICAgICAgICAgICBidXR0b25jcmVhdGUoZGx1cmwsIHRpdGxlLCB3KTsqLwogICAgICAgIGlmICh2ZXJ0aWNhbF9yZXNvbHV0aW9uID4gSGlnaGVzdFJlc29sdXRpb24pIHsKICAgICAgICAgICAgSGlnaGVzdFJlc29sdXRpb24gPSB2ZXJ0aWNhbF9yZXNvbHV0aW9uOwogICAgICAgICAgICBIaWdoZXN0UmVzb2x1dGlvbkxpbmsgPSBkbHVybDsKICAgICAgICB9CiAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICc8cD5CaXRyYXRlOiAnICsgYml0cmF0ZSArICcgLSBSb3pkemllbGN6b8WbxIcgcGlvbm93YTogJyArIHZlcnRpY2FsX3Jlc29sdXRpb24gKyAnPGJyPic7CiAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICJMaW5rIGRvIG1hdGVyaWHFgnU6IDxidXR0b24gaWQ9XCJidXR0b24tIiArIGogKyAiXCIgdHlwZT1cImJ1dHRvblwiPktvcGl1ajwvYnV0dG9uPjxicj48YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiIiArIGRsdXJsICsgIlwiPiIgKyBkbHVybCArICI8L2E+PC9wPiI7CiAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICI8c2NyaXB0PnZhciBidXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uLSIraisiJyk7YnV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtjb3B5VGV4dChcIiIrIGRsdXJsICsiXCIpO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b24tIitqKyInKS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNsaWNrZWRcIik7fSk8L3NjcmlwdD4iOwogICAgfQogICAgaWYgKEhpZ2hlc3RSZXNvbHV0aW9uID4gMCkgewogICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyBTdHlsZVRleHQgKyAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij5mdW5jdGlvbiBTaG93UHJvbXB0V2l0aEluZm8obG9sKXtpZiAod2luZG93LnByb21wdCgiQWJ5IHNrb3Bpb3dhxIcgbGluaywgd2NpxZtuaWo6IENUUkwrQywgcG90ZW06IEVOVEVSIGFieSByb3pwb2N6xIXEhyBwb2JpZXJhbmllLCBsdWIgRVNDIGFieSB6YWtvxYRjennEhyBkemlhxYJhbmllIHNrcnlwdHUiLCBsb2wpKXtkb2N1bWVudC5sb2NhdGlvbi5ocmVmPWxvbDt9fXNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1Nob3dQcm9tcHRXaXRoSW5mbygiJyArIEhpZ2hlc3RSZXNvbHV0aW9uTGluayArICciKTt9LCAxMDAwKTsnICsgU2tyeXB0S29waXVqVGV4dCArICc8L3NjcmlwdD4nOwogICAgICAgIC8vYWRkSlNfTm9kZShudWxsLCBudWxsLCBmaXJlTmV3VGFiKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgIjxicj4iICsgZG9jdW1lbnQuYm9keS5pbm5lckhUTUw7CiAgICB9Cn0KCmZ1bmN0aW9uIFBva2F6TGlua1R2cCgpIHsKICAgIGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9eaHR0cFtzXT86XC9cL3ZvZFwudHZwXC5wbFwvW1xkXXswLDh9LykpIHsKICAgICAgICBpID0gZG9jdW1lbnQuYm9keS5pbm5lckhUTUw7CiAgICAgICAgbSA9IGkubWF0Y2goL29iamVjdF9pZD0oW1xkXXswLDh9KS8pOwogICAgICAgIHZhciB6bmFsZXppb25vdHl0dWwgPSBmYWxzZTsKICAgICAgICBzdCA9ICdOaWV6bmFuZSc7CiAgICAgICAgdHQgPSAnTmllem5hbmUnOwogICAgICAgIGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92aWVXcmFwcGVyJyk7CiAgICAgICAgaWYgKGkgIT09IG51bGwpIHsKICAgICAgICAgICAgaSA9IGkucXVlcnlTZWxlY3RvcignaWZyYW1lJykuY29udGVudFdpbmRvdy5kb2N1bWVudC5oZWFkLmlubmVySFRNTDsKICAgICAgICAgICAgaWYgKGkgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHN0ID0gaS5tYXRjaCgvXHtuYW1lOiBceDIyU2VyaWVzVGl0bGVceDIyXCwgdmFsdWU6IFx4MjIoLiopXHgyMlx9LC8pIFsxXTsKICAgICAgICAgICAgICAgIHR0ID0gaS5tYXRjaCgvXHtuYW1lOiBceDIyVGl0bGVceDIyXCwgdmFsdWU6IFx4MjIoLiopXHgyMlx9LC8pIFsxXTsKICAgICAgICAgICAgICAgIHpuYWxlemlvbm90eXR1bCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGl0bGUgPSBzdCArICcgLSAnICsgdHQ7CiAgICAgICAgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHhtbGh0dHAub3BlbignR0VUJywgJ2h0dHBzOi8vd3d3LnR2cC5wbC9zaGFyZWQvY2RuL3Rva2VuaXplcl92Mi5waHA/b2JqZWN0X2lkPScgKyBtWzFdLCBmYWxzZSk7CiAgICAgICAgeG1saHR0cC5zZW5kKCk7CiAgICAgICAgbyA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgIHYgPSBvLmZvcm1hdHM7CiAgICAgICAgdmMgPSBbXTsKICAgICAgICBpZih2ICE9IG51bGwpewogICAgICAgICAgICBmb3IgKHZhciBpID0gLSAxLCB2YyA9IFsKICAgICAgICAgICAgXSwgbCA9IHYubGVuZ3RoID4+PiAwOyArK2kgIT09IGw7IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmICh2W2ldLmFkYXB0aXZlID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmMucHVzaCh2W2ldKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmICh2Yy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBhbGVydCgnTmllc3RldHksIGFsZSBtYXRlcmlhxYIgamVzdCB6YWJlenBpZWN6b255IERSTSBpIG5pZSBixJlkemllIG1vxbxuYSBnbyBwb2JyYcSHIDooJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9OwogICAgICAgIGZvciAodmFyIGkgPSAtIDEsIGNjID0gWwogICAgICAgIF0sIGRkID0gWwogICAgICAgIF0sIGwgPSB2Yy5sZW5ndGggPj4+IDA7ICsraSAhPT0gbDsgbnVsbCkgewogICAgICAgICAgICBkZFtpXSA9IGNjW2ldID0gdmNbaV0udG90YWxCaXRyYXRlOwogICAgICAgIH07CiAgICAgICAgZGQuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gYiAtIGE7CiAgICAgICAgfSk7CiAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSAnJzsKICAgICAgICBpZiAoem5hbGV6aW9ub3R5dHVsKSB7CiAgICAgICAgICAgIERvY3VtZW50V3JpdGVGaXJlZm94Rml4ID0gRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggKyAnPHA+VHl0dcWCOiAnICsgdGl0bGUgKyAnPC9wPic7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBkZC5sZW5ndGg7IGogPCBsZW47IGogPSBqICsgMSkgewogICAgICAgICAgICBkbHVybCA9IHZjW2NjLmluZGV4T2YoZGRbal0pXS51cmw7CiAgICAgICAgICAgIGJpdHJhdGUgPSB2Y1tjYy5pbmRleE9mKGRkW2pdKV0udG90YWxCaXRyYXRlOwogICAgICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgJzxwPkJpdHJhdGU6ICcgKyBiaXRyYXRlICsgJzxicj4nOwogICAgICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgIkxpbmsgZG8gbWF0ZXJpYcWCdTogPGJ1dHRvbiBpZD1cImJ1dHRvbi0iICsgaiArICJcIiB0eXBlPVwiYnV0dG9uXCI+S29waXVqPC9idXR0b24+PGJyPjxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIiICsgZGx1cmwgKyAiXCI+IiArIGRsdXJsICsgIjwvYT48L3A+IjsKICAgICAgICAgICAgRG9jdW1lbnRXcml0ZUZpcmVmb3hGaXggPSBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCArICI8c2NyaXB0PnZhciBidXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uLSIraisiJyk7YnV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtjb3B5VGV4dChcIiIrIGRsdXJsICsiXCIpO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b24tIitqKyInKS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNsaWNrZWRcIik7fSk8L3NjcmlwdD4iOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gZGQubGVuZ3RoOyBqIDwgbGVuOyBqID0gaiArIDEpIHsKICAgICAgICAgICAgZGx1cmxiZXN0ID0gdmNbY2MuaW5kZXhPZihkZFtqXSldLnVybDsKICAgICAgICAgICAgaWYgKGRsdXJsYmVzdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBEb2N1bWVudFdyaXRlRmlyZWZveEZpeCA9IERvY3VtZW50V3JpdGVGaXJlZm94Rml4ICsgU3R5bGVUZXh0ICsgJzxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+ZnVuY3Rpb24gU2hvd1Byb21wdFdpdGhJbmZvKGxvbCl7aWYgKHdpbmRvdy5wcm9tcHQoIkFieSBza29waW93YcSHIGxpbmssIHdjacWbbmlqOiBDVFJMK0MsIHBvdGVtOiBFTlRFUiBhYnkgcm96cG9jesSFxIcgcG9iaWVyYW5pZSwgbHViIEVTQyBhYnkgemFrb8WEY3p5xIcgZHppYcWCYW5pZSBza3J5cHR1IiwgbG9sKSl7ZG9jdW1lbnQubG9jYXRpb24uaHJlZj1sb2w7fX1zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtTaG93UHJvbXB0V2l0aEluZm8oIicgKyBkbHVybGJlc3QgKyAnIik7fSwgMTAwMCk7JyArIFNrcnlwdEtvcGl1alRleHQgKyAnPC9zY3JpcHQ+JzsKICAgICAgICBhZGRKU19Ob2RlKG51bGwsIG51bGwsIGZpcmVOZXdUYWIpOwogICAgfQoKfQoKZnVuY3Rpb24gUG9rYXpMaW5rQ2RhKCkgewogICAgaWYgKHR5cGVvZiBsID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHZhciBrb2x1bW55X2xpc3QyID0gJ3BiLXZpZGVvLXBsYXllcic7CiAgICAgICAgdmFyIGxpc3RfY3phdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoa29sdW1ueV9saXN0Mik7CiAgICAgICAgaWYgKGxpc3RfY3phdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0X2N6YXQubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB2dmlpZGVvbyA9IGxpc3RfY3phdFtpXS5zcmM7CiAgICAgICAgICAgICAgICBTaG93UHJvbXB0V2l0aEluZm8odnZpaWRlb28pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBTaG93UHJvbXB0V2l0aEluZm8obCk7CiAgICB9Cn0KCmZ1bmN0aW9uIFNrcnlwdERvUG9iaWVyYW5pYVN0YXJ0KCkgewogICAgaWYgKFdsYWN6X3NrcnlwdCkgewogICAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICBpZiAobG9jYXRpb24uaHJlZi5tYXRjaCgvXmh0dHBbc10/OlwvXC93d3dcLmlwbGFcLnR2XC8vKSkgewogICAgICAgICAgICB2YXIgYnRuSXBsYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgIGJ0bklwbGEuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdQb2JpZXJ6IHZpZGVvJyk7CiAgICAgICAgICAgIGJ0bklwbGEuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOwogICAgICAgICAgICBidG5JcGxhLnNldEF0dHJpYnV0ZSgnaWQnLCAnYnRuSXBsYScpOwogICAgICAgICAgICBidG5JcGxhLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAncG9zaXRpb246Zml4ZWQgIWltcG9ydGFudDsgbGVmdDogMHB4OyB0b3A6IDRweDsgd2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM1cHg7IGJhY2tncm91bmQtY29sb3I6ICMwMGE2ZmY7IGNvbG9yOiB3aGl0ZTsgei1pbmRleDogMTAwMDAwMDAwMDsnKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKSBbMF0uYXBwZW5kQ2hpbGQoYnRuSXBsYSk7CiAgICAgICAgICAgIGFkZEV2ZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5JcGxhJyksICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIFBva2F6TGlua0lwbGEoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHVybC5pbmRleE9mKCdnZXRtZWRpYS5yZWRlZmluZS5wbCcpID4gLSAxKSB7CiAgICAgICAgICAgIFBva2F6TGlua1BvYmllcmFuaWVJcGxhKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwW3NdPzpcL1wvKD86d3szfVwuKT8oPzp0dm4pP3BsYXllclwucGxcLy8pKSB7CiAgICAgICAgICAgIHZhciBidG5UVk5Ob3d5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgYnRuVFZOTm93eS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ1BvYmllcnogdmlkZW8nKTsKICAgICAgICAgICAgYnRuVFZOTm93eS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7CiAgICAgICAgICAgIGJ0blRWTk5vd3kuc2V0QXR0cmlidXRlKCdpZCcsICdidG5UVk5Ob3d5Jyk7CiAgICAgICAgICAgIGJ0blRWTk5vd3kuc2V0QXR0cmlidXRlKCdzdHlsZScsICdwb3NpdGlvbjpmaXhlZCAhaW1wb3J0YW50OyBsZWZ0OiAwcHg7IHRvcDogMXB4OyB3aWR0aDogMTE1cHg7IGhlaWdodDogMzBweDsgYmFja2dyb3VuZC1jb2xvcjogIzAwYTZmZjsgY29sb3I6IHdoaXRlOyB6LWluZGV4OiAxMDAwMDAwMDAwOycpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpIFswXS5hcHBlbmRDaGlsZChidG5UVk5Ob3d5KTsKICAgICAgICAgICAgYWRkRXZlbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blRWTk5vd3knKSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgUG9rYXpMaW5rVFZOTm93eSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobG9jYXRpb24uaHJlZi5tYXRjaCgvXmh0dHBbc10/OlwvXC92b2RcLnBsXC8vKSkgewogICAgICAgICAgICB2YXIgYnRuT25ldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgIGJ0bk9uZXQuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdQb2JpZXJ6IHZpZGVvJyk7CiAgICAgICAgICAgIGJ0bk9uZXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOwogICAgICAgICAgICBidG5PbmV0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYnRuT25ldCcpOwogICAgICAgICAgICBidG5PbmV0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAncG9zaXRpb246Zml4ZWQgIWltcG9ydGFudDsgbGVmdDogMHB4OyB0b3A6IDJweDsgd2lkdGg6IDExMHB4OyBoZWlnaHQ6IDI1cHg7IGJhY2tncm91bmQtY29sb3I6ICMyZmQ2ZmY7IHotaW5kZXg6IDEwMDAwMDAwMDA7Jyk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JykgWzBdLmFwcGVuZENoaWxkKGJ0bk9uZXQpOwogICAgICAgICAgICBhZGRFdmVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuT25ldCcpLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBQb2thekxpbmtPbmV0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9eaHR0cFtzXT86XC9cL3FpXC5ja21cLm9uZXRhcGlcLnBsXC8vKSkgewogICAgICAgICAgICBQb2thekxpbmtPbmV0QXBpKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwW3NdPzpcL1wvdm9kXC50dnBcLnBsXC9bXGRdezAsOH0vKSkgewogICAgICAgICAgICBpID0gZG9jdW1lbnQuYm9keS5pbm5lckhUTUw7CiAgICAgICAgICAgIG0gPSBpLm1hdGNoKC9vYmplY3RfaWQ9KFtcZF17MCw4fSkvKTsKICAgICAgICAgICAgaWYgKG0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigndm9kLnR2cC5wbC92b2Qvc2xpZGVyJykgPT0gLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCd0dnAucGwvc2Vzcy90dnBsYXllci5waHA/JykgPT0gLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidG5UdnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICAgICAgICAgICAgICBidG5UdnAuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdQb2JpZXJ6IHZpZGVvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blR2cC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blR2cC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2J0blR2cCcpOwogICAgICAgICAgICAgICAgICAgICAgICBidG5UdnAuc2V0QXR0cmlidXRlKCdzdHlsZScsICdwb3NpdGlvbjpmaXhlZCAhaW1wb3J0YW50OyBsZWZ0OiAwcHg7IHRvcDogMTBweDsgd2lkdGg6IDEwMHB4OyBoZWlnaHQ6IDM1cHg7ICB6LWluZGV4OiAxMDAwMDAwMDAwOycpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpIFswXS5hcHBlbmRDaGlsZChidG5UdnApOwogICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuVHZwJyksICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBva2F6TGlua1R2cCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodXJsLmluZGV4T2YoJ3d3dy5jZGEucGwnKSA+IC0gMSkgewogICAgICAgICAgICB2YXIgYnRuQ2RhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgYnRuQ2RhLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnUG9iaWVyeiB2aWRlbycpOwogICAgICAgICAgICBidG5DZGEuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOwogICAgICAgICAgICBidG5DZGEuc2V0QXR0cmlidXRlKCdpZCcsICdidG5DZGEnKTsKICAgICAgICAgICAgYnRuQ2RhLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAncG9zaXRpb246Zml4ZWQgIWltcG9ydGFudDsgbGVmdDogMHB4OyB0b3A6IDJweDsgd2lkdGg6IDk1cHg7IGhlaWdodDogMzBweDsgIHotaW5kZXg6IDEwMDAwMDAwMDA7Jyk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JykgWzBdLmFwcGVuZENoaWxkKGJ0bkNkYSk7CiAgICAgICAgICAgIGFkZEV2ZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5DZGEnKSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgUG9rYXpMaW5rQ2RhKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KfQppZih3aW5kb3cualF1ZXJ5KXsKICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgewogICAgICAgIFNrcnlwdERvUG9iaWVyYW5pYVN0YXJ0KCk7CiAgICB9KTsKfQplbHNlewogICAgd2luZG93Lm9ubG9hZCA9IFNrcnlwdERvUG9iaWVyYW5pYVN0YXJ0KCk7Cn0KLypkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICBTa3J5cHREb1BvYmllcmFuaWFTdGFydCgpOwp9KTsqLwo="},{"name":"AdsBypasser","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http://*","https://*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":["*"]}},"storage":{"ts":1567958522182,"data":{"version":"n4","external_server_support":"bfalse","log_level":"n1","change_background":"btrue","scale_image":"btrue","align_center":"btrue","redirect_image":"btrue"}},"enabled":true,"position":2,"file_url":"https://adsbypasser.github.io/releases/adsbypasser.full.es7.user.js","uuid":"56dab02d-26b1-4a20-9fe7-dbb939495f19","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIEFkc0J5cGFzc2VyCi8vIEBuYW1lc3BhY2UgICAgICBBZHNCeXBhc3NlcgovLyBAZGVzY3JpcHRpb24gICAgQnlwYXNzIEFkcwovLyBAY29weXJpZ2h0ICAgICAgMjAxMissIFdlaS1DaGVuZyBQYW4gKGxlZ25hbGV1cmMpCi8vIEB2ZXJzaW9uICAgICAgICA3LjcuMAovLyBAbGljZW5zZSAgICAgICAgQlNECi8vIEBob21lcGFnZVVSTCAgICBodHRwczovL2Fkc2J5cGFzc2VyLmdpdGh1Yi5pby8KLy8gQHN1cHBvcnRVUkwgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hZHNieXBhc3Nlci9hZHNieXBhc3Nlci9pc3N1ZXMKLy8gQHVwZGF0ZVVSTCAgICAgIGh0dHBzOi8vYWRzYnlwYXNzZXIuZ2l0aHViLmlvL3JlbGVhc2VzL2Fkc2J5cGFzc2VyLmZ1bGwuZXM3Lm1ldGEuanMKLy8gQGRvd25sb2FkVVJMICAgIGh0dHBzOi8vYWRzYnlwYXNzZXIuZ2l0aHViLmlvL3JlbGVhc2VzL2Fkc2J5cGFzc2VyLmZ1bGwuZXM3LnVzZXIuanMKLy8gQGljb24gICAgICAgICAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hZHNieXBhc3Nlci9hZHNieXBhc3Nlci92Ny43LjAvcmVzb3VyY2VzL2ltZy9sb2dvLnBuZwovLyBAZ3JhbnQgICAgICAgICAgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNX2dldFJlc291cmNlVVJMCi8vIEBncmFudCAgICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgR01fb3BlbkluVGFiCi8vIEBncmFudCAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICAgIEdNLmRlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICAgICBHTS5nZXRSZXNvdXJjZVVybAovLyBAZ3JhbnQgICAgICAgICAgR00uZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNLm9wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNLnhtbEh0dHBSZXF1ZXN0Ci8vIEBncmFudCAgICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQHJlc291cmNlICAgICAgIGFsaWduQ2VudGVyIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hZHNieXBhc3Nlci9hZHNieXBhc3Nlci92Ny43LjAvcmVzb3VyY2VzL2Nzcy9hbGlnbl9jZW50ZXIuY3NzCi8vIEByZXNvdXJjZSAgICAgICBzY2FsZUltYWdlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hZHNieXBhc3Nlci9hZHNieXBhc3Nlci92Ny43LjAvcmVzb3VyY2VzL2Nzcy9zY2FsZV9pbWFnZS5jc3MKLy8gQHJlc291cmNlICAgICAgIGJnSW1hZ2UgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Fkc2J5cGFzc2VyL2Fkc2J5cGFzc2VyL3Y3LjcuMC9yZXNvdXJjZXMvaW1nL2ltYWdlZG9jLWRhcmtub2lzZS5wbmcKLy8gQHJ1bi1hdCAgICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBpbmNsdWRlICAgICAgICBodHRwOi8vKgovLyBAaW5jbHVkZSAgICAgICAgaHR0cHM6Ly8qCi8vIEBjb25uZWN0ICAgICAgICAqCi8vID09L1VzZXJTY3JpcHQ9PQoKIChmdW5jdGlvbihtb2R1bGVzKSB7IAogCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307CiAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewogCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkgewogCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CiAJCX0KIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewogCQkJaTogbW9kdWxlSWQsCiAJCQlsOiBmYWxzZSwKIAkJCWV4cG9ydHM6IHt9CiAJCX07CiAJCW1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOwogCQltb2R1bGUubCA9IHRydWU7CiAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKIAl9CiAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwogCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewogCQlpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7CiAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTsKIAkJfQogCX07CiAJX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykgewogCQlpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHsKIAkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pOwogCQl9CiAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7CiAJfTsKIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkgewogCQlpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTsKIAkJaWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTsKIAkJaWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTsKIAkJdmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTsKIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pOwogCQlpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7CiAJCXJldHVybiBuczsKIAl9OwogCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgewogCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6CiAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9OwogCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7CiAJCXJldHVybiBnZXR0ZXI7CiAJfTsKIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07CiAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIiI7CiAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7CiB9KQogKFsKIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7CiB2YXIgdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwogdmFyIHV0aWxfZGlzcGF0Y2hlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKIHZhciB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwogdmFyIHV0aWxfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwogdmFyIHV0aWxfbG9nZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwogdmFyIF9BRFNCWVBBU1NFUl9IQU5ETEVSU19fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CmNvbnN0IGlzU2FmYXJpID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdy5IVE1MRWxlbWVudCkuaW5kZXhPZignQ29uc3RydWN0b3InKSA+IDA7CmZ1bmN0aW9uIGRpc2FibGVXaW5kb3dPcGVuICgpIHsKICB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInVzdyJdLm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBjbG9zZWQ6IGZhbHNlLAogICAgfTsKICB9OwogIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sidXN3Il0uYWxlcnQgPSB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9wIl07CiAgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ1c3ciXS5jb25maXJtID0gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vcCJdOwp9CmZ1bmN0aW9uIGRpc2FibGVMZWF2ZVByb21wdCAoZWxlbWVudCkgewogIGlmICghZWxlbWVudCkgewogICAgcmV0dXJuOwogIH0KICBjb25zdCBzZWFsID0gewogICAgc2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJpbmZvIl0pKCdibG9ja2VkIG9uYmVmb3JldW5sb2FkJyk7CiAgICB9LAogIH07CiAgZWxlbWVudC5vbmJlZm9yZXVubG9hZCA9IHVuZGVmaW5lZDsKICBpZiAoaXNTYWZhcmkpIHsKICAgIGVsZW1lbnQuX19kZWZpbmVTZXR0ZXJfXygnb25iZWZvcmV1bmxvYWQnLCBzZWFsLnNldCk7CiAgfSBlbHNlIHsKICAgIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sidXN3Il0uT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdvbmJlZm9yZXVubG9hZCcsIHsKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgZ2V0OiB1bmRlZmluZWQsCiAgICAgIHNldDogc2VhbC5zZXQsCiAgICB9KTsKICB9CiAgY29uc3Qgb2FlbCA9IGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcjsKICBjb25zdCBuYWVsID0gZnVuY3Rpb24gKHR5cGUpIHsKICAgIGlmICh0eXBlID09PSAnYmVmb3JldW5sb2FkJykgewogICAgICBPYmplY3QodXRpbF9sb2dnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siaW5mbyJdKSgnYmxvY2tlZCBhZGRFdmVudExpc3RlbmVyIG9uYmVmb3JldW5sb2FkJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBvYWVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgPSBuYWVsOwp9CmZ1bmN0aW9uIGNoYW5nZVRpdGxlICgpIHsKICBkb2N1bWVudC50aXRsZSArPSAnIC0gQWRzQnlwYXNzZXInOwp9CmFzeW5jIGZ1bmN0aW9uIGJlZm9yZURPTVJlYWR5IChoYW5kbGVyKSB7CiAgY29uc3QgY29uZmlnID0gYXdhaXQgT2JqZWN0KHV0aWxfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImR1bXBDb25maWciXSkoKTsKICBPYmplY3QodXRpbF9sb2dnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siaW5mbyJdKSgnd29ya2luZyBvblxuJXMgXG53aXRoXG4lcycsIHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpLCBKU09OLnN0cmluZ2lmeShjb25maWcpKTsKICBkaXNhYmxlTGVhdmVQcm9tcHQodXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ1c3ciXSk7CiAgZGlzYWJsZVdpbmRvd09wZW4oKTsKICBhd2FpdCBoYW5kbGVyLnN0YXJ0KCk7Cn0KYXN5bmMgZnVuY3Rpb24gYWZ0ZXJET01SZWFkeSAoaGFuZGxlcikgewogIGRpc2FibGVMZWF2ZVByb21wdCh1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInVzdyJdLmRvY3VtZW50LmJvZHkpOwogIGNoYW5nZVRpdGxlKCk7CiAgYXdhaXQgaGFuZGxlci5yZWFkeSgpOwp9CmZ1bmN0aW9uIHdhaXRET00gKCkgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdsb2FkaW5nJykgewogICAgICByZXNvbHZlKCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0pOwp9CmFzeW5jIGZ1bmN0aW9uIG1haW4gKCkgewogIGlmICh1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInJhd1VTVyJdLnRvcCAhPT0gdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJyYXdVU1ciXS5zZWxmKSB7CiAgICByZXR1cm47CiAgfQogIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5yZWdpc3Rlck1lbnVDb21tYW5kKCdBZHNCeXBhc3NlciAtIENvbmZpZ3VyZScsICgpID0+IHsKICAgIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5vcGVuSW5UYWIoJ2h0dHBzOi8vYWRzYnlwYXNzZXIuZ2l0aHViLmlvL2NvbmZpZ3VyZS5odG1sJyk7CiAgfSk7CiAgYXdhaXQgT2JqZWN0KHV0aWxfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImxvYWRDb25maWciXSkoKTsKICBjb25zdCBoYW5kbGVyID0gT2JqZWN0KHV0aWxfZGlzcGF0Y2hlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJmaW5kSGFuZGxlciJdKSgpOwogIGlmIChoYW5kbGVyKSB7CiAgICBhd2FpdCBiZWZvcmVET01SZWFkeShoYW5kbGVyKTsKICAgIGF3YWl0IHdhaXRET00oKTsKICAgIGF3YWl0IGFmdGVyRE9NUmVhZHkoaGFuZGxlcik7CiAgICByZXR1cm47CiAgfQp9Cm1haW4oKS5jYXRjaCgoZSkgPT4gewogIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJ3YXJuIl0pKGUpOwp9KTsKIH0pLAogKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQWRzQnlwYXNzZXJFcnJvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQWRzQnlwYXNzZXJFcnJvcjsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImV2ZXJ5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBldmVyeTsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpbmQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZpbmQ7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmb3JFYWNoIiwgZnVuY3Rpb24oKSB7IHJldHVybiBmb3JFYWNoOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaXNTdHJpbmciLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzU3RyaW5nOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBtYXA7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJub25lIiwgZnVuY3Rpb24oKSB7IHJldHVybiBub25lOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibm9wIiwgZnVuY3Rpb24oKSB7IHJldHVybiBub3A7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwYXJ0aWFsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwYXJ0aWFsOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidHJ5RXZlcnkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRyeUV2ZXJ5OyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2FpdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gd2FpdDsgfSk7CmNsYXNzIEFkc0J5cGFzc2VyRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgY29uc3RydWN0b3IgKG1lc3NhZ2UpIHsKICAgIHN1cGVyKG1lc3NhZ2UpOwogIH0KICBnZXQgbmFtZSAoKSB7CiAgICByZXR1cm4gJ0Fkc0J5cGFzc2VyRXJyb3InOwogIH0KfQpmdW5jdGlvbiBmb3JFYWNoIChjb2xsZWN0aW9uLCBmbikgewogIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29sbGVjdGlvbiwgZm4pOwogIH0KICByZXR1cm4gT2JqZWN0LmtleXMoY29sbGVjdGlvbikuZm9yRWFjaCgoaykgPT4gewogICAgcmV0dXJuIGZuKGNvbGxlY3Rpb25ba10sIGssIGNvbGxlY3Rpb24pOwogIH0pOwp9CmZ1bmN0aW9uIGV2ZXJ5IChjb2xsZWN0aW9uLCBmbikgewogIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5ldmVyeS5jYWxsKGNvbGxlY3Rpb24sIGZuKTsKICB9CiAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbGxlY3Rpb24pLmV2ZXJ5KChrKSA9PiB7CiAgICByZXR1cm4gZm4oY29sbGVjdGlvbltrXSwgaywgY29sbGVjdGlvbik7CiAgfSk7Cn0KZnVuY3Rpb24gbWFwIChjb2xsZWN0aW9uLCBmbikgewogIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChjb2xsZWN0aW9uLCBmbik7CiAgfQogIGNvbnN0IG1hcHBlZCA9IE9iamVjdC5hc3NpZ24oe30sIGNvbGxlY3Rpb24pOwogIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG1hcHBlZCkuZm9yRWFjaCgoaykgPT4gewogICAgbWFwcGVkW2tdID0gZm4oY29sbGVjdGlvbltrXSwgaywgY29sbGVjdGlvbik7CiAgfSk7CiAgcmV0dXJuIG1hcHBlZDsKfQpmdW5jdGlvbiBmaW5kIChjb2xsZWN0aW9uLCBmbikgewogIGZvciAoY29uc3QgW2ssIHZdIG9mIGVudW1lcmF0ZShjb2xsZWN0aW9uKSkgewogICAgY29uc3QgciA9IGZuKHYsIGssIGNvbGxlY3Rpb24pOwogICAgaWYgKHIgIT09IG5vbmUpIHsKICAgICAgcmV0dXJuIFtrLCB2LCByXTsKICAgIH0KICB9CiAgcmV0dXJuIFtub25lLCBub25lLCBub25lXTsKfQpmdW5jdGlvbiAqIGVudW1lcmF0ZSAoY29sbGVjdGlvbikgewogIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkgewogICAgeWllbGQgKiBBcnJheS5wcm90b3R5cGUuZW50cmllcy5jYWxsKGNvbGxlY3Rpb24pOwogICAgcmV0dXJuOwogIH0KICBjb25zdCBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY29sbGVjdGlvbik7CiAgZm9yIChjb25zdCBrIG9mIGtleXMpIHsKICAgIHlpZWxkIFtrLCBjb2xsZWN0aW9uW2tdXTsKICB9Cn0KZnVuY3Rpb24gaXNBcnJheUxpa2UgKGNvbGxlY3Rpb24pIHsKICByZXR1cm4gQXJyYXkuaXNBcnJheShjb2xsZWN0aW9uKSB8fCBpc05vZGVMaXN0KGNvbGxlY3Rpb24pOwp9CmZ1bmN0aW9uIGlzTm9kZUxpc3QgKGNvbGxlY3Rpb24pIHsKICByZXR1cm4gY29sbGVjdGlvbi5jb25zdHJ1Y3Rvci5uYW1lID09PSAnTm9kZUxpc3QnOwp9CmZ1bmN0aW9uIHBhcnRpYWwgKGZuLCAuLi5hcmdzKSB7CiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgdGhyb3cgbmV3IEFkc0J5cGFzc2VyRXJyb3IoJ211c3QgZ2l2ZSBhIGZ1bmN0aW9uJyk7CiAgfQogIHJldHVybiAoLi4uaW5uZXJBcmdzKSA9PiB7CiAgICByZXR1cm4gZm4oLi4uYXJncy5jb25jYXQoaW5uZXJBcmdzKSk7CiAgfTsKfQpmdW5jdGlvbiBpc1N0cmluZyAodmFsdWUpIHsKICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHx8ICh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZyk7Cn0KZnVuY3Rpb24gbm9wICgpIHsKfQpjb25zdCBub25lID0gbm9wOwpmdW5jdGlvbiB3YWl0IChtc0RlbGF5KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zRGVsYXkpOwogIH0pOwp9CmZ1bmN0aW9uIHRyeUV2ZXJ5IChtc0ludGVydmFsLCBmbikgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgY29uc3QgaGFuZGxlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICBjb25zdCByZXN1bHQgPSBmbigpOwogICAgICBpZiAocmVzdWx0ICE9PSBub25lKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChoYW5kbGUpOwogICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgfQogICAgfSwgbXNJbnRlcnZhbCk7CiAgfSk7Cn0KIH0pLAogKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmVnaXN0ZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlZ2lzdGVyOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmluZEhhbmRsZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZpbmRIYW5kbGVyOyB9KTsKIHZhciB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CmNvbnN0IHBhdHRlcm5zID0gW107CmZ1bmN0aW9uIHJlZ2lzdGVyIChwYXR0ZXJuKSB7CiAgcGF0dGVybnMucHVzaChwYXR0ZXJuKTsKfQpmdW5jdGlvbiBkaXNwYXRjaEJ5T2JqZWN0IChydWxlLCB1cmxfNikgewogIGNvbnN0IG1hdGNoZWQgPSBPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm1hcCJdKShydWxlLCAocGF0dGVybiwgcGFydCkgPT4gewogICAgaWYgKHBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgcmV0dXJuIHVybF82W3BhcnRdLm1hdGNoKHBhdHRlcm4pOwogICAgfQogICAgaWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHsKICAgICAgY29uc3QgWywgLCByXSA9IE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZmluZCJdKShwYXR0ZXJuLCAoc3ApID0+IHsKICAgICAgICBjb25zdCBtID0gdXJsXzZbcGFydF0ubWF0Y2goc3ApOwogICAgICAgIHJldHVybiBtIHx8IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJub25lIl07CiAgICAgIH0pOwogICAgICByZXR1cm4gciAhPT0gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXSA/IHIgOiBudWxsOwogICAgfQogICAgdGhyb3cgbmV3IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJBZHNCeXBhc3NlckVycm9yIl0oJ2ludmFsaWQgcnVsZScpOwogIH0pOwogIGNvbnN0IHBhc3NlZCA9IE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZXZlcnkiXSkobWF0Y2hlZCwgKHYpID0+IHsKICAgIHJldHVybiAhIXY7CiAgfSk7CiAgcmV0dXJuIHBhc3NlZCA/IG1hdGNoZWQgOiBudWxsOwp9CmZ1bmN0aW9uIGRpc3BhdGNoQnlSZWdFeHAgKHJ1bGUsIHVybF8xKSB7CiAgcmV0dXJuIHVybF8xLm1hdGNoKHJ1bGUpOwp9CmZ1bmN0aW9uIGRpc3BhdGNoQnlBcnJheSAocnVsZXMsIHVybF8xLCB1cmxfMywgdXJsXzYpIHsKICBjb25zdCBbLCAsIHJdID0gT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJmaW5kIl0pKHJ1bGVzLCAocnVsZSkgPT4gewogICAgY29uc3QgbSA9IGRpc3BhdGNoKHJ1bGUsIHVybF8xLCB1cmxfMywgdXJsXzYpOwogICAgcmV0dXJuIG0gPyBtIDogdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXTsKICB9KTsKICByZXR1cm4gciAhPT0gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXSA/IHIgOiBudWxsOwp9CmZ1bmN0aW9uIGRpc3BhdGNoQnlTdHJpbmcgKHJ1bGUsIHVybF8zKSB7CiAgbGV0IHNjaGVtZSA9IC9cKnxodHRwcz98ZmlsZXxmdHB8Y2hyb21lLWV4dGVuc2lvbi87CiAgbGV0IGhvc3QgPSAvXCp8KFwqXC4pPyhbXi8qXSspLzsKICBsZXQgcGF0aCA9IC9cLy4qLzsKICBsZXQgdG1wID0gYF4oJHtzY2hlbWUuc291cmNlfSk6Ly8oJHtob3N0LnNvdXJjZX0pPygke3BhdGguc291cmNlfSkkYDsKICBsZXQgdXAgPSBuZXcgUmVnRXhwKHRtcCk7CiAgY29uc3QgbWF0Y2hlZCA9IHJ1bGUubWF0Y2godXApOwogIGlmICghbWF0Y2hlZCkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIHNjaGVtZSA9IG1hdGNoZWRbMV07CiAgaG9zdCA9IG1hdGNoZWRbMl07CiAgY29uc3Qgd2MgPSBtYXRjaGVkWzNdOwogIGNvbnN0IHNkID0gbWF0Y2hlZFs0XTsKICBwYXRoID0gbWF0Y2hlZFs1XTsKICBpZiAoc2NoZW1lID09PSAnKicgJiYgIS9odHRwcz8vLnRlc3QodXJsXzMuc2NoZW1lKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGlmIChzY2hlbWUgIT09IHVybF8zLnNjaGVtZSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGlmIChzY2hlbWUgIT09ICdmaWxlJyAmJiBob3N0ICE9PSAnKicpIHsKICAgIGlmICh3YykgewogICAgICB1cCA9IHVybF8zLmhvc3QuaW5kZXhPZihzZCk7CiAgICAgIGlmICh1cCA8IDAgfHwgdXAgKyBzZC5sZW5ndGggIT09IHVybF8zLmhvc3QubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaG9zdCAhPT0gdXJsXzMuaG9zdCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CiAgdG1wID0gcGF0aC5yZXBsYWNlKC9bKi5bXF0/KyNdL2csIChjKSA9PiB7CiAgICBpZiAoYyA9PT0gJyonKSB7CiAgICAgIHJldHVybiAnLionOwogICAgfQogICAgcmV0dXJuICdcXCcgKyBjOwogIH0pOwogIHBhdGggPSBuZXcgUmVnRXhwKGBeJHt0bXB9JGApOwogIGlmICghcGF0aC50ZXN0KHVybF8zLnBhdGgpKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIHVybF8zOwp9CmZ1bmN0aW9uIGRpc3BhdGNoQnlGdW5jdGlvbiAocnVsZSwgdXJsXzEsIHVybF8zLCB1cmxfNikgewogIHJldHVybiBydWxlKHVybF8xLCB1cmxfMywgdXJsXzYpOwp9CmZ1bmN0aW9uIGRpc3BhdGNoIChydWxlLCB1cmxfMSwgdXJsXzMsIHVybF82KSB7CiAgaWYgKEFycmF5LmlzQXJyYXkocnVsZSkpIHsKICAgIHJldHVybiBkaXNwYXRjaEJ5QXJyYXkocnVsZSwgdXJsXzEsIHVybF8zLCB1cmxfNik7CiAgfQogIGlmICh0eXBlb2YgcnVsZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIGRpc3BhdGNoQnlGdW5jdGlvbihydWxlLCB1cmxfMSwgdXJsXzMsIHVybF82KTsKICB9CiAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIHJldHVybiBkaXNwYXRjaEJ5UmVnRXhwKHJ1bGUsIHVybF8xKTsKICB9CiAgaWYgKE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXNTdHJpbmciXSkocnVsZSkpIHsKICAgIHJldHVybiBkaXNwYXRjaEJ5U3RyaW5nKHJ1bGUsIHVybF8zKTsKICB9CiAgcmV0dXJuIGRpc3BhdGNoQnlPYmplY3QocnVsZSwgdXJsXzYpOwp9CmZ1bmN0aW9uIGZpbmRIYW5kbGVyICgpIHsKICBjb25zdCB1cmxfMSA9IHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpOwogIGNvbnN0IHVybF8zID0gewogICAgc2NoZW1lOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wuc2xpY2UoMCwgLTEpLAogICAgaG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3QsCiAgICBwYXRoOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2gsCiAgfTsKICBjb25zdCB1cmxfNiA9IHsKICAgIHNjaGVtZTogd2luZG93LmxvY2F0aW9uLnByb3RvY29sLAogICAgaG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLAogICAgcG9ydDogd2luZG93LmxvY2F0aW9uLnBvcnQsCiAgICBwYXRoOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsCiAgICBxdWVyeTogd2luZG93LmxvY2F0aW9uLnNlYXJjaCwKICAgIGhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLAogIH07CiAgY29uc3QgW2ksIHBhdHRlcm4sIG1hdGNoZWRdID0gT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJmaW5kIl0pKHBhdHRlcm5zLCAocGF0dGVybikgPT4gewogICAgY29uc3QgbSA9IGRpc3BhdGNoKHBhdHRlcm4ucnVsZSwgdXJsXzEsIHVybF8zLCB1cmxfNik7CiAgICByZXR1cm4gbSA/IG0gOiB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9uZSJdOwogIH0pOwogIGlmIChpID09PSB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9uZSJdKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgaWYgKCFwYXR0ZXJuLnN0YXJ0ICYmICFwYXR0ZXJuLnJlYWR5KSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIHsKICAgIHN0YXJ0OiBwYXR0ZXJuLnN0YXJ0ID8gT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJwYXJ0aWFsIl0pKHBhdHRlcm4uc3RhcnQsIG1hdGNoZWQpIDogdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vcCJdLAogICAgcmVhZHk6IHBhdHRlcm4ucmVhZHkgPyBPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInBhcnRpYWwiXSkocGF0dGVybi5yZWFkeSwgbWF0Y2hlZCkgOiB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9wIl0sCiAgfTsKfQogfSksCiAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyYXdVU1ciLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJhd1VTVzsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInVzdyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdXN3OyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiR01BUEkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEdNQVBJOyB9KTsKIHZhciB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CmNvbnN0IHJhd1VTVyA9IGdldFVuc2FmZVdpbmRvdygpOwpjb25zdCB1c3cgPSBnZXRVbnNhZmVXaW5kb3dQcm94eSgpOwpjb25zdCBHTUFQSSA9IGdldEdyZWFzZU1vbmtleUFQSSgpOwpmdW5jdGlvbiBnZXRVbnNhZmVXaW5kb3cgKCkgewogIGxldCB3ID0gbnVsbDsKICB0cnkgewogICAgdyA9IHVuc2FmZVdpbmRvdzsKICB9IGNhdGNoIChlKSB7CiAgICB0cnkgewogICAgICB3ID0gKDAsIGV2YWwpKCd0aGlzJykuZ2xvYmFsOwogICAgfSBjYXRjaCAoZSkgewogICAgfQogIH0KICByZXR1cm4gdyA/IHcgOiAoMCwgZXZhbCkoJ3RoaXMnKS53aW5kb3c7Cn0KZnVuY3Rpb24gZ2V0R3JlYXNlTW9ua2V5QVBJICgpIHsKICBpZiAocmF3VVNXLmdsb2JhbCkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGNvbnN0IGdtID0ge307CiAgaWYgKHR5cGVvZiBHTV9vcGVuSW5UYWIgPT09ICdmdW5jdGlvbicpIHsKICAgIGdtLm9wZW5JblRhYiA9IEdNX29wZW5JblRhYjsKICB9IGVsc2UgewogICAgZ20ub3BlbkluVGFiID0gR00ub3BlbkluVGFiOwogIH0KICBpZiAodHlwZW9mIEdNX2dldFZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICBnbS5nZXRWYWx1ZSA9IChuYW1lLCBkZWZhdWx0XykgPT4gewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEdNX2dldFZhbHVlKG5hbWUsIGRlZmF1bHRfKSk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBnbS5nZXRWYWx1ZSA9IEdNLmdldFZhbHVlOwogIH0KICBpZiAodHlwZW9mIEdNX3NldFZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICBnbS5zZXRWYWx1ZSA9IChuYW1lLCB2YWx1ZSkgPT4gewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEdNX3NldFZhbHVlKG5hbWUsIHZhbHVlKSk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBnbS5zZXRWYWx1ZSA9IEdNLnNldFZhbHVlOwogIH0KICBpZiAodHlwZW9mIEdNX2RlbGV0ZVZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICBnbS5kZWxldGVWYWx1ZSA9IChuYW1lKSA9PiB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoR01fZGVsZXRlVmFsdWUobmFtZSkpOwogICAgfTsKICB9IGVsc2UgewogICAgZ20uZGVsZXRlVmFsdWUgPSBHTS5kZWxldGVWYWx1ZTsKICB9CiAgaWYgKHR5cGVvZiBHTV94bWxodHRwUmVxdWVzdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgZ20ueG1sSHR0cFJlcXVlc3QgPSBHTV94bWxodHRwUmVxdWVzdDsKICB9IGVsc2UgewogICAgZ20ueG1sSHR0cFJlcXVlc3QgPSBHTS54bWxIdHRwUmVxdWVzdDsKICB9CiAgaWYgKHR5cGVvZiBHTV9yZWdpc3Rlck1lbnVDb21tYW5kID09PSAnZnVuY3Rpb24nKSB7CiAgICBnbS5yZWdpc3Rlck1lbnVDb21tYW5kID0gR01fcmVnaXN0ZXJNZW51Q29tbWFuZDsKICB9IGVsc2UgewogICAgZ20ucmVnaXN0ZXJNZW51Q29tbWFuZCA9IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJub3AiXTsKICB9CiAgaWYgKHR5cGVvZiBHTV9nZXRSZXNvdXJjZVVSTCA9PT0gJ2Z1bmN0aW9uJykgewogICAgZ20uZ2V0UmVzb3VyY2VVcmwgPSAocmVzb3VyY2VOYW1lKSA9PiB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoR01fZ2V0UmVzb3VyY2VVUkwocmVzb3VyY2VOYW1lKSk7CiAgICB9OwogIH0gZWxzZSBpZiAodHlwZW9mIEdNID09PSAnb2JqZWN0JyAmJiBHTSAmJiBHTS5nZXRSZXNvdXJjZVVybCkgewogICAgZ20uZ2V0UmVzb3VyY2VVcmwgPSBHTS5nZXRSZXNvdXJjZVVybDsKICB9CiAgcmV0dXJuIGdtOwp9CmNvbnN0IE1BR0lDX0tFWSA9ICdfX2Fkc2J5cGFzc2VyX3JldmVyc2VfcHJveHlfXyc7CmZ1bmN0aW9uIGdldFVuc2FmZVdpbmRvd1Byb3h5ICgpIHsKICBjb25zdCBpc0ZpcmVmb3ggPSB0eXBlb2YgSW5zdGFsbFRyaWdnZXIgIT09ICd1bmRlZmluZWQnOwogIGNvbnN0IGlzV2ViRXh0ZW5zaW9uID0gdHlwZW9mIGNsb25lSW50byA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGV4cG9ydEZ1bmN0aW9uID09PSAndW5kZWZpbmVkJzsKICBpZiAoIWlzRmlyZWZveCB8fCBpc1dlYkV4dGVuc2lvbikgewogICAgcmV0dXJuIHJhd1VTVzsKICB9CiAgY29uc3QgZGVjb3JhdG9yID0gewogICAgc2V0ICh0YXJnZXQsIGtleSwgdmFsdWUpIHsKICAgICAgaWYgKGtleSA9PT0gTUFHSUNfS0VZKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0YXJnZXQgPT09IHVuc2FmZVdpbmRvdyAmJiBrZXkgPT09ICdvcGVuJykgewogICAgICAgIGNvbnN0IGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KTsKICAgICAgICBkLnZhbHVlID0gY2xvbmUoZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc3QgcnYgPSB2YWx1ZSgpOwogICAgICAgICAgcmV0dXJuIGNsb25lSW50byhydiwgdW5zYWZlV2luZG93KTsKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRhcmdldFtrZXldID0gY2xvbmUodmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGdldCAodGFyZ2V0LCBrZXkpIHsKICAgICAgaWYgKGtleSA9PT0gTUFHSUNfS0VZKSB7CiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgfQogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldFtrZXldOwogICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlOwogICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgKHR5cGUgIT09ICdmdW5jdGlvbicgJiYgdHlwZSAhPT0gJ29iamVjdCcpKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGRlY29yYXRvcik7CiAgICB9LAogICAgYXBwbHkgKHRhcmdldCwgc2VsZiwgYXJncykgewogICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7CiAgICAgIGlmICh0YXJnZXQgPT09IHVuc2FmZVdpbmRvdy5PYmplY3QuZGVmaW5lUHJvcGVydHkpIHsKICAgICAgICBhcmdzWzBdID0gYXJnc1swXVtNQUdJQ19LRVldOwogICAgICB9CiAgICAgIGlmICh0YXJnZXQgPT09IHVuc2FmZVdpbmRvdy5GdW5jdGlvbi5hcHBseSkgewogICAgICAgIHNlbGYgPSBzZWxmW01BR0lDX0tFWV07CiAgICAgICAgYXJnc1sxXSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3NbMV0pOwogICAgICB9CiAgICAgIGlmICh0YXJnZXQgPT09IHVuc2FmZVdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7CiAgICAgICAgc2VsZiA9IHNlbGZbTUFHSUNfS0VZXTsKICAgICAgfQogICAgICBpZiAodGFyZ2V0ID09PSB1bnNhZmVXaW5kb3cuZG9jdW1lbnQud3JpdGUpIHsKICAgICAgICBzZWxmID0gc2VsZltNQUdJQ19LRVldOwogICAgICB9CiAgICAgIGNvbnN0IHVzYXJncyA9IGNsb25lKGFyZ3MpOwogICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KHNlbGYsIHVzYXJncyk7CiAgICB9LAogICAgY29uc3RydWN0ICh0YXJnZXQsIGFyZ3MpIHsKICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpOwogICAgICBhcmdzLnVuc2hpZnQodW5kZWZpbmVkKTsKICAgICAgY29uc3QgdXNhcmdzID0gY2xvbmUoYXJncyk7CiAgICAgIGNvbnN0IGJpbmQgPSB1bnNhZmVXaW5kb3cuRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7CiAgICAgIHJldHVybiBuZXcgKGJpbmQuYXBwbHkodGFyZ2V0LCB1c2FyZ3MpKTsKICAgIH0sCiAgfTsKICByZXR1cm4gbmV3IFByb3h5KHVuc2FmZVdpbmRvdywgZGVjb3JhdG9yKTsKfQpmdW5jdGlvbiBjbG9uZSAoc2FmZSkgewogIGlmIChzYWZlID09PSBudWxsIHx8ICEoc2FmZSBpbnN0YW5jZW9mIE9iamVjdCkpIHsKICAgIHJldHVybiBzYWZlOwogIH0KICBpZiAoc2FmZSA9PT0gdW5zYWZlV2luZG93KSB7CiAgICByZXR1cm4gc2FmZTsKICB9CiAgaWYgKHNhZmUgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgIHJldHVybiBzYWZlLnRvU3RyaW5nKCk7CiAgfQogIGlmIChzYWZlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgIHJldHVybiBleHBvcnRGdW5jdGlvbihzYWZlLCB1bnNhZmVXaW5kb3csIHsKICAgICAgYWxsb3dDcm9zc09yaWdpbkFyZ3VtZW50czogdHJ1ZSwKICAgIH0pOwogIH0KICBpZiAoc2FmZSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICBjb25zdCB1bnNhZmUgPSBuZXcgdW5zYWZlV2luZG93LkFycmF5KCk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhZmUubGVuZ3RoOyArK2kpIHsKICAgICAgdW5zYWZlLnB1c2goY2xvbmUoc2FmZVtpXSkpOwogICAgfQogICAgcmV0dXJuIHVuc2FmZTsKICB9CiAgY29uc3QgdW5zYWZlID0gbmV3IHVuc2FmZVdpbmRvdy5PYmplY3QoKTsKICBPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImZvckVhY2giXSkoc2FmZSwgKHYsIGspID0+IHsKICAgIHVuc2FmZVtrXSA9IGNsb25lKHYpOwogIH0pOwogIHJldHVybiB1bnNhZmU7Cn0KIH0pLAogKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZHVtcENvbmZpZyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZHVtcENvbmZpZzsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImxvYWRDb25maWciLCBmdW5jdGlvbigpIHsgcmV0dXJuIGxvYWRDb25maWc7IH0pOwogdmFyIHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKIHZhciB1dGlsX2Rpc3BhdGNoZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7CiB2YXIgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKY29uc3QgTUFOSUZFU1QgPSBbCiAgewogICAga2V5OiAndmVyc2lvbicsCiAgICBkZWZhdWx0XzogMCwKICAgIHZlcmlmeSAodikgewogICAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdudW1iZXInICYmIHYgPj0gMDsKICAgIH0sCiAgICBub3JtYWxpemU6IHRvTnVtYmVyLAogIH0sCiAgewogICAga2V5OiAnYWxpZ25fY2VudGVyJywKICAgIGRlZmF1bHRfOiB0cnVlLAogICAgdmVyaWZ5OiBpc0Jvb2xlYW4sCiAgICBub3JtYWxpemU6IHRvQm9vbGVhbiwKICB9LAogIHsKICAgIGtleTogJ2NoYW5nZV9iYWNrZ3JvdW5kJywKICAgIGRlZmF1bHRfOiB0cnVlLAogICAgdmVyaWZ5OiBpc0Jvb2xlYW4sCiAgICBub3JtYWxpemU6IHRvQm9vbGVhbiwKICB9LAogIHsKICAgIGtleTogJ3JlZGlyZWN0X2ltYWdlJywKICAgIGRlZmF1bHRfOiB0cnVlLAogICAgdmVyaWZ5OiBpc0Jvb2xlYW4sCiAgICBub3JtYWxpemU6IHRvQm9vbGVhbiwKICB9LAogIHsKICAgIGtleTogJ3NjYWxlX2ltYWdlJywKICAgIGRlZmF1bHRfOiB0cnVlLAogICAgdmVyaWZ5OiBpc0Jvb2xlYW4sCiAgICBub3JtYWxpemU6IHRvQm9vbGVhbiwKICB9LAogIHsKICAgIGtleTogJ2xvZ19sZXZlbCcsCiAgICBkZWZhdWx0XzogMSwKICAgIHZlcmlmeSAodikgewogICAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdudW1iZXInICYmIHYgPj0gMCAmJiB2IDw9IDI7CiAgICB9LAogICAgbm9ybWFsaXplOiB0b051bWJlciwKICB9LApdOwpjb25zdCBQQVRDSEVTID0gWwogIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IGFsaWduQ2VudGVyID0gYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLmdldFZhbHVlKCdhbGlnbl9jZW50ZXInKTsKICAgIGNvbnN0IGNoYW5nZUJhY2tncm91bmQgPSBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uZ2V0VmFsdWUoJ2NoYW5nZV9iYWNrZ3JvdW5kJyk7CiAgICBjb25zdCBzY2FsZUltYWdlID0gYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLmdldFZhbHVlKCdzY2FsZV9pbWFnZScpOwogICAgY29uc3QgcmVkaXJlY3RJbWFnZSA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5nZXRWYWx1ZSgncmVkaXJlY3RfaW1hZ2UnKTsKICAgIGNvbnN0IGFjID0gdHlwZW9mIGFsaWduQ2VudGVyID09PSAnYm9vbGVhbic7CiAgICBpZiAodHlwZW9mIGNoYW5nZUJhY2tncm91bmQgIT09ICdib29sZWFuJykgewogICAgICBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uc2V0VmFsdWUoJ2NoYW5nZV9iYWNrZ3JvdW5kJywgYWMgPyBhbGlnbkNlbnRlciA6IHRydWUpOwogICAgfQogICAgaWYgKHR5cGVvZiBzY2FsZUltYWdlICE9PSAnYm9vbGVhbicpIHsKICAgICAgYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLnNldFZhbHVlKCdzY2FsZV9pbWFnZScsIGFjID8gYWxpZ25DZW50ZXIgOiB0cnVlKTsKICAgIH0KICAgIGlmICghYWMpIHsKICAgICAgYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLnNldFZhbHVlKCdhbGlnbl9jZW50ZXInLCB0cnVlKTsKICAgIH0KICAgIGlmICh0eXBlb2YgcmVkaXJlY3RJbWFnZSAhPT0gJ2Jvb2xlYW4nKSB7CiAgICAgIGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5zZXRWYWx1ZSgncmVkaXJlY3RfaW1hZ2UnLCB0cnVlKTsKICAgIH0KICB9LAogIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IGV4dGVybmFsU2VydmVyU3VwcG9ydCA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5nZXRWYWx1ZSgnZXh0ZXJuYWxfc2VydmVyX3N1cHBvcnQnKTsKICAgIGlmICh0eXBlb2YgZXh0ZXJuYWxTZXJ2ZXJTdXBwb3J0ICE9PSAnYm9vbGVhbicpIHsKICAgICAgYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLnNldFZhbHVlKCdleHRlcm5hbF9zZXJ2ZXJfc3VwcG9ydCcsIGZhbHNlKTsKICAgIH0KICB9LAogIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IGxvZ0xldmVsID0gYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLmdldFZhbHVlKCdsb2dfbGV2ZWwnKTsKICAgIGlmICh0eXBlb2YgbG9nTGV2ZWwgIT09ICdudW1iZXInKSB7CiAgICAgIGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5zZXRWYWx1ZSgnbG9nX2xldmVsJywgMSk7CiAgICB9CiAgfSwKICBhc3luYyAoKSA9PiB7CiAgICBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uZGVsZXRlVmFsdWUoJ2V4dGVybmFsX3NlcnZlcl9zdXBwb3J0Jyk7CiAgfSwKXTsKZnVuY3Rpb24gaXNCb29sZWFuICh2KSB7CiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnYm9vbGVhbic7Cn0KZnVuY3Rpb24gdG9Cb29sZWFuICh2KSB7CiAgcmV0dXJuICEhdjsKfQpmdW5jdGlvbiB0b051bWJlciAodikgewogIHJldHVybiBwYXJzZUludCh2LCAxMCk7Cn0KYXN5bmMgZnVuY3Rpb24gc2VuaXR5Q2hlY2sgKCkgewogIGxldCB2ZXJpZnlSZXN1bHRzID0gTUFOSUZFU1QubWFwKGFzeW5jIChkZXNjcmlwdG9yKSA9PiB7CiAgICBjb25zdCBydiA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5nZXRWYWx1ZShkZXNjcmlwdG9yLmtleSk7CiAgICByZXR1cm4gZGVzY3JpcHRvci52ZXJpZnkocnYpOwogIH0pOwogIHZlcmlmeVJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh2ZXJpZnlSZXN1bHRzKTsKICBjb25zdCBvayA9IE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZXZlcnkiXSkodmVyaWZ5UmVzdWx0cywgdiA9PiB2KTsKICBpZiAoIW9rKSB7CiAgICBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uc2V0VmFsdWUoJ3ZlcnNpb24nLCAwKTsKICB9Cn0KYXN5bmMgZnVuY3Rpb24gbWlncmF0ZSAoKSB7CiAgbGV0IGN1cnJlbnRWZXJzaW9uID0gYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLmdldFZhbHVlKCd2ZXJzaW9uJyk7CiAgaWYgKGN1cnJlbnRWZXJzaW9uICE9PSAwICYmICFjdXJyZW50VmVyc2lvbikgewogICAgdGhyb3cgbmV3IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJBZHNCeXBhc3NlckVycm9yIl0oJ2ludmFsaWQgdmVyc2lvbicpOwogIH0KICB3aGlsZSAoY3VycmVudFZlcnNpb24gPCBQQVRDSEVTLmxlbmd0aCkgewogICAgUEFUQ0hFU1tjdXJyZW50VmVyc2lvbl0oKTsKICAgICsrY3VycmVudFZlcnNpb247CiAgfQogIGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5zZXRWYWx1ZSgndmVyc2lvbicsIGN1cnJlbnRWZXJzaW9uKTsKfQphc3luYyBmdW5jdGlvbiBsb2FkQ29uZmlnICgpIHsKICBhd2FpdCBzZW5pdHlDaGVjaygpOwogIGF3YWl0IG1pZ3JhdGUoKTsKICBPYmplY3QodXRpbF9kaXNwYXRjaGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInJlZ2lzdGVyIl0pKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15hZHNieXBhc3NlclwuZ2l0aHViXC5pbyQvLAogICAgICBwYXRoOiAvXlwvY29uZmlndXJlXC5odG1sJC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBhd2FpdCB3YWl0Rm9yUGFnZSgpOwogICAgICB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInVzdyJdLmNvbW1pdCA9IGFzeW5jIChkYXRhKSA9PiB7CiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHsKICAgICAgICAgIGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5zZXRWYWx1ZShrLCB2KTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sidXN3Il0ucmVuZGVyKHsKICAgICAgICB2ZXJzaW9uOiBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uZ2V0VmFsdWUoJ3ZlcnNpb24nKSwKICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICBhbGlnbl9jZW50ZXI6IHsKICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgdmFsdWU6IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5nZXRWYWx1ZSgnYWxpZ25fY2VudGVyJyksCiAgICAgICAgICAgIGxhYmVsOiAnQWxpZ24gQ2VudGVyJywKICAgICAgICAgICAgaGVscDogJ0FsaWduIGltYWdlIHRvIHRoZSBjZW50ZXIgaWYgcG9zc2libGUuIChkZWZhdWx0OiBlbmFibGVkKScsCiAgICAgICAgICB9LAogICAgICAgICAgY2hhbmdlX2JhY2tncm91bmQ6IHsKICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgdmFsdWU6IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5nZXRWYWx1ZSgnY2hhbmdlX2JhY2tncm91bmQnKSwKICAgICAgICAgICAgbGFiZWw6ICdDaGFuZ2UgQmFja2dyb3VuZCcsCiAgICAgICAgICAgIGhlbHA6ICdVc2UgRmlyZWZveC1saWtlIGltYWdlIGJhY2tncm91bmQgaWYgcG9zc2libGUuIChkZWZhdWx0OiBlbmFibGVkKScsCiAgICAgICAgICB9LAogICAgICAgICAgcmVkaXJlY3RfaW1hZ2U6IHsKICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgdmFsdWU6IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR01BUEkiXS5nZXRWYWx1ZSgncmVkaXJlY3RfaW1hZ2UnKSwKICAgICAgICAgICAgbGFiZWw6ICdSZWRpcmVjdCBJbWFnZScsCiAgICAgICAgICAgIGhlbHA6IFsKICAgICAgICAgICAgICAnRGlyZWN0bHkgb3BlbiBpbWFnZSBsaW5rIGlmIHBvc3NpYmxlLiAoZGVmYXVsdDogZW5hYmxlZCknLAogICAgICAgICAgICAgICdJZiBkaXNhYmxlZCwgcmVkaXJlY3Rpb24gd2lsbCBvbmx5IHdvcmtzIG9uIGxpbmsgc2hvcnRlbmVyIHNpdGVzLicsCiAgICAgICAgICAgIF0uam9pbignPGJyLz5cbicpLAogICAgICAgICAgfSwKICAgICAgICAgIHNjYWxlX2ltYWdlOiB7CiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgIHZhbHVlOiBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uZ2V0VmFsdWUoJ3NjYWxlX2ltYWdlJyksCiAgICAgICAgICAgIGxhYmVsOiAnU2NhbGUgSW1hZ2UnLAogICAgICAgICAgICBoZWxwOiAnV2hlbiBpbWFnZSBsb2FkZWQsIHNjYWxlIGl0IHRvIGZpdCB3aW5kb3cgaWYgcG9zc2libGUuIChkZWZhdWx0OiBlbmFibGVkKScsCiAgICAgICAgICB9LAogICAgICAgICAgbG9nX2xldmVsOiB7CiAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICB2YWx1ZTogYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJHTUFQSSJdLmdldFZhbHVlKCdsb2dfbGV2ZWwnKSwKICAgICAgICAgICAgbWVudTogWwogICAgICAgICAgICAgIFswLCAnMCAocXVpZXQpJ10sCiAgICAgICAgICAgICAgWzEsICcxIChkZWZhdWx0KSddLAogICAgICAgICAgICAgIFsyLCAnMiAodmVyYm9zZSknXSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgbGFiZWw6ICdMb2cgTGV2ZWwnLAogICAgICAgICAgICBoZWxwOiBbCiAgICAgICAgICAgICAgJ0xvZyBsZXZlbCBpbiBkZXZlbG9wZXIgY29uc29sZS4gKGRlZmF1bHQ6IDEpJywKICAgICAgICAgICAgICAnMCB3aWxsIG5vdCBwcmludCBhbnl0aGluZyBpbiBjb25zb2xlLicsCiAgICAgICAgICAgICAgJzEgd2lsbCBvbmx5IHByaW50IGxvZ3Mgb24gYWZmZWN0ZWQgc2l0ZXMuJywKICAgICAgICAgICAgICAnMiB3aWxsIHByaW50IG9uIGFueSBzaXRlcy4nLAogICAgICAgICAgICBdLmpvaW4oJzxici8+XG4nKSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogIH0pOwp9CmZ1bmN0aW9uIHdhaXRGb3JQYWdlICgpIHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgIGNvbnN0IGkgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIGlmICh1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInVzdyJdLnJlbmRlcikgewogICAgICAgIGNsZWFySW50ZXJ2YWwoaSk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9CiAgICB9LCA1MCk7CiAgfSk7Cn0KYXN5bmMgZnVuY3Rpb24gZHVtcENvbmZpZyAoKSB7CiAgbGV0IHJ2ID0gTUFOSUZFU1QubWFwKGFzeW5jIChkZXNjcmlwdG9yKSA9PiB7CiAgICByZXR1cm4gW2Rlc2NyaXB0b3Iua2V5LCBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkdNQVBJIl0uZ2V0VmFsdWUoZGVzY3JpcHRvci5rZXkpXTsKICB9KTsKICBydiA9IGF3YWl0IFByb21pc2UuYWxsKHJ2KTsKICBjb25zdCBvID0ge307CiAgZm9yIChjb25zdCBbaywgdl0gb2YgcnYpIHsKICAgIG9ba10gPSB2OwogIH0KICByZXR1cm4gbzsKfQogfSksCiAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJkZWJ1ZyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVidWc7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpbmZvIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbmZvOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2FybiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gd2FybjsgfSk7CiB2YXIgdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwpjb25zdCBxdWlldCA9IGZhbHNlOwpmdW5jdGlvbiBsb2cgKG1ldGhvZCwgYXJncykgewogIGlmIChxdWlldCkgewogICAgcmV0dXJuOwogIH0KICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7CiAgaWYgKE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXNTdHJpbmciXSkoYXJnc1swXSkpIHsKICAgIGFyZ3NbMF0gPSAnQWRzQnlwYXNzZXI6ICcgKyBhcmdzWzBdOwogIH0gZWxzZSB7CiAgICBhcmdzLnVuc2hpZnQoJ0Fkc0J5cGFzc2VyOicpOwogIH0KICBjb25zdCBmID0gY29uc29sZVttZXRob2RdOwogIGlmICh0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJykgewogICAgZi5hcHBseShjb25zb2xlLCBhcmdzKTsKICB9Cn0KZnVuY3Rpb24gZGVidWcgKCkgewogIGxvZygnZGVidWcnLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIGluZm8gKCkgewogIGxvZygnaW5mbycsIGFyZ3VtZW50cyk7Cn0KZnVuY3Rpb24gd2FybiAoKSB7CiAgbG9nKCd3YXJuJywgYXJndW1lbnRzKTsKfQogfSksCiAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwogdmFyIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eYWtvYW1cLm5ldCQvLAogICAgcGF0aDogL15cL2Rvd25sb2FkXC8oW14vXSspXC8vLAogIH0sCiAgYXN5bmMgc3RhcnQgKG0pIHsKICAgIGxldCBkYXRhID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnBvc3QobG9jYXRpb24uaHJlZiwgbS5wYXRoWzFdKTsKICAgIHRyeSB7CiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FybignSlNPTiBlcnJvcjonLCBlKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGRhdGEuZGlyZWN0X2xpbmspOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT9jb29scm9tXC5jb20kLywKICAgIHBhdGg6IC9eXC9kbHBvcFwucGhwJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBtYXRjaGVzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC88Zm9ybSBtZXRob2Q9IlBPU1QiIGFjdGlvbj0iKFteIl0rKSI+Lyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobWF0Y2hlc1sxXSk7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL14od3d3XC4pP2RsLXByb3RlY3RcLmNvbSQvLAogICAgICBwYXRoOiAvXC9bQS1aMC05XSsvLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgaWYgKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjY2FwdGNoYScpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnZm9ybVtuYW1lPWNjZXJ1cmVdJyk7CiAgICAgIGlmIChmKSB7CiAgICAgICAgY29uc3QgaUluID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2lucHV0W2lkPWluXScpOwogICAgICAgIGlmIChpSW4udmFsdWUpIHsKICAgICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDYwMCk7CiAgICAgICAgICBmLnN1Ym1pdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBbLCAsIHBdID0gYXdhaXQgd2FpdERPTShpSW4sIHsKICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSwKICAgICAgICAgIH0sIChtdXRhdGlvbikgPT4gewogICAgICAgICAgICBpZiAoIW11dGF0aW9uLnRhcmdldC52YWx1ZSB8fCBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lICE9PSAndmFsdWUnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ub25lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlJbi52YWx1ZSA9ICdUcmFja2luZyB0b28gbXVjaCBodXJ0cyB1c2Vyc1wnIHByaXZhY3knOwogICAgICAgICAgICBpZiAoIWNhbkZhc3RSZWRpcmVjdCgpKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg2MDApOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocCkgewogICAgICAgICAgICBhd2FpdCBwOwogICAgICAgICAgICBmLnN1Ym1pdCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgbCA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kJCgnI3NsaW5rcyA+IGEnKTsKICAgICAgaWYgKGwubGVuZ3RoID09PSAxKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGxbMF0uaHJlZik7CiAgICAgIH0KICAgIH0sCiAgfSk7CiAgZnVuY3Rpb24gY2FuRmFzdFJlZGlyZWN0ICgpIHsKICAgIHJldHVybiAhX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2Zvcm1bbmFtZT1jY2VydXJlXScpLm9uc3VibWl0ICYmICFfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnZm9ybVtuYW1lPWNjZXJ1cmVdIGlucHV0W25hbWU9cHdkXScpOwogIH0KICBmdW5jdGlvbiB3YWl0RE9NIChlbGVtZW50LCBjb25maWcsIGZuKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7CiAgICAgICAgY29uc3QgW2ssIHYsIHJdID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmZpbmQobXV0YXRpb25zLCBmbik7CiAgICAgICAgaWYgKGsgIT09IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ub25lKSB7CiAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICByZXNvbHZlKFtrLCB2LCByXSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9KTsKICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50LCBjb25maWcpOwogICAgfSk7CiAgfQp9KSgpOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eZWxzZmlsZVwub3JnJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBkb3duID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJyNidG5fZG93bmxvYWQnKTsKICAgIGlmIChkb3duKSB7CiAgICAgIGRvd24uY2xpY2soKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgY291bnRkb3duID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNmcm1kbGNlbnRlcicpOwogICAgY29uc3QgbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgY29uc3Qgc3VibWl0ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2lucHV0W3R5cGU9InN1Ym1pdCJdW25hbWU9Im1ldGhvZF9mcmVlIl0nKTsKICAgICAgaWYgKHN1Ym1pdCkgewogICAgICAgIHN1Ym1pdC5jbGljaygpOwogICAgICB9CiAgICB9KTsKICAgIG8ub2JzZXJ2ZShjb3VudGRvd24sIHsKICAgICAgY2hpbGRMaXN0OiB0cnVlCiAgICB9KTsKICAgIGxldCBzY3JpcHQgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoLy4qZXZhbFwoZnVuY3Rpb25cKHAsYSxjLGssZSxkXCkuKi8pOwogICAgaWYgKHNjcmlwdC5sZW5ndGggPiAwKSB7CiAgICAgIHNjcmlwdCA9IHNjcmlwdFswXS5yZXBsYWNlKCd8fGltcG9ydGFudCcsICd8MHxpbXBvcnRhbnQnKTsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmV2aWwoc2NyaXB0KTsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/ZW1iZWR1cGxvYWRcLmNvbSQvLAogICAgcGF0aDogL15cLyQvLAogICAgcXVlcnk6IC9eXD9cd3syfT1cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGRvd25sb2FkUGFnZSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuY2F0ZWdvcmllcyBhW3RhcmdldD1fYmxhbmtdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZG93bmxvYWRQYWdlKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnd3d1wuZmlsZXByb2plY3RcLmNvbVwuYnIkLywKICAgIHBhdGg6IC9eXC9maWxlc1wvKy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBtID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC88YSBpZD0iZG93biIgaHJlZj0iKFteIl0rKSI+Lyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobVsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXih3d3dcLik/aW5kaXNoYXJlXC4ob3JnfG1lKSQvLAogICAgICAvXmJkdXBsb2FkXC4oaW5mb3xhc2lhKSQvLAogICAgICAvXnVwZ3JhbmRcLnNpdGUkLywKICAgICAgL14zemZpbGVcLm5ldCQvLAogICAgICAvXnVwbG9hZHJhclwuY29tJC8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYnRuID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2J1dHRvbiNkb3dubG9hZGJ0bi5kb3dubG9hZGJ0bicpOwogICAgYnRuLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTsKICAgIGJ0bi5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW5zdXJhbmNlLXdhaWZ1XC5jZiQvLAogICAgcXVlcnk6IC91PSguKykkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZm9ybScpOwogICAgY29uc3QgYXJncyA9IHt9OwogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmZvckVhY2goZiwgKHYpID0+IHsKICAgICAgYXJnc1t2Lm5hbWVdID0gdi52YWx1ZTsKICAgIH0pOwogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucG9zdChmLmdldEF0dHJpYnV0ZSgnYWN0aW9uJyksIGFyZ3MpOwogICAgY29uc3QgbCA9IHJlc3BvbnNlLm1hdGNoKC93aW5kb3dcLmxvY2F0aW9uXC5ocmVmLicoW14nXSspJzsvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/amhlYmVyZ1wubmV0JC8sCiAgICBwYXRoOiAvXlwvY2FwdGNoYVwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuZGwtYnV0dG9uJykuY2xpY2soKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/amhlYmVyZ1wubmV0JC8sCiAgICBwYXRoOiAvXlwvcmVkaXJlY3RcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlQWxsVGltZXIoKTsKICAgIGNvbnN0IG1hdGNoZXMgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoLydzbHVnJzpccyonKFteJ10rKScsXHMqJ2hvc3Rlcic6XHMqJyhbXiddKyknLyk7CiAgICBjb25zdCBzbHVnID0gbWF0Y2hlc1sxXTsKICAgIGNvbnN0IGhvc3RlciA9IG1hdGNoZXNbMl07CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5wb3N0KCcvZ2V0L2xpbmsvJywgewogICAgICBzbHVnLAogICAgICBob3N0ZXIsCiAgICB9KTsKICAgIGNvbnN0IHJlc3BKU09OID0gSlNPTi5wYXJzZShyZXNwb25zZSk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocmVzcEpTT04udXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXm1pcnJvcmFjZVwuY29tJC8sCiAgICBwYXRoOiAvXlwvbVwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IG1hID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2EudWstYnV0dG9uLnVrLWJ1dHRvbi1sYXJnZS51ay1idXR0b24tcHJpbWFyeScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG1hLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL14od3d3XC4pP21pcnJvcmNyZWF0b3JcLmNvbSQvLAogICAgICAvXih3d3dcLik/bWlycm9yZWRcLnRvJC8sCiAgICBdLAogICAgcGF0aDogL15cL2Rvd25saW5rXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuY29sLXNtLmNlbnRlcmVkLmhpZ2hsaWdodCBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKHd3d1wuKT9taXJyb3JjcmVhdG9yXC5jb20kLywKICAgICAgL14od3d3XC4pP21pcnJvcmVkXC50byQvLAogICAgXSwKICAgIHBhdGg6IC9eXC9maWxlc1wvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjZGxfZm9ybScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBjb25zdCByZXMgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3Jlc3VsdCcpOwogICAgcmVzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgY29uc3QgbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgaWYgKHJlcy5zdHlsZS5kaXNwbGF5ICE9PSAnYmxvY2snKSB7CiAgICAgICAgcmVzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAKICAgICAgfQogICAgfSk7CiAgICBvLm9ic2VydmUocmVzLCB7CiAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICB9KTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDEwMDApOwogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5zdGFydCgpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ebXVsdGlmaWxlbWlycm9yXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IG0gPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2xjb2RlIGZvcm0gYnV0dG9uJyk7CiAgICBtLmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLm11bHRpdXBmaWxlXC5jb20kLywKICAgIHBhdGg6IC9eXC9mXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjeXcwJyk7CiAgICBmLnN1Ym1pdCgpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ebXlsaW5rZ2VuXC5jb20kLywKICAgIHBhdGg6IC9eXC9wXC8oLispJC8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKCcvZy8nICsgbS5wYXRoWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXm15bGlua2dlblwuY29tJC8sCiAgICBwYXRoOiAvXlwvZ1wvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI21haW4tY29udGVudCBhLmJ0bi5idG4tZGVmYXVsdCcpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXm9wZW5sb2FkXC4oY298aW98bGlua3xwdykkLywKICAgICAgL15vcGVubG9lZFwuKGNvKSQvLAogICAgICAvXm9sb2FkXC4oYml6fGNjfGNsb3VkfGNsdWJ8ZG93bmxvYWR8ZnVufGluZm98bGlmZXxsaXZlfG5ldHdvcmt8cHJlc3N8c2VydmljZXN8c2l0ZXxzcGFjZSkkLywKICAgICAgL15vbG9hZFwuKHN0cmVhbXx0dnx3ZWJzaXRlfHdpbikkLywKICAgICAgL15vbGFkYmxvY2tcLihtZXxzZXJ2aWNlc3x4eXopJC8sCiAgICBdLAogICAgcGF0aDogL15cL2ZcLy4qLywKICB9LAogIGFzeW5jIHN0YXJ0ICgpIHsKICAgIGlmIChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LmFkYmxvY2sgIT09IGZhbHNlKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuYWRibG9jayA9IGZhbHNlOwogICAgfQogICAgaWYgKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuYWRibG9jazIgIT09IGZhbHNlKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuYWRibG9jazIgPSBmYWxzZTsKICAgIH0KICAgIGlmIChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LnBvcEFkc0xvYWRlZCAhPT0gdHJ1ZSkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LnBvcEFkc0xvYWRlZCA9IHRydWU7CiAgICB9CiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg1MDApOwogICAgY29uc3QgdGltZXIgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2Rvd25sb2FkVGltZXInKTsKICAgIHRpbWVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBjb25zdCBkbEN0biA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjcmVhbGRsJyk7CiAgICBkbEN0bi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7CiAgICBjb25zdCBkbEJ0biA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdhJywgZGxDdG4pOwogICAgY29uc3QgZVBhdGggPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI0R0c0Jsa1ZGUXgnKTsKICAgIGRsQnRuLmhyZWYgPSAnL3N0cmVhbS8nICsgZVBhdGgudGV4dENvbnRlbnQ7CiAgICBjb25zdCB2aWRlb0N0biA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcudmlkZW9jb250YWluZXInKTsKICAgIGlmICh2aWRlb0N0bikgewogICAgICBjb25zdCBvdmVybGF5ID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyN2aWRlb292ZXJsYXknLCB2aWRlb0N0bik7CiAgICAgIG92ZXJsYXkuY2xpY2soKTsKICAgICAgZGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7CiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7CiAgICAgICAgaWZyYW1lLnNyYyA9IGRsQnRuLmhyZWY7CiAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpOwogICAgICB9KTsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmluZm8oYCR7d2luZG93LmxvY2F0aW9ufSAtPiAke2RsQnRuLmhyZWZ9YCk7CiAgICAgIGRsQnRuLmNsaWNrKCk7CiAgICB9IGVsc2UgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZGxCdG4uaHJlZik7CiAgICB9CiAgfQp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/cHV0bG9ja2VyXC5jb20kLywKICAgIHBhdGg6IC9eXC9maWxlXC9bMC05QS1GXSskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGMgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2NvbmZpcm1fZm9ybScpOwogICAgYy5zdWJtaXQoKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnVwbG9hZGhhdmVuXC5jb20kLywKICAgIHBhdGg6IC9eXC9kb3dubG9hZFwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwMDApOwogICAgY29uc3QgZiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuY29udGFjdEZvcm0gI2Rvd25sb2FkTm93QnRuLmJ0bi5idG4tcHJpbWFyeScpOwogICAgZi5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT91cG1pcnJvclwuaW5mbyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNldENvb2tpZSgndXNlcicsICdwcHAnKTsKICAgIGlmIChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI2NvdW50RG93blRleHQnKSkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKSk7CiAgICB9CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3ZpZHRvXC5tZSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjYnRuX2Rvd25sb2FkJykuZm9ybTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDYgKiAxMDAwKTsKICAgIGYuc3VibWl0KCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL156dXBsb2FkXC5tZSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgeiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdidXR0b24jbGlua19idXR0b24nKTsKICAgIHoucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpOwogICAgei5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eMDFcLm5sJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBmID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2lmcmFtZSNyZWRpcmVjdGZyYW1lJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZi5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eMTBjb1wuKGJpenx4eXp8Y298bWUpJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBkID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5nbycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGQuZGF0YXNldC5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/KDFiZXwxZGwpXC5iaXokLywKICAgIHBhdGg6IC9eXC96XC5waHAkLywKICAgIHF1ZXJ5OiAvXlw/KC4rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG0ucXVlcnlbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKDFiZXwxZGwpXC5iaXokLywKICAgIHBhdGg6IC9eXC9banRdXC5waHAkLywKICAgIHF1ZXJ5OiAvXlw/cz0vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuai1saW5rJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXjFpbmtcLihjY3xpbmZvKSQvLAogICAgcGF0aDogL15cL1x3KyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IHVybCA9IGRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcignW25hbWU9a2V5d29yZHNdJykuY29udGVudDsKICAgIGNvbnN0IHVybENoZWNrID0gdXJsLm1hdGNoKC9eaHR0cHM/OlwvXC8vKTsKICAgIGlmICghdXJsQ2hlY2spIHsKICAgICAgdXJsID0gJ2h0dHA6Ly8nICsgdXJsOwogICAgfQogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pPzF0aW55XC5uZXQkLywKICAgIHBhdGg6IC9cL1x3Ky8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBkaXJlY3RVcmwgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL3dpbmRvd1wubG9jYXRpb249JyhbXiddKyknOy8pOwogICAgaWYgKCFkaXJlY3RVcmwpIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzY3JpcHQgY29udGVudCBjaGFuZ2VkJyk7CiAgICB9CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZGlyZWN0VXJsWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXjF2XC50byQvLAogICAgcGF0aDogL15cL3RcL1thLXpBLVowLTkvPV0rLywKICB9LAogIGFzeW5jIHN0YXJ0ICgpIHsKICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKCcvdC8nLCAnL3NhbGllbmRvLycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHBhdGgpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT80ZnVuXC50dyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjb3JpZ2luYWxfdXJsJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaS52YWx1ZSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15hZDJsaW5rc1wuY29tJC8sCiAgICBwYXRoOiAvXlwvXHctLiskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpLCB7CiAgICAgIHBvc3Q6IHsKICAgICAgICBpbWFnZTogJ1NraXAgQWQuJywKICAgICAgfSwKICAgIH0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eYWQ0XC5mciQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICBjb25zdCBzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC8ic3JjIiwgIihbXiJdKykiLyk7CiAgICBpZiAoIXMpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhcm4oJ2NoYW5nZWQnKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHNbMV0pOwogIH0sCn0pOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eYWQ3XC5iaXokLywKICAgICAgcGF0aDogL15cL1xkK1wvKC4qKSQvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0IChtKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgICBsZXQgcmVkaXJlY3RMaW5rID0gbS5wYXRoWzFdOwogICAgICBpZiAoIXJlZGlyZWN0TGluay5tYXRjaCgvXmh0dHBzPzpcL1wvLykpIHsKICAgICAgICByZWRpcmVjdExpbmsgPSAnaHR0cDovLycgKyByZWRpcmVjdExpbms7CiAgICAgIH0KICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHJlZGlyZWN0TGluayk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eYWQ3XC5iaXokLywKICAgICAgcGF0aDogL15cL1x3KyQvLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICAgIGNvbnN0IHNjcmlwdCA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygnY29uc3Qgcl91cmwnKTsKICAgICAgbGV0IHVybCA9IHNjcmlwdC5tYXRjaCgvJnVybD0oW14mXSspLyk7CiAgICAgIHVybCA9IHVybFsxXTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgICB9LAogIH0pOwp9KSgpOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXih3d3dcLik/YWRiXC51ZyQvLAogICAgICAgIC9eKHd3d1wuKT9seW5rXC5teSQvLAogICAgICAgIC9eKHd3d1wuKT9hZHlvdVwuKGNvfG1lKSQvLAogICAgICBdLAogICAgICBwYXRoOiAvXig/IVwvKD86cHJpdmFjeXx0ZXJtc3xjb250YWN0KFwvLiopP3wjLiopPyQpLiokLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgICBjb25zdCBtID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC90b3BcLmxvY2F0aW9uXC5ocmVmPSIoW14iXSspIi8pOwogICAgICBpZiAobSkgewogICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhtWzFdKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgYXJncyA9IGF3YWl0IGdldEFyZ3VtZW50cygpOwogICAgICB0cnlMaW5rKGFyZ3MpOwogICAgfSwKICB9KTsKICBmdW5jdGlvbiBnZXRBcmd1bWVudHMgKCkgewogICAgY29uc3QgUEFUVEVSTiA9IC9ce1xzKl9hcmdzW159XStcfVtefV0rXH0vOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IG0gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoUEFUVEVSTik7CiAgICAgIGlmIChtKSB7CiAgICAgICAgcmVzb2x2ZShtKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7CiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7CiAgICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHsKICAgICAgICAgICAgaWYgKG5vZGUubG9jYWxOYW1lID09PSAnc2NyaXB0JykgewogICAgICAgICAgICAgIGNvbnN0IG0gPSBub2RlLnRleHRDb250ZW50Lm1hdGNoKFBBVFRFUk4pOwogICAgICAgICAgICAgIGlmIChtKSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICByZXNvbHZlKG0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsKICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgIH0pOwogICAgfSkudGhlbigobSkgPT4gewogICAgICByZXR1cm4gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmV2aWwoYCgke21bMF19KWApOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHRyeUxpbmsgKGFyZ3MpIHsKICAgIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArICcvc2tpcF90aW1lcic7CiAgICBjb25zdCBpID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucG9zdCh1cmwsIGFyZ3MpLnRoZW4oKHRleHQpID0+IHsKICAgICAgICBjb25zdCBqaiA9IEpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgaWYgKCFqai5lcnJvcnMgJiYgamoubWVzc2FnZXMpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaSk7CiAgICAgICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoamoubWVzc2FnZXMudXJsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgMTAwMCk7CiAgfQp9KSgpOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eYWRmXC5seSQvLAogICAgICBwYXRoOiAvXlwvcmVkaXJlY3RpbmdcLyguKykkLywKICAgIH0sCiAgICBhc3luYyBzdGFydCAobSkgewogICAgICBjb25zdCB1cmwgPSBhdG9iKG0ucGF0aFsxXSk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh1cmwpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBwYXRoOiAvXC9sb2NrZWQkLywKICAgICAgcXVlcnk6IC91cmw9KFteJl0rKS8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKG0pIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlc2V0Q29va2llcygpOwogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2V0Q29va2llKCdGTFlTRVNTSUQnLCBnZW5lcmF0ZVJhbmRvbVNlc3Npb25Db29raWUoNDApKTsKICAgICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG0ucXVlcnlbMV0pOwogICAgICBpZiAodXJsLm1hdGNoKC9eaHR0cC8pKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGRvY3VtZW50LnJlZmVycmVyKTsKICAgICAgfQogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBwYXRoOiAvcHVzaHJlZGlyZWN0LywKICAgICAgcXVlcnk6IC8uKmRlc3Q9KFteJl0rKS8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKG0pIHsKICAgICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG0ucXVlcnlbMV0pOwogICAgICBpZiAodXJsLm1hdGNoKC9eaHR0cC8pKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgICAgIH0KICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgcXVlcnk6IC9scD1hZGZseV9hbGxvdyYuKmhyZWY9KFteJl0rKS8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKG0pIHsKICAgICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG0ucXVlcnlbMV0pOwogICAgICBpZiAodXJsLm1hdGNoKC9eaHR0cC8pKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgICAgIH0KICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGUgKCkgewogICAgICBjb25zdCBoID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2h0bWxbaWQ9Im1haW5faHRtbCJdJyk7CiAgICAgIGlmIChoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBzdGFydCAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuZG9jdW1lbnQud3JpdGUgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9wOwogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LmJ0b2EgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9wOwogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZXRDb29raWUoJ0ZMWVNFU1NJRCcsIGdlbmVyYXRlUmFuZG9tU2Vzc2lvbkNvb2tpZSg0MCkpOwogICAgICBjb25zdCBjbG9zZSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCdkaXZbb25jbGljaz0iY2xvc2VfYmFyKCk7Il0nKTsKICAgICAgaWYgKGNsb3NlKSB7CiAgICAgICAgY2xvc2UuY2xpY2soKTsKICAgICAgfQogICAgICBsZXQgcnYgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uZ2V0KGxvY2F0aW9uLmhyZWYsICcnLCB7CiAgICAgICAgJ09yaWdpbic6IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ub25lLAogICAgICAgICdSZWZlcmVyJzogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLm5vbmUsCiAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9uZSwKICAgICAgfSk7CiAgICAgIHJ2ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnRvRE9NKHJ2KTsKICAgICAgcnYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL3ZhciB5c21tID0gJyhbXiddKyknLywgcnYpOwogICAgICBydiA9IHJ2WzFdOwogICAgICBydiA9IGRlY29kZVRva2VuKHJ2KTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHJ2KTsKICAgIH0sCiAgfSk7CiAgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TZXNzaW9uQ29va2llIChsZW5ndGgpIHsKICAgIGNvbnN0IHJ2ID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICAgIHJ2LnB1c2goTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuY2hhckF0KDIpKTsKICAgIH0KICAgIHJldHVybiBydi5qb2luKCcnKTsKICB9CiAgZnVuY3Rpb24gZGVjb2RlVG9rZW4gKHRva2VuKSB7CiAgICBsZXQgYSA9ICcnOwogICAgbGV0IGIgPSAnJzsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW4ubGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKGkgJSAyID09PSAwKSB7CiAgICAgICAgYSA9IGEgKyB0b2tlbi5jaGFyQXQoaSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYiA9IHRva2VuLmNoYXJBdChpKSArIGI7CiAgICAgIH0KICAgIH0KICAgIHRva2VuID0gYSArIGI7CiAgICBhID0gdG9rZW4uc3BsaXQoJycpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7CiAgICAgIGlmICgvXGQvLnRlc3QoYVtpXSkpIHsKICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKSB7CiAgICAgICAgICBpZiAoL1xkLy50ZXN0KGFbal0pKSB7CiAgICAgICAgICAgIGIgPSBhW2ldIF4gYVtqXTsKICAgICAgICAgICAgaWYgKGIgPCAxMCkgewogICAgICAgICAgICAgIGFbaV0gPSBiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGkgPSBqOwogICAgICAgICAgICBqID0gYS5sZW5ndGg7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB0b2tlbiA9IGEuam9pbignJyk7CiAgICB0b2tlbiA9IGF0b2IodG9rZW4pOwogICAgdG9rZW4gPSB0b2tlbi5zdWJzdHJpbmcoMTYpOwogICAgdG9rZW4gPSB0b2tlbi5zdWJzdHJpbmcoMCwgdG9rZW4ubGVuZ3RoIC0gMTYpOwogICAgaWYgKGxvY2F0aW9uLmhhc2gpIHsKICAgICAgdG9rZW4gKz0gbG9jYXRpb24uaGFzaDsKICAgIH0KICAgIHJldHVybiB0b2tlbjsKICB9Cn0pKCk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9hZGZvYy51cy8qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LmJvZHk7CiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICAgIGxldCBvID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJyNzaG93U2tpcCcpOwogICAgICAgIGlmIChvKSB7CiAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICBvID0gby5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgICAgICByZXNvbHZlKG8uaHJlZik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyb290LCB7CiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICAgIHN1YnRyZWU6IHRydWUsCiAgICAgIH0pOwogICAgfSk7CiAgICBjb25zdCB1cmwgPSBhd2FpdCBwcm9taXNlOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP2FkbG90XC51cyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICBjb25zdCBzY3JpcHQgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoJ2Zvcm0nKTsKICAgIGNvbnN0IHAgPSAvbmFtZT0nKFteJ10rKScgdmFsdWU9JyhbXiddKyknL2c7CiAgICBjb25zdCBvcHQgPSB7CiAgICAgIGltYWdlOiAnICcsCiAgICB9OwogICAgbGV0IHRtcCA9IG51bGw7CiAgICB3aGlsZSAoKHRtcCA9IHAuZXhlYyhzY3JpcHQpKSkgewogICAgICBvcHRbdG1wWzFdXSA9IHRtcFsyXTsKICAgIH0KICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluaygnJywgewogICAgICBwYXRoOiBvcHQsCiAgICB9KTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmFkbXlcLmxpbmskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZm9ybS5lZGl0X2xpbmsnKTsKICAgIGYuc3VibWl0KCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP2FoLWluZm9ybWF0aXF1ZVwuY29tJC8sCiAgICBwYXRoOiAvXlwvWmlwVXJsLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3ppcDMgYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15haFwucGUkLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGxldCBzY3JpcHQgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoJ2V2YWwnKTsKICAgICAgc2NyaXB0ID0gZGVjb2RlU2NyaXB0KHNjcmlwdCk7CiAgICAgIHNjcmlwdCA9IGRlY29kZVNjcmlwdChzY3JpcHQpOwogICAgICBzY3JpcHQgPSBkZWNvZGVTY3JpcHQoc2NyaXB0KTsKICAgICAgbGV0IHBhdGggPSBzY3JpcHQubWF0Y2goLyhbXjs9IF0rKT0oW14rIDtdKylcKyJcLiJcKyhbXisgXSspXCsiXC4iXCsoW147IF0rKTsvKTsKICAgICAgaWYgKCFwYXRoKSB7CiAgICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzY3JpcHQgY2hhbmdlZCcpOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvd1twYXRoWzJdXSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uaW5mbygncmVjYXB0Y2hhJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHBhdGggPSBbX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvd1twYXRoWzJdXSwgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvd1twYXRoWzNdXSwgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvd1twYXRoWzRdXV0uam9pbignLicpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgICB9LAogIH0pOwogIGZ1bmN0aW9uIGRlY29kZVNjcmlwdCAoZW5jb2RlZCkgewogICAgbGV0IGEgPSBlbmNvZGVkLm1hdGNoKC9eXHMqO2V2YWxcKCguKylcKTtccyokLyk7CiAgICBhID0gYVsxXTsKICAgIGNvbnN0IGIgPSBhLm1hdGNoKC9eKC4rKVwoJyhbXiddKyknLCcoW14nXSspJywnKFteJ10rKScsJyhbXiddKyknXCkkLyk7CiAgICBjb25zdCBjID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmV2aWwoYCgke2JbMV19KWApOwogICAgcmV0dXJuIGMoYlsyXSwgYlszXSwgYls0XSwgYls1XSk7CiAgfQp9KSgpOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eYWthXC5nciQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdpZnJhbWUjeW91cmxzLWZyYW1lJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobC5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15hbFwubHkkLywKICAgICAgL15hbGx5XC5zaCQvLAogICAgICAvXmFsbHlcLnNob3J0ZW5zXC5jbyQvLAogICAgICAvXihkYXVzZWx8b25sZSlcLmNvJC8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI2h0bWxfZWxlbWVudCcpOwogICAgaWYgKGkpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnI21lc3NhJyk7CiAgICAgIGkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoLyJocmVmIiwiKFteIl0rKSIgXCsgaGFzaFwpXC5yZW1vdmUvKTsKICAgIGlmICghaSkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2Fybignc2l0ZSBjaGFuZ2VkJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGkgPSBpWzFdICsgbG9jYXRpb24uaGFzaDsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhpKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKHd3d1wuKT9hbGxrZXlzaG9wXC5jb20kLywKICAgICAgL15jc2hvcnRcLm9yZyQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBtYXRjaGVzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC93aW5kb3dcLmxvY2F0aW9uXC5ocmVmID0gIihbXiJdKykiLyk7CiAgICBtYXRjaGVzID0gbWF0Y2hlc1sxXTsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5udWtlKG1hdGNoZXMpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG1hdGNoZXMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eYXBrbW9kaWZcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdbbmFtZT0iZ2V0dXJsIl0nKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYSk7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgY29uc3QgYWpheFBhdHRlcm4gPSAvXCQucG9zdFwoJyhbXiddKiknW157XSsoXHtccypvcHQ6XHMqJ21ha2VfbG9nJ1tefV0rXH1ccypcfSksL2k7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15iY1wudmMkLywKICAgICAgcGF0aDogL14uKyhodHRwcz86XC9cLy4rKSQvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0IChtKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhtLnBhdGhbMV0gKyBkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggKyBkb2N1bWVudC5sb2NhdGlvbi5oYXNoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15iY1wudmMkLywKICAgICAgcGF0aDogL15cLy4rLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgICBjb25zdCB0b2tlbiA9IGZpbmRBSkFYVG9rZW4oKTsKICAgICAgY29uc3QgdGltZSA9IGZha2VBSkFYVG9rZW4oKTsKICAgICAgY29uc3QgdXJsID0gYC9mbHkvYWpheC5waHA/d2RzPSR7dG9rZW4ud2RzfSZ0aW1lPSR7dGltZX1gOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg1MDAwKTsKICAgICAgbGV0IHJ2ID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnBvc3QodXJsLCB7CiAgICAgICAgeGRmOiB7CiAgICAgICAgICBhZmc6IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cudFosCiAgICAgICAgICBiZmc6IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuY1csCiAgICAgICAgICBjZmc6IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuY0gsCiAgICAgICAgICBqa2k6IHRva2VuLmpraSwKICAgICAgICAgIGRmZzogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5zVywKICAgICAgICAgIGVmZzogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5zSCwKICAgICAgICB9LAogICAgICAgIG9qazogdG9rZW4ub2prLAogICAgICB9KTsKICAgICAgcnYgPSBKU09OLnBhcnNlKHJ2KTsKICAgICAgaWYgKHJ2LmVycm9yKSB7CiAgICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdhdXRoIGVycm9yJyk7CiAgICAgIH0KICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHJ2Lm1lc3NhZ2UudXJsKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogWwogICAgICAgIC9ebXlsaW5rXC51cyQvLAogICAgICAgIC9eeGFmb3hcLmNvbSQvLAogICAgICAgIC9eenBvelwubmV0JC8sCiAgICAgICAgL153d3dcLmFkamV0XC5ldSQvLAogICAgICBdLAogICAgICBwYXRoOiAvXlwvLisvLAogICAgfSwKICAgIHJlYWR5OiBydW4sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL155c2VhclwuY2gkLywKICAgICAgcGF0aDogL15cLy4rLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGEgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnZGl2LmZseV9oZWFkIGEuY2xvc2UnKTsKICAgICAgY29uc3QgZiA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCdpZnJhbWUuZmx5X2ZyYW1lJyk7CiAgICAgIGlmIChhICYmIGYpIHsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZi5zcmMpOwogICAgICB9IGVsc2UgewogICAgICAgIGF3YWl0IHJ1bigpOwogICAgICB9CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eYWQ1XC5ldSQvLAogICAgICBwYXRoOiAvXlwvW14uXSskLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgICBjb25zdCBzID0gc2VhcmNoU2NyaXB0KHRydWUpOwogICAgICBsZXQgbSA9IHMuc2NyaXB0Lm1hdGNoKC8oPGZvcm0gbmFtZT0iZm9ybTEibWV0aG9kPSJwb3N0Ii4qKD8hPFxcZm9ybT4pPFwvZm9ybT4pLyk7CiAgICAgIGlmICghbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBtID0gbVsxXTsKICAgICAgY29uc3QgdHogPSAtKG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwKTsKICAgICAgbSA9IG0ucmVwbGFjZSgnXCcrdGltZXpvbmUrXCcnLCB0eik7CiAgICAgIGNvbnN0IGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgZC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ0Fkc0J5cGFzc2VyRlRXJyk7CiAgICAgIGQuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5Om5vbmU7Jyk7CiAgICAgIGQuaW5uZXJIVE1MID0gbTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkKTsKICAgICAgT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNBZHNCeXBhc3NlckZUVyA+IGZvcm1bbmFtZT1mb3JtMV0nKS5zdWJtaXQoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL150cjVcLmluJC8sCiAgICAgIHBhdGg6IC9eXC8uKy8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBhd2FpdCBydW4odHJ1ZSk7CiAgICB9LAogIH0pOwogIGZ1bmN0aW9uIGRlY29tcHJlc3MgKHNjcmlwdCwgdW56aXApIHsKICAgIGlmICghdW56aXApIHsKICAgICAgcmV0dXJuIHNjcmlwdDsKICAgIH0KICAgIGxldCBtYXRjaGVzID0gc2NyaXB0Lm1hdGNoKC9ldmFsKC4qKS8pOwogICAgaWYgKCFtYXRjaGVzKSB7CiAgICAgIHRocm93IG5ldyBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uQWRzQnlwYXNzZXJFcnJvcignbm8gc2NyaXB0IG1hdGNoZXMgL2V2YWwoLiopLycpOwogICAgfQogICAgbWF0Y2hlcyA9IG1hdGNoZXNbMV07CiAgICBzY3JpcHQgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uZXZpbChtYXRjaGVzKTsKICAgIHJldHVybiBzY3JpcHQ7CiAgfQogIGZ1bmN0aW9uIHNlYXJjaFNjcmlwdCAodW56aXApIHsKICAgIGxldCBjb250ZW50ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKCdtYWtlX2xvZycpOwogICAgaWYgKGNvbnRlbnQpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXJlY3Q6IGZhbHNlLAogICAgICAgIHNjcmlwdDogZGVjb21wcmVzcyhjb250ZW50LCB1bnppcCksCiAgICAgIH07CiAgICB9CiAgICBjb250ZW50ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKCdjbGlja19sb2cnKTsKICAgIGlmIChjb250ZW50KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGlyZWN0OiB0cnVlLAogICAgICAgIHNjcmlwdDogZGVjb21wcmVzcyhjb250ZW50LCB1bnppcCksCiAgICAgIH07CiAgICB9CiAgICB0aHJvdyBuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IoJ3NjcmlwdCBjaGFuZ2VkJyk7CiAgfQogIGZ1bmN0aW9uIGtub2NrU2VydmVyIChzY3JpcHQsIGRpcnR5Rml4KSB7CiAgICBjb25zdCBtYXRjaGVzID0gc2NyaXB0Lm1hdGNoKGFqYXhQYXR0ZXJuKTsKICAgIGlmICghbWF0Y2hlcykgewogICAgICB0aHJvdyBuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IoJyhpbiBrbm9jayBzZXJ2ZXIpIG5vIHNjcmlwdCBtYXRjaGVzICQucG9zdCcpOwogICAgfQogICAgY29uc3QgbWFrZV91cmwgPSBtYXRjaGVzWzFdOwogICAgY29uc3QgbWFrZV9vcHRzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmV2aWwoYCgke21hdGNoZXNbMl19KWApOwogICAgY29uc3QgaSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnBvc3QobWFrZV91cmwsIG1ha2Vfb3B0cykudGhlbihmdW5jdGlvbiAodGV4dCkgewogICAgICAgIGlmIChkaXJ0eUZpeCkgewogICAgICAgICAgdGV4dCA9IHRleHQubWF0Y2goL1x7LitcfS8pWzBdOwogICAgICAgIH0KICAgICAgICBjb25zdCBqaiA9IEpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgaWYgKGpqLm1lc3NhZ2UpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaSk7CiAgICAgICAgICByZXR1cm4gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGpqLm1lc3NhZ2UudXJsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgMTAwMCk7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHJ1biAoZGlydHlGaXgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgbGV0IHJlc3VsdCA9IHNlYXJjaFNjcmlwdCh0cnVlKTsKICAgIGlmICghcmVzdWx0LmRpcmVjdCkgewogICAgICBrbm9ja1NlcnZlcihyZXN1bHQuc2NyaXB0LGRpcnR5Rml4KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdCA9IHJlc3VsdC5zY3JpcHQubWF0Y2goL3RvcFwubG9jYXRpb25cLmhyZWY9JyhbXiddKyknLyk7CiAgICAgIGlmICghcmVzdWx0KSB7CiAgICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzY3JpcHQgY2hhbmdlZCcpOwogICAgICB9CiAgICAgIHJlc3VsdCA9IHJlc3VsdFsxXTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHJlc3VsdCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGZpbmRBSkFYVG9rZW4gKCkgewogICAgY29uc3QgcnYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoJy9mbHkvYWpheC5waHAnKTsKICAgIGlmICghcnYpIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzY3JpcHQgY2hhbmdlZCcpOwogICAgfQogICAgbGV0IHdkcyA9IHJ2Lm1hdGNoKC9cP3dkcz0oW14mXSspLyk7CiAgICBpZiAoIXdkcykgewogICAgICB0aHJvdyBuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IoJ3NjcmlwdCBjaGFuZ2VkJyk7CiAgICB9CiAgICB3ZHMgPSB3ZHNbMV07CiAgICBsZXQgamtpID0gcnYubWF0Y2goL2praTpccyonKFteJ10rKScvKTsKICAgIGlmICghamtpKSB7CiAgICAgIHRocm93IG5ldyBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uQWRzQnlwYXNzZXJFcnJvcignc2NyaXB0IGNoYW5nZWQnKTsKICAgIH0KICAgIGpraSA9IGpraVsxXTsKICAgIGxldCBvamsgPSBydi5tYXRjaCgvb2prOlxzKicoW14nXSspJy8pOwogICAgaWYgKCFvamspIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzY3JpcHQgY2hhbmdlZCcpOwogICAgfQogICAgb2prID0gb2prWzFdOwogICAgcmV0dXJuIHsKICAgICAgd2RzOiB3ZHMsCiAgICAgIGpraTogamtpLAogICAgICBvams6IG9qaywKICAgIH07CiAgfQogIGZ1bmN0aW9uIGZha2VBSkFYVG9rZW4gKCkgewogICAgY29uc3Qgc2tpcEFkID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2Rpdi5mbHlfaGVhZCBzcGFuI3JlZGlyZWN0aW4nKS5wYXJlbnRFbGVtZW50OwogICAgY29uc3QgbWFyZ2luID0gNjsKICAgIGNvbnN0IGZha2VQYWdlWCA9IHNraXBBZC5vZmZzZXRMZWZ0ICsgbWFyZ2luICsgNTAgKyAoTWF0aC5yYW5kb20oKSAqIDEwKTsKICAgIGNvbnN0IGZha2VQYWdlWSA9IHNraXBBZC5vZmZzZXRUb3AgKyBtYXJnaW4gKyAxNSArIChNYXRoLnJhbmRvbSgpICogMSk7CiAgICBjb25zdCBwbyA9IGZha2VQYWdlWCArICcsJyArIGZha2VQYWdlWTsKICAgIGNvbnN0IHBvc1ggPSBqUXVlcnlPZmZzZXQoc2tpcEFkKS5sZWZ0ICsgbWFyZ2luOwogICAgY29uc3QgcG9zWSA9IGpRdWVyeU9mZnNldChza2lwQWQpLnRvcCArIG1hcmdpbjsKICAgIGNvbnN0IHBvcyA9IChmYWtlUGFnZVggLSBwb3NYKSArICcsJyArIChmYWtlUGFnZVkgLSBwb3NZKTsKICAgIGNvbnN0IHRzdGFfID0gTWF0aC5mbG9vcigoNSArIE1hdGgucmFuZG9tKCkpICogMTAwMCk7CiAgICBjb25zdCB0aW1lID0gcG8gKyAnOicgKyBwb3MgKyAnOicgKyB0c3RhXzsKICAgIHJldHVybiB0aW1lOwogIH0KICBmdW5jdGlvbiBqUXVlcnlPZmZzZXQgKGVsZW1lbnQpIHsKICAgIGNvbnN0IHIgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgcmV0dXJuIHsKICAgICAgdG9wOiByLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLAogICAgICBsZWZ0OiByLmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsCiAgICB9OwogIH0KfSkoKTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/YmlnbGlzdG9md2Vic2l0ZXNcLmNvbSQvLAogICAgcGF0aDogL15cL2dvXC8oXHcrXC5cdyspJC8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKCdodHRwOi8vJyArIG0ucGF0aFsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly93d3cuYmlsZC5tZS9iaWxkLnBocD9maWxlPSonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI0JpbGQnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhpLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9iaWxkci5uby92aWV3LyonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaW1nLmJpbGRlJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IFsKICAgIHsKICAgICAgaG9zdDogL14od3d3XC4pPyhbYS16QS1aMC05XStcLik/YmluYm94XC5pbyQvLAogICAgICBwYXRoOiAvXC9vXC8oW2EtekEtWjAtOV0rKS8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXmdzbXpvbmVcLnNpdGUkLywKICAgICAgcGF0aDogL1wvZ29cLyhbYS16QS1aMC05XSspLywKICAgIH0sCiAgXSwKICBhc3luYyBzdGFydCAobSkgewogICAgY29uc3QgZGlyZWN0X2xpbmsgPSB3aW5kb3cuYXRvYihtLnBhdGhbMV0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGRpcmVjdF9saW5rKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmJsb2dcLmxhbmd3XC53ZWJcLmlkJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5nZXRDb29raWUoJ3dwYl92aXNpdF90aW1lJykpKTsKICAgIGlmICh1cmwubWF0Y2goL15odHRwLykpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlc2V0Q29va2llcygpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmJsdWVtZWRpYWZpbGVzXC5jb20kLywKICAgIHBhdGg6IC9eXC9jcmVhdGluZ2xpbmtzLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGIgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL0ZpbmlzaE1lc3NhZ2UgPSAnPGEgaHJlZj0iKFteIl0rKSIgPi8pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGJbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eY2F0Y3V0XC5uZXQkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBhID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9kZWNvZGVVUklDb21wb25lbnRcKCcoW14nXSspJ1wpLyk7CiAgICBhID0gZGVjb2RlVVJJQ29tcG9uZW50KGFbMV0pOwogICAgYSA9IG5ldyBVUkwoYSk7CiAgICBhID0gYS5zZWFyY2hQYXJhbXMuZ2V0KCdhJyk7CiAgICBhID0gYXRvYihhKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/Y2xpXC5ncyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdhLlJlZGlyZWN0TGluaycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15jbGtcLmltJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgIGNvbnN0IG1hdGNoZXMgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL1wkXCgiXC5jb3VudGRvd24iXClcLmF0dHJcKCJocmVmIiwiKFteIl0rKSJcKS8pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG1hdGNoZXNbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eY29jb2xlZWNoXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLmJ0bi5idG4tYmxvY2suYnRuLXN1Y2Nlc3MnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhLmhyZWYpOwogIH0sCn0pOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXihjb2VnfGRpc2luZ2thdClcLmluJC8sCiAgICAgICAgL153d3dcLih0ZWxvbmRhc211fHNpb3Rvbmd8c2loZXJwKVwuY29tJC8sCiAgICAgICAgL153d3dcLmdyZWdldFwuc3BhY2UkLywKICAgICAgXSwKICAgICAgcGF0aDogL15cLy4rJC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKG0pIHsKICAgICAgY29uc3QgbWFwcGVyID0gaG9zdE1hcHBlcihtLmhvc3RbMF0pOwogICAgICBjb25zdCBiNjQgPSBtYXBwZXIoKS5tYXRjaCgvXD9yPShbXHcvXSs9ezAsMn0pLyk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhdG9iKGI2NFsxXSkpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXnNpcGt1clwubmV0JC8sCiAgICAgIHBhdGg6IFsKICAgICAgICAvXlwvXHcrJC8sCiAgICAgICAgL15cL21lbnVqdWxpbmtcLy8sCiAgICAgIF0sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBsZXQgZCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjdGVzdGFwayA+IGRpdicpOwogICAgICBkID0gZC5vbmNsaWNrLnRvU3RyaW5nKCk7CiAgICAgIGQgPSBkLm1hdGNoKC93aW5kb3dcLm9wZW5cKCcoW14nXSspJy8pOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZFsxXSk7CiAgICB9LAogIH0pOwogIGZ1bmN0aW9uIGhvc3RNYXBwZXIgKGhvc3QpIHsKICAgIHN3aXRjaCAoaG9zdCkgewogICAgY2FzZSAnZGlzaW5na2F0LmluJzoKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2EuYnRuLWJsb2NrLnJlZGlyZWN0Jyk7CiAgICAgICAgcmV0dXJuIGEuaHJlZjsKICAgICAgfTsKICAgIGNhc2UgJ2NvZWcuaW4nOgogICAgY2FzZSAnd3d3LnRlbG9uZGFzbXUuY29tJzoKICAgIGNhc2UgJ3d3dy5zaW90b25nLmNvbSc6CiAgICBjYXNlICd3d3cuc2loZXJwLmNvbSc6CiAgICBjYXNlICd3d3cuZ3JlZ2V0LnNwYWNlJzoKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5kb3dubG9hZC1saW5rIGEnKTsKICAgICAgICByZXR1cm4gYS5ocmVmOwogICAgICB9OwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQp9KSgpOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL14oPzooXHcrKVwuKT9jb2ludXJsXC5jb20kLywKICAgICAgL14oPzooXHcrKVwuKT9jdXJcLmx2JC8sCiAgICBdLAogICAgcGF0aDogL15cLyhbLVx3XSspJC8sCiAgfSwKICBhc3luYyByZWFkeSAobSkgewogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICBjb25zdCBob3N0ID0gJ2h0dHA6Ly9jdXIubHYvcmVkaXJlY3RfY3VybHYucGhwJzsKICAgIGNvbnN0IHBhcmFtID0gbS5ob3N0WzFdID09PSB1bmRlZmluZWQgPyB7CiAgICAgIGNvZGU6IG0ucGF0aFsxXSwKICAgIH0gOiB7CiAgICAgIHpvbmU6IG0uaG9zdFsxXSwKICAgICAgbmFtZTogbS5wYXRoWzFdLAogICAgfTsKICAgIGNvbnN0IG1haW5GcmFtZUNvbnRlbnQgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uZ2V0KGhvc3QsIHBhcmFtKTsKICAgIGxldCBkb2NNYWluRnJhbWUgPSBudWxsOwogICAgdHJ5IHsKICAgICAgZG9jTWFpbkZyYW1lID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnRvRE9NKG1haW5GcmFtZUNvbnRlbnQpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aHJvdyBuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IoJ21haW4gZnJhbWUgY2hhbmdlZCcpOwogICAgfQogICAgY29uc3QgckV4dHJhY3RMaW5rID0gL29uY2xpY2s9Im9wZW5fdXJsXCgnKFteJ10rKScsXHMqJ2dvJ1wpLzsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5mb3JFYWNoKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kJCgnaWZyYW1lJywgZG9jTWFpbkZyYW1lKSwgKGN1cnJGcmFtZSkgPT4gewogICAgICBjb25zdCBjdXJyRnJhbWVBZGRyID0gY3VyckZyYW1lLmdldEF0dHJpYnV0ZSgnc3JjJyk7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5nZXQoY3VyckZyYW1lQWRkcikudGhlbigoY3VyckZyYW1lQ29udGVudCkgPT4gewogICAgICAgIGNvbnN0IGFSZWFsTGluayA9IHJFeHRyYWN0TGluay5leGVjKGN1cnJGcmFtZUNvbnRlbnQpOwogICAgICAgIGlmIChhUmVhbExpbmsgPT09IHVuZGVmaW5lZCB8fCBhUmVhbExpbmtbMV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCByZWFsTGluayA9IGFSZWFsTGlua1sxXTsKICAgICAgICByZXR1cm4gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHJlYWxMaW5rKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmNvbXlvbmV0XC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGlucHV0ID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2lucHV0W25hbWU9ImVudGVyIl0nKTsKICAgIGlucHV0LmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15jcm9ja29saW5rc1wuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBjID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5oZWFkID4gZGl2Om50aC1jaGlsZCgzKSA+IC5za2lwJyk7CiAgICBjLmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15kYXduc3RhdGlvblwuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyN0aWRha2FrYW5zZWxhbWFueWEgPiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmR1cmxcLm1lJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2FbY2xhc3M9InByb2NlZWRCdG4iXScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXmVhc3l1cmxcLm5ldCQvLAogICAgICAvXihhdHV8Y2xpY2t0aHJ1fHJlZGlyZWN0c3xyZWFkdGhpcylcLmNhJC8sCiAgICAgIC9eZ29zaHJpbmtcLmNvbSQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZnJhbWVbbmFtZT1tYWluXScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGYuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKHd3d1wuKT9zaGlua1wubWUkLywKICAgICAgL14oc2hvbnxsaWtuKVwueHl6JC8sCiAgICAgIC9eZmFzXC5saSQvLAogICAgICAvXih3d3dcLik/Y3JvY29cLihtZXxzaXRlKSQvLAogICAgICAvXmNwbWxpbmtcLm5ldCQvLAogICAgXSwKICAgIHBhdGg6IC9eXC9bXHctXSskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGlmICghX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJyNjYXB0Y2hhJykpIHsKICAgICAgbGV0IGYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI3NraXAnKTsKICAgICAgaWYgKGYpIHsKICAgICAgICBmLnN1Ym1pdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBmID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNidG4tbWFpbicpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZi5ocmVmKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnZGl2W2NsYXNzJD1PdmVybGF5XScpOwogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLmJsb2NrKChub2RlKSA9PiB7CiAgICAgIGlmIChub2RlLmNsYXNzTmFtZS5tYXRjaCgvT3ZlcmxheSQvKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlmIChub2RlLmxvY2FsTmFtZSA9PT0gJ2RpdicpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgJzIxNDc0ODM2NDcnLAogICAgICAgICAgJzInLAogICAgICAgIF0uc29tZSgoeikgPT4gewogICAgICAgICAgcmV0dXJuIHogPT09IG5vZGUuc3R5bGUuekluZGV4OwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sIGRvY3VtZW50LmJvZHkpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IFsKICAgIHsKICAgICAgaG9zdDogL15jcG1saW5rXC5uZXQkLywKICAgICAgcGF0aDogL15cL2dvXC9bXHctXSskLywKICAgIH0sCiAgICB7CiAgICAgIGhvc3Q6IC9eKHd3d1wuKT9jcm9jb1wuKG1lfHNpdGUpJC8sCiAgICAgIHBhdGg6IC9eXC9va1wvXHcrJC8sCiAgICB9LAogIF0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2J0bi1tYWluJyk7CiAgICBjb25zdCBpID0gYS5ocmVmLmxhc3RJbmRleE9mKCdodHRwJyk7CiAgICBhID0gYS5ocmVmLnN1YnN0cihpKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eZmFzXC5saSQvLAogICAgICAvXih3d3dcLik/c2hpbmtcLm1lJC8sCiAgICBdLAogICAgcGF0aDogL15cL2dvXC9cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3NraXAnKTsKICAgIGYuc3VibWl0KCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15maWxlbWVkaWFcLm5ldCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3Qgc2NyaXB0ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC93aW5kb3cubG9jYXRpb24uaHJlZlxzPz1ccz9cKCIoaHR0cC4rPykiXCkvKTsKICAgIGlmIChzY3JpcHQubGVuZ3RoID4gMSkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoc2NyaXB0WzFdKTsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/Zmlsb29wc1wuaW5mbyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjdGV4dCA+IGNlbnRlciBhLCAjdGV4dCA+IGRpdlthbGlnbj1jZW50ZXJdIGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d3xsaW5rcylcLmZpdXh5XC4oY298YnopJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2EuYnRuLmEnKS5ocmVmKTsKICB9Cn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eZ2FtZW1vZFwucHJvJC8sCiAgICBwYXRoOiAvXlwvZG93bmxvYWQtZmlsZVwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGdwID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyN3YWl0LWRvbmUgPiBwID4gYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGdwLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eZ2t1cmxcLnVzJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpZnJhbWUgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2drdXJsLWZyYW1lJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaWZyYW1lLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15nb3RvXC5sb25jYXRcLmluJC8sCiAgICBxdWVyeTogL29wZW49KC4rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgY29uc3QgdXJsID0gYXRvYihhdG9iKG0ucXVlcnlbMV0pKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh1cmwpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15nc3VybFwuKG1lfGluKSQvLAogICAgICAvXihnc3VsfGdldHNsfGdsaW5rcylcLm1lJC8sCiAgICAgIC9eZ3N1clwuaW4kLywKICAgICAgL15nNXVcLnB3JC8sCiAgICAgIC9eZ3VybFwubHkkLywKICAgIF0sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCcjY29udGFpbmVyJyk7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNsaW5rJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYCR7YS5ocmVmfSZhYj0ke19BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cueH1gKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmd1bnRpbmdcLndlYlwuaWQkLywKICAgIHBhdGg6IC9eXC9cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYS5idG4tYmxvY2sucmVkaXJlY3QnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaGVhbHRoeWtrXC5jb20kLywKICAgIHBhdGg6IC9eXC93b3JkcHJlc3NcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBoID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNjb250ZW50IGNlbnRlciBidXR0b24nKTsKICAgIGguY2xpY2soKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmhlbi10YXlcLm5ldCQvLAogICAgcGF0aDogL15cL2dvXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjZG93bmxvYWRfdXJsIGRpdiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaC5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmhvdHNob3J0dXJsXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGZyYW1lID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ZyYW1lW3Njcm9sbGluZz15ZXNdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZnJhbWUuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmlpdlwucGwkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBkID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNjb3VudGluZycpOwogICAgbGV0IHJ2ID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnBvc3QobG9jYXRpb24ucGF0aG5hbWUsIHsKICAgICAgYmxvY2tlcjogMCwKICAgICAgc2FsdDogZC5kYXRhc2V0LnNhbHQsCiAgICB9LCB7CiAgICAgICdYLU9DVE9CRVItUkVRVUVTVC1IQU5ETEVSJzogJ29uQWZ0ZXJTaG9ydGN1dFZpZXcnLAogICAgICAnWC1PQ1RPQkVSLVJFUVVFU1QtUEFSVElBTFMnOiAnc2hvcnRjdXQvbGlua19zaG93JywKICAgIH0pOwogICAgcnYgPSBKU09OLnBhcnNlKHJ2KTsKICAgIGQgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0udG9ET00ocnZbJ3Nob3J0Y3V0L2xpbmtfc2hvdyddKTsKICAgIHJ2ID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2EnLCBkKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhydi5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXml0d1wubWUkLywKICAgIHBhdGg6IC9eXC9yXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuZ28tZm9ybScpOwogICAgZi5zdWJtaXQoKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXml0eVwuaW0kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBmID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJyNtYWluJyk7CiAgICBpZiAoZikgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZi5zcmMpOwogICAgICByZXR1cm47CiAgICB9CiAgICBbLCAsIGZdID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmZpbmQoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQkKCdmcmFtZScpLCAoZnJhbWUpID0+IHsKICAgICAgaWYgKGZyYW1lLnNyYy5pbmRleE9mKCdpbnRlcmhlYWRlci5waHAnKSA8IDApIHsKICAgICAgICByZXR1cm4gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLm5vbmU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZyYW1lLnNyYzsKICAgIH0pOwogICAgaWYgKGYgIT09IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ub25lKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhmKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZiA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygva3J5cHRlZD0oW14mXSspLyk7CiAgICBpZiAoIWYpIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzaXRlIGNoYW5nZWQnKTsKICAgIH0KICAgIGYgPSBmWzFdOwogICAgY29uc3QgZGF0YSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuZGVzKCdrc25zbG10bWswdjRQZHZpdXNhanF1JywgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5oZXhUb1N0cmluZyhmKSwgMCwgMCk7CiAgICBpZiAoZGF0YSkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoJ2h0dHA6Ly9pdHkuaW0vMTEwNF8yMV81MDg0Nl8nICsgZGF0YSk7CiAgICB9CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP2tpbmdvZnNocmlua1wuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBsID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyN0ZXh0cmVzdWx0ID4gYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGwuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogWwogICAgewogICAgICBob3N0OiAvXnN0XC5rdXJvZ2F6ZVwubmV0JC8sCiAgICAgIHF1ZXJ5OiAvcj0oLispLywKICAgIH0sCiAgICB7CiAgICAgIGhvc3Q6IC9ec1wueXVraXN1YnNcLmNvbSQvLAogICAgICBxdWVyeTogL2xpbms9KC4rKS8sCiAgICB9LAogIF0sCiAgYXN5bmMgc3RhcnQgKG0pIHsKICAgIGNvbnN0IHIgPSBhdG9iKG0ucXVlcnlbMV0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHIpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ec3RcLmt1cm9nYXplXC5uZXQkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYS5yZWRpcmVjdCcpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15kbFwubGF5YXJrYWNhMjFcLnZpcCQvLAogICAgcGF0aDogL15cL2lmcmFtZVwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGx2ID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5jb250ZW50ICNza2lwIGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsdi5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmRsXC5sYXlhcmthY2EyMVwudmlwJC8sCiAgICBwYXRoOiAvXlwvKC4rKVwvLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoJy9pZnJhbWUvdG9wLnBocD9zbHVnPScgKyBtLnBhdGhbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ebGVlY2hhbGxcLmRvd25sb2FkJC8sCiAgICBwYXRoOiAvXlwvZmlsZVwvKFthLXpBLVowLTkvPV0rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGRlY29kZVVSSUNvbXBvbmVudChhdG9iKG0ucGF0aFsxXSkpKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL3d3dy5saWVuc2Nhc2guY29tL2wvKicsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjcmVkaXJfYnRuJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/bGlua1wuaW0kLywKICAgIHBhdGg6IC9eXC9cdyskLywKICB9LAogIGFzeW5jIHN0YXJ0ICgpIHsKICAgIGNvbnN0IHRleHQgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucG9zdChkb2N1bWVudC5sb2NhdGlvbi5ocmVmLCB7CiAgICAgIGltYWdlOiAnQ29udGludWUnLAogICAgfSk7CiAgICBjb25zdCBtID0gdGV4dC5tYXRjaCgvd2luZG93XC5sb2NhdGlvblwucmVwbGFjZVwoJyhbXiddKyknXCkvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhtWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmxpbmtcLnRsJC8sCiAgICBwYXRoOiAvXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IG0gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL2V2YWxcKCguK31cKSlcKS8pOwogICAgbSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ldmlsKGAoJHttWzFdfSlgKTsKICAgIGxldCBsID0gbS5tYXRjaCgvKD86XCRcLmFqYXguK3xocmVmPScpKGh0dHAuK3NraXAuK3xodHRwW14nXSspJyxkYXRhLyk7CiAgICBsID0gbFsxXTsKICAgIGlmICghbC5tYXRjaCgvc2tpcC8pKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgdG9rZW4gPSBtLm1hdGNoKC8nWC1DU1JGLVRPS0VOJzonKFteJ10rKSd9LC8pOwogICAgbGV0IHJsID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnBvc3QobCwgJycsIHsKICAgICAgJ1gtQ1NSRi1UT0tFTic6IHRva2VuWzFdLAogICAgfSk7CiAgICBybCA9IEpTT04ucGFyc2UocmwpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHJsLnVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15saW5rNGFkXC5jb20kLywKICAgIHBhdGg6IC9eXC8oLispJC8sCiAgfSwKICBhc3luYyByZWFkeSAobSkgewogICAgbGV0IGQgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZGl2W2lkXj1tb2R1bGVfXScpOwogICAgZCA9IGQuaWQubWF0Y2goL21vZHVsZV8oXGQrKS8pOwogICAgZCA9IGRbMV07CiAgICBjb25zdCB1cmwgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucG9zdCgnZm9ybS5waHA/YmxvY2tfaWQ9JyArIGQsIHsKICAgICAgY21kOiAnZ2V0X3NvdXJjZScsCiAgICAgIGFjdDogJ3dhaXRpbmcnLAogICAgICBpZDogbS5wYXRoWzFdLAogICAgfSk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICB9LAp9KTsKKGZ1bmN0aW9uKCkgewogIGNvbnN0IGhvc3RSdWxlcyA9IFsKICAgIC9eKChbXHddezh9fHd3dylcLik/KGFsbGFuYWxwYXNzfGRyc3RpY2t5ZmluZ2Vyc3x3aGFja3l2aWR6KVwuY29tJC8sCiAgICAvXigoW1x3XXs4fXx3d3cpXC4pPyhsaW5rYmFiZXN8bGlua2J1Y2tzKVwuY29tJC8sCiAgICAvXigoW1x3XXs4fXx3d3cpXC4pP3RoZXNlYmxvZ3NcLmNvbSQvLAogICAgL153YXJuaW5nLXRoaXMtbGlua2NvZGUtd2lsbC1jZWFzZS13b3JraW5nLXNvb25cLnd3d1wubGlua2J1Y2tzZG5zXC5jb20kLywKICAgIC9eKChbXHddezh9fHd3dylcLik/KGZpbGVzb250aGV8cG9vbnRvd258c2VyaW91c2RlYWxzfHVybGJlYXQpXC5uZXQkLywKICAgIC9eKChbXHddezh9fHd3dylcLik/KHphdG5hd3F5fHJodmdtcml0bXppd2NtKVwubmV0JC8sCiAgICAvXigoW1x3XXs4fXx3d3cpXC4pP2ZyZWVhblwudXMkLywKICAgIC9eKChbXHddezh9fHd3dylcLik/KG1pbml1cmxzfHFxY3xycXF8dGlueWxpbmtzfHl5dilcLmNvJC8sCiAgICAvXigoW1x3XXs4fXx3d3cpXC4pP3lvdWZhcFwubWUkLywKICBdOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IGhvc3RSdWxlcywKICAgICAgcGF0aDogL15cL1x3K1wvdXJsXC8oLispJC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkobSkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlQWxsVGltZXIoKTsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlc2V0Q29va2llcygpOwogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgICAgbGV0IHVybCA9IG0ucGF0aFsxXSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7CiAgICAgIGNvbnN0IG1hdGNoID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9VcmxFbmNvZGVkOiAoW14sXSspLyk7CiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSA9PT0gJ3RydWUnKSB7CiAgICAgICAgdXJsID0gZGVjcnlwdCh1cmwpOwogICAgICB9CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh1cmwpOwogICAgfQogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IGhvc3RSdWxlcywKICAgIH0sCiAgICBhc3luYyBzdGFydCAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuWE1MSHR0cFJlcXVlc3QgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9wOwogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZUFsbFRpbWVyKCk7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZXNldENvb2tpZXMoKTsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigndmVyaWZ5JykgPj0gMCkgewogICAgICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnL3ZlcmlmeScsICcnKTsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHRva2VuID0gZmluZFRva2VuKGRvY3VtZW50KTsKICAgICAgY29uc3QgdXJsID0gYXdhaXQgc2VuZFJlcXVlc3QodG9rZW4pOwogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ubnVrZSh1cmwpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgcXVlcnk6IC9eKC4qKVs/Jl1fbGJHYXRlPVxkKyQvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0IChtKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZXRDb29raWUoJ19sYkdhdGVQYXNzZWQnLCAndHJ1ZScpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgbS5xdWVyeVsxXSk7CiAgICB9LAogIH0pOwogIGZ1bmN0aW9uIGZpbmRUb2tlbiAoY29udGV4dCkgewogICAgY29uc3Qgc2NyaXB0ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKCcgICAgdmFyIGYgPSB3aW5kb3dbXCdpbml0XCcgKyBcJ0xiXCcgKyBcJ2pzXCcgKyBcJ1wnXScsIGNvbnRleHQpOwogICAgaWYgKCFzY3JpcHQpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhcm4oJ3BhdHRlcm4gY2hhbmdlZCcpOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGxldCBhZHVybCA9IHNjcmlwdC5tYXRjaCgvQWRVcmxccyo6XHMqJyhbXiddKyknLyk7CiAgICBpZiAoIWFkdXJsKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgYWR1cmwgPSBhZHVybFsxXTsKICAgIGNvbnN0IG0xID0gc2NyaXB0Lm1hdGNoKC9BZFBvcFVybFxzKjpccyonLitcP1tePV0rPShbXHdcZF0rKScvKTsKICAgIGNvbnN0IG0yID0gc2NyaXB0Lm1hdGNoKC9Ub2tlblxzKjpccyonKFtcd1xkXSspJy8pOwogICAgY29uc3QgdG9rZW4gPSBtMVsxXSB8fCBtMlsxXTsKICAgIGxldCBtID0gc2NyaXB0Lm1hdGNoKC89XHMqKFxkKyk7Lyk7CiAgICBsZXQgYWsgPSBwYXJzZUludChtWzFdLCAxMCk7CiAgICBjb25zdCByZSA9IC9cK1xzKihcZCspOy9nOwogICAgbGV0IHRtcCA9IG51bGw7CiAgICB3aGlsZSgobSA9IHJlLmV4ZWMoc2NyaXB0KSkgIT09IG51bGwpIHsKICAgICAgdG1wID0gbVsxXTsKICAgIH0KICAgIGFrICs9IHBhcnNlSW50KHRtcCwgMTApOwogICAgcmV0dXJuIHsKICAgICAgdDogdG9rZW4sCiAgICAgIGFLOiBhaywKICAgICAgYWR1cmw6IGFkdXJsLAogICAgfTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gc2VuZFJlcXVlc3QgKHRva2VuKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uZ2V0KHRva2VuLmFkdXJsKTsKICAgIGRlbGV0ZSB0b2tlbi5hZHVybDsKICAgIHRva2VuLmFfYiA9IGZhbHNlOwogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmluZm8oJ3dhaXRpbmcgdGhlIGludGVydmFsJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg1MDAwKTsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5pbmZvKCdzZW5kaW5nIHRva2VuOiAlbycsIHRva2VuKTsKICAgIGNvbnN0IHRleHQgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uZ2V0KCcvaW50ZXJtaXNzaW9uL2xvYWRUYXJnZXRVcmwnLCB0b2tlbiwgewogICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ub25lLAogICAgICBPcmlnaW46IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5ub25lLAogICAgfSk7CiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5pbmZvKCdyZXNwb25zZTogJW8nLCBkYXRhKTsKICAgIGlmICghZGF0YS5TdWNjZXNzICYmIGRhdGEuRXJyb3JzWzBdID09PSAnSW52YWxpZCB0b2tlbicpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhcm4oJ2dvdCBpbnZhbGlkIHRva2VuJyk7CiAgICAgIHJldHVybiBhd2FpdCByZXRyeSgpOwogICAgfQogICAgaWYgKGRhdGEuQWRCbG9ja1Nwb3R0ZWQpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhcm4oJ2FkYmxvY2sgc3BvdHRlZCcpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoZGF0YS5TdWNjZXNzICYmICFkYXRhLkFkQmxvY2tTcG90dGVkICYmIGRhdGEuVXJsKSB7CiAgICAgIHJldHVybiBkYXRhLlVybDsKICAgIH0KICB9CiAgYXN5bmMgZnVuY3Rpb24gcmV0cnkgKCkgewogICAgY29uc3QgdGV4dCA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5nZXQod2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKCksIHt9LCB7CiAgICAgICdYLUZvcndhcmRlZC1Gb3InOiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uZ2VuZXJhdGVSYW5kb21JUCgpLAogICAgfSk7CiAgICBjb25zdCBkID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnRvRE9NKHRleHQpOwogICAgY29uc3QgdCA9IGZpbmRUb2tlbihkKTsKICAgIGlmICghdCkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCgxMDAwKTsKICAgICAgcmV0dXJuIGF3YWl0IHJldHJ5KCk7CiAgICB9CiAgICByZXR1cm4gYXdhaXQgc2VuZFJlcXVlc3QodCk7CiAgfQogIGZ1bmN0aW9uIGRlY3J5cHQgKHVybCkgewogICAgdXJsID0gQ29udmVydEZyb21IZXgodXJsKTsKICAgIGxldCB1bnNhZmUgPSBgKCR7RW5jb2RlLnRvU3RyaW5nKCl9KSgiJHt1cmx9IilgOwogICAgdW5zYWZlID0gKDAsIGV2YWwpKHVuc2FmZSk7CiAgICByZXR1cm4gdW5zYWZlOwogIH0KICBmdW5jdGlvbiBDb252ZXJ0RnJvbUhleCAoc3RyKSB7CiAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgIHdoaWxlIChzdHIubGVuZ3RoID49IDIpIHsKICAgICAgcmVzdWx0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChzdHIuc3Vic3RyaW5nKDAsIDIpLCAxNikpKTsKICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygyLCBzdHIubGVuZ3RoKTsKICAgIH0KICAgIHJldHVybiByZXN1bHQuam9pbignJyk7CiAgfQogIGNvbnN0IEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHsKICAgIHZhciBzID0gW10sIGogPSAwLCB4LCByZXMgPSAnJywgayA9IGFyZ3VtZW50cy5jYWxsZWUudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJycpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykgewogICAgICBzW2ldID0gaTsKICAgIH0KICAgIGZvciAoaSA9IDA7IGkgPCAyNTY7IGkrKykgewogICAgICBqID0gKGogKyBzW2ldICsgay5jaGFyQ29kZUF0KGkgJSBrLmxlbmd0aCkpICUgMjU2OwogICAgICB4ID0gc1tpXTsKICAgICAgc1tpXSA9IHNbal07CiAgICAgIHNbal0gPSB4OwogICAgfQogICAgaSA9IDA7CiAgICBqID0gMDsKICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3RyLmxlbmd0aDsgeSsrKSB7CiAgICAgIGkgPSAoaSArIDEpICUgMjU2OwogICAgICBqID0gKGogKyBzW2ldKSAlIDI1NjsKICAgICAgeCA9IHNbaV07CiAgICAgIHNbaV0gPSBzW2pdOwogICAgICBzW2pdID0geDsKICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoc3RyLmNoYXJDb2RlQXQoeSkgXiBzWyhzW2ldICsgc1tqXSkgJSAyNTZdKTsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfTsKfSkoKTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnd3d1wubGlua2RlY29kZVwuY29tJC8sCiAgICBwYXRoOiAvXlwvJC8sCiAgICBxdWVyeTogL15cPyguKykkLywKICB9LAogIGFzeW5jIHJlYWR5IChtKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgIGxldCBsbmsgPSBtLnF1ZXJ5WzFdOwogICAgaWYgKG0ucXVlcnlbMV0ubWF0Y2goL15odHRwcz86XC9cLy8pKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsbmspOwogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgYiA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjcG9wdXAnKTsKICAgIGlmIChiICYmIGIuaHJlZikgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYi5ocmVmKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgYiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjbSA+IC5WaXNpdF9MaW5rJyk7CiAgICBiID0gYi5vbmNsaWNrLnRvU3RyaW5nKCkubWF0Y2goL3dpbmRvd1wub3BlblwoJyhbXiddKyknLyk7CiAgICBpZiAoIWIpIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlcigncGF0dGVybiBjaGFuZ2VkJyk7CiAgICB9CiAgICBsbmsgPSBiWzFdLm1hdGNoKC9cPyhodHRwcz86XC9cLy4qKSQvKTsKICAgIGlmIChsbmspIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGxua1sxXSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhiWzFdKTsKICB9LAp9KTsKKGZ1bmN0aW9uICgpIHsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBbCiAgICAgICAgL14odWxzaGFyZXx1cmxpa2UpXC5uZXQkLywKICAgICAgICAvXmFkdXJsXC5pZCQvLAogICAgICAgIC9eZWFybi1ndWlkZVwuY29tJC8sCiAgICAgICAgL14oY3V0d2l8Y3V0LXd8Y3V0bHxkbXVzKVwuaW4kLywKICAgICAgICAvXih3d3dcLik/anVybFwuaW8kLywKICAgICAgICAvXm1pdGx5XC51cyQvLAogICAgICAgIC9edHVpXC5jbGljayQvLAogICAgICAgIC9ebWV0XC5ieiQvLAogICAgICAgIC9ebGFwYWtcLmxpbmskLywKICAgICAgXSwKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgTm9SZWNhcHRjaGFIYW5kbGVyKCk7CiAgICAgIGF3YWl0IGhhbmRsZXIuY2FsbCgpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBbCiAgICAgICAgL14oZHo0bGlua3xnb2NpdGxpbmt8M3JhYmN1dHxzaG9ydDJ3aW58YWRzcnR8c2hvcnRnbG9iYWx8amFpbmppbnZhbml8YWdyYWRhcnBhbilcLmNvbSQvLAogICAgICAgIC9eKHBheXNob3J0dXJsfHVybHRpcHN8c2hyaW5rZWFybnxpdGlhZHxjdXRzb3VmfGVuZXdzdGFsa3xsbmtzNGFsbHxqZWpha2xhZ3UpXC5jb20kLywKICAgICAgICAvXihlYXJuLXVybHxiaXQtdXJsfGN1dC13aW58bGluay16ZXJvfGN1dC1lYXJufG90dXJsfGdsb3J5LWxpbmt8Y29vbG1pdHRlbnxob3NleHgpXC5jb20kLywKICAgICAgICAvXihlbXBpcmVzaG9ydHxlbXBlYXJufHRhcm53aDJpfHRhYmVpa2h8eW91cnctYXl8cmViN2tvbmxpbmV8ZmFjdHVyYWx8YWtsYTQpXC5jb20kLywKICAgICAgICAvXihzaHJpbmtidWNrfGNsa3BheXxsaW5rc2h0fGhheHJzfGNsaWNrMi11cmx8Y29vbHR4dGdlbnxhcmJhN2NvfHNob3J0bGlua28pXC5jb20kLywKICAgICAgICAvXihwYXJ0cWIyaXxraHJhYmF8YWRscHV8dGFiYWtoZWxvfGFtZW5pdGllZXN8Y29zbWljbW9ueXxpbGlua3Nob3J0eHxhLWVneSlcLmNvbSQvLAogICAgICAgIC9eKGFkdmFuY2Utd2lzaGluZ2pzfGdvdnRzbWFydGpvYnxibG9nZ2luZ3JhamF8dGVjaGt0aXxzeHRzcXVhZHxhZHBheXRtfHB1c3RrYWxhKVwuY29tJC8sCiAgICAgICAgL14odGhlZ3lhYW5pcG9pbnR8ZG93bmxvYWRkb29tfGxpbmtmYXl8NWJyZ2VkaWR8ZWFydGhwaWNsb3ZlcnxhZGlncHx0b21pZW50KVwuY29tJC8sCiAgICAgICAgL14odGVjaG1lbi13b3JsZHxyYXplcmZsaXhzfGdhbWVzaW5kaWFuc3xkaXNsb29rc3xlbGtoYnJlbDdzcnl8b25hYWh8dWx0cmFza29yYSlcLmNvbSQvLAogICAgICAgIC9eKHdyYXAtdzBybGR8b21tYW50cmFtZWRpdGF0aW9ufG1hd2Rva3x0ZWNoZmluZGF8Y2xpeGd8Ym9hcmRnaWZ0fGJlYXN0LWJpcmRzKVwuY29tJC8sCiAgICAgICAgL14odGFsa2l0dGVjaHl8bmV3c2luanVsZXN8a3V0cGF5fG5pa2thcnJ8dmVibGlua3xhbDNhbWFsbHw2YWJhMmRheXxvcGxvdmVyemhvbWUpXC5jb20kLywKICAgICAgICAvXihrb29yYW11YmFzaGlyfGhlYWx0aGZhcnl8anVzdGxpa2V5b2puYXxzYXJrYXJpam9ic3Jlc3VsdHNzfHphbGlwYXl8dGhlZnJlZWNoKVwuY29tJC8sCiAgICAgICAgL14oaGluZGliZWVufHBhc3Rla2FufGU3a2VseWFuYXxlYS1pc2x5fGFyaXN0b2RlcmFzfHNob3J0em9ufHRyYWRpbmctYXJlYXxhbHNlb28pXC5jb20kLywKICAgICAgICAvXih0ZWNodHJlbWVuZG91c3xmcmVlc3BpbndpbnN8dy1yYWplbXx0aW1ldG9rYXxmb29kcHVmZnxsaW5rc29wfGJvbGx5d29vZGRyYW1hbmV3cylcLmNvbSQvLAogICAgICAgIC9eKGxpbmtleGF8YWRtZXd8c2hydGZseXxrdXlsaW5rfGN1dDRsaW5rc3xhZHNraXBtZXxza2lwdXJsc3xlbHktb203fGJyZW5oZWFsdGgpXC5jb20kLywKICAgICAgICAvXihzbWFydGVhc3lzdHVkeXxjeWFoZWFsdGh8ZXJzaGFkYXR8ejJpfHNydGZseXxhcmJhN2twcm98aGVhbHRoLWdvb29kfHN0YXRlZ29zc2lwKVwuY29tJC8sCiAgICAgICAgL14oYmxvZ2dpbmdneWFuYm94fHlvdXJ0ZWNoZ3VpZGVyfGdpZnNpc3wzcmFiLWNhc2h8cGlua2hpbmRpfHdpc2hlczJ8d2Vhd3B8YTViYXJmYXdyaWEpXC5jb20kLywKICAgICAgICAvXihteWtpbmdnb3xsaS1ua3p8d2luNGN1dHxraGFicmF0a3xwcm9ncmFtc2ZyZXxzYWZlbGlua2Jsb2dnZXJ8bGlua3dlYXxvdXJjYXJlZXJibG9nKVwuY29tJC8sCiAgICAgICAgL14obGlua29ybGlua3xtcmZvdXJ0ZWNofGZhYnNkZWFsc3x0ZWNoNHV0b2RheXx1cmxzYW1vfGVhcm53aXRoc2hvcnRsaW5rfHN3aWdneWdvbGQpXC5jb20kLywKICAgICAgICAvXihlYXJubW9uZXl0YWxrfG5ld3VwZGF0ZXNvbmxpbmV8dXB0b29zfGJha2lsaW5rfGdvc3NpcGNvcm5lcnN8c2xlZ2xlfGZ1dHVyZWZvdW5kYXRpb25uZ28pXC5jb20kLywKICAgICAgICAvXihsb29wZGlldHxpbmZvdGF4Y28pXC5jb20kLywKICAgICAgICAvXih2eVwuKT9hZHN2eVwuY29tJC8sCiAgICAgICAgL14od3d3XC4pPyhjbGtwYXlzfGxua2pvYnxlZnNob3J0KVwuY29tJC8sCiAgICAgICAgL15zaHJ0KDh8MTApXC5jb20kLywKICAgICAgICAvXmxpbmtcLmFrdW5vXC5uZXQkLywKICAgICAgICAvXihzYWZlbGlua3V8dGlueWxpbmtzfGxpY2tsaW5rfGxpbmtyZXh8emxzaG9ydGV8dml2YWRzfGNsaWNrYXIpXC5uZXQkLywKICAgICAgICAvXih2bnVybHx2aW5hdXJsfGZveHVybHxzaG9ydDJ3aW58Y2FzaGF0fHNocnRmbHl8c2hvcnR5ZSlcLm5ldCQvLAogICAgICAgIC9eKGxpbms0d2lufGxpbmtzYWR8dG9wdXJsfHhlbWxpbmt8Y3V0YWRsaW5rfGNyYWJjdXR8ZGlyZWN0ZWRsaW5rKVwubmV0JC8sCiAgICAgICAgL14oY2xpa3x0b2tlbmZseXxnZXRsaW5rfHBzbHxwc3N8c2hsbnxscGV8Y2hydHxzenN8bWluaXVybClcLnB3JC8sCiAgICAgICAgL14od3d3XC4pP2x3dFwucHckLywKICAgICAgICAvXih0cmxpbmt8d29saW5rfHRvY2RvfGN1dHVybHxjb3Vuc2VsbGluZ3Jlc3VsdDIwMTZ8aWl0amVlbWFpbmd1aWRlfGhlYWx0aGhpbmRpZ3lhbilcLmluJC8sCiAgICAgICAgL14odXRpbWV0YWJsZXJlc3VsdHxkYWlseS1zYWxlfGxpbmtzem9uZXx2aXJhbHRlY2huaWNhbClcLmluJC8sCiAgICAgICAgL14oYWRiaWx0eXxhZHBvcHx1anZ8dHB4fGFkc3J0fDJmbHl8bGluNjV8c2hvcnQyd2lufHN1YXJhbmtyaXxpbmZvdHJlbmR5KVwubWUkLywKICAgICAgICAvXihhZHZhbmNlZGF1dG9yZXBhaXJ0aXBzfHRha2VpdGZvcnxqZWxhamFoaW50ZXJuZXR8dmlydHVhbGRhdGF8bXVoYW1tYWR5b2dhfHMydylcLm1lJC8sCiAgICAgICAgL14oY2VwbXV6aWtpbmRpcilcLm1lJC8sCiAgICAgICAgL14oc2hpbmt8c2hydGVufGdnLWx8dm51cmx8YmxvZ2dpbmdkZWtofGxuMTF8c2gxMXx0cmFkZWd1cnV8bmV3c2thcnR8a2lkc29ycylcLnh5eiQvLAogICAgICAgIC9eKHRlY2hpbmh1Ynx2aXJhbG5vd3xzaG9waGlwcm98dGVjaG5vY2FudmFzfGdldGZyZXNoY2xvdWR8cHJvZml0c3R1ZHl8aWpvYmFuYW5hKVwueHl6JC8sCiAgICAgICAgL14oYXV0b2NhcnNtYWd6fGdldHBvY2tldHx5YXNpbmV3c3xkdW55YW5ld3N8a29taXVwZGF0ZXN8YWxsYXBwfHNtd2Vic3xuZXdzLXRlY2gpXC54eXokLywKICAgICAgICAvXihva2V8Y3VvbnxjdWlvfGN1ZWV8Y3V1c3xjdXRvfGxpbmt0b3J8Zmx5bGlua3x1aXp8dWlpfGV4ZSlcLmlvJC8sCiAgICAgICAgL15jdSgyfDN8NXw2fDcpXC5pbyQvLAogICAgICAgIC9eKGVsM2lkfGFsbHJlcG9ydHMpXC5zaXRlJC8sCiAgICAgICAgL14xMjNsaW5rXC5jYXJwYXJ0c3ZpZXQ5N1wuc2l0ZSQvLAogICAgICAgIC9eKGNsaWNrMnVybHxsbjQzNXxtZXJkZWthaWQpXC5vbmxpbmUkLywKICAgICAgICAvXih3d3dcLik/YmxvZ2dlcndvcmxkXC5vbmxpbmUkLywKICAgICAgICAvXihwZXR0eXxza2lwc3x0cnxmbGF6KVwubGluayQvLAogICAgICAgIC9ebWVnYXVybFwuKGlufGxpbmspJC8sCiAgICAgICAgL15wYXlza2lwXC4obWV8b3JnKSQvLAogICAgICAgIC9eKDNic3R8Y29pbmxpbmt8aXRpdXJsfGNvc2hpbmt8bGluazVzfGN1cnN8bWFrZXVybHxtb29kZGlzb3JkZXJ8Y3V0bHMpXC5jbyQvLAogICAgICAgIC9eKG1saW5rfGNsMjUwfHhwaWNrbGV8aW5mb3NlaGF0a3UpXC5jbHViJC8sCiAgICAgICAgL14oaWdyYW18Z3JhbXxwaW5naXQpXC5pbSQvLAogICAgICAgIC9eKGNsa3xjbGwpXC4ocHJlc3N8aW5rfHNofGljdSkkLywKICAgICAgICAvXnNob3J0XC5wZSQvLAogICAgICAgIC9eKHVybGNsb3VkfGltYWdlb3B0aW1pemVyKVwudXMkLywKICAgICAgICAvXihpY3V0aXR8ZWFybmJpZ3xjdXRlYXJuKVwuY2EkLywKICAgICAgICAvXihhZHp1cmx8bGluazJsaW5rKVwuY2YkLywKICAgICAgICAvXihrb3lsaW5rc3xidXktaW4tNTk5cnMpXC53aW4kLywKICAgICAgICAvXmxvcHRlXC5wcm8kLywKICAgICAgICAvXih3d3dcLik/cG5kXC50bCQvLAogICAgICAgIC9eKHRueXx0aW55KVwuZWMkLywKICAgICAgICAvXnRsXC50YyQvLAogICAgICAgIC9eZTJzXC5jYyQvLAogICAgICAgIC9ebHlvblwua2ltJC8sCiAgICAgICAgL14obGlua3ZpcHw0c2hvcnQpXC50ayQvLAogICAgICAgIC9ec3RmbHlcLnByZXNzJC8sCiAgICAgICAgL14oYnVzaW5lc3Npc3MyfHRlY2hhbmRyZXZpZXd8eWVzbW92aWVzYXBwfGtwc2N0aHVsYXNpbG9naW4pXC5pbmZvJC8sCiAgICAgICAgL15lYXRpbmdzXC5zdHJlYW0kLywKICAgICAgICAvXjhvXC5lZSQvLAogICAgICAgIC9eYnV5aXRvbmxpbmVcLnN0b3JlJC8sCiAgICAgICAgL14oc2hvcnRlYXJufGVucnQpXC5ldSQvLAogICAgICAgIC9eKDE5MjE2ODEyNTR8Z2VraXx3ZWduZXIpXC50ZWNoJC8sCiAgICAgICAgL14xMjNsaW5rXC4ocHd8dmlwKSQvLAogICAgICAgIC9eKGxvdGVjaG5vY2FufHVwZGF0ZXRyaWJ1bnx0ZW1wbGlua3xlejRsaW5rKVwub3JnJC8sCiAgICAgICAgL150aW55bGlua1wucnVuJC8sCiAgICAgICAgL15idGNcLm1zJC8sCiAgICAgICAgL15lYXJuXC50aGVwbHVzaXRcLnJvJC8sCiAgICAgICAgL15za2lwXC5heiQvLAogICAgICAgIC9eKGR1dGNoeWNvcnB8YWJvdXR0ZWNoKVwuc3BhY2UkLywKICAgICAgICAvXmNsaWNrMnNlZVwuZGVzaSQvLAogICAgICAgIC9ec2hvcnRlZFwuaWQkLywKICAgICAgICAvXnppXC5odCQvLAogICAgICAgIC9eKGZ1bm55cXVpenxtZWRpYWtpdGF8a2FiYXJ2aXJhbClcLmJsb2ckLywKICAgICAgICAvXihzY2llbmNlbGlmZXxjcG00YWxsKVwuZ2EkLywKICAgICAgICAvXnRoaW5cLmF0JC8sCiAgICAgICAgL15zay1pcFwucnUkLywKICAgICAgICAvXnphXC5nbCQvLAogICAgICAgIC9ecm95YWxvd25cLnJldmlldyQvLAogICAgICAgIC9eYmVzdHNjaG9sYWVzaGlwZGVncmVlXC5kYXRlJC8sCiAgICAgICAgL15va29cLnNoJC8sCiAgICAgICAgL15zcGxhc2huZXdzXC5vb28kLywKICAgICAgICAvXmNra1wuYWkkLywKICAgICAgICAvXmZjXC5sYyQvLAogICAgICAgIC9ecGE0bFwuZXN5XC5lcyQvLAogICAgICAgIC9eZ2V0XC51anZcLmFsJC8sCiAgICAgICAgL14odGlwc1wuKT9hdHZcLnB3JC8sCiAgICAgIF0sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBoYW5kbGVyID0gbmV3IFJlY2FwdGNoYUhhbmRsZXIoKTsKICAgICAgYXdhaXQgaGFuZGxlci5jYWxsKCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXndpXC5jciQvLAogICAgICAgIC9ed2ljclwubWUkLywKICAgICAgICAvXmxpbmtzb2ZsaWZlXC5jbyQvLAogICAgICAgIC9ebGlua3NvZlwubGlmZSQvLAogICAgICBdLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBJbnZpc2libGVSZWNhcHRjaGFIYW5kbGVyKCk7CiAgICAgIGF3YWl0IGhhbmRsZXIuY2FsbCgpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBbCiAgICAgICAgL14oY3V0cGFpZHx0bWVhcm58aWN1dGxpbmspXC5jb20kLywKICAgICAgICAvXihjdHVpfGN1dGkpXC5pbiQvLAogICAgICAgIC9eenV0cm94XC5saW5rJC8sCiAgICAgICAgL14od3d3XC4pP3Nocmlua1wudmlwJC8sCiAgICAgICAgL15jdXR3aW5cLih1c3xjb20pJC8sCiAgICAgICAgL14xMjNzaG9ydFwuYml6JC8sCiAgICAgICAgL14odGVjaGNyYXplfGhlYWx0aGluc2lkZXIpXC5vbmxpbmUkLywKICAgICAgXSwKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgTm9uRGlzYWJsZWRSZWNhcHRjaGFIYW5kbGVyKCk7CiAgICAgIGF3YWl0IGhhbmRsZXIuY2FsbCgpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXih3d3dcLik/b3VybFwuaW8kLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgT1VSTEhhbmRsZXIoKTsKICAgICAgYXdhaXQgaGFuZGxlci5jYWxsKCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eKHd3d1wuKT9saW5rZHJvcFwubmV0JC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBoYW5kbGVyID0gbmV3IExpbmtEcm9wSGFuZGxlcigpOwogICAgICBhd2FpdCBoYW5kbGVyLmNhbGwoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL153d3dcLnNob3J0bHlcLnh5eiQvLAogICAgICBwYXRoOiAvXlwvbGluayQvLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBTaG9ydGx5SGFuZGxlcigpOwogICAgICBhd2FpdCBoYW5kbGVyLmNhbGwoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogWwogICAgICAgIC9eKGN1dC11cmxzfGxpbmNsaWt8cHJlbWl1bXplbnxieTZka3xtaWt5bW9vbnN8bWFuMnBybylcLmNvbSQvLAogICAgICAgIC9eKGxpbms0d2lufGxvYWR1cmx8Y3V0NGxpbmt8cmFvbGlua3xhZHNob3J0ZSlcLmNvbSQvLAogICAgICAgIC9ec2hvcnRcLnBhc3Rld21hXC5jb20kLywKICAgICAgICAvXmxpbmtmbHlcLmdhb3NtZWRpYVwuY29tJC8sCiAgICAgICAgL14od3d3XC4pP3ZpcmFsdWtrXC5jb20kLywKICAgICAgICAvXih3d3dcLik/bmlhZ29zaG9ydFwuY29tJC8sCiAgICAgICAgL153d3dcLndvcmxkaGFja1wubmV0JC8sCiAgICAgICAgL14oZWtsaW5rKVwubmV0JC8sCiAgICAgICAgL14odXJsZXxhZHNob3J0KVwuY28kLywKICAgICAgICAvXih3ZWVmeXxhZGJ1bGx8emVpenxsaW5rNHxhZGNvaW4pXC5tZSQvLAogICAgICAgIC9eKGFkYmlsdHl8dGFpdmUpXC5pbiQvLAogICAgICAgIC9eKHR3aWt8YWRzbGluaylcLnB3JC8sCiAgICAgICAgL14oY3Vyc3xjcnVzfDRjdXR8dTJzfGwycylcLmlvJC8sCiAgICAgICAgL15kenVybFwubWwkLywKICAgICAgICAvXnBldHR5XC5saW5rJC8sCiAgICAgICAgL15zaG9ydGFkXC5jZiQvLAogICAgICAgIC9eMTIzbGlua1wuKGlvfGNvfHByZXNzfHBybykkLywKICAgICAgICAvXmdpdFwudGMkLywKICAgICAgICAvXihhZGZ1fGxpbmt1KVwudXMkLywKICAgICAgICAvXnNob3J0aXRcLmNhJC8sCiAgICAgICAgL15zcGFtbGlua1wub3JnJC8sCiAgICAgICAgL15yb3l1cmxzXC5iaWQkLywKICAgICAgICAvXigxKT9pZHNseVwuKGNvbXxiaWR8bmV0fG9yZykkLywKICAgICAgXSwKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgU3RhZ2VkSGFuZGxlcigpOwogICAgICBhd2FpdCBoYW5kbGVyLmNhbGwoKTsKICAgIH0sCiAgfSk7CiAgY2xhc3MgQWJzdHJhY3RIYW5kbGVyIHsKICAgIGNvbnN0cnVjdG9yICgpIHsKICAgICAgdGhpcy5fb3ZlcmxheVNlbGVjdG9yID0gWwogICAgICAgICdbY2xhc3MkPSJPdmVybGF5Il0nLAogICAgICAgICcjX19yYW5kb21fY2xhc3NfbmFtZV9fJywKICAgICAgICAnI2hlYWRsaW5lYXRhcycsCiAgICAgICAgJyNteU1vZGFsJywKICAgICAgICAnLm9wYWNpdHlfd3JhcHBlcicsCiAgICAgICAgJyNvdmVybGF5JywKICAgICAgXS5qb2luKCcsICcpOwogICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBbCiAgICAgICAgJyNnby1saW5rJywKICAgICAgICAnLmdvLWxpbmsnLAogICAgICAgICcjb3JpZ2luYWxMaW5rLmdldC1saW5rJywKICAgICAgICAnZm9ybVthY3Rpb249Ii9saW5rcy9nbyJdJywKICAgICAgICAnZm9ybVthY3Rpb249Ii9saW5rcy9saW5rZHJvcGdvIl0nLAogICAgICBdLmpvaW4oJywgJyk7CiAgICB9CiAgICByZW1vdmVPdmVybGF5ICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSh0aGlzLl9vdmVybGF5U2VsZWN0b3IpOwogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uYmxvY2sodGhpcy5fb3ZlcmxheVNlbGVjdG9yLCBkb2N1bWVudC5ib2R5KTsKICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaW5pdGlhbCc7CiAgICAgIH0sIDUwMCk7CiAgICB9CiAgICByZW1vdmVGcmFtZSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgfQogICAgYXN5bmMgY2FsbCAoKSB7CiAgICAgIGNvbnN0IG9rID0gYXdhaXQgdGhpcy5wcmVwYXJlKCk7CiAgICAgIGlmICghb2spIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgbXcgPSBhd2FpdCB0aGlzLmdldE1pZGRsZXdhcmUoKTsKICAgICAgaWYgKCFtdykgewogICAgICAgIHRoaXMud2l0aG91dE1pZGRsZXdhcmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5nZXRVUkwobXcpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICAgIH0KICB9CiAgY2xhc3MgTm9SZWNhcHRjaGFIYW5kbGVyIGV4dGVuZHMgQWJzdHJhY3RIYW5kbGVyIHsKICAgIHByZXBhcmUgKCkgewogICAgICB0aGlzLnJlbW92ZUZyYW1lKCk7CiAgICAgIHRoaXMucmVtb3ZlT3ZlcmxheSgpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGFzeW5jIGdldE1pZGRsZXdhcmUgKCkgewogICAgICByZXR1cm4gYXdhaXQgZ2V0SlF1ZXJ5Rm9ybSh0aGlzLl9mb3JtU2VsZWN0b3IpOwogICAgfQogICAgd2l0aG91dE1pZGRsZXdhcmUgKCkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uaW5mbygnbm8gZm9ybScpOwogICAgfQogICAgYXN5bmMgZ2V0VVJMIChqRm9ybSkgewogICAgICByZXR1cm4gYXdhaXQgZ2V0VVJMRnJvbUpRdWVyeUZvcm0oakZvcm0pOwogICAgfQogIH0KICBjbGFzcyBSZWNhcHRjaGFIYW5kbGVyIGV4dGVuZHMgQWJzdHJhY3RIYW5kbGVyIHsKICAgIGFzeW5jIHByZXBhcmUgKCkgewogICAgICB0aGlzLnJlbW92ZU92ZXJsYXkoKTsKICAgICAgY29uc3QgZiA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjY2FwdGNoYVNob3J0bGluaywgZGl2LmctcmVjYXB0Y2hhJyk7CiAgICAgIGlmICghZikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5pbmZvKCdyZWNhcHRjaGEgZGV0ZWN0ZWQsIHN0b3AnKTsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLmluZm8oJ3RyeWluZyB0byBsaXN0ZW4gc3VibWl0IGJ1dHRvbicpOwogICAgICBjb25zdCBiID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJyNpbnZpc2libGVDYXB0Y2hhU2hvcnRsaW5rJyk7CiAgICAgIGlmICghYikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLnN1Ym1pdExpc3RlbihiLCBmKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgYXN5bmMgc3VibWl0TGlzdGVuIChiKSB7CiAgICAgIGNvbnN0IG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgaWYgKCFiLmRpc2FibGVkKSB7CiAgICAgICAgICBiLmNsaWNrKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgby5vYnNlcnZlKGIsIHsKICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgICB9KTsKICAgIH0KICAgIGFzeW5jIGdldE1pZGRsZXdhcmUgKCkgewogICAgICByZXR1cm4gYXdhaXQgZ2V0SlF1ZXJ5Rm9ybSh0aGlzLl9mb3JtU2VsZWN0b3IpOwogICAgfQogICAgd2l0aG91dE1pZGRsZXdhcmUgKCkgewogICAgICBjb25zdCBmID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNsaW5rLXZpZXcnKTsKICAgICAgZi5zdWJtaXQoKTsKICAgIH0KICAgIGFzeW5jIGdldFVSTCAoakZvcm0pIHsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCgxMDAwKTsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgZ2V0VVJMRnJvbUpRdWVyeUZvcm0oakZvcm0pOwogICAgICAgICAgaWYgKHVybCkgewogICAgICAgICAgICByZXR1cm4gdXJsOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YXJuKGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBjbGFzcyBJbnZpc2libGVSZWNhcHRjaGFIYW5kbGVyIGV4dGVuZHMgUmVjYXB0Y2hhSGFuZGxlciB7CiAgICBhc3luYyBzdWJtaXRMaXN0ZW4gKGIsIGYpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhaXQoMTAwMCk7CiAgICAgIGNvbnN0IGNsaWNrID0gZi5jbGllbnRXaWR0aCA9PT0gMCB8fCBmLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwOwogICAgICBpZiAoY2xpY2sgJiYgIWIuZGlzYWJsZWQpIHsKICAgICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uaW5mbygnY2xpY2tpbmcgc3VibWl0IGJ1dHRvbiwgYmVjYXVzZSByZWNhcHRjaGEgd2FzIGVtcHR5Jyk7CiAgICAgICAgYi5jbGljaygpOwogICAgICB9CiAgICB9CiAgfQogIGNsYXNzIE5vbkRpc2FibGVkUmVjYXB0Y2hhSGFuZGxlciBleHRlbmRzIFJlY2FwdGNoYUhhbmRsZXIgewogICAgYXN5bmMgc3VibWl0TGlzdGVuIChiKSB7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhaXQoNTAwKTsKICAgICAgICBpZiAoZ3JlY2FwdGNoYSAmJiBncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBiLmNsaWNrKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgY2xhc3MgT1VSTEhhbmRsZXIgZXh0ZW5kcyBSZWNhcHRjaGFIYW5kbGVyIHsKICAgIGFzeW5jIGdldE1pZGRsZXdhcmUgKCkgewogICAgICByZXR1cm4gewogICAgICAgIHZlcmlmeTogYXdhaXQgZ2V0SlF1ZXJ5Rm9ybSgnI2dldC1saW5rJyksCiAgICAgICAgZ286IGF3YWl0IGdldEpRdWVyeUZvcm0odGhpcy5fZm9ybVNlbGVjdG9yKSwKICAgICAgfTsKICAgIH0KICAgIGFzeW5jIGdldFVSTCAoakZvcm1PYmplY3QpIHsKICAgICAgYXdhaXQgZ2V0VVJMRnJvbUpRdWVyeUZvcm0oakZvcm1PYmplY3QudmVyaWZ5KTsKICAgICAgcmV0dXJuIGF3YWl0IGdldFVSTEZyb21KUXVlcnlGb3JtKGpGb3JtT2JqZWN0LmdvKTsKICAgIH0KICB9CiAgY2xhc3MgTGlua0Ryb3BIYW5kbGVyIGV4dGVuZHMgUmVjYXB0Y2hhSGFuZGxlciB7CiAgICBhc3luYyBnZXRNaWRkbGV3YXJlICgpIHsKICAgICAgcmV0dXJuIGF3YWl0IGdldEpRdWVyeUZvcm0oJyNteWxpbmsxJyk7CiAgICB9CiAgfQogIGNsYXNzIFN0YWdlZEhhbmRsZXIgZXh0ZW5kcyBBYnN0cmFjdEhhbmRsZXIgewogICAgcHJlcGFyZSAoKSB7CiAgICAgIHRoaXMucmVtb3ZlRnJhbWUoKTsKICAgICAgdGhpcy5yZW1vdmVPdmVybGF5KCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgYXN5bmMgZ2V0TWlkZGxld2FyZSAoKSB7CiAgICAgIGNvbnN0IGYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI2xpbmstdmlldycpOwogICAgICBpZiAoIWYpIHsKICAgICAgICByZXR1cm4gZG9jdW1lbnQ7CiAgICAgIH0KICAgICAgY29uc3QgYXJncyA9IGV4dHJhY3RBcmd1bWVudChmKTsKICAgICAgY29uc3QgdXJsID0gZi5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpOwogICAgICBsZXQgcGFnZSA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5wb3N0KHVybCwgYXJncyk7CiAgICAgIHBhZ2UgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0udG9ET00ocGFnZSk7CiAgICAgIHJldHVybiBwYWdlOwogICAgfQogICAgd2l0aG91dE1pZGRsZXdhcmUgKCkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uaW5mbygnbm8gcGFnZScpOwogICAgfQogICAgYXN5bmMgZ2V0VVJMIChwYWdlKSB7CiAgICAgIGNvbnN0IGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2dvLWxpbmsnLCBwYWdlKTsKICAgICAgY29uc3QgYXJncyA9IGV4dHJhY3RBcmd1bWVudChmKTsKICAgICAgY29uc3QgdXJsID0gZi5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpOwogICAgICBsZXQgZGF0YSA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5wb3N0KHVybCwgYXJncyk7CiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgICBpZiAoZGF0YSAmJiBkYXRhLnVybCkgewogICAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5udWtlKGRhdGEudXJsKTsKICAgICAgICByZXR1cm4gZGF0YS51cmw7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCd3cm9uZyBkYXRhJyk7CiAgICB9CiAgfQogIGNsYXNzIFNob3J0bHlIYW5kbGVyIGV4dGVuZHMgQWJzdHJhY3RIYW5kbGVyIHsKICAgIHByZXBhcmUgKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGFzeW5jIGdldE1pZGRsZXdhcmUgKCkgewogICAgICBsZXQgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjbXlNb2RhbCAuYnRuLXByaW1hcnknKTsKICAgICAgYSA9IGEucGF0aG5hbWUubWF0Y2goL15cL3JcLyguKykvKTsKICAgICAgcmV0dXJuIGFbMV07CiAgICB9CiAgICB3aXRob3V0TWlkZGxld2FyZSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5pbmZvKCdubyBwYWdlJyk7CiAgICB9CiAgICBhc3luYyBnZXRVUkwgKGlkKSB7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5qUXVlcnkucG9zdCgnZ2V0bGluay5waHAnLCB7aWQ6IGlkfSkuZG9uZShmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICBpZiAodXJsLm1hdGNoKC9eaHR0cC8pKSB7CiAgICAgICAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh1cmwpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwMCk7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gZXh0cmFjdEFyZ3VtZW50IChmb3JtKSB7CiAgICBjb25zdCBhcmdzID0ge307CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uZm9yRWFjaChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCQoJ2lucHV0JywgZm9ybSksICh2KSA9PiB7CiAgICAgIGFyZ3Nbdi5uYW1lXSA9IHYudmFsdWU7CiAgICB9KTsKICAgIHJldHVybiBhcmdzOwogIH0KICBhc3luYyBmdW5jdGlvbiBnZXRKUXVlcnlGb3JtIChzZWxlY3RvcikgewogICAgbGV0IGpRdWVyeSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuJDsKICAgIHdoaWxlICghalF1ZXJ5KSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwKTsKICAgICAgalF1ZXJ5ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy4kOwogICAgfQogICAgY29uc3QgZiA9IGpRdWVyeShzZWxlY3Rvcik7CiAgICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICAgIHJldHVybiBmOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQogIGZ1bmN0aW9uIGdldFVSTEZyb21KUXVlcnlGb3JtIChqRm9ybSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgaWYgKGpGb3JtLmlzKCdhJykgJiYgakZvcm0uYXR0cignaHJlZicpKSB7CiAgICAgICAgcmVzb2x2ZShqRm9ybS5hdHRyKCdocmVmJykpOwogICAgICB9CiAgICAgIGNvbnN0IGpRdWVyeSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuJDsKICAgICAgalF1ZXJ5LmFqYXgoewogICAgICAgIGRhdGFUeXBlOiAnanNvbicsCiAgICAgICAgdHlwZTogJ1BPU1QnLAogICAgICAgIHVybDogakZvcm0uYXR0cignYWN0aW9uJyksCiAgICAgICAgZGF0YTogakZvcm0uc2VyaWFsaXplKCksCiAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gewogICAgICAgICAgaWYgKHJlc3VsdC51cmwpIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQudXJsKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IocmVzdWx0Lm1lc3NhZ2UpKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVycm9yOiAoeGhyLCBzdGF0dXMsIGVycm9yKSA9PiB7CiAgICAgICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2Fybih4aHIsIHN0YXR1cywgZXJyb3IpOwogICAgICAgICAgcmVqZWN0KG5ldyBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uQWRzQnlwYXNzZXJFcnJvcigncmVxdWVzdCBlcnJvcicpKTsKICAgICAgICB9LAogICAgICB9KTsKICAgIH0pOwogIH0KfSkoKTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmxpbmtkdWl0XC5uZXQkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLmNvbC1sZy04IGgxJykudGV4dENvbnRlbnQ7CiAgICBjb25zdCBjaGVjayA9IGwubWF0Y2goL15odHRwcz86XC9cLy8pOwogICAgaWYgKGNoZWNrKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybjsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/bGlua3BsdWdhcHBcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjbWNfZW1iZWRfc2lnbnVwX3Njcm9sbCBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmxpbmtzYXNcLnVzJC8sCiAgICBwYXRoOiAvXihcL1x3KykkLywKICB9LAogIGFzeW5jIHJlYWR5IChtKSB7CiAgICBjb25zdCByZWNhcHRjaGEgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0udHJ5RXZlcnkoMTAwMCwgKCkgPT4gewogICAgICBjb25zdCByZWNhcHRjaGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2ctcmVjYXB0Y2hhLXJlc3BvbnNlJyk7CiAgICAgIGlmICghcmVjYXB0Y2hhKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKCFyZWNhcHRjaGEudmFsdWUpIHsKICAgICAgICByZXR1cm4gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLm5vbmU7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlY2FwdGNoYS52YWx1ZTsKICAgIH0pOwogICAgY29uc3QgdXJsID0gYGh0dHA6Ly9pcGluZm8uaW8vJHtfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uZ2VuZXJhdGVSYW5kb21JUCgpfS9qc29uYDsKICAgIGxldCBpcGluZm8gPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uZ2V0KHVybCk7CiAgICBpcGluZm8gPSBKU09OLnBhcnNlKGlwaW5mbyk7CiAgICBjb25zdCBwYXlsb2FkID0gewogICAgICBjb2RlQWRzOiAxLAogICAgICBjb3VudHJ5OiBpcGluZm8uY291bnRyeSwKICAgICAgaXBBZGRyZXNzOiBpcGluZm8uaXAsCiAgICAgIHJlY2FwdGNoYTogcmVjYXB0Y2hhLAogICAgfTsKICAgIGNvbnN0IHRva2VuID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLmdldENvb2tpZSgnWFNSRi1UT0tFTicpOwogICAgbGV0IGRhdGEgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucG9zdCgnL2dvJyArIG0ucGF0aFsxXSwgcGF5bG9hZCwgewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAnWC1YU1JGLVRPS0VOJzogdG9rZW4sCiAgICB9KTsKICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGRhdGEubWVzc2FnZSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15saW5rc2FzXC51cyQvLAogICAgcGF0aDogL15cL2dvXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjYnRuU3VibWl0Jyk7CiAgICBpZiAoIWEpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgdXJsID0gYS5ocmVmOwogICAgY29uc3QgcGF0dGVybiA9IC9odHRwcz86XC9cLy9nOwogICAgbGV0IGxhc3RVUkwgPSAnJzsKICAgIHdoaWxlICh0cnVlKSB7CiAgICAgIGNvbnN0IG1hdGNoZWQgPSBwYXR0ZXJuLmV4ZWModXJsKTsKICAgICAgaWYgKCFtYXRjaGVkKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgbGFzdFVSTCA9IG1hdGNoZWQgKyB1cmwuc3Vic3RyaW5nKHBhdHRlcm4ubGFzdEluZGV4KTsKICAgIH0KICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsYXN0VVJMKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXihsaW5rc2hyaW5rfGxua3Nocm5rKVwubmV0JC8sCiAgICBwYXRoOiAvXlwvW2EtekEtWjAtOV0rJC8sCiAgfSwKICBhc3luYyBzdGFydCAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93Ll9pbXBzcGNhYmUgPSAwOwogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IGwgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL3JldkNcKCIoW14iXSspIlwpLyk7CiAgICBsID0gYXRvYihsWzFdKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluaygnLycgKyBsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXihsaW5rc2hyaW5rfGxua3Nocm5rKVwubmV0JC8sCiAgICBwYXRoOiAvPSguKykkLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobS5wYXRoWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmR3aW5kbHlcLmlvJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBsZXQgbCA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvZW5jRFwoIihbXiJdKykiXCkvKTsKICAgIGlmIChsKSB7CiAgICAgIGwgPSBhdG9iKGxbMV0pOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoJy8nICsgbCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGwgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL2RvY3VtZW50XC5sb2NhdGlvblwuaHJlZiA9ICIoW14iXSspIi8pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGxbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15saW5rc3VwdG9cLmNvbSQvLAogICAgICAvXnVwbGlua3RvXC5tZSQvLAogICAgXSwKICAgIHBhdGg6IC9eXC92aWV3XC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuc3VibWl0LWNhcHRjaGEucm93IC5jb2wtc20tMy5jb2wtc20tb2Zmc2V0LTQgYnV0dG9uJyk7CiAgICBsLmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14oZGlyZWN0LWxpbmt8bGluay10bylcLm5ldCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbHYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL3dpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCgiKFteIl0rKSJcKTsvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsdlsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14ocmQ/KWxua1wuY28kLywKICAgIHBhdGg6IC9eXC9bXi5dKyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZiA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCdpZnJhbWUjZGVzdCcpOwogICAgaWYgKGYpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGYuc3JjKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICBsZXQgbyA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjdXJsaG9sZGVyJyk7CiAgICBpZiAobykgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoby52YWx1ZSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG8gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI3NraXBCdG4nKTsKICAgIGlmIChvKSB7CiAgICAgIG8gPSBvLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG8uaHJlZik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG8gPSBkb2N1bWVudC50aXRsZS5yZXBsYWNlKC8oTE5LLmNvfExpbmtiZWUpXHMqOlxzKi8sICcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhvKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnd3d1wubG9saW5lelwuY29tJC8sCiAgICBxdWVyeTogL1w/KC4rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG0ucXVlcnlbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ed3d3XC5taWplXC5uZXQkLywKICAgIHBhdGg6IC9eXC9cdytcLyguKykkLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBjb25zdCB1cmwgPSBhdG9iKG0ucGF0aFsxXSk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9ebWluaWRyb2lkXC5uZXQkLywKICAgICAgL15saW5rcG9pXC5pbiQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYS5yZWRpcmVjdCwgYVt0YXJnZXQ9X2JsYW5rXVtyZWw9bm9mb2xsb3ddJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXm1pcnJvcmZpbGVob3N0XC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDMgKiAxMDAwKTsKICAgIGNvbnN0IGZyYW1lID0gZnJhbWVzWzBdOwogICAgY29uc3QgZm9ybSA9IGZyYW1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTsKICAgIGZvcm0udGFyZ2V0ID0gJ19wYXJlbnQnOwogICAgZm9ybS5hY3Rpb24gPSBsb2NhdGlvbi50b1N0cmluZygpOwogICAgY29uc3QgaW5wdXQgPSBmcmFtZS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgaW5wdXQudmFsdWUgPSAnRG93bmxvYWQnOwogICAgaW5wdXQudHlwZSA9ICdzdWJtaXQnOwogICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICBmcmFtZS5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pOwogICAgaW5wdXQuY2xpY2soKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXm1vZXN1YnNcLmNvbSQvLAogICAgcGF0aDogL15cL3VybFwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5nb3RvbGluayA+IGNlbnRlcjpudGgtY2hpbGQoMSkgPiBkaXY6bnRoLWNoaWxkKDEpID4gaTpudGgtY2hpbGQoMiknKTsKICAgIGEgPSBhLnRleHRDb250ZW50OwogICAgY29uc3QgaSA9IGEubGFzdEluZGV4T2YoJ2h0dHAnKTsKICAgIGEgPSBhLnN1YnN0cihpKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL215LWxpbmsucHJvLyonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaWZyYW1lW3Njcm9sbGluZz1hdXRvXScpOwogICAgaWYgKGkpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGkuc3JjKTsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/bXlsaW5rXC56b25lJC8sCiAgICBwYXRoOiAvXlwvW14vXSskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgY29uc3QgbWF0Y2hlcyA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvPGEgaHJlZj0iaHR0cHM6XC9cLyg/Ond3d1wuKT9teWxpbmtcLnpvbmVcL2xpbmtcL3JlZGlyZWN0XC9cP3VybD0oW14mXSspJi8pOwogICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoZXNbMV0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15vbmVwaWVjZS1leFwuY29tXC5iciQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICBjb25zdCBtYXRjaGVzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC88YSBocmVmPSIoW14mXSspKD89IiApLyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobWF0Y2hlc1sxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnd3d1wubmFtaXl0XC5jb20kLywKICAgICAgL15yZWFsc2h0XC5tb2JpJC8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjc2VjdGlvbjEgZm9ybSBpbnB1dCNzZWN0aW9uMScpOwogICAgbi5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ebm1hY1wudG8kLywKICAgIHBhdGg6IC9eXC9kb3dubG9hZFwvKC4rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgY29uc3QgdXJsID0gYXRvYihtLnBhdGhbMV0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15uc2Z3XC5pbiQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjbG9uZ191cmwgYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15udXRzaGVsbHVybFwuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpZnJhbWUgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaWZyYW1lJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaWZyYW1lLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLm9uaVwudm4kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgbGV0IGRhdGEgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL2RhdGE6IihbXiJdKykiLyk7CiAgICBpZiAoIWRhdGEpIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdwYXR0ZXJuIGNoYW5nZWQnKTsKICAgIH0KICAgIGRhdGEgPSBkYXRhWzFdOwogICAgY29uc3QgdXJsID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLmdldCgnL2NsaWNrLmh0bWwnLCBkYXRhKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh1cmwpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL14od3d3XC4pP291b1wuKGlvfHByZXNzKSQvLAogICAgICAvXihzbG9vbXB8bm92YWVucmV0YSlcLnNwYWNlJC8sCiAgICBdLAogICAgcGF0aDogL15cL2dvXC9cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdmb3JtJykuc3VibWl0KCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15wXC5wdyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICBsZXQgbSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvd2luZG93XC5sb2NhdGlvbiA9ICIoLiopIjsvKTsKICAgIG0gPSBtWzFdOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ecGRpMlwubmV0JC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBsZXQgcyA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvdG9wXC5sb2NhdGlvbiA9ICcoW14nXSspJy8pOwogICAgcyA9IHNbMV07CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsocyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXihwcm9idXNpbmVzc2h1Ynx0ZWNub2diKVwuY29tJC8sCiAgICAgIC9eKHRyYWNreXdlfHN0YXJ2YXRlKVwuaW4kLywKICAgICAgL152aXJhbGNvbGxlY3RcLmluZm8kLywKICAgICAgL14odGVjaG5vZGlhfG91cnRlY2hub2V3fG11dGhhcmFtbXNzfHRoYW5kYXx0aGluYW5hKVwueHl6JC8sCiAgICAgIC9eZW50cmV0ZW5kb25hd2ViXC5nYSQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBmID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2Zvcm1baWQkPS1zdWJzY3JpYmVdJyk7CiAgICBpZiAoZikgewogICAgICBmLmFjdGlvbiA9IGYuYWN0aW9uLnJlcGxhY2UoJ2h0dHA6JywgJ2h0dHBzOicpOwogICAgICBmLnN1Ym1pdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICBmID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9sb2NhdGlvblwuaHJlZj0iKFteIl0rKSIvKTsKICAgIGYgPSBmWzFdOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ecHVjdWtcLnh5eiQvLAogICAgcGF0aDogL15cL1x3Ky8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBweCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjY29udGVudCBhcnRpY2xlIGNlbnRlciBhLmJ1dHRvbi5pY29uLmZhLWxpbmsnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhweC5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL3JpY2hsaW5rLmNvbS9hcHAvd2Vic2NyP2NtZD1fY2xpY2sma2V5PSonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBmID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ZyYW1lc2V0Jyk7CiAgICBmID0gZi5vbmxvYWQudG9TdHJpbmcoKTsKICAgIGYgPSBmLm1hdGNoKC91cmw9KFteJl0rKS8pOwogICAgaWYgKGYpIHsKICAgICAgZiA9IGRlY29kZVVSSUNvbXBvbmVudChmWzFdKTsKICAgIH0gZWxzZSB7CiAgICAgIGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZnJhbWVbbmFtZT1zaXRlXScpOwogICAgICBmID0gZi5zcmM7CiAgICB9CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15wcmV2aWV3XC5ybHVcLnJ1JC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNjb250ZW50ID4gLmxvbmdfdXJsID4gYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLnJvblwudm4kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IHNjcmlwdCA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygnbGlua25leHR0b3AnKTsKICAgIGNvbnN0IGRhdGEgPSBzY3JpcHQubWF0Y2goL2RhdGE6IihbXiJdKykiLyk7CiAgICBsZXQgdXJsID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5kb21haW4gKyAnY2xpY2suaHRtbD8nICsgZGF0YVsxXTsKICAgIHVybCA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5nZXQodXJsLCB7fSwgewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLAogICAgfSk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/c2FcLmFlJC8sCiAgICBwYXRoOiAvXlwvXHcrXC8kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IG0gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL2NvbnN0IHJlYWxfbGluayA9ICcoW14nXSspJzsvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhtWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/c2FmZXVybFwuZXUkLywKICAgIHBhdGg6IC9cL1x3Ky8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBsZXQgZGlyZWN0VXJsID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC93aW5kb3dcLm9wZW5cKCIoW14iXSspIlwpOy8pOwogICAgaWYgKCFkaXJlY3RVcmwpIHsKICAgICAgdGhyb3cgbmV3IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5BZHNCeXBhc3NlckVycm9yKCdzY3JpcHQgY29udGVudCBjaGFuZ2VkJyk7CiAgICB9CiAgICBkaXJlY3RVcmwgPSBkaXJlY3RVcmxbMV07CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZGlyZWN0VXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9ec2VnbWVudG5leHRcLmNvbSQvLAogICAgICAvXih3d3dcLik/dmlkZW9nYW1lc2Jsb2dnZXJcLmNvbSQvLAogICAgXSwKICAgIHBhdGg6IC9eXC9pbnRlcnN0aXRpYWxcLmh0bWwkLywKICAgIHF1ZXJ5OiAvcmV0dXJuX3VybD0oW14mXSspLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZGVjb2RlVVJJQ29tcG9uZW50KG0ucXVlcnlbMV0pKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKHd3d1wuKT9zZW1wcm90XC5jb20kLywKICAgICAgL140NlwuMTY2XC4xNjdcLjE2JC8sCiAgICBdLAogICAgcGF0aDogL15cL2FobGlcLnBocC8sCiAgICBxdWVyeTogL15cP3VybD0oLiopLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IHNlbSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvdmFyIHRoZV91cmwgPSAnKFteJ10rKSc7Lyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoc2VtWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKHd3d1wuKT9hcHBsb2FkelwucnUkLywKICAgICAgL14od3d3XC4pP3Nlb21hZmlhXC5uZXQkLywKICAgIF0sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgndGFibGUgYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgY29uc3QgaG9zdFJ1bGVzID0gWwogICAgL14oam53MHxjbGxrbWV8Y2xrbWVpbnxjb3JuZWV5fGNlZXN0eSlcLmNvbSQvLAogICAgL14oZGVzdHl5fGZlc3R5eXxnZXN0eXkpXC5jb20kLywKICAgIC9ec2hcLnN0JC8sCiAgICAvXih2aWlkfHdpaWR8Y2xrbWUpXC5tZSQvLAogIF07CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogaG9zdFJ1bGVzLAogICAgICBwYXRoOiAvXlwvZnJlZXplXC8uKy8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICBjb25zdCBvID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4gewogICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7CiAgICAgICAgICAgIGlmIChtdXRhdGlvbi50YXJnZXQuZ2V0QXR0cmlidXRlKCdjbGFzcycpLm1hdGNoKC9hY3RpdmUvKSkgewogICAgICAgICAgICAgIG8uZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgIHJlc29sdmUobXV0YXRpb24udGFyZ2V0LmhyZWYpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBvLm9ic2VydmUoT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNza2lwX2J1dHRvbicpLCB7CiAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10sCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjb25zdCB1cmwgPSBhd2FpdCBwcm9taXNlOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogaG9zdFJ1bGVzLAogICAgICBwYXRoOiAvaHR0cHM/OlwvXC8vLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0ICgpIHsKICAgICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaDsKICAgICAgdXJsID0gdXJsLm1hdGNoKC8oaHR0cHM/OlwvXC8uKikkLyk7CiAgICAgIHVybCA9IHVybFsxXTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IGhvc3RSdWxlcywKICAgICAgcGF0aDogL15cL1tcZFx3XSsvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0ICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5faW1wc3BjYWJlID0gMDsKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlQWxsVGltZXIoKTsKICAgICAgY29uc3QgbSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvc2Vzc2lvbklkOiAiKFtcZFx3XSspIiwvKTsKICAgICAgaWYgKG0pIHsKICAgICAgICBhZnRlckdvdFNlc3Npb25JZChtWzFdKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHsKICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgoKSA9PiB7CiAgICAgICAgICBjb25zdCBtID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9zZXNzaW9uSWQ6ICIoW1xkXHddKykiLC8pOwogICAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgby5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgIGFmdGVyR290U2Vzc2lvbklkKG1bMV0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgby5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsKICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgIH0pOwogICAgfSwKICB9KTsKICBmdW5jdGlvbiBhZnRlckdvdFNlc3Npb25JZCAoc2Vzc2lvbklkKSB7CiAgICBjb25zdCBYX05ld1JlbGljX0lEID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC94cGlkOiIoW14iXSspIi8pOwogICAgY29uc3QgZGF0YSA9IHsKICAgICAgYWRTZXNzaW9uSWQ6IHNlc3Npb25JZCwKICAgIH07CiAgICBjb25zdCBoZWFkZXIgPSB7CiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCcsCiAgICB9OwogICAgaWYgKFhfTmV3UmVsaWNfSUQpIHsKICAgICAgaGVhZGVyWydYLU5ld1JlbGljLUlEJ10gPSBYX05ld1JlbGljX0lEOwogICAgfQogICAgY29uc3QgaSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLmdldCgnL3Nob3J0ZXN0LXVybC9lbmQtYWRzZXNzaW9uJywgZGF0YSwgaGVhZGVyKS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7CiAgICAgICAgY29uc3QgciA9IEpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgaWYgKHIuc3RhdHVzID09ICdvaycgJiYgci5kZXN0aW5hdGlvblVybCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChpKTsKICAgICAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmVBbGxUaW1lcigpOwogICAgICAgICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KHIuZGVzdGluYXRpb25VcmwpOwogICAgICAgICAgcmV0dXJuIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh1cmwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCAxMDAwKTsKICB9Cn0pKCk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14oc2hvcnR8c3J0KVwuYW0kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwMDApOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKCcnLCB7CiAgICAgIHBvc3Q6IHsKICAgICAgICBfaW1hZ2U6ICdDb250aW51ZScsCiAgICAgIH0sCiAgICB9KTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/c2hvcnRpXC5nYSQvLAogICAgcGF0aDogWwogICAgICAvXlwvXHcrJC8sCiAgICAgIC9eXC91cmxfcmVkaXJlY3RvclwuaHRtbCQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGYgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCQoJ2ZyYW1lJyk7CiAgICBjb25zdCBbLCB2LF0gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uZmluZChmLCAodmFsdWUpID0+IHsKICAgICAgaWYgKHZhbHVlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkgewogICAgICAgIHJldHVybiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9uZTsKICAgICAgfQogICAgICByZXR1cm4gJ1RhcmdldCBmcmFtZSBmb3VuZCc7CiAgICB9KTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayh2LnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15zaG9ydGlkXC5jbyQvLAogICAgcGF0aDogL15cL1thLXpBLVowLTldKy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBzID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2EjbWFraW5nZGlmZmVyZW50dGltZXInKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhzLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eZ2V0XC5zaHJpbmstc2VydmljZVwuaXQkLywKICAgIHBhdGg6IC9eXC8oLispLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYC8vd3d3LnNocmluay1zZXJ2aWNlLml0L3Nocmlua2VkLyR7bS5wYXRoWzFdfWApOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ed3d3XC5zaHJpbmstc2VydmljZVwuaXQkLywKICAgIHBhdGg6IC9eXC9zaHJpbmtlZFwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaW5wdXRbaWRdW25hbWVdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaS52YWx1ZSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLnNocmluay1zZXJ2aWNlXC5pdCQvLAogICAgcGF0aDogL15cL1tzZV1cLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYm9keSA+IGlucHV0W2lkXVtuYW1lXScpOwogICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGkudmFsdWUpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ec2h0XC5pbyQvLAogICAgcGF0aDogL15cL1xkK1wvKC4rKSQvLAogIH0sCiAgYXN5bmMgc3RhcnQgKG0pIHsKICAgIGxldCB1cmwgPSBhdG9iKG0ucGF0aFsxXSk7CiAgICB1cmwgPSB1cmwubWF0Y2goL1x7c2h0LWlvXH0oLispXHtzaHQtaW9cfS4qXHtzaHQtaW9cfS8pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybFsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15zaHRsaW5rXC5jbyQvLAogICAgcGF0aDogL15cL3Nob3J0LXVybFwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IG1ldGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnbWV0YVtuYW1lPSJkZXNjcmlwdGlvbiJdJyk7CiAgICBjb25zdCB1cmwgPSBtZXRhLmNvbnRlbnQ7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnNodG1lXC5jbyQvLAogICAgcGF0aDogL15cL1x3Ky8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBzID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5jb250ZW50IGRpdiBhIGJ1dHRvbicpOwogICAgcy5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT9zaW1pbGFyc2l0ZXNcLmNvbSQvLAogICAgcGF0aDogL15cL2dvdG9cLyhbXj9dKykvCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgbGV0IGwgPSBtLnBhdGhbMV07CiAgICBpZiAoIS9eaHR0cHM/OlwvXC8vLnRlc3QobCkpIHsKICAgICAgbCA9ICdodHRwOi8vJyArIGw7CiAgICB9CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15zbGlua1wuYmlkJC8sCiAgICBwYXRoOiAvXlwvc2hvcnRcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy50ZXh0LWNlbnRlciBhI2J0bi1tYWluLmJ0bi5idG4tbWFpbicpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLnNwYXN0ZVwuY29tJC8sCiAgICBwYXRoOiAvXlwvZ29cL1x3KyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaWQgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL1x7aWQ6JyhcZCspJ1x9Lyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCgzMDAwKTsKICAgIGNvbnN0IHVybCA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5wb3N0KCcvc2l0ZS9nZXRSZWRpcmVjdExpbmsnLCB7CiAgICAgIGlkOiBpZFsxXSwKICAgIH0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLnNwYXN0ZVwuY29tJC8sCiAgICBwYXRoOiAvXlwvKHN8c2l0ZSlcL1x3KyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgY2FwdGNoYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjZ2xvYmFsQ2FwdGNoYUNvbmZpcm0nKTsKICAgIGNhcHRjaGEuY2xpY2soKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDEwMDApOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyArK2kpIHsKICAgICAgY29uc3Qgd29yZCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjY3VycmVudENhcFF1ZScpLnRleHRDb250ZW50OwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCgxMDApOwogICAgICBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKShgW2RhdGEtaWQ9JyR7d29yZH0nXWApLmNsaWNrKCk7CiAgICB9CiAgICBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3RlbXBsYXRlLWNvbnRhY3Rmb3JtLXN1Ym1pdCcpLmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15zdWIydW5sb2NrXC5jb20kLywKICAgIHBhdGg6IC9eXC9saW5rXC9nZXRcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBzdSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdhI2xpbmsudW5sb2NrLXN0ZXAtbGluay5nZXRsaW5rJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoc3UuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15zdWIydW5sb2NrXC5jb20kLywKICAgIHBhdGg6IC9eXC9bYS16QS1aMC05XSsvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3Qgc3UgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoLydocmVmJywgJyhbXiddKyknLyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoc3VbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT9zdXBlcmNoZWF0c1wuY29tJC8sCiAgICBwYXRoOiAvXlwvaW50ZXJzdGl0aWFsXC5odG1sJC8sCiAgICBxdWVyeTogLyg/Olw/fCYpb2xkdXJsPShbXiZdKykoPzokfCYpLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobS5xdWVyeVsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15zdXJmc2Vlc1wuY29tJC8sCiAgICBxdWVyeTogL15cP2dvPShbYS16QS1aMC05XSspJC8sCiAgfSwKICBhc3luYyBzdGFydCAoKSB7CiAgICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgnZ28nLCAnbGluaycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHBhdGgpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ec3VyZnNlZXNcLmNvbSQvLAogICAgcXVlcnk6IC9eXD9saW5rPShbYS16QS1aMC05XSspKGNsaWNrYXJ1cmwpPyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgcyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdpbnB1dC5idG4uYnRuLXByaW1hcnknKTsKICAgIHMuY2xpY2soKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnN1cmZzZWVzXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IHN1cmwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3dwc2FmZS1saW5reiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoc3VybC5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnN3enpcLnh5eiQvLAogICAgcGF0aDogL15cL2xpbmtcL1x3K1wvJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBnID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2EuYnRuLXdyYXBwZXIubGluaycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGcuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogWwogICAgewogICAgICBob3N0OiAvXih3d3dcLik/c3lsbmtcLm5ldCQvLAogICAgICBxdWVyeTogL2xpbms9KFteJl0rKS8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXih3d3dcLik/Y29tcHVsXC5pbiQvLAogICAgICBwYXRoOiAvXlwvW25wXVwucGhwJC8sCiAgICAgIHF1ZXJ5OiAvdj0oW14mXSspLywKICAgIH0sCiAgICB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXihzcG9ydHMxNHxtb3Rvc3BvcnQpXC5wdyQvLAogICAgICAgIC9ebGluZHVuZ1wuaW4kLywKICAgICAgICAvXm1vdG9uZXdzXC5jbHViJC8sCiAgICAgICAgL153d1syM11cLnBpY25pY3RyYW5zXC5jb20kLywKICAgICAgICAvXihhemhpZXxza2lubnljYXQpXC5uZXQkLywKICAgICAgICAvXnd3MlwuYXdzdWJzXC5jbyQvLAogICAgICAgIC9ecGxhbnRhaGVpbVwuKHdlYlwuaWR8Y29tKSQvLAogICAgICAgIC9eaXJpc3ZlcmFcLmNvbSQvLAogICAgICBdLAogICAgICBxdWVyeTogL15cP2Q9KFthLXpBLVowLTkvPV0rKSQvLAogICAgfSwKICAgIHsKICAgICAgaG9zdDogWwogICAgICAgIC9eaVwuZ3RhaW5kXC5jb20kLywKICAgICAgICAvXnBlYmlzbmlzLW11ZGFcLmNvbSQvLAogICAgICAgIC9eaGlrYXJpbm9ha2FyaW9zdFwuaW5mbyQvLAogICAgICBdLAogICAgICBxdWVyeTogL15cPyhbYS16QS1aMC05Lz1dKykkLywKICAgIH0sCiAgICB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXC5ibG9nc3BvdFwuY29tPy8sCiAgICAgICAgL14od3d3XC4pP2Rlc2lnbm15aG9tZWVcLmNvbSQvLAogICAgICAgIC9eKHd3d1wuKT9sb3NzdG9yXC5jb20kLywKICAgICAgICAvXigoa3Vyb3NhZmV8a3Vyb3NhZmV0eSlcLik/bWVuYW50aXNlbmphXC5jb20kLywKICAgICAgICAvXmRyaXZlXC5qZXBpdGtlcnRhc1wuY29tJC8sCiAgICAgICAgL15sZXdhdFwud2lidWluZG9cLmNvbSQvLAogICAgICAgIC9eKG9tZ211c2lrfG9tZ2x5cmljc3xrMm5ibG9nKVwuY29tJC8sCiAgICAgICAgL14oc2ltYWhvbGluYXxhdXRlY2gpXC54eXokLywKICAgICAgICAvXih3d3dcLik/aWQtc2VjdXJlbGlua1wueHl6JC8sCiAgICAgICAgL14od3d3XC4pP2NvbnZlcnRoaW5rc1wueHl6JC8sCiAgICAgICAgL14od3d3XC4pP21hcml2ZWxrZWNlXC54eXokLywKICAgICAgICAvXih3d3dcLik/eWFtZXRlc2VucGFpXC54eXokLywKICAgICAgICAvXih3d3dcLik/dG9qcm9zXC50ayQvLAogICAgICAgIC9eKHd3d1wuKT9hbmpheVwuaW5mbyQvLAogICAgICAgIC9eKHd3d1wuKT9rYWtrb2lpc2FmZVwudXMkLywKICAgICAgICAvXih3d3dcLik/a3Vyb3NhZmVcLih3ZWJzaXRlfG9ubGluZSkkLywKICAgICAgICAvXih3d3dcLik/ZHJha29yc2FmZVwudGVjaCQvLAogICAgICAgIC9eKGZtbGF3a2Vyc3xpbmRleG1vdmllKVwuY2x1YiQvLAogICAgICAgIC9ebWljaW5cLm9ubGluZSQvLAogICAgICAgIC9edW5kdWhcLmluLywKICAgICAgICAvXmFkNG1zYW5cLndpbiQvLAogICAgICAgIC9ebm9veXVsXC5jbyQvLAogICAgICAgIC9ecGFmcGFmXC5pbmZvJC8sCiAgICAgICAgL15oaWdodGVjaFwud2ViXC5pZCQvLAogICAgICBdLAogICAgICBxdWVyeTogWwogICAgICAgIC9eXD91cmw9KFthLXpBLVowLTkvPV0rKSQvLAogICAgICAgIC9eXD9pZD0oW2EtekEtWjAtOS89XSspJC8sCiAgICAgICAgL15cP3NpdGU9KFthLXpBLVowLTkvPV0rKSQvLAogICAgICBdLAogICAgfSwKICAgIHsKICAgICAgaG9zdDogWwogICAgICAgIC9eKHNlaGF0bGVnYXxkYXZpbnN1cmFuY2V8aGVhbHRodG9kfGlyaXN2ZXJhfGFrYW5vc29yYXxzdWJldGVuZXdzKVwuY29tJC8sCiAgICAgICAgL14od3d3XC4pP21lbmFudGlzZW5qYVwuY29tJC8sCiAgICAgICAgL14oYnVzaW5lc3Nmb3J5b3VhbmR8dHJhdmVsd2l0aHRyaWNrc3xzaXR1c2JhcnUpXC5tZSQvLAogICAgICAgIC9ecGxhbnRhaGVpbVwuKHdlYlwuaWR8Y29tKSQvLAogICAgICAgIC9eKHd3d1wuKT9zdGFyem9uZVwuY2MkLywKICAgICAgICAvXih3d3dcLik/a2Fra29paXNhZmVcLnVzJC8sCiAgICAgICAgL14od3d3XC4pP3BvbHJlY1wuc2l0ZSQvLAogICAgICAgIC9eeXVtZWNoYW5cLmNsdWIkLywKICAgICAgICAvXmNla2xpbmt1XC54eXokLywKICAgICAgICAvXmxpbmR1bmdcLihpbnxtZSkkLywKICAgICAgXSwKICAgICAgcXVlcnk6IC9eXD9yPShbYS16QS1aMC05Lz1dKykkLywKICAgIH0sCiAgICB7CiAgICAgIGhvc3Q6IC9ed3d3XC5jb21wYXJ0aWVuZG9mdWxsXC5uZXQkLywKICAgICAgcGF0aDogL15cL2dvMi8sCiAgICAgIHF1ZXJ5OiAvXlw/cD0oW2EtekEtWjAtOS89XSspJC8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXmFuaW1lZm9yY2VcLnN0cmVhbSQvLAogICAgICBxdWVyeTogL15cP2w9KFthLXpBLVowLTkvPV0rKSQvLAogICAgfSwKICAgIHsKICAgICAgaG9zdDogL14od3d3XC4pP2R1a3VuLWNpdFwuY29tJC8sCiAgICAgIHF1ZXJ5OiAvXlw/cz0oW2EtekEtWjAtOS89XSspJC8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXnVsdGltYXRlXC50dXJrZG93blwuY29tJC8sCiAgICAgIHF1ZXJ5OiAvXlw/c3RlcG9uZT0oW2EtekEtWjAtOS89XSspJC8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXmxlZWNocHJlbWl1bVwubGluayQvLAogICAgICBwYXRoOiAvXlwvY2hlYXRcLy8sCiAgICAgIHF1ZXJ5OiAvXlw/bGluaz0oW2EtekEtWjAtOS89XSspJC8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXmNsb3NldG9waWNcLnNpdGUkLywKICAgICAgcXVlcnk6IC9eXD9nbz0oW2EtekEtWjAtOS89XSspJC8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXmluZm9zaWFcLnh5eiQvLAogICAgICBxdWVyeTogL15cP2tlc2VoYXRhbj0oW2EtekEtWjAtOS89JV0rKSQvLAogICAgfSwKICAgIHsKICAgICAgaG9zdDogL15yZW1peXVcLm1lJC8sCiAgICAgIHF1ZXJ5OiAvXlw/cmVmZj0oW2EtekEtWjAtOS89XSspJC8sCiAgICB9LAogIF0sCiAgYXN5bmMgc3RhcnQgKG0pIHsKICAgIGNvbnN0IHJhd0xpbmsgPSBhdG9iKGRlY29kZVVSSUNvbXBvbmVudChtLnF1ZXJ5WzFdKSk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocmF3TGluayk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogWwogICAgewogICAgICBob3N0OiBbCiAgICAgICAgLyhefFwuKXNhZmVsaW5rKGNvbnZlcnRlcnxyZXZpZXd4PylcLmNvbT8kLywKICAgICAgICAvXmdpZ2E3NFwuY29tJC8sCiAgICAgICAgL14oYXdzdWJzY298YWQ0bXNhbilcLm1sJC8sCiAgICAgICAgL15uZWtvcG9pXC5nYSQvLAogICAgICBdLAogICAgICBxdWVyeTogL2lkPShbXHdcXF0rPSopLywKICAgIH0sCiAgICB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXihuYWlzaG98ZmlsbWt1fGhlbnBvaSlcLmxvbXBhdFwuaW4kLywKICAgICAgICAvXmVkb2dhd2FcLmxvblwucHckLywKICAgICAgICAvXnRlbG9sZXRcLmluJC8sCiAgICAgIF0sCiAgICAgIHF1ZXJ5OiAvZ289KFtcd1xcXSs9KikvLAogICAgfSwKICBdLAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBsZXQgbCA9IGF0b2IobS5xdWVyeVsxXSk7CiAgICBjb25zdCB0YWJsZSA9IHsKICAgICAgJyEnOiAnYScsCiAgICAgICcpJzogJ2UnLAogICAgICAnXyc6ICdpJywKICAgICAgJygnOiAnbycsCiAgICAgICcqJzogJ3UnLAogICAgfTsKICAgIGwgPSBsLnJlcGxhY2UoL1shKV8oKl0vZywgZnVuY3Rpb24gKG0pIHsKICAgICAgcmV0dXJuIHRhYmxlW21dOwogICAgfSk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3NhZmVsaW5rcmV2aWV3XC5jb20kLywKICAgIHBhdGg6IC9eXC9cdytcL2Nvc3RcLyhbXHcuXSspXC8/JC8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgY29uc3QgbCA9ICdodHRwOi8vJyArIG0ucGF0aFsxXTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKGdhbWVpbmZvfGFwYXNpaHxhdXRvcmlkZSlcLnB3JC8sCiAgICAgIC9eKHd3d1wuKT9saWZlc3VyYW5jZVwuaW5mbyQvLAogICAgICAvXnNwZWVkY2FyXC5jbHViJC8sCiAgICAgIC9eKHd3d1wuKT9ib2xhb2tlXC5jbHViJC8sCiAgICAgIC9eKGludGVyY2VsZXN0aWFsfHN3ZWV0bGFudGVybnxkYXZpbnN1cmFuY2V8dGVjaG5sYWIpXC5jb20kLywKICAgICAgL15hd2NhclwuaWN1JC8sCiAgICAgIC9ec2t5aW5zdXJhbmNlXC5tbCQvLAogICAgICAvXihnZXRpbmZvc3xzZWhhdHNlZ2FyfGxvbmVseW1vb24pXC5uZXQkLywKICAgICAgL15zdHRcLmF3c3Vic1wuY28kLywKICAgICAgL14od2lidWluZG98bmF0dXJhbGhlYWx0aHkpXC54eXokLywKICAgICAgL153YWlmdXNhZmVcLm9vbyQvLAogICAgXSwKICAgIHF1ZXJ5OiAvXlw/KGlkfGN8ayk9KFthLXpBLVowLTkvPV0rKSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdmb3JtJyk7CiAgICBmLnN1Ym1pdCgpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL14obGlua2FjaHxhdXRvbGlua2FjaClcLmNvbSQvLAogICAgXSwKICAgIHF1ZXJ5OiAvXlw/aWQ9KFthLXpBLVowLTkvPV0rKSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuaHVtYW5jaGVjayBmb3JtJyk7CiAgICBnLnN1Ym1pdCgpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IFsKICAgIHsKICAgICAgaG9zdDogWwogICAgICAgIC9ebW90b25ld3NcLmNsdWIkLywKICAgICAgICAvXih3d3dcLik/Ym9sYW9rZVwuY2x1YiQvLAogICAgICAgIC9eKGFuaS1zaGFyZXxhdXRvbGlua2FjaClcLmNvbSQvLAogICAgICAgIC9eKGF1dG9mYW5zfGxhbmRzY2FwZW5hdHVyZSlcLnB3JC8sCiAgICAgICAgL14od3d3XC4pP2xpZmVzdXJhbmNlXC5pbmZvJC8sCiAgICAgIF0sCiAgICAgIHF1ZXJ5OiAvZ2V0PShbXiZdKykvLAogICAgfSwKICAgIHsKICAgICAgaG9zdDogWwogICAgICAgIC9eKGdhbWVpbmZvKVwucHckLywKICAgICAgICAvXih3d3dcLik/bGlmZXN1cmFuY2VcLmluZm8kLywKICAgICAgICAvXnNwZWVkY2FyXC5jbHViJC8sCiAgICAgICAgL14od3d3XC4pP2JvbGFva2VcLmNsdWIkLywKICAgICAgICAvXihhdXRvbGlua2FjaHxkYXZpbnN1cmFuY2UpXC5jb20kLywKICAgICAgICAvXmF3Y2FyXC5pY3UkLywKICAgICAgICAvXnNreWluc3VyYW5jZVwubWwkLywKICAgICAgICAvXihnZXRpbmZvcylcLm5ldCQvLAogICAgICAgIC9ec3R0XC5hd3N1YnNcLmNvJC8sCiAgICAgICAgL153aWJ1aW5kb1wueHl6JC8sCiAgICAgIF0sCiAgICB9LAogIF0sCiAgYXN5bmMgcmVhZHkgKG0pIHsKICAgIGxldCBzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC8oY29uc3R8dmFyKSBhPScoW14nXSspJy8pOwogICAgaWYgKHMpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHNbMl0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBzID0gYXRvYihtLnF1ZXJ5WzFdKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhzKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9ed2FpZnVzYWZlXC5vb28kLywKICAgICAgL15uYXR1cmFsaGVhbHRoeVwueHl6JC8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhaXQoMTAwMCk7CiAgICBjb25zdCBsbiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjbGFuZGluZy5ydXJhc2FmZWN0cmwgLnRvIGEnKTsKICAgIGxuLmNsaWNrKCk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCgxMDAwKTsKICAgIGNvbnN0IHRsID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5ydXJhc2FmZWN0cmwgaW1nI3Nob3dsaW5rLnNwb2ludCcpOwogICAgdGwuY2xpY2soKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9eKHNlaGF0c2VnYXJ8bG9uZWx5bW9vbilcLm5ldCQvLAogICAgICAvXihpbnRlcmNlbGVzdGlhbHxzd2VldGxhbnRlcm4pXC5jb20kLywKICAgIF0sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCgxMDAwKTsKICAgIGNvbnN0IGxuID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNsYW5kaW5nLnNvcmFjdHJsIC50byBhJyk7CiAgICBsbi5jbGljaygpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhaXQoMjAwMCk7IAogICAgY29uc3QgdGwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLnNvcmFjdHJsIGltZyNzaG93bGluay5zcG9pbnQnKTsKICAgIHRsLmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXihsaW5rYWNofHRlY2hubGFiKVwuY29tJC8sCiAgICAgIC9eKGFwYXNpaHxhdXRvcmlkZSlcLnB3JC8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhaXQoMTAwMCk7CiAgICBjb25zdCBsbiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjbGFuZGluZy5zb3JhY3RybCAudG8gYScpOwogICAgbG4uY2xpY2soKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwMDApOyAKICAgIGNvbnN0IHRsID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5zb3JhY3RybCBpbWcjc2hvd2xpbmsuc3BvaW50Jyk7CiAgICB0bC5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ebGV3YXRcLmluJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBsID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNsYW5qdXQgPiAjZ29lcyA+IGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ec2FyZGVhdGhcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3Qgc2QgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLmRvd25sb2FkLWxpbmsgPiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoc2QuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15nb291XC5pbiQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjZG93bmxvYWRfbGluayA+IGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhnLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IFsKICAgIHsKICAgICAgaG9zdDogL150b3V0LWRlYnJpZFwubmV0JC8sCiAgICAgIHBhdGg6IC9eXC9hcGlcLy8sCiAgICB9LAogICAgewogICAgICBob3N0OiAvXjE2M1wuMTcyXC44M1wuMTQ1JC8sCiAgICAgIHBhdGg6IC9eXC9kZWJcL2FwaVwvLywKICAgIH0sCiAgXSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCB0ID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5kb3dubG9hZC1ib3ggPiBkaXYgPiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodC5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmRyaXZlaHViXC5saW5rJC8sCiAgICBwYXRoOiAvXlwvZmlsZVwucGhwLywKICAgIHF1ZXJ5OiAvXlw/aWQ9KC4rKS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBkID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5pbmZvYm94ID4gY2VudGVyID4gYiA+IGEjcHJvY2VlZC5idG4uYnRuLWRhbmdlcicpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGQuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15rb21iYXRjaFwubG9uY2F0XC5wdyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IHMgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uc2VhcmNoRnJvbVNjcmlwdHMoL1wub3BlblwoIihbXiJdKykiLC8pOwogICAgcyA9IHNbMV0ubWF0Y2goL2dvPShbXiZdKykvKTsKICAgIHMgPSBhdG9iKHNbMV0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ec2tpcGxpbmtcLmlvJC8sCiAgICBwYXRoOiAvXlwvZ2V0XC9saW5rXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgcyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcucGFuZWwucGFuZWwtZGVmYXVsdC5wYW5lbC1ib2R5ID4gY2VudGVyID4gY2VudGVyID4gYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHMuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXih2MVwuKT9oZXhhZmlsZVwubmV0JC8sCiAgICAgIC9ec2tpcGxpbmtcLmlvJC8sCiAgICBdLAogICAgcGF0aDogL15cL1thLXpBLVowLTldKy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBoID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC89IihbXiJdKykiLGU9MCxmPWEvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhoWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmRyaXZlZmlsZXNcLmJpZCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZCA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvd2luZG93XC5vcGVuXCgnKFteJ10rKSdcKTsvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhkWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmFuZHJvaWQtMVwuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9pZD1kb3dubG9hZD48XC9kaXY+PGEgaHJlZj0oW14+XSspPi8pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGFbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eYm9vc3RcLmluayQvLAogIH0sCiAgYXN5bmMgc3RhcnQgKCkgewogICAgY29uc3QgYiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdib2R5JykuZ2V0QXR0cmlidXRlKCdyZXN1bHQnKTsKICAgIGlmIChiKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhdG9iKGIpKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybjsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmRvd25sb2FkLW1pcnJvclwuZ2EkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGRtID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9hIGhyZWY9JyhbXiddKyknLyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoZG1bMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9edXJsXC5odWxibG9nXC5jb20kLywKICAgIHBhdGg6IC9eXC9bYS16QS1aMC05XSsvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaCA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvImhyZWY9JyhbXiddKyknLyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoaFsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnd3WzIzXVwucGljbmljdHJhbnNcLmNvbSQvLAogICAgICAvXnNob3J0XC5hd3N1YnNcLihjb3xtZSkkLywKICAgIF0sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2Rpdi5raXJpID4gY2VudGVyID4gYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXih3d3dcLik/YW5qYXlcLmluZm8kLywKICAgICAgL14od3d3XC4pP3RldGV3XC5pbmZvJC8sCiAgICAgIC9ed3d3XC5uamlpclwuY29tJC8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZGl2LmRvd25sb2FkLWxpbmsgPiBhJyk7CiAgICBhID0gYS5ocmVmLm1hdGNoKC9yPSguKikkLyk7CiAgICBhID0gYXRvYihhWzFdKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9ec3BhY2V0aWNhXC5jb20kLywKICAgICAgL15za2lubnljYXRcLm9yZyQvLAogICAgXSwKICAgIHBhdGg6IC9eXC9cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLmJ0bicpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGwuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15kYXVuc2hvcnRlXC50ZWtub2xvZ2lsaW5rXC5jb20kLywKICAgIHBhdGg6IC9eXC9saW5rc2hvcnRlbGlua1wvc2FmZWxpbmtcLnBocCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdkaXYuYXJ0aWNsZSA+IGRpdjpudGgtY2hpbGQoMSkgPiBjZW50ZXIgPiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobC5ocmVmLCB7CiAgICAgIHJlZmVyZXI6IGZhbHNlLAogICAgfSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL150ZWtub3NhZmVcLnRla25vbG9naWxpbmtcLmNvbSQvLAogICAgcGF0aDogL15cL2xpbmt0ZWtub2xpbmtcL3NhZmVsaW5rc2NyaXB0XC5waHAkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3RlbXBsYXRlbW9fY29udGVudCA+IGRpdiA+IGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsLmhyZWYsIHsKICAgICAgcmVmZXJlcjogZmFsc2UsCiAgICB9KTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnphcFwuaW4kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IHogPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLnBhbmVsLWJvZHkgYnV0dG9uJyk7CiAgICB6LmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXihzYXRhbmlhYmF0Y2h8Z2V0LWNsaWNrMilcLmJsb2dzcG90XC5jb20kLywKICAgICAgL14od3d3XC4pP3ZlaGljbGUtdGVjaG5vXC5jZiQvLAogICAgICAvXih3d3dcLik/dGV0ZXdsaW5rXC5tZSQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGNsYnQgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYnV0dG9uI2dvdG9saW5rJyk7CiAgICBjbGJ0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDEpOwogICAgY2xidC5jbGljaygpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaWRuYXRpb25cLm5ldCQvLAogICAgcXVlcnk6IC9eXD9wYWdlPS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBsID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNsaW5rbycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGwuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL150ZWNoZnVuZGFcLm5ldCQvLAogICAgcGF0aDogWwogICAgICAvXlwvbGlua1wvLywKICAgICAgL15cL3NhZmVcLy8sCiAgICBdLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuaGlkZSBhLmJ0bicpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL150aGluZmlcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdkaXYgcCBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmhlbGxvXC50cmlidW50ZWtub1wuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2RpdiBwIHUgYiBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiBbCiAgICB7CiAgICAgIGhvc3Q6IC9edGlueWFycm93c1wuY29tJC8sCiAgICAgIHBhdGg6IC9eXC9wcmV2aWV3XC5waHAkLywKICAgICAgcXVlcnk6IC9eXD9wYWdlPShbXiZdKykvLAogICAgfSwKICAgIHsKICAgICAgaG9zdDogL153d3dcLmphdmxpYnJhcnlcLmNvbSQvLAogICAgICBxdWVyeTogL3VybD0oLispJC8sCiAgICB9LAogIF0sCiAgYXN5bmMgc3RhcnQgKG0pIHsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhkZWNvZGVVUklDb21wb25lbnQobS5xdWVyeVsxXSkpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT90b3RhbGRlYnJpZFwub3JnJC8sCiAgICBwYXRoOi9cL2xcLyhsXC5waHApPyQvLAogICAgcXVlcnk6IC9cP2Fkcz0oW2EtekEtWjAtOT1dKykkLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBjb25zdCBsID0gYXRvYihtLnF1ZXJ5WzFdKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnR1cmtkb3duXC5jb20kLywKICAgIHBhdGg6IC9eXC9saW5rLywKICAgIHF1ZXJ5OiAvXlw/aWQ9KC4rKS8sCiAgfSwKICBhc3luYyByZWFkeSAobSkgewogICAgbGV0IGh0bWwgPSBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uZ2V0KGA/YWpheD0ke20ucXVlcnlbMV19YCk7CiAgICBodG1sID0gSlNPTi5wYXJzZShodG1sKTsKICAgIGNvbnN0IHJlcyA9IC9zdGVwb25lPSguKykvLmV4ZWMoaHRtbC51cmwpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGF0b2IocmVzWzFdKSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL151XC50byQvLAogICAgcGF0aDogL15cL1tcdy1dKy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCB1ID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC93aW5kb3cubG9jYXRpb249JyhbXiddKyknOy8pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9edW5mYWtlXC5pdCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZnJhbWUgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZnJhbWUnKTsKICAgIGNvbnN0IGkgPSBmcmFtZS5zcmMubGFzdEluZGV4T2YoJ2h0dHA6Ly8nKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhmcmFtZS5zcmMuc3Vic3RyKGkpKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9edXJcLmx5JC8sCiAgICAgIC9edXJseVwubW9iaSQvLAogICAgXSwKICAgIHBhdGg6IC9eXC94KC4rKS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgnL3gnLCAnL2dvaWkvJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgfQp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnVybFwuZm0kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2NsaWNrYnRuIGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9edXJsXC5pZSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdhW3RpdGxlPSJMaW5rIHRvIG9yaWdpbmFsIFVSTCJdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC8oXnxcLil1cmxjYXNoXC4oY29tfG5ldHxvcmcpJC8sCiAgICAgIC9eKGJhdDV8ZGV0b25hdGluZ3xjZWxlYmNsa3xlaWdodHRlZW58c21pbGluZ2xpbmtzfHBlZWthdG15Z2lybGZyaWVuZHxwb3JueWhvc3R8Y2xiMXx1cmxnYWxsZXJpZXMpXC5jb20kLywKICAgICAgL15sb29ibGVcLm5ldCQvLAogICAgICAvXnh4eHNcLm9yZyQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGlmIChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93ICYmIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cubGlua0Rlc3RVcmwpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cubGlua0Rlc3RVcmwpOwogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBtYXRjaGVzID0gZG9jdW1lbnQuYm9keS5pbm5lckhUTUwubWF0Y2goL2xpbmtEZXN0VXJsID0gJyguKyknLyk7CiAgICBpZiAobWF0Y2hlcykgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobWF0Y2hlc1sxXSk7CiAgICAgIHJldHVybjsKICAgIH0KICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnVybGlublwuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBtID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ01FVEFbSFRUUC1FUVVJVj1yZWZyZXNoXScpLmdldEF0dHJpYnV0ZSgnQ09OVEVOVCcpLm1hdGNoKC91cmw9JyhbXiddKyknLyk7CiAgICBpZiAobSkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobVsxXSk7CiAgICB9CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL151cmxtc1wuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpZnJhbWUgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2NvbnRlbnQnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhpZnJhbWUuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/dXJsdjJcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCdsb2NrZWQnKSA+PSAwKSB7CiAgICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnL2xvY2tlZCcsICcnKTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHBhdGgpOwogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBtID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9qZXRvbj0oW1x3XSspLyk7CiAgICBjb25zdCBsID0gJ2h0dHA6Ly91cmx2Mi5jb20vYWxnby5waHA/YWN0aW9uPXBhc3NlciZweD0wJnNvPTEmamV0b249JyArIG1bMV07CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg1ICogMTAwMCk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3Vza2lwXC5tZSQvLAogICAgcGF0aDogL15cL2dvXC9cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2J0bi1tYWluJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnV4OVwuZGUkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IG1ldGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnbWV0YVtodHRwLWVxdWl2PSJyZWZyZXNoIl1bY29udGVudCo9InVybD0iXScpOwogICAgY29uc3QgdXJsID0gbWV0YS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKS5tYXRjaCgvaHR0cC4qLylbMF07CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsodXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnZhdmlcLmNvJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBsID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNnb0xpbmsnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9edmNyeXB0XC5uZXQkLywKICAgIHBhdGg6IC9eXC9mYXN0c2hpZWxkXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgdiA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdmb3JtIGlucHV0LmJ0bmNvbnRpbnVlJyk7CiAgICB2LmNsaWNrKCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLnZpaWRpaVwuaW5mbyQvLAogICAgcXVlcnk6IC91cmw9KFteJl0rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG0ucXVlcnlbMV0pOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLnZpaWRpaVwuaW5mbyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuYmdsaW5rJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3Blbkxpbmsoby5ocmVmKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/dmlyXC5hbCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5zZWFyY2hGcm9tU2NyaXB0cygvY29uc3QgdGFyZ2V0X3VybCA9ICcoW14nXSspJzsvKTsKICAgIGlmICghbSkgewogICAgICB0aHJvdyBuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IoJ3NpdGUgY2hhbmdlZCcpOwogICAgfQogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKG1bMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eKHd3d1wuKT92enR1cmxcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgZnJhbWUgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZnJhbWVbc2Nyb2xsaW5nPXllc10nKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhmcmFtZS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ec3RcLndhcmRoYW5pbWVcLm5ldCQvLAogICAgcGF0aDogL15cL2lcL1xkKyQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjd3JhcHBlciA+IFtjbGFzc149InRvbWJvIl0gPiBhW3RhcmdldD0iX2JsYW5rIl0nKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ed2lraWFsbFwub3JnJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBkaXYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZGl2I3BsYWNlLmdldC1idG4nKTsKICAgIGNvbnN0IG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgIGNvbnN0IGEgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnZGl2I3BsYWNlLmdldC1idG4gPiBhW2hyZWZdJyk7CiAgICAgIGlmIChhICYmIGEuaHJlZikgewogICAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhLmhyZWYpOwogICAgICB9CiAgICB9KTsKICAgIG8ub2JzZXJ2ZShkaXYsIHsKICAgICAgY2hpbGRMaXN0OiB0cnVlCiAgICB9KTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXndvblwucGUkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJy5wcm9ncmVzcy5jYXB0Y2hhX2xvYWRlciwgc2tpcGJveCcpOwogICAgY29uc3QgY2FwdGNoYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjcmVjYXB0Y2hhJyk7CiAgICBjYXB0Y2hhLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgY29uc3QgcCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICAgIGlmIChjYXB0Y2hhLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgewogICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG9ic2VydmVyLm9ic2VydmUoY2FwdGNoYSwgewogICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICAgIH0pOwogICAgfSk7CiAgICBhd2FpdCBwOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cubG9uZ1VSTCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly95ZXAuaXQvcHJldmlldy5waHA/cD0qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBsaW5rID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ZvbnRbY29sb3I9ImdyZXkiXScpLmlubmVySFRNTDsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhsaW5rKTsKICB9LAp9KTsKKCgpID0+IHsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogJ2h0dHA6Ly93d3cueW9vY2xpY2suY29tL2wvKicsCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgICBjb25zdCB1bmlxID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy51bmlxIHx8IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cudW5pcWk7CiAgICAgIGlmICghdW5pcSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOwogICAgICBjb25zdCB1cmwgPSBgJHtwYXRofT9hamF4PXRydWUmYWRibG9jaz1mYWxzZSZvbGQ9ZmFsc2UmZnJhbWVkPWZhbHNlJnVuaXE9JHt1bmlxfWA7CiAgICAgIGF3YWl0IGdldFVSTCh1cmwpOwogICAgfSwKICB9KTsKICBhc3luYyBmdW5jdGlvbiBnZXRVUkwgKHVybCkgewogICAgY29uc3QgdGV4dCA9IGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5nZXQodXJsKTsKICAgIGNvbnN0IGdvb2RVUkwgPSAvXihodHRwcz98ZnRwKTpcL1wvKCgoKFthLXpdfFxkfC18XC58X3x+fFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoJVtcZGEtZl17Mn0pfFshJCYnKCkqKyw7PV18OikqQCk/KCgoXGR8WzEtOV1cZHwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKVwuKFxkfFsxLTldXGR8MVxkXGR8MlswLTRdXGR8MjVbMC01XSlcLihcZHxbMS05XVxkfDFcZFxkfDJbMC00XVxkfDI1WzAtNV0pXC4oXGR8WzEtOV1cZHwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKSl8KCgoW2Etel18XGR8W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pfCgoW2Etel18XGR8W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKFthLXpdfFxkfC18XC58X3x+fFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKSooW2Etel18XGR8W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKSlcLikrKChbYS16XXxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KChbYS16XXxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKihbYS16XXxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkpKVwuPykoOlxkKik/KShcLygoKFthLXpdfFxkfC18XC58X3x+fFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoJVtcZGEtZl17Mn0pfFshJCYnKCkqKyw7PV18OnxAKSsoXC8oKFthLXpdfFxkfC18XC58X3x+fFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoJVtcZGEtZl17Mn0pfFshJCYnKCkqKyw7PV18OnxAKSopKik/KT8oXD8oKChbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KCVbXGRhLWZdezJ9KXxbISQmJygpKissOz1dfDp8QCl8W1x1RTAwMC1cdUY4RkZdfFwvfFw/KSopPygjKCgoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pfCglW1xkYS1mXXsyfSl8WyEkJicoKSorLDs9XXw6fEApfFwvfFw/KSopPyQvaS50ZXN0KHRleHQpOwogICAgaWYgKGdvb2RVUkwpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHRleHQpOwogICAgICByZXR1cm47CiAgICB9CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg1MDApOwogICAgYXdhaXQgZ2V0VVJMKHVybCk7CiAgfQp9KSgpOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eKHd3d1wuKT8oW2EtekEtWjAtOV0rXC4pP2JpbmJveFwuaW8kLywKICAgICAgcGF0aDogL1wvKFthLXpBLVowLTldKykvLAogICAgICBoYXNoOiAvKD86IyhbYS16QS1aMC05XSspKT8vLAogICAgfSwKICAgIGFzeW5jIHJlYWR5IChtKSB7CiAgICAgIGNvbnN0IHNqY2wgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LnNqY2w7CiAgICAgIGNvbnN0IHBhc3RlX2lkID0gbS5wYXRoWzFdOwogICAgICBjb25zdCBwYXN0ZV9zYWx0ID0gbS5oYXNoWzFdOwogICAgICBjb25zdCBBUElfVVJMID0gYGh0dHBzOi8vYmluYm94LmlvLyR7cGFzdGVfaWR9Lmpzb25gOwogICAgICBsZXQgcGFzdGVJbmZvID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLmdldChBUElfVVJMLCBmYWxzZSwgewogICAgICAgIE9yaWdpbjogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLm5vbmUsCiAgICAgICAgUmVmZXJlcjogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLm5vbmUsCiAgICAgICAgQ29va2llOiAncmVmZXJyZXI9MScsCiAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9uZSwKICAgICAgfSk7CiAgICAgIHBhc3RlSW5mbyA9IEpTT04ucGFyc2UocGFzdGVJbmZvKTsKICAgICAgaWYgKCFwYXN0ZUluZm8ub2spIHsKICAgICAgICB0aHJvdyBuZXcgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLkFkc0J5cGFzc2VyRXJyb3IoJ2Vycm9yIHdoZW4gZ2V0dGluZyBwYXN0ZSBpbmZvcm1hdGlvbicpOwogICAgICB9CiAgICAgIGlmIChwYXN0ZUluZm8ucGFzdGUudXJsKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHBhc3RlSW5mby5wYXN0ZS51cmwpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCByYXdfcGFzdGUgPSBzamNsLmRlY3J5cHQocGFzdGVfc2FsdCwgcGFzdGVJbmZvLnBhc3RlLnRleHQpOwogICAgICBpZiAoaXNMaW5rKHJhd19wYXN0ZSkpIHsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocmF3X3Bhc3RlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgZWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJyk7CiAgICAgIGVsbS5pZCA9ICdwYXN0ZS10ZXh0JzsKICAgICAgZWxtLmlubmVySFRNTCA9IGxpbmtpZnkocmF3X3Bhc3RlKTsKICAgICAgY29uc3QgZnJhbWUgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3Bhc3RlLWZyYW1lLCAjY2FwdGNoYS1wYWdlJyk7CiAgICAgIGZyYW1lLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGVsbSwgZnJhbWUpOwogICAgfSwKICB9KTsKICBjb25zdCBzVXJsID0gJyhcXGIoaHR0cHM/fGZ0cHxmaWxlKTovL1stQS1aMC05KyZAIy8lPz1+X3whOiwuO10qWy1BLVowLTkrJkAjLyU9fl98XSknOwogIGZ1bmN0aW9uIGlzTGluayAodGV4dCkgewogICAgY29uc3QgclVybCA9IG5ldyBSZWdFeHAoYF4ke3NVcmx9JGAsICdpJyk7CiAgICByZXR1cm4gclVybC50ZXN0KHRleHQpOwogIH0KICBmdW5jdGlvbiBsaW5raWZ5ICh0ZXh0KSB7CiAgICBjb25zdCByVXJsID0gbmV3IFJlZ0V4cChzVXJsLCAnaWcnKTsKICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoclVybCwgKG1hdGNoKSA9PiB7CiAgICAgIHJldHVybiBgPGEgaHJlZj0iJHttYXRjaH0iPiR7bWF0Y2h9PC9hPmA7CiAgICB9KTsKICB9Cn0pKCk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3Bhc3RlZFwuY28kLywKICAgIHBhdGg6IC9eXC9cdyskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJyNjYXB0Y2hhX292ZXJsYXknKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnd3d1wuMmlcLihza3xjeikkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGltZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjd3JhcDMgaW1nJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGltZy5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IFsKICAgICdodHRwOi8vKi5hYmxvYWQuZGUvaW1hZ2UucGhwP2ltZz0qJywKICAgICdodHRwOi8vd3d3LmltYWdldXAucnUvKi8qLyouaHRtbCcsCiAgXSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNpbWFnZScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15hbGwtcG9zdGVyXC5ydSQvLAogICAgcXVlcnk6IC9eXD92PS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNpbWFnZW4gaW1nJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmJ1bm55Zm9ydW1cLm9yZyQvLAogICAgcXVlcnk6IC9eXD92PS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ltZ1t0aXRsZV49Q2xpY2tdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmJheWltZ1wuY29tJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNtYWluSW1hZ2UnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eYmVlaW1nXC5jb20kLywKICAgIHBhdGg6IC9cL3ZpZXdcLy4qLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGltZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdpbWcuaW1nLXJlc3BvbnNpdmUnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLnNyYywgewogICAgICByZXBsYWNlOiB0cnVlLAogICAgfSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly93d3cuYmlsZGVyLXVwbG9hZC5ldS9zaG93LnBocD9maWxlPSonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaW5wdXRbdHlwZT1pbWFnZV0nKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6ICdodHRwOi8vd3d3LmNhc2ltYWdlcy5jb20vaW1nLnBocD8qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpbWcgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgndGQgYSBpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9jdWJldXBsb2FkLmNvbS9pbS8qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpbWcgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaW1nLmdhbGxlcnlCaWdJbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15kZXBpY1wubWUkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3BpYycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14oaW1nZGlub3xpbWd0aWdlcnxpbWd6YXApXC5jb20kLywKICAgIHBhdGg6IC9eXC92aWV3ZXJcLnBocCQvLAogICAgcXVlcnk6IC9eXD9maWxlPS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBvID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNjdXJzb3JfbHVwYScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShvLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly8qLmRpcmVjdHVwbG9hZC5uZXQvZmlsZS8qLmh0bScsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjSW1nRnJhbWUnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15ld2FcLmFjJC8sCiAgICAgIC9eZWxpbFwuY2MkLywKICAgIF0sCiAgICBwYXRoOiAvXlwvKC4qKSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKG0pIHsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwMDApOwogICAgY29uc3QgdXJsID0gYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnBvc3QoJy9zaXRlL2dldC1uZXctcmVkaXJlY3QtbGluaycsIHsKICAgICAgY29kZTogbS5wYXRoWzFdLAogICAgICBhZHNfYmxvY2tlZDogZmFsc2UsCiAgICB9KTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UodXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmZhc3RwaWNcLnJ1JC8sCiAgICBwYXRoOiAvXlwvdmlld1wvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3BpY0NvbnRhaW5lciBpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMsIHsKICAgICAgcmVmZXJlcjogdHJ1ZSwKICAgIH0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eZm9wa29kaWFrXC5zaXRlJC8sCiAgICBwYXRoOiAvXlwvaW1hZ2VcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpbWcgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaGVhZCA+IGxpbmtbcmVsPWltYWdlX3NyY10nKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLmhyZWYpOwogIH0KfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly93d3cuZm90b2xpbmsuc3Uvdi5waHA/aWQ9KicsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjY29udGVudCBpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6ICdodHRwOi8vd3d3LmZvdG9zaWsucGwvcG9rYXpfb2JyYXplay9wZWxueS8qLmh0bWwnLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYS5ub2JvcmRlciBpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15mcmVha2ltYWdlXC5jb20kLywKICAgICAgL153d3dcLmhvc3RwaWNcLm9yZyQvLAogICAgXSwKICAgIHBhdGg6IC9eXC92aWV3XC5waHAkLywKICAgIHF1ZXJ5OiAvXlw/ZmlsZW5hbWU9KFteJl0rKS8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZSgnL2ltYWdlcy8nICsgbS5xdWVyeVsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP2ZyZWVpbWd1cFwuY29tJC8sCiAgICBwYXRoOiAvXlwveHh4XC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaW1nID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNtYWluaW1hZ2UnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15mdWxsaW1nXC5jb20kLywKICAgIHF1ZXJ5OiAvXlw/dj0oW14mXSspLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKCcvaW1hZ2VzLycgKyBtLnF1ZXJ5WzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmltYWdlcDJwXC5jb20kLywKICAgIHF1ZXJ5OiAvXlw/dj0oW14mXSspLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKCcvaW1hZ2VzLycgKyBtLnF1ZXJ5WzFdICsgJy5qcGVnJyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogWwogICAgJ2h0dHA6Ly9mdW5reWltZy5jb20vdmlld2VyLnBocD9pbWc9KicsCiAgICAnaHR0cDovL2Z1bmt5aW1nLmNvbS92aWV3LyonLAogIF0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjdmlld2VyIGltZycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgY29uc3QgaG9zdFJ1bGUgPSAvXmdvaW1hZ2Vob3N0XC5jb20kLzsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBob3N0UnVsZSwKICAgICAgcGF0aDogL15cL3h4eFwvaW1hZ2VzXC8vLAogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBob3N0UnVsZSwKICAgICAgcGF0aDogL15cL3h4eFwvKC4rKS8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKG0pIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZSgnL3h4eC9pbWFnZXMvJyArIG0ucGF0aFsxXSk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IGhvc3RSdWxlLAogICAgICBxdWVyeTogL15cP3Y9KC4rKS8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKG0pIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZSgnL3h4eC9pbWFnZXMvJyArIG0ucXVlcnlbMV0pOwogICAgfSwKICB9KTsKfSkoKTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL3d3dy5ob3N0aW5ncGljcy5uZXQvdmlld2VyLnBocD9pZD0qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNpbWdfdmlld2VyJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiBbCiAgICAnaHR0cDovL2lmb3Rvcy5wbC96b2JhY3ovKicsCiAgICAnaHR0cHM6Ly9wb3N0aW1nLmNjLyonLAogIF0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdtZXRhW3Byb3BlcnR5PSJvZzppbWFnZSJdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKG0uY29udGVudCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15pbWFcLnNvJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNpbWFnZV9ibG9jayBhJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15pbWFkdWxcLmNvbSQvLAogICAgcXVlcnk6IC9cP3BbbXRdPSguKykvLAogIH0sCiAgYXN5bmMgc3RhcnQgKG0pIHsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoJy8/ZGk9JyArIG0ucXVlcnlbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW1hZ2UyeW91XC5ydSQvLAogICAgcGF0aDogL15cL1xkK1wvXGQrLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnZGl2LnRfdGlwczIgZGl2ID4gaW1nJyk7CiAgICBpZiAoIWkpIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKCcnLCB7CiAgICAgICAgcG9zdDogewogICAgICAgICAgX2NvbmZpcm06ICcnLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL3d3dy5pbWFnZWJhbS5jb20vaW1hZ2UvKicsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgbGV0IG8gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnLmltYWdlLWNvbnRhaW5lciBpbWdbaWRdJyk7CiAgICBpZiAobykgewogICAgICBvID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJy5jb250YWluZXItZnVsbCBpbWcuaW1hZ2Vbc3JjXj0iaHR0cCJdJyk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhvLnNyYyk7CiAgICAgICAgICAgIHJldHVybjsKICAgIH0KICAgIG8gPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYm9keSA+IGRpdiA+IGRpdiA+IGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhvLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6ICdodHRwOi8vd3d3LmltYWdlaG91c2luZy5jb20vaW1hZ2UvKicsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCd0ZC50ZXh0X2l0ZW0gaW1nJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL2ltYWdlbm8uY29tLyouaHRtbCcsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjaW1hZ2VfZGl2IGltZycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL14od3d3XC4pP2ltYWdlcG9ydGVyXC5jb20kLywKICAgICAgcGF0aDogL15cL1x3ezEyfVwvLipcLmh0bWwkLywKICAgIH0sCiAgICByZWFkeTogcnVuLAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXih3d3dcLik/KGltYWdlY2Fycnl8aW1hZ2VkdW5rfGltYWdlcG9ydGVyfGltYWdlc3dpdGNoKVwuY29tJC8sCiAgICAgICAgL14od3d3XC4pPyhwaWNsZWV0fHBpY3R1cmVkaXB8cGljdHVyZXR1cm4pXC5jb20kLywKICAgICAgICAvXih3d3dcLik/aW1nc3BpY2VcLmNvbSQvLAogICAgICAgIC9eKHd3d1wuKT8ocGljbGFtYm98eWFua29pbWFnZXMpXC5uZXQkLywKICAgICAgXSwKICAgIH0sCiAgICByZWFkeTogcnVuLAogIH0pOwogIGFzeW5jIGZ1bmN0aW9uIHJ1biAoKSB7CiAgICBjb25zdCBvID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNkb3dubG9hZF9ib3ggaW1nW2lkXScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShvLnNyYyk7CiAgfQp9KSgpOwooZnVuY3Rpb24gKCkgewogIGNvbnN0IGhvc3QgPSAvXmltYWdlc2hhY2tcLnVzJC87CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogaG9zdCwKICAgICAgcGF0aDogL15cL3Bob3RvXC8uK1wvKC4rKVwvKFteL10rKS8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKG0pIHsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShgL2YvJHttLnBhdGhbMV19LyR7bS5wYXRoWzJdfS9gKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogaG9zdCwKICAgICAgcGF0aDogL15cL2ZcLy4rXC9bXi9dKy8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNmdWxsaW1nJyk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgfSwKICB9KTsKfSkoKTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL2ltYWdlc2hvc3QucnUvcGhvdG8vKi9pZCouaHRtbCcsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjYnBob3RvIGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoYS5ocmVmKTsKICB9LAp9KTsKKGZ1bmN0aW9uICgpIHsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogWwogICAgICB7CiAgICAgICAgaG9zdDogWwogICAgICAgICAgL153d3dcLihmcmVlYnVua2VyfGltZ2NhcnJ5fGltZ3Nob3RzKVwuY29tJC8sCiAgICAgICAgICAvXnd3d1wuaW1hZ2VzbmFrZVwuKGNvbXxvcmcpJC8sCiAgICAgICAgXSwKICAgICAgICBwYXRoOiAvXlwvc2hvd1wucGhwJC8sCiAgICAgICAgcXVlcnk6IC9eXD8vLAogICAgICB9LAogICAgICB7CiAgICAgICAgaG9zdDogL153d3dcLihmcmVlYnVua2VyfGltZ3Nob3RzKVwuY29tJC8sCiAgICAgICAgcGF0aDogL15cL3Nob3dcLy8sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBob3N0OiBbCiAgICAgICAgICAvXnd3d1wuaW1hZ2VzbmFrZVwuKGNvbXxvcmcpJC8sCiAgICAgICAgICAvXnd3d1wuaW1hZ2VmcnVpdFwuY29tJC8sCiAgICAgICAgXSwKICAgICAgICBwYXRoOiAvXlwvKGltZ3xzaG93KVwvLisvLAogICAgICB9LAogICAgICB7CiAgICAgICAgaG9zdDogL15pbWFnZWJhblwuKHJ1fG5ldCkkLywKICAgICAgICBwYXRoOiAvXlwvc2hvd1wvXGR7NH1cL1xkezJ9XC9cZHsyfVwvLisvLAogICAgICB9LAogICAgICAnaHR0cDovL2ZvdG9vLnBsL3Nob3cucGhwP2ltZz0qLmh0bWwnLAogICAgICB7CiAgICAgICAgaG9zdDogL153d3dcLmltYWdlc3RpbWVcLmNvbSQvLAogICAgICAgIHBhdGg6IC9eXC9zaG93XC5waHBcLy4qXC5odG1sJC8sCiAgICAgIH0sCiAgICBdLAogICAgcmVhZHk6IHJ1biwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXnd3d1wuaW1nY2FycnlcLmNvbSQvLAogICAgICBwYXRoOiAvXlwvc2hvd1wvLywKICAgIH0sCiAgICByZWFkeTogcnVuMiwKICB9KTsKICBhc3luYyBmdW5jdGlvbiBydW4gKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjaW1nX29iaicpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYywgewogICAgICByZWZlcmVyOiB0cnVlLAogICAgfSk7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHJ1bjIgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjaW1nX29iaicpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYywgewogICAgICByZXBsYWNlOiB0cnVlLAogICAgfSk7CiAgfQp9KSgpOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiBbCiAgICAgIHsKICAgICAgICBob3N0OiAvXmltYWdlbnBpY1wuY29tJC8sCiAgICAgICAgcGF0aDogL15cLy4qXC8uK1wuaHRtbD8kLywKICAgICAgfSwKICAgICAgewogICAgICAgIGhvc3Q6IC9eaW1hZ2V0d2lzdFwuY29tJC8sCiAgICAgIH0sCiAgICBdLAogICAgcmVhZHk6IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5wYXJ0aWFsKHJ1biwgdHJ1ZSksCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL14oaW1hZ2V4cG9ydHxpbWFnZXNoaW1hZ2UpXC5jb20kLywKICAgIH0sCiAgICByZWFkeTogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnBhcnRpYWwocnVuLCBmYWxzZSksCiAgfSk7CiAgYXN5bmMgZnVuY3Rpb24gcnVuIChycCkgewogICAgaWYgKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cualF1ZXJ5KSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cualF1ZXJ5LnByb3RvdHlwZS5hcHBlbmQgPSB1bmRlZmluZWQ7CiAgICB9CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ltZy5waWMnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMsIHsKICAgICAgcmVwbGFjZTogcnAsCiAgICB9KTsKICB9Cn0pKCk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9pbWFnZXVwcGVyLmNvbS9pLz8qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IFsKICAgICdodHRwOi8vKi5pbWFnZXZlbnVlLmNvbS9pbWcucGhwPyonLAogICAgJ2h0dHA6Ly9ob3RjaHl4LmNvbS9kL2FkdWx0LWltYWdlLWhvc3Rpbmctdmlldy0wOC5waHA/aWQ9KicsCiAgXSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyN0aGVwaWMnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW1hZ2V6aWxsYVwubmV0JC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNwaG90bycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYywgewogICAgICByZWZlcmVyOiB0cnVlLAogICAgfSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9pbWcuM2V6eS5uZXQvKi5odG0nLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGwgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnbGlua1tyZWw9ImltYWdlX3NyYyJdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGwuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9pbWcxLmltYWdpbGl2ZS5jb20vKi8qJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBhID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJyNwYWdlIGEuYnV0dG9uJyk7CiAgICBpZiAoYSkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjcGFnZSA+IGltZzpub3QoW2lkXSknKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ed3d3XC4oaW1nYmFiZXN8aW1nZmxhcmUpXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBpID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2lucHV0W29uY2xpY2tdJyk7CiAgICBpZiAoaSkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LkRlY29kZSgpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyN0aGlzX2ltYWdlJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmltZ2JhclwubmV0JC8sCiAgICBwYXRoOiAvXlwvaW1nX3Nob3dcLnBocCQvLAogICAgcXVlcnk6IC9eXD92aWV3X2lkPS8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2NlbnRlciBpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW1nYmFyXC5uZXQkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZGl2LnBhbmVsLnRvcCBmb3JtIGlucHV0W25hbWU9c2lkXScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKCcvaW1nX3Nob3cucGhwP3ZpZXdfaWQ9JyArIGkudmFsdWUpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW1nYm94XC5jb20kLywKICAgIHBhdGg6IC9eXC9bXGRcd10rJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2ltZycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7CihmdW5jdGlvbiAoKSB7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogWwogICAgICAgIC9eKGltZ2ZhbnRhc3l8aW1nbmVtb3xpbWdjdXJsKVwuY29tJC8sCiAgICAgICAgL15pbWFnZWRvbWlub1wuY29tJC8sCiAgICAgICAgL14waW1nXC5uZXQkLywKICAgICAgICAvXmJ1bm55Zm9ydW1cLm9yZyQvLAogICAgICBdLAogICAgICBxdWVyeTogL15cP1twdl09LywKICAgIH0sCiAgICByZWFkeTogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnBhcnRpYWwoaGVscGVyLCBmYWxzZSksCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15pbWdzYXlcLmNvbSQvLAogICAgICBxdWVyeTogL15cP1twdl09LywKICAgIH0sCiAgICByZWFkeTogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnBhcnRpYWwoaGVscGVyLCB0cnVlKSwKICB9KTsKICBhc3luYyBmdW5jdGlvbiBoZWxwZXIgKGRvUmVwbGFjZSkgewogICAgaWYgKF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS53aW5kb3cuY29uZmlybUFnZSkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93LmNvbmZpcm1BZ2UoMSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2NvbnRhaW5lci1ob21lIGltZ1tvbmNsaWNrXScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYywgewogICAgICByZXBsYWNlOiBkb1JlcGxhY2UsCiAgICB9KTsKICB9Cn0pKCk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXmNvcmVwaXhcLm9yZyQvLAogICAgICAvXih3d3dcLik/eHh4aW1hZ2V0cGJcLm9yZyQvLAogICAgICAvXmltZ2hvc3RcLih0b3B8Y2x1YikkLywKICAgICAgL15zb21uYXRoMjAwM1wueHl6JC8sCiAgICAgIC9ecG9ybmJha2VyXC5tZW4kLywKICAgIF0sCiAgICBwYXRoOiAvXlwvaW1hZ2VcLy4rJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2lucHV0I2VtYmVkLWNvZGUtMi50ZXh0LWlucHV0JykuZ2V0QXR0cmlidXRlKCd2YWx1ZScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmltZ21hc3NcLmNvbSQvLAogICAgcGF0aDogL15cL2ltYWdlXC9bXGRcd10rJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCcjbG9hZGluZzInKTsKICAgIGNvbnN0IGQgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnLmJveCcpOwogICAgZC5zdHlsZS5kaXNwbGF5ID0gJ2luaXRpYWwnOwogICAgZC5zdHlsZS5vcGFjaXR5ID0gJ2luaXRpYWwnOwogIH0sCn0pOwooZnVuY3Rpb24gKCkgewogIGNvbnN0IFBBVEhfUlVMRSA9IC9eXC8oWzAtOWEtekEtWi1fXSspKFwufFwvfCQpLzsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBbCiAgICAgICAgL14oaW1nbW9ua2V5fGltZ3RyZXh8aW1ndmV8dXBsb2FkcnJ8aW1hZ2VlZXJ8cGljLW1hbmlhY3xodWxraW1nZSlcLmNvbSQvLAogICAgICAgIC9ed3d3XC51aW1nc2hhcmVcLmNvbSQvLAogICAgICAgIC9eKHd3d1wuKT9pbWdzZWVcLm1lJC8sCiAgICAgICAgL15pbWdjbGlja1wubmV0JC8sCiAgICAgIF0sCiAgICAgIHBhdGg6IFBBVEhfUlVMRSwKICAgIH0sCiAgICBhc3luYyByZWFkeSAobSkgewogICAgICBhd2FpdCBoZWxwZXIobS5wYXRoWzFdLCBnZXROZXh0MSk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eaW1nb3V0bGV0XC5jb20kLywKICAgICAgcGF0aDogUEFUSF9SVUxFLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgaSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCdpbWcucGljJyk7CiAgICAgIGlmIChpKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGQgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnZGl2W2lkXj0iaW1hZ2V2aWV3aSJdJyk7CiAgICAgIGNvbnN0IG5vZGUgPSBhd2FpdCB3YWl0RE9NKGQsIChub2RlKSA9PiB7CiAgICAgICAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT09ICdGT1JNJyAmJiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW5wdXRbbmFtZT0iaWQiXScsIG5vZGUpOwogICAgICB9KTsKICAgICAgbm9kZS5zdWJtaXQoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15pbWdyb2NrXC5pbmZvJC8sCiAgICAgIHBhdGg6IFBBVEhfUlVMRSwKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW1nLnBpY3ZpZXcnKTsKICAgICAgaWYgKGkpIHsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5fMHgzMzdjNGIgPSBudWxsOwogICAgICBjb25zdCBub2RlID0gYXdhaXQgZ2V0QW1iaWd1b3VzRm9ybSgnZGl2W2lkXSArIGRpdltpZF0gPiBzdHlsZScsIChub2RlKSA9PiB7CiAgICAgICAgcmV0dXJuIG5vZGUucGFyZW50RWxlbWVudDsKICAgICAgfSk7CiAgICAgIG5vZGUuY2xpY2soKTsKICAgICAgbm9kZS5jbGljaygpOwogICAgICBub2RlLmNsaWNrKCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eaW1nb3V0bGV0XC5wdyQvLAogICAgICBwYXRoOiBQQVRIX1JVTEUsCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBpID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2ltZy5waWN2aWV3Jyk7CiAgICAgIGlmIChpKSB7CiAgICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5fMHg1YjUwYjcgPSBudWxsOwogICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ud2luZG93Ll8weDViNTBiNyA9IG51bGw7CiAgICAgIGxldCBub2RlID0gbnVsbDsKICAgICAgd2hpbGUgKCFub2RlKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLndhaXQoNTAwKTsKICAgICAgICBub2RlID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2J1dHRvbltuYW1lPSJuZXh0Il0nKTsKICAgICAgfQogICAgICBub2RlLmNsaWNrKCk7CiAgICAgIG5vZGUuY2xpY2soKTsKICAgICAgbm9kZS5jbGljaygpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiBbCiAgICAgICAgL14ocGljYmFyb258aW1nYmFyb258a3ZhZG9yKVwuY29tJC8sCiAgICAgICAgL15pbWdmaWxlc1wub3JnJC8sCiAgICAgIF0sCiAgICAgIHBhdGg6IFBBVEhfUlVMRSwKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW1nLnBpYycpOwogICAgICBpZiAoaSkgewogICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBmID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2Zvcm0nKTsKICAgICAgZi5zdWJtaXQoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IC9eaHR0cDpcL1wvaW1nZHJhZ29uXC5jb21cLyhnZXRmaWxcLnBocHxkbCkkLywKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgaSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCdpbWcucGljJyk7CiAgICAgIGlmIChpKSB7CiAgICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS53YWl0KDUwMCk7CiAgICAgIGNvbnN0IGYgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI0NvbnRpbnVlRlJNJyk7CiAgICAgIGYuc3VibWl0KCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eaW1ncm9ja1wucHckLywKICAgICAgcGF0aDogUEFUSF9SVUxFLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgaSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCdpbWcucGljdmlldycpOwogICAgICBpZiAoaSkgewogICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBub2RlID0gYXdhaXQgZ2V0QW1iaWd1b3VzRm9ybSgKICAgICAgICAnZGl2W2lkXSArIGRpdltpZF0gPiBpbnB1dDpub3QoW3N0eWxlXSknLAogICAgICAgIChub2RlKSA9PiB7CiAgICAgICAgICBjb25zdCBkID0gbm9kZS5wYXJlbnRFbGVtZW50OwogICAgICAgICAgbm9kZS5jbGljaygpOwogICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgfSk7CiAgICAgIG5vZGUuY2xpY2soKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL14oaW1ndmlld3xpbWd0b3dufGltZ21hemV8aW1nZGV3KVwucHckLywKICAgICAgcGF0aDogUEFUSF9SVUxFLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnJlbW92ZSgnaWZyYW1lJyk7CiAgICAgIGNvbnN0IGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW1nLnBpY3ZpZXcnKTsKICAgICAgaWYgKGkpIHsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5fMHg1OGZmMzUgPSBudWxsOwogICAgICBjb25zdCBub2RlID0gYXdhaXQgZ2V0QW1iaWd1b3VzRm9ybSgKICAgICAgICAnc2NyaXB0ICsgZGl2W2lkXSA+IGlucHV0Om5vdChbc3R5bGVdKScsCiAgICAgICAgKG5vZGUpID0+IHsKICAgICAgICAgIGNvbnN0IGQgPSBub2RlLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgICBub2RlLmNsaWNrKCk7CiAgICAgICAgICByZXR1cm4gZDsKICAgICAgICB9KTsKICAgICAgbm9kZS5jbGljaygpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXmltZ2FudFwuY29tJC8sCiAgICAgIHBhdGg6IC9eXC9pbWctKFxkKylcLmh0bWwkLywKICAgIH0sCiAgICBhc3luYyBzdGFydCAobSkgewogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYGltZ3ZpZXctJHttLnBhdGhbMV19Lmh0bWxgKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15pbWdhbnRcLmNvbSQvLAogICAgICBwYXRoOiAvXlwvaW1ndmlldy1cZCtcLmh0bWwkLywKICAgIH0sCiAgICBhc3luYyByZWFkeSAoKSB7CiAgICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3BpY1ZpZXcnKTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgICB9LAogIH0pOwogIGZ1bmN0aW9uIHdhaXRET00gKGVsZW1lbnQsIGZuKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7CiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7CiAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSAhPT0gJ2NoaWxkTGlzdCcpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgW2ssICwgcl0gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uZmluZChtdXRhdGlvbi5hZGRlZE5vZGVzLCAoY2hpbGQpID0+IHsKICAgICAgICAgICAgcmV0dXJuIGZuKGNoaWxkKSA/IGNoaWxkIDogX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLm5vbmU7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChrID09PSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ubm9uZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICByZXNvbHZlKHIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50LCB7CiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICB9KTsKICAgIH0pOwogIH0KICBhc3luYyBmdW5jdGlvbiBnZXRBbWJpZ3VvdXNGb3JtIChzZWxlY3Rvciwgc2hlbGxOb3JtYWxpemVyKSB7CiAgICBjb25zdCBkID0gYXdhaXQgd2FpdEZvcm1TaGVsbChzZWxlY3Rvciwgc2hlbGxOb3JtYWxpemVyKTsKICAgIGNvbnN0IHN0eWxlID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ3N0eWxlJywgZCk7CiAgICBsZXQgdmlzaWJsZUNsYXNzZXMgPSBwYXJzZVN0eWxlKHN0eWxlKTsKICAgIHZpc2libGVDbGFzc2VzID0gZmlsdGVyRHVwbGljYXRlZCh2aXNpYmxlQ2xhc3Nlcyk7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICBjb25zdCBidXR0b24gPSBmaW5kVmlzaWJsZUZvcm0odmlzaWJsZUNsYXNzZXMpOwogICAgICBpZiAoYnV0dG9uKSB7CiAgICAgICAgcmV0dXJuIGJ1dHRvbjsKICAgICAgfQogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ud2FpdCg1MDApOwogICAgfQogIH0KICBmdW5jdGlvbiB3YWl0Rm9ybVNoZWxsIChzZWxlY3Rvciwgbm9ybWFsaXplcikgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IGhhbmRsZSA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBsZXQgc2hlbGwgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJChzZWxlY3Rvcik7CiAgICAgICAgaWYgKCFzaGVsbCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjbGVhckludGVydmFsKGhhbmRsZSk7CiAgICAgICAgc2hlbGwgPSBub3JtYWxpemVyKHNoZWxsKTsKICAgICAgICByZXNvbHZlKHNoZWxsKTsKICAgICAgfSwgNTAwKTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBwYXJzZVN0eWxlIChzdHlsZSkgewogICAgc3R5bGUgPSBzdHlsZS50ZXh0Q29udGVudDsKICAgIGNvbnN0IHBhdHRlcm4gPSAvXC4oXHcrKVx7dmlzaWJpbGl0eTppbml0aWFsO1x9L2c7CiAgICBsZXQgcnYgPSBudWxsOwogICAgY29uc3QgY2xhc3NlcyA9IFtdOwogICAgd2hpbGUgKChydiA9IHBhdHRlcm4uZXhlYyhzdHlsZSkpICE9PSBudWxsKSB7CiAgICAgIGNsYXNzZXMucHVzaChydlsxXSk7CiAgICB9CiAgICByZXR1cm4gY2xhc3NlczsKICB9CiAgZnVuY3Rpb24gZmlsdGVyRHVwbGljYXRlZCAoY2xhc3NlcykgewogICAgY29uc3QgdGFibGUgPSBuZXcgTWFwKCk7CiAgICBmb3IgKGNvbnN0IGMgb2YgY2xhc3NlcykgewogICAgICBpZiAodGFibGUuaGFzKGMpKSB7CiAgICAgICAgdGFibGUuc2V0KGMsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YWJsZS5zZXQoYywgdHJ1ZSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBBcnJheS5mcm9tKHRhYmxlLmVudHJpZXMoKSkuZmlsdGVyKCh1bmlxdWUpID0+IHsKICAgICAgcmV0dXJuIHVuaXF1ZTsKICAgIH0pLm1hcCgoXywgYykgPT4gewogICAgICByZXR1cm4gYzsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBmaW5kVmlzaWJsZUZvcm0gKGNsYXNzZXMpIHsKICAgIGZvciAoY29uc3QgY2xhc3NfIG9mIGNsYXNzZXMpIHsKICAgICAgY29uc3QgZm9ybSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKGBmb3JtLiR7Y2xhc3NffWApOwogICAgICBpZiAoIWZvcm0pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25zdCBidXR0b24gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW5wdXRbdHlwZT0iYnV0dG9uIl0sIGJ1dHRvblt0eXBlPSJidXR0b24iXScsIGZvcm0pOwogICAgICBjb25zdCB2ID0gZ2V0Q29tcHV0ZWRTdHlsZShidXR0b24pLmdldFByb3BlcnR5VmFsdWUoJ3Zpc2liaWxpdHknKTsKICAgICAgaWYgKHYgIT09ICd2aXNpYmxlJykgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHJldHVybiBidXR0b247CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gZ2V0TmV4dDEgKGkpIHsKICAgIHJldHVybiBpLnZhbHVlOwogIH0KICBhc3luYyBmdW5jdGlvbiBoZWxwZXIgKGlkLCBnZXROZXh0KSB7CiAgICBjb25zdCByZWNhcHRjaGEgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI3JlY2FwdGNoYV93aWRnZXQsICNjYXB0Y2hhJyk7CiAgICBpZiAocmVjYXB0Y2hhKSB7CiAgICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5pbmZvKCdzdG9wIGJlY2F1c2UgcmVjYXB0Y2hhJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxldCBpID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJ2lucHV0W25hbWU9Im5leHQiXScpOwogICAgaWYgKGkpIHsKICAgICAgY29uc3QgbmV4dCA9IGdldE5leHQoaSk7CiAgICAgIGF3YWl0IGdvKGlkLCBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaW5wdXRbbmFtZT0icHJlIl0nKS52YWx1ZSwgbmV4dCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGkgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW1nLnBpY3ZpZXcnKTsKICAgIGlmIChpKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgICByZXR1cm47CiAgICB9CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0uaW5mbygnZG8gbm90aGluZycpOwogIH0KICBhc3luYyBmdW5jdGlvbiBnbyAoaWQsIHByZSwgbmV4dCkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKCcnLCB7CiAgICAgIHBvc3Q6IHsKICAgICAgICBvcDogJ3ZpZXcnLAogICAgICAgIGlkOiBpZCwKICAgICAgICBwcmU6IHByZSwKICAgICAgICBuZXh0OiBuZXh0LAogICAgICAgIGFkYjogJzAnLAogICAgICB9LAogICAgfSk7CiAgfQp9KSgpOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW1ndG9ycm50XC5pbiQvLAogICAgcGF0aDogL15cL3ZpZXdcLnBocCQvLAogICAgcXVlcnk6IC9eXD9pZD0uKi8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpbWcgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnY2VudGVyIGRpdiB0YWJsZS50ZyB0Ym9keSB0ciB0ZCBjZW50ZXIgaW1nJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGltZy5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9eaW1ndmF1bHRcLnB3JC8sCiAgICBwYXRoOiAvXlwvdmlldy1pbWFnZVwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnYXJ0aWNsZSBkaXYuc3BhbjcgYVt0YXJnZXQ9Il9ibGFuayJdJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGEuaHJlZik7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnd3d1wuaW1hZ2VzcGljeVwuc2l0ZSQvLAogICAgICAvXnd3d1wuKGltZ3NreXxpbWdmaWxlfGltZ3NlZSlcLm5ldCQvLAogICAgXSwKICAgIHBhdGg6IC9eXC9zaXRlXC92XC9cZCskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGEgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI215VW5pcXVlSW1nJykucGFyZW50Tm9kZTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhhLmhyZWYpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL153d3dcLmltYWdlc3BpY3lcLnNpdGUkLywKICAgICAgL153d3dcLihpbWdza3l8aW1nZmlsZXxpbWdzZWUpXC5uZXQkLywKICAgIF0sCiAgICBwYXRoOiAvXlwvW2EtenwwLTldezQsMTB9JC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBtYXRjaGVzID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNlYXJjaEZyb21TY3JpcHRzKC9kb2N1bWVudFwuZ2V0RWxlbWVudEJ5SWRcKCJzb0RhQnVnIlwpXC5zcmMgPSAiKFteIl0rKSI7Lyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKG1hdGNoZXNbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6ICdodHRwOi8vaXBpYy5zdS8/cGFnZT1pbWcmcGljPSonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2Z6Jyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmlcLmphdnRvclwuY29tJC8sCiAgICBwYXRoOiAvXlwvaW1hZ2VcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNzaG93X2ltZyBpbWcnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ea2VwdGFyb2xvXC5odSQvLAogICAgcGF0aDogL14oXC9bXi9dK1wvW14vXStcLmpwZykkLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKCdodHRwOi8vd3d3LmtlcHRhcm9sby5odS9rZXAnICsgbS5wYXRoWzFdKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXmxvc3RwaWNcLm5ldCQvLAogICAgcXVlcnk6IC9eXD9waG90bz1cZCskLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnaW1nLm5vdGlubGluZS5jaXJjbGUnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwooZnVuY3Rpb24gKCkgewogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXm1pcmFnZXBpY3NcLmNvbSQvLAogICAgICAgIC9eZnVuZXh0cmFcLmhvc3R6aVwuY29tJC8sCiAgICAgICAgL15iaWxkZXJcLm5peGhlbHBcLmRlJC8sCiAgICAgICAgL15pbWFnZWN1cmxcLihjb218b3JnKSQvLAogICAgICAgIC9eZm90by1waWNcLm5ldCQvLAogICAgICBdLAogICAgICBwYXRoOiAvXlwvdmlld2VyXC5waHAkLywKICAgICAgcXVlcnk6IC9maWxlPShbXiZdKykvLAogICAgfSwKICAgIHN0YXJ0OiBoZWxwZXIsCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15pbWdzaW5cLmNvbSQvLAogICAgICBwYXRoOiAvXlwvdmlld2VyXC5waHAkLywKICAgICAgcXVlcnk6IC9maWxlPShbXiZdKykvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0IChtKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoJy9maWxlcy8nICsgbS5xdWVyeVsxXSk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eKGltZ25pcHxpbWdjZW50cmFsfGltZ2NyZWFtKVwuY29tJC8sCiAgICAgIHBhdGg6IC9eXC92aWV3ZXJyLipcLnBocCQvLAogICAgICBxdWVyeTogL2ZpbGU9KFteJl0rKS8sCiAgICB9LAogICAgc3RhcnQ6IGhlbHBlciwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogWwogICAgICAnaHR0cDovL3d3dy5vdmVycGljLm5ldC92aWV3ZXIucGhwP2ZpbGU9KicsCiAgICBdLAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNtYWluX2ltZycpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL154eHhob3N0XC5tZSQvLAogICAgICBwYXRoOiAvXlwvdmlld2VyXGQrXC5waHAkLywKICAgICAgcXVlcnk6IC9maWxlPShbXiZdKykvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0IChtKSB7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoJ2ZpbGVzLycgKyBtLnF1ZXJ5WzFdKTsKICAgIH0sCiAgfSk7CiAgYXN5bmMgZnVuY3Rpb24gaGVscGVyIChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKCcvaW1hZ2VzLycgKyBtLnF1ZXJ5WzFdKTsKICB9Cn0pKCk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL153d3dcLm1yamhcLm9yZyQvLAogICAgcGF0aDogL15cL2dhbGxlcnlcLnBocCQvLAogICAgcXVlcnk6IC9eXD9lbnRyeT0oLispJC8sCiAgfSwKICBhc3luYyByZWFkeSAobSkgewogICAgY29uc3QgdXJsID0gbS5xdWVyeVsxXTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoJy8nICsgdXJsKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnd3d1wubm9lbHNoYWNrXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2VsdF90b19hZmYnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15vdmVyZHJlYW1cLmN6JC8sCiAgICAgIC9ecGljbGlja1wub3JnJC8sCiAgICBdLAogICAgcGF0aDogL15cL2ltYWdlXC8vLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaW1nID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNmdWxsX2ltYWdlJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGltZy5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15waWMtbW9uZXlcLnJ1JC8sCiAgICAgIC9ec2hhZ2d5aW1nXC5wcm8kLywKICAgICAgL15pbWdhenVyZVwuY29tJC8sCiAgICAgIC9eZGFpbHlpbWFnZXNcLnh5eiQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGYgPSBkb2N1bWVudC5mb3Jtc1swXTsKICAgIGNvbnN0IHNpZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdpbnB1dFtuYW1lPSJzaWciXScsIGYpLnZhbHVlOwogICAgY29uc3QgcGljX2lkID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2lucHV0W25hbWU9InBpY19pZCJdJywgZikudmFsdWU7CiAgICBjb25zdCByZWZlcmVyID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2lucHV0W25hbWU9InJlZmVyZXIiXScsIGYpLnZhbHVlOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShgL3BpYy5qcGVnP3BpY19pZD0ke3BpY19pZH0mc2lnPSR7c2lnfSZyZWZlcmVyPSR7cmVmZXJlcn1gKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiAnaHR0cDovL3d3dy5waWMtdXBsb2FkLmRlL3ZpZXctKi5odG1sJywKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCcuYWR2ZXJ0Jyk7CiAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ltZy5wcmV2aWV3X3BpY3R1cmVfMmIsIGltZy5vcmlnaW5hbF9waWN0dXJlXzJiJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiBbCiAgICAgIC9ecGljNHlvdVwucnUkLywKICAgICAgL15waWM1eW91XC5ydSQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGlmIChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI2QxID4gaW1nJykgIT0gbnVsbCkgewogICAgICBjb25zdCBVUkxwYXJhbXMgPSBsb2NhdGlvbi5ocmVmLnNwbGl0KCcvJywgNSk7CiAgICAgIGxldCBuZXh0ID0gVVJMcGFyYW1zLmpvaW4oJy8nKTsKICAgICAgbmV4dCA9IG5leHQgKyAnLzEvJzsKICAgICAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLnNldENvb2tpZSgncDR5Y2xpY2snLCAnMScpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobmV4dCk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNkMSBpbWcnKS5zcmM7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaSk7CiAgICB9CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3BpY2Nhc2hcLm5ldCQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcuY29udGFpbmVyID4gaW1nJyk7CiAgICBjb25zdCBtID0gaS5vbmNsaWNrLnRvU3RyaW5nKCkubWF0Y2goL21zaG93XCgnKFteJ10rKSdcKTsvKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UobVsxXSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14ocGljZXhwb3NlZHxjcm9lYSlcLmNvbSQvLAogIH0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdpbWcucGljJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiBbCiAgICAnaHR0cDovL2FtYXRldXJmcmVhay5vcmcvc2hhcmUtKi5odG1sJywKICAgICdodHRwOi8vYW1hdGV1cmZyZWFrLm9yZy9zaGFyZS5waHA/aWQ9KicsCiAgICAnaHR0cDovL3BpY2ZveC5vcmcvKicsCiAgICAnaHR0cDovL3d3dy5ldXJvLXBpYy5ldS9zaGFyZS5waHA/aWQ9KicsCiAgICAnaHR0cDovL3h4eC5mcmVlaW1hZ2UudXMvc2hhcmUucGhwP2lkPSonLAogICAgJ2h0dHA6Ly93d3cucGl4c29yLmNvbS9zaGFyZS5waHA/aWQ9KicsCiAgICAnaHR0cDovL3d3dy5waXhzb3IuY29tL3NoYXJlLSouaHRtbCcsCiAgICAnaHR0cDovL3BpeHNvci5jb20vWFhYL3NoYXJlLSouaHRtbCcsCiAgICAnaHR0cDovL2hvbGR0aGVtb2FuLm5ldC94L3NoYXJlLSouaHRtbCcsCiAgICAnaHR0cDovL3d3dy5pbWd6LnB3L3NoYXJlLSouaHRtbCcsCiAgICAnaHR0cHM6Ly9pbWd1dXIucGljdHVyZXMvc2hhcmUtKi5odG1sJwogIF0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgbyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjaWltZycpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShvLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnBpY3BpY1wub25saW5lJC8sCiAgICAgIC9ecGljY2xvY2tcLnJ1JC8sCiAgICBdLAogICAgcGF0aDogL15cL1xkK1wvXGQrXC8kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGxldCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNwYXlfdGh1bWJfaW1nIGltZycpOwogICAgaSA9IGkuZ2V0QXR0cmlidXRlKCdvbmNsaWNrJyk7CiAgICBpID0gaS5tYXRjaCgvbXNob3dcKCcoLispJ1wpLyk7CiAgICBpID0gaVsxXTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogWwogICAgJ2h0dHA6Ly9waWNzLW1vbmV5LnJ1L2FsbHBpY2ZyZWUvKicsCiAgICAnaHR0cDovL3d3dy5waWNzLW1vbmV5LnJ1L2FsbGltYWdlLyonLAogIF0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ecGljcy1tb25leVwucnUkLywKICAgIHBhdGg6IC9eXC92XC5waHAkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZScpOwogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdjZW50ZXIgaW1nOm5vdChbaWRdKScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnd3d1wucGljcy1tb25leVwucnUkLywKICAgICAgL14ocGlja2VyLWNsaWNrfHAweHBpY21vbmV5KVwucnUkLywKICAgIF0sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgIGxldCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNkMSBpbWcsICNwYXlfdGh1bWJfaW1nID4gaW1nJyk7CiAgICBpID0gaS5vbmNsaWNrLnRvU3RyaW5nKCk7CiAgICBpID0gaS5tYXRjaCgvbXNob3dcKCcoLispJ1wpLyk7CiAgICBpID0gaVsxXTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaSk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogJ2h0dHA6Ly9waWNzaGFyZS5nZWVuemEuY29tL3BpY3MvKicsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjcGljU2hhcmVfaW1hZ2VfY29udGFpbmVyJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGkuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXnBpY3N0cmVhbVwudHYkLywKICAgIHBhdGg6IC9eXC8uKlwvLipcLmh0bWwkLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGltZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjdmlldzEgPiBkaXY6bnRoLWNoaWxkKDEpID4gaW1nOm50aC1jaGlsZCgxKScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpbWcuc3JjKTsKICB9LAp9KTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiB7CiAgICBob3N0OiAvXih3d3dcLik/cGltcGFuZGhvc3RcLmNvbSQvLAogICAgcGF0aDogL15cL2ltYWdlXC9cZCsvLAogICAgcXVlcnk6IC9eXD9zaXplPW9yaWdpbmFsLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGltZyA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjb3ZlcmZsb3ctd3JhcHBlciBpbWcub3JpZ2luYWwnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3BpbXBhbmRob3N0XC5jb20kLywKICAgIHBhdGg6IC9eXC9pbWFnZVwvXGQrLywKICB9LAogIGFzeW5jIHN0YXJ0IChtKSB7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsobS5wYXRoICsgJz9zaXplPW9yaWdpbmFsJyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3BpeGhvc3RcLnRvJC8sCiAgICBwYXRoOiAvXlwvc2hvd1wvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5yZW1vdmUoJ2lmcmFtZSwgI2FkJyk7CiAgICBsZXQgbyA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjYWxsJyk7CiAgICBpZiAobykgewogICAgICBvLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgIH0KICAgIG8gPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3Nob3dfaW1hZ2UsICNpbWFnZScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShvLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL14od3d3XC4pP3BpeHJvdXRlXC5jb20kLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IG8gPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2Rvd25sb2FkX2JveCBpbWcjaW1ncHJldmlldy5waWMnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2Uoby5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ecGl4eHhlbHNcLmNjJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpbWcgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI21haW4taW1hZ2UnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLmRhdGFzZXQuZnVsbCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnBybnRzY3JcLmNvbSQvLAogICAgICAvXnBybnRcLnNjJC8sCiAgICBdLAogICAgcGF0aDogL1wuaHRtbCQvLAogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IFsKICAgICAgL15wcm50c2NyXC5jb20kLywKICAgICAgL15wcm50XC5zYyQvLAogICAgXSwKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3NjcmVlbnNob3QtaW1hZ2UnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ecHJvbnBpY1wub3JnJC8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCB1cmxCYXNlSW1nID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ3RhYmxlLm5ld190YWJsZTI6bnRoLWNoaWxkKDEpIGltZy5saW5rJyk7CiAgICBjb25zdCBiYXNlVXJsID0gdXJsQmFzZUltZy5zcmMuc3BsaXQoJ3RoXycpWzBdOwogICAgY29uc3QgaW1nID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ3RhYmxlLm5ld190YWJsZTI6bnRoLWNoaWxkKDIpIGltZy5saW5rJyk7CiAgICBjb25zdCB1cmwgPSBiYXNlVXJsICsgaW1nLnNyYy5zcGxpdCgndGhfJylbMV07CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKHVybCk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogL15xcnJyb1wuY29tJC8sCiAgICBwYXRoOiAvXihcL2ltYWdlc1wvLispXC5odG1sJC8sCiAgfSwKICBhc3luYyBzdGFydCAobSkgewogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShtLnBhdGhbMV0pOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ecmFkaWthbFwucnUkLywKICAgIHBhdGg6IC9eXC9iaWdcLy8sCiAgfSwKICBhc3luYyByZWFkeSAoKSB7CiAgICBjb25zdCBpID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLiQoJy5iYXNlLXBhZ2VfY2VudGVyID4gZGl2Om50aC1jaGlsZCgyKSA+IGltZzpudGgtY2hpbGQoMSknKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwooZnVuY3Rpb24gKCkgewogIGNvbnN0IGRlZmF1bHRBY3Rpb24gPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucGFydGlhbChhY3Rpb24sICcjY29udGludWV0b2ltYWdlID4gZm9ybSBpbnB1dCcsICdpbWdbY2xhc3NePWNlbnRyZWRdJyk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IFsKICAgICAgewogICAgICAgIGhvc3Q6IFsKICAgICAgICAgIC9eKGltYWdlY29ybnxpbWFnZWRlY29kZXxpbWFnZWtvfGltYWdlc2h0b3JtfGltYWdlcmF2ZW4pXC5jb20kLywKICAgICAgICAgIC9eKGltZ2ljeXxpbWdzYXZ2eXxpbWd0emFyfGltZ3Rvcm5hZG98aW1na2lja3N8aW1nMnNoYXJlfGltZ2hpdHxpbWdtYWluKVwuY29tJC8sCiAgICAgICAgICAvXihpbWd0cmlhbHxpbWdyZXB1dGF8aW1nZmFwcGVyfGltZ3BhcnR8aW1nYmFsYW5hfGltZ2phenp8aW1nLXBsYW5ldHxpbWctcGF5KVwuY29tJC8sCiAgICAgICAgICAvXihob3N0dXJpbWFnZXxncmVhc3lpbWFnZXxkYW1pbWFnZXx4eHhzY3JlZW5zfHdwYzh8ZGltdHVzfHRpbml6b3xlcmltZ2V8bmltenNoYXJlfGhkbW96YSlcLmNvbSQvLAogICAgICAgICAgL14od3d3XC4pPyhpbWdsZW1vbnxpbWFnZWJsaW5rcylcLmNvbSQvLAogICAgICAgICAgL14od3d3XC4pPyhtdWx0aWltZylcLmNvbSQvLAogICAgICAgICAgL14oaXx4eHgpXC5oZW50YWl5b3V0dWJlXC5jb20kLywKICAgICAgICAgIC9eKGlcLik/aW1nc2VlZHM/XC5jb20kLywKICAgICAgICAgIC9eKHh4eHdlYmRseHh4fHRlZW5zaG90fGltYWdlb258aW1hZ2V0ZWFtfHZveWV1cmltYWdlfHRlZW5pbWFnZXxtZWdhaW1hZ2UpXC5vcmckLywKICAgICAgICAgIC9eKGltZ3N0dWRpb3xpbWdzcG90KVwub3JnJC8sCiAgICAgICAgICAvXihpbWdzZXJ2ZXxpbWdwcm9qZWN0fGltZ3B5dGhvbnxpbWdwaXh8bmF1Z2h0eWdhdGV8Z2FsbGVyeWNsb3VkfHh4aW1nfGltZy12aWV3KVwubmV0JC8sCiAgICAgICAgICAvXmhvdGltYWdlc1wuZXUkLywKICAgICAgICAgIC8oXnxcLik1NTg4OFwuZXUkLywKICAgICAgICAgIC9eKHBpY3p8dW5wb3JuKVwuc2l0ZSQvLAogICAgICAgICAgL15waWNcLmhvdGltZ1wuc2l0ZSQvLAogICAgICAgICAgL154eHhcLihzZXhleHxwb3Juc2NyZWVuKVwueHl6JC8sCiAgICAgICAgICAvXmVjb2ltYWdlc1wueHl6JC8sCiAgICAgICAgICAvXnd3d1wuaG90aW1hZ2VcLnVrJC8sCiAgICAgICAgICAvXmltZ2Nsb3VkXC5jbyQvLAogICAgICAgICAgL15waXh1cFwudXMkLywKICAgICAgICAgIC9eKHBvcC1pbWd8YWRzLWltZylcLmluZm8kLywKICAgICAgICAgIC9eKGRvbWFpbmt8cG9ybm8tcGlyYXQpXC5ydSQvLAogICAgICAgICAgL15kYXJwaXhcLmdhJC8sCiAgICAgICAgICAvXmlwaWN0dXJlXC5zdSQvLAogICAgICAgICAgL15hY2lkaW1nXC5jYyQvLAogICAgICAgICAgL15zXC5pbWdob3N0XC50b3AkLywKICAgICAgICAgIC9eaW1hZ2VzcHVibGljXC50ayQvLAogICAgICAgICAgL151bmRlcnBpY1wuY2x1YiQvLAogICAgICAgIF0sCiAgICAgICAgcGF0aDogL1wvaW1nLS4qXC5odG1sLywKICAgICAgfSwKICAgICAgewogICAgICAgIGhvc3Q6IC9eKGhlbnRhaS1wb3B8c3Rhci1oZW50YWkpXC5jb20kLywKICAgICAgICBwYXRoOiAvXlwvW3RpXVwvaW1nLS4qXC5odG1sLywKICAgICAgfSwKICAgICAgewogICAgICAgIGhvc3Q6IC9eaW1na2luZ1wuY28kLywKICAgICAgICBwYXRoOiAvXlwvaW1nND8tLipcLmh0bWwvLAogICAgICB9LAogICAgICB7CiAgICAgICAgaG9zdDogL15pbWFcLmd5JC8sCiAgICAgICAgcGF0aDogL15cL2lcLy4rJC8sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBob3N0OiAvXnBpY21vemFcLmNvbSQvLAogICAgICAgIHBhdGg6IC9eXC9cLz9pbWctLipcLmh0bWwkLywKICAgICAgfSwKICAgIF0sCiAgICByZWFkeTogZGVmYXVsdEFjdGlvbiwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXmltZ3JhdFwuY29tJC8sCiAgICAgIHBhdGg6IC9eXC9pbWctLipcLmh0bWwvLAogICAgfSwKICAgIHJlYWR5OiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucGFydGlhbChhY3Rpb24sICcjY2xvc2UnLCAnI21haW5faW1hZ2UgaW1nLmNlbnRlci1ibG9jay5pbWctcmVzcG9uc2l2ZScpLAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eKHd3d1wuKT9pbWdmcmVzaFwuaW5mbyQvLAogICAgICBwYXRoOiAvXlwvaW1nLS4qXC5odG1sJC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUnKTsKICAgICAgbGV0IG5vZGUgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI2NvbnRpbnVldG9pbWFnZSA+IGZvcm0gaW5wdXQnKTsKICAgICAgaWYgKG5vZGUpIHsKICAgICAgICBub2RlLmNsaWNrKCk7CiAgICAgICAgbm9kZS5jbGljaygpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVzZXRDb29raWVzKCk7CiAgICAgIG5vZGUgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnaW1nW2NsYXNzXj1jZW50cmVkXScpOwogICAgICBpZiAobm9kZSkgewogICAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2Uobm9kZS5zcmMpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucG9zdCh3aW5kb3cubG9jYXRpb24uaHJlZi50b1N0cmluZygpLCB7CiAgICAgICAgY3RpOiAxLAogICAgICAgIHJlZjogJycsCiAgICAgICAgcmM6IDEsCiAgICAgICAgcnA6IDEsCiAgICAgICAgYnQ6IDAsCiAgICAgICAgYnc6ICdlZGdlJywKICAgICAgfSk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IFsKICAgICAgewogICAgICAgIGhvc3Q6IC9eaW1na2luZ1wuY28kLywKICAgICAgICBwYXRoOiAvXlwvaW1ncy0uKlwuaHRtbC8sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBob3N0OiAvXihpbWdraW5nc3xpbWFnZXJhcilcLmNvbSQvLAogICAgICAgIHBhdGg6IC9eXC9pbWctLipcLmh0bWwvLAogICAgICB9LAogICAgXSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgdXJsID0gX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLndpbmRvdy5saW5raWQ7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UodXJsKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15pbWdraW5nc1wuY29tJC8sCiAgICAgIHBhdGg6IC9eXC9pbWcyLS4qXC5odG1sLywKICAgIH0sCiAgICByZWFkeTogZGVmYXVsdEFjdGlvbiwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXmltZ3ByaW1lXC5jb20kLywKICAgICAgcGF0aDogL15cL2ltZ2EtdVwvKC4rKVwuanBlZ1wuaHRtbC8sCiAgICB9LAogICAgYXN5bmMgc3RhcnQgKCkgewogICAgICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgnL2ltZ2EtdScsICcvdScpLnJlcGxhY2UoJy5odG1sJywgJycpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9ecG9ybnlmYXBcLmNvbSQvLAogICAgICBwYXRoOiAvXC9waWNcLy8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBwID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ltZyNteUltZycpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKHAuc3JjKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15mdW5pbWdcLm5ldCQvLAogICAgICBwYXRoOiAvXC9pbWctLipcLmh0bWwvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0ICgpIHsKICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoJy9pbWctJywgJy9pbWczLScpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IC9eZnVuaW1nXC5uZXQkLywKICAgICAgcGF0aDogL1wvaW1nMy0uKlwuaHRtbC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNjb250aW51ZXRvaW1hZ2UgaW1nJyk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXjIycGl4eFwueHl6JC8sCiAgICAgIHBhdGg6IC9eXC9pYS1baW9dXC8oLispXC5qcGVnXC5odG1sLywKICAgIH0sCiAgICBhc3luYyBzdGFydCAoKSB7CiAgICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKCcvaWEtJywgJy8nKS5yZXBsYWNlKCcuaHRtbCcsICcnKTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKHBhdGgpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXjIycGl4eFwueHl6JC8sCiAgICAgIHBhdGg6IC9eXC94LW9cLyguKylcLmpwZWdcLmh0bWwvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0ICgpIHsKICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoJy94LScsICcvJykucmVwbGFjZSgnLmh0bWwnLCAnJyk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuTGluayhwYXRoKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL14yMnBpeHhcLnh5eiQvLAogICAgICBwYXRoOiAvXlwveC1pXC8oLispXC5qcGVnXC5odG1sLywKICAgIH0sCiAgICBhc3luYyBzdGFydCAoKSB7CiAgICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKCcveCcsICcveScpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiBbCiAgICAgIHsKICAgICAgICBob3N0OiAvXmltYWdlcmFyXC5jb20kLywKICAgICAgICBwYXRoOiAvXlwvaW1nMi0vLAogICAgICB9LAogICAgICB7CiAgICAgICAgaG9zdDogL15pbWdraW5nXC5jbyQvLAogICAgICAgIHBhdGg6IC9eXC9pbWdbdjNdLS4qXC5odG1sLywKICAgICAgfSwKICAgICAgewogICAgICAgIGhvc3Q6IC9ecGljc3RhdGVcLmNvbSQvLAogICAgICAgIHBhdGg6IC9eXC92aWV3XC9mdWxsXC8uKi8sCiAgICAgIH0sCiAgICBdLAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBjb25zdCBpID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2ltZ1thbHRdJyk7CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXmltZ3ByaW1lXC5jb20kLywKICAgICAgcGF0aDogL15cL2ltZy4qXC5odG1sJC8sCiAgICB9LAogICAgYXN5bmMgcmVhZHkgKCkgewogICAgICBsZXQgYSA9IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS4kKCcjY29udGludWV0b2ltYWdlIGEnKTsKICAgICAgaWYgKGEpIHsKICAgICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsoYS5ocmVmKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgYSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdpbWdbYWx0XScpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGEuc3JjKTsKICAgIH0sCiAgfSk7CiAgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICAgIHJ1bGU6IHsKICAgICAgaG9zdDogL15pbXhcLnRvJC8sCiAgICAgIHBhdGg6IFsKICAgICAgICAvXlwvaW1nLS4qXC5odG1sLywKICAgICAgICAvXlwvaVwvLiovLAogICAgICBdLAogICAgfSwKICAgIHJlYWR5OiBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucGFydGlhbChhY3Rpb24sICcjY29udGludWVidXR0b24sICNjb250aW51ZXRvaW1hZ2UgaW5wdXRbdHlwZT0ic3VibWl0Il0nLCAnaW1nW2NsYXNzXj1jZW50cmVkXScpLAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiB7CiAgICAgIGhvc3Q6IFsKICAgICAgICAvXih3d3dcLik/aW1nZHJpdmVcLm5ldCQvLAogICAgICAgIC9eKHd3d1wuKT8oaW1ndGF4aXxpbWd3YWxsZXR8aW1nYWR1bHQpXC5jb20kLywKICAgICAgXSwKICAgICAgcGF0aDogL15cL2ltZy0uKlwuaHRtbCQvLAogICAgfSwKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgbGV0IG0gPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnbWV0YVtwcm9wZXJ0eT0ib2c6aW1hZ2UiXScpOwogICAgICBtID0gbS5jb250ZW50LnJlcGxhY2UoJ3NtYWxsJywgJ2JpZycpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKG0pOwogICAgfSwKICB9KTsKICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogICAgcnVsZTogewogICAgICBob3N0OiAvXmltYWdlc2Nhbm5lclwuY2MkLywKICAgICAgcGF0aDogL15cLy4qXC5qcGdcLmh0bWwvLAogICAgfSwKICAgIGFzeW5jIHN0YXJ0ICgpIHsKICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoJy5odG1sJywgJycpOwogICAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkxpbmsocGF0aCk7CiAgICB9LAogIH0pOwogIF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgICBydWxlOiAnaHR0cHM6Ly9pbWdjbG91ZC5wdy9pbWFnZS8qJywKICAgIGFzeW5jIHJlYWR5ICgpIHsKICAgICAgY29uc3QgbCA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCdsaW5rW3JlbD0iaW1hZ2Vfc3JjIl0nKTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShsLmhyZWYpOwogICAgfSwKICB9KTsKICBhc3luYyBmdW5jdGlvbiBhY3Rpb24gKGZpcnN0U2VsZWN0b3IsIHNlY29uZFNlbGVjdG9yKSB7CiAgICBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ucmVtb3ZlKCdpZnJhbWUsICNhZGJsb2NrX2RldGVjdCwgLnBvcHVwT3ZlcmxheScpOwogICAgbGV0IG5vZGUgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJChmaXJzdFNlbGVjdG9yKTsKICAgIGlmIChub2RlKSB7CiAgICAgIG5vZGUgPSBmaW5kRmlyc3RGb3JtKG5vZGUpOwogICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IG5vZGUub3V0ZXJIVE1MOwogICAgICBub2RlID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2Zvcm0gaW5wdXQnKTsKICAgICAgbm9kZS5jbGljaygpOwogICAgICByZXR1cm47CiAgICB9CiAgICBub2RlID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoc2Vjb25kU2VsZWN0b3IpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShub2RlLnNyYyk7CiAgfQogIGZ1bmN0aW9uIGZpbmRGaXJzdEZvcm0gKGNoaWxkKSB7CiAgICB3aGlsZSAoY2hpbGQgJiYgY2hpbGQubG9jYWxOYW1lICE9PSAnZm9ybScpIHsKICAgICAgY2hpbGQgPSBjaGlsZC5wYXJlbnRFbGVtZW50OwogICAgfQogICAgcmV0dXJuIGNoaWxkOwogIH0KfSkoKTsKX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siXyJdLnJlZ2lzdGVyKHsKICBydWxlOiBbCiAgICAnaHR0cDovL3NjcmVlbmxpc3QucnUvZGV0YWlscy5waHA/aW1hZ2VfaWQ9KicsCiAgICAnaHR0cDovL3d3dy5pbWFnZW5ldHouZGUvKi8qLmh0bWwnLAogIF0sCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaW1nID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJyNwaWN0dXJlJyk7CiAgICBhd2FpdCBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0ub3BlbkltYWdlKGltZy5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6ICdodHRwOi8vd3d3LnN1YmlyaW1hZ2VuZXMuY29tLyouaHRtbCcsCiAgYXN5bmMgcmVhZHkgKCkgewogICAgY29uc3QgaSA9IE9iamVjdChfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0pKCcjSW1hZ2VuVmlzdWFsaXphZGEnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6ICdodHRwOi8vdGlueXBpYy5jb20vdmlldy5waHA/cGljPSonLAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2ltZ0VsZW1lbnQnKTsKICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaS5zcmMpOwogIH0sCn0pOwpfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfIl0ucmVnaXN0ZXIoewogIHJ1bGU6IHsKICAgIGhvc3Q6IC9ed3d3XC50dXJib2ltYWdlaG9zdFwuY29tJC8sCiAgICBwYXRoOiAvXlwvcFwvLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGNvbnN0IGkgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI3VJbWFnZScpOwogICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5JbWFnZShpLnNyYyk7CiAgfSwKfSk7Cl9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl8iXS5yZWdpc3Rlcih7CiAgcnVsZTogewogICAgaG9zdDogWwogICAgICAvXnh4eFwuZm9wa29kaWFrXC5zaXRlJC8sCiAgICAgIC9eYmxhbWVsZXNzXC53b3JrJC8sCiAgICAgIC9eeGFvdXRjaG91Y1wubGl2ZSQvLAogICAgXSwKICAgIHBhdGg6IC9eXC9pbWctLywKICB9LAogIGFzeW5jIHJlYWR5ICgpIHsKICAgIGlmIChkb2N1bWVudC5yZWZlcnJlciA9PSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmKSB7CiAgICAgIGxldCBpbWcgPSBfQURTQllQQVNTRVJfTkFNRVNQQUNFX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyIkIl0uJCgnI2NvbnRhaW5lciA+IGEgPiBpbWcnKTsKICAgICAgaWYgKCFpbWcpIHsKICAgICAgICBpbWcgPSBPYmplY3QoX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdKSgnI2NvbnRhaW5lciA+IGltZycpOwogICAgICB9CiAgICAgIGF3YWl0IF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXS5vcGVuSW1hZ2UoaW1nLnNyYyk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBmID0gT2JqZWN0KF9BRFNCWVBBU1NFUl9OQU1FU1BBQ0VfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIiQiXSkoJ2Zvcm0nKTsKICAgICAgYXdhaXQgX0FEU0JZUEFTU0VSX05BTUVTUEFDRV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siJCJdLm9wZW5MaW5rKGYuYWN0aW9uLCB7IAogICAgICAgIHBvc3Q6IHsKICAgICAgICAgIGltZ0NvbnRpbnVlOiAnQ29udGludWUgdG8gaW1hZ2UgLi4uJywKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfSk7CiB9KSwKIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl8iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF87IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICIkIiwgZnVuY3Rpb24oKSB7IHJldHVybiAkOyB9KTsKIHZhciB1dGlsX2FqYXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7CiB2YXIgdXRpbF9jb29raWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CiB2YXIgdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwogdmFyIHV0aWxfZGlzcGF0Y2hlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKIHZhciB1dGlsX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CiB2YXIgdXRpbF9pbWFnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7CiB2YXIgdXRpbF9saW5rX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKIHZhciB1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKIHZhciB1dGlsX21pc2NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwogdmFyIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CmNvbnN0IF8gPSB7CiAgQWRzQnlwYXNzZXJFcnJvcjogdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkFkc0J5cGFzc2VyRXJyb3IiXSwKICBldmlsOiB1dGlsX21pc2NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1siZXZpbCJdLAogIGZpbmQ6IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJmaW5kIl0sCiAgZm9yRWFjaDogdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImZvckVhY2giXSwKICBnZW5lcmF0ZVJhbmRvbUlQOiB1dGlsX21pc2NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1siZ2VuZXJhdGVSYW5kb21JUCJdLAogIGluZm86IHV0aWxfbG9nZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bImluZm8iXSwKICBub25lOiB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9uZSJdLAogIHBhcnRpYWw6IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJwYXJ0aWFsIl0sCiAgcmVnaXN0ZXI6IHV0aWxfZGlzcGF0Y2hlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJyZWdpc3RlciJdLAogIHRyeUV2ZXJ5OiB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sidHJ5RXZlcnkiXSwKICB3YWl0OiB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sid2FpdCJdLAogIHdhcm46IHV0aWxfbG9nZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bIndhcm4iXSwKfTsKZnVuY3Rpb24gJCAoc2VsZWN0b3IsIGNvbnRleHQpIHsKICByZXR1cm4gT2JqZWN0KHV0aWxfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInF1ZXJ5U2VsZWN0b3IiXSkoc2VsZWN0b3IsIGNvbnRleHQpOwp9CiQuJCA9IHV0aWxfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInF1ZXJ5U2VsZWN0b3JPck51bGwiXTsKJC4kJCA9IHV0aWxfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInF1ZXJ5U2VsZWN0b3JBbGwiXTsKJC5ibG9jayA9IHV0aWxfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImJsb2NrIl07CiQuZ2V0ID0gdXRpbF9hamF4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImdldCJdOwokLmdldENvb2tpZSA9IHV0aWxfY29va2llX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImdldENvb2tpZSJdOwokLm51a2UgPSB1dGlsX21pc2NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1sibnVrZSJdOwokLm9wZW5JbWFnZSA9IHV0aWxfaW1hZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1sib3BlbkltYWdlIl07CiQub3BlbkxpbmsgPSB1dGlsX2xpbmtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1sib3BlbkxpbmsiXTsKJC5wb3N0ID0gdXRpbF9hamF4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInBvc3QiXTsKJC5yZW1vdmUgPSB1dGlsX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJyZW1vdmUiXTsKJC5yZW1vdmVBbGxUaW1lciA9IHV0aWxfbWlzY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fWyJyZW1vdmVBbGxUaW1lciJdOwokLnJlc2V0Q29va2llcyA9IHV0aWxfY29va2llX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInJlc2V0Q29va2llcyJdOwokLnNlYXJjaEZyb21TY3JpcHRzID0gdXRpbF9kb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1sic2VhcmNoRnJvbVNjcmlwdHMiXTsKJC5zZXRDb29raWUgPSB1dGlsX2Nvb2tpZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJzZXRDb29raWUiXTsKJC50b0RPTSA9IHV0aWxfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInRvRE9NIl07CiQud2luZG93ID0gdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fWyJ1c3ciXTsKIH0pLAogKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZ2V0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXQ7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwb3N0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBwb3N0OyB9KTsKIHZhciB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CiB2YXIgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKIHZhciB1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKY2xhc3MgQWpheEVycm9yIGV4dGVuZHMgdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIkFkc0J5cGFzc2VyRXJyb3IiXSB7CiAgY29uc3RydWN0b3IgKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXMsIHJlc3BvbnNlKSB7CiAgICBzdXBlcihgJHttZXRob2R9ICR7dXJsfSBnb3QgJHtzdGF0dXN9YCk7CiAgICB0aGlzLl9tZXRob2QgPSBtZXRob2Q7CiAgICB0aGlzLl91cmwgPSB1cmw7CiAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzOwogICAgdGhpcy5fc3RhdHVzID0gc3RhdHVzOwogICAgdGhpcy5fcmVzcG9uc2UgPSByZXNwb25zZTsKICB9CiAgZ2V0IG5hbWUgKCkgewogICAgcmV0dXJuICdBamF4RXJyb3InOwogIH0KICBnZXQgbWV0aG9kICgpIHsKICAgIHJldHVybiB0aGlzLl9tZXRob2Q7CiAgfQogIGdldCB1cmwgKCkgewogICAgcmV0dXJuIHRoaXMuX3VybDsKICB9CiAgZ2V0IGRhdGEgKCkgewogICAgcmV0dXJuIHRoaXMuX2RhdGE7CiAgfQogIGdldCBoZWFkZXJzICgpIHsKICAgIHJldHVybiB0aGlzLl9oZWFkZXJzOwogIH0KICBnZXQgc3RhdHVzICgpIHsKICAgIHJldHVybiB0aGlzLl9zdGF0dXM7CiAgfQogIGdldCByZXNwb25zZSAoKSB7CiAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2U7CiAgfQp9CmZ1bmN0aW9uIGRlZXBKb2luIChwcmVmaXgsIG9iamVjdCkgewogIGNvbnN0IGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmplY3QpOwogIGNvbnN0IG1hcHBlZCA9IE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibWFwIl0pKGtleXMsIChrKSA9PiB7CiAgICBjb25zdCB2ID0gb2JqZWN0W2tdOwogICAgY29uc3Qga2V5ID0gYCR7cHJlZml4fVske2t9XWA7CiAgICBpZiAodHlwZW9mIHYgPT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiBkZWVwSm9pbihrZXksIHYpOwogICAgfQogICAgY29uc3QgdG1wID0gW2tleSwgdl0ubWFwKGVuY29kZVVSSUNvbXBvbmVudCk7CiAgICByZXR1cm4gdG1wLmpvaW4oJz0nKTsKICB9KTsKICByZXR1cm4gbWFwcGVkLmpvaW4oJyYnKTsKfQpmdW5jdGlvbiB0b1F1ZXJ5IChkYXRhKSB7CiAgY29uc3QgdHlwZSA9IHR5cGVvZiBkYXRhOwogIGlmIChkYXRhID09PSBudWxsIHx8ICh0eXBlICE9PSAnc3RyaW5nJyAmJiB0eXBlICE9PSAnb2JqZWN0JykpIHsKICAgIHJldHVybiAnJzsKICB9CiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gZGF0YTsKICB9CiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7CiAgfQogIGNvbnN0IGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkYXRhKTsKICByZXR1cm4gT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJtYXAiXSkoa2V5cywgKGspID0+IHsKICAgIGNvbnN0IHYgPSBkYXRhW2tdOwogICAgaWYgKHR5cGVvZiB2ID09PSAnb2JqZWN0JykgewogICAgICByZXR1cm4gZGVlcEpvaW4oaywgdik7CiAgICB9CiAgICBjb25zdCB0bXAgPSBbaywgdl0ubWFwKGVuY29kZVVSSUNvbXBvbmVudCk7CiAgICByZXR1cm4gdG1wLmpvaW4oJz0nKTsKICB9KS5qb2luKCcmJyk7Cn0KZnVuY3Rpb24gYWpheCAobWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMpIHsKICBPYmplY3QodXRpbF9sb2dnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZGVidWciXSkoJ2FqYXgnLCBtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycyk7CiAgY29uc3QgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICBsLmhyZWYgPSB1cmw7CiAgY29uc3QgcmVxSG9zdCA9IGwuaG9zdG5hbWU7CiAgY29uc3Qgb3ZlcnJpZGVIZWFkZXJzID0gewogICAgSG9zdDogcmVxSG9zdCB8fCB3aW5kb3cubG9jYXRpb24uaG9zdCwKICAgIE9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgIFJlZmVyZXI6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLAogICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLAogIH07CiAgT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJmb3JFYWNoIl0pKG92ZXJyaWRlSGVhZGVycywgKHYsIGspID0+IHsKICAgIGlmIChoZWFkZXJzW2tdID09PSB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9uZSJdKSB7CiAgICAgIGRlbGV0ZSBoZWFkZXJzW2tdOwogICAgfSBlbHNlIHsKICAgICAgaGVhZGVyc1trXSA9IHY7CiAgICB9CiAgfSk7CiAgaWYgKGRhdGEpIHsKICAgIGlmIChoZWFkZXJzWydDb250ZW50LVR5cGUnXS5pbmRleE9mKCdqc29uJykgPj0gMCkgewogICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICB9IGVsc2UgewogICAgICBkYXRhID0gdG9RdWVyeShkYXRhKTsKICAgIH0KICAgIGhlYWRlcnNbJ0NvbnRlbnQtTGVuZ3RoJ10gPSBkYXRhLmxlbmd0aDsKICB9CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siR01BUEkiXS54bWxIdHRwUmVxdWVzdCh7CiAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICB1cmw6IHVybCwKICAgICAgZGF0YTogZGF0YSwKICAgICAgaGVhZGVyczogaGVhZGVycywKICAgICAgb25sb2FkIChyZXNwb25zZSkgewogICAgICAgIHJlc3BvbnNlID0gKHR5cGVvZiByZXNwb25zZS5yZXNwb25zZVRleHQgIT09ICd1bmRlZmluZWQnKSA/IHJlc3BvbnNlIDogdGhpczsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgIHJlamVjdChuZXcgQWpheEVycm9yKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBvbmVycm9yIChyZXNwb25zZSkgewogICAgICAgIHJlc3BvbnNlID0gKHR5cGVvZiByZXNwb25zZS5yZXNwb25zZVRleHQgIT09ICd1bmRlZmluZWQnKSA/IHJlc3BvbnNlIDogdGhpczsKICAgICAgICByZWplY3QobmV3IEFqYXhFcnJvcihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5yZXNwb25zZVRleHQpKTsKICAgICAgfSwKICAgIH0pOwogIH0pOwp9CmZ1bmN0aW9uIGdldCAodXJsLCBkYXRhLCBoZWFkZXJzKSB7CiAgZGF0YSA9IHRvUXVlcnkoZGF0YSk7CiAgZGF0YSA9IGRhdGEgPyAnPycgKyBkYXRhIDogJyc7CiAgaGVhZGVycyA9IGhlYWRlcnMgfHwge307CiAgcmV0dXJuIGFqYXgoJ0dFVCcsIHVybCArIGRhdGEsICcnLCBoZWFkZXJzKTsKfQpmdW5jdGlvbiBwb3N0ICh1cmwsIGRhdGEsIGhlYWRlcnMpIHsKICBjb25zdCBoID0gewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnLAogIH07CiAgaWYgKGhlYWRlcnMpIHsKICAgIE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZm9yRWFjaCJdKShoZWFkZXJzLCAodiwgaykgPT4gewogICAgICBoW2tdID0gdjsKICAgIH0pOwogIH0KICByZXR1cm4gYWpheCgnUE9TVCcsIHVybCwgZGF0YSwgaCk7Cn0KIH0pLAogKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic2V0Q29va2llIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzZXRDb29raWU7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJnZXRDb29raWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldENvb2tpZTsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlc2V0Q29va2llcyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVzZXRDb29raWVzOyB9KTsKIHZhciB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CmZ1bmN0aW9uIHNldENvb2tpZSAoa2V5LCB2YWx1ZSkgewogIGRvY3VtZW50LmNvb2tpZSA9IGAke2tleX09JHt2YWx1ZX07cGF0aD0ke2xvY2F0aW9uLnBhdGhuYW1lfTtgOwp9CmZ1bmN0aW9uIGdldENvb2tpZSAoa2V5KSB7CiAgbGV0IFssIGMsXSA9IE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZmluZCJdKShkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKSwgKHYpID0+IHsKICAgIGNvbnN0IGsgPSB2LnJlcGxhY2UoL15ccyooW2EtekEtWjAtOS1fXSspPS4rJC8sICckMScpOwogICAgaWYgKGsgIT09IGtleSkgewogICAgICByZXR1cm4gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXTsKICAgIH0KICB9KTsKICBpZiAoYyA9PT0gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGMgPSBjLnJlcGxhY2UoL15ccypbYS16QS1aMC05LV9dKz0oW147XSspLj8kLywgJyQxJyk7CiAgaWYgKCFjKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIGM7Cn0KZnVuY3Rpb24gcmVzZXRDb29raWVzICgpIHsKICBjb25zdCBhID0gZG9jdW1lbnQuZG9tYWluOwogIGNvbnN0IGIgPSBkb2N1bWVudC5kb21haW4ucmVwbGFjZSgvXnd3d1wuLywgJycpOwogIGNvbnN0IGMgPSBkb2N1bWVudC5kb21haW4ucmVwbGFjZSgvXihcdytcLikrPyhcdytcLlx3KykkLywgJyQyJyk7CiAgY29uc3QgZCA9IChuZXcgRGF0ZSgxZTMpKS50b1VUQ1N0cmluZygpOwogIE9iamVjdCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZm9yRWFjaCJdKShkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKSwgKHYpID0+IHsKICAgIGNvbnN0IGsgPSB2LnJlcGxhY2UoL15ccyooXHcrKT0uKyQvLCAnJDEnKTsKICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke2t9PTtleHBpcmVzPSR7ZH07YDsKICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke2t9PTtwYXRoPS87ZXhwaXJlcz0ke2R9O2A7CiAgICBjb25zdCBlID0gKGEsIGIsIGMpID0+IGAke2F9PTtwYXRoPS87ZG9tYWluPSR7Yn07ZXhwaXJlcz0ke2N9O2A7CiAgICBkb2N1bWVudC5jb29raWUgPSBlKGssIGEsIGQpOwogICAgZG9jdW1lbnQuY29va2llID0gZShrLCBiLCBkKTsKICAgIGRvY3VtZW50LmNvb2tpZSA9IGUoaywgYywgZCk7CiAgfSk7Cn0KIH0pLAogKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYmxvY2siLCBmdW5jdGlvbigpIHsgcmV0dXJuIGJsb2NrOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicXVlcnlTZWxlY3RvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcXVlcnlTZWxlY3RvcjsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInF1ZXJ5U2VsZWN0b3JBbGwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHF1ZXJ5U2VsZWN0b3JBbGw7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJxdWVyeVNlbGVjdG9yT3JOdWxsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBxdWVyeVNlbGVjdG9yT3JOdWxsOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmVtb3ZlIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZW1vdmU7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzZWFyY2hGcm9tU2NyaXB0cyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VhcmNoRnJvbVNjcmlwdHM7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0b0RPTSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdG9ET007IH0pOwogdmFyIHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKIHZhciB1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKY2xhc3MgRG9tTm90Rm91bmRFcnJvciBleHRlbmRzIHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJBZHNCeXBhc3NlckVycm9yIl0gewogIGNvbnN0cnVjdG9yIChzZWxlY3RvcikgewogICAgc3VwZXIoYFxgJHtzZWxlY3Rvcn1cYCBub3QgZm91bmRgKTsKICB9CiAgZ2V0IG5hbWUgKCkgewogICAgcmV0dXJuICdEb21Ob3RGb3VuZEVycm9yJzsKICB9Cn0KZnVuY3Rpb24gcXVlcnlTZWxlY3RvciAoc2VsZWN0b3IsIGNvbnRleHQpIHsKICBpZiAoIWNvbnRleHQgfHwgIWNvbnRleHQucXVlcnlTZWxlY3RvcikgewogICAgY29udGV4dCA9IGRvY3VtZW50OwogIH0KICBjb25zdCBuID0gY29udGV4dC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICBpZiAoIW4pIHsKICAgIHRocm93IG5ldyBEb21Ob3RGb3VuZEVycm9yKHNlbGVjdG9yKTsKICB9CiAgcmV0dXJuIG47Cn0KZnVuY3Rpb24gcXVlcnlTZWxlY3Rvck9yTnVsbCAoc2VsZWN0b3IsIGNvbnRleHQpIHsKICB0cnkgewogICAgcmV0dXJuIHF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IsIGNvbnRleHQpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBudWxsOwogIH0KfQpmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsIChzZWxlY3RvciwgY29udGV4dCkgewogIGlmICghY29udGV4dCB8fCAhY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKSB7CiAgICBjb250ZXh0ID0gZG9jdW1lbnQ7CiAgfQogIGNvbnN0IG5zID0gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsKICByZXR1cm4gbnM7Cn0KZnVuY3Rpb24gdG9ET00gKHJhd0hUTUwpIHsKICB0cnkgewogICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpOwogICAgY29uc3QgRE9NSFRNTCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcocmF3SFRNTCwgJ3RleHQvaHRtbCcpOwogICAgcmV0dXJuIERPTUhUTUw7CiAgfSBjYXRjaCAoZSkgewogICAgdGhyb3cgbmV3IHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJBZHNCeXBhc3NlckVycm9yIl0oJ2NvdWxkIG5vdCBwYXJzZSBIVE1MIHRvIERPTScpOwogIH0KfQpmdW5jdGlvbiByZW1vdmUgKHNlbGVjdG9yLCBjb250ZXh0KSB7CiAgY29uc3Qgbm9kZXMgPSBxdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yLCBjb250ZXh0KTsKICBPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImZvckVhY2giXSkobm9kZXMsIChlKSA9PiB7CiAgICBPYmplY3QodXRpbF9sb2dnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siZGVidWciXSkoJ3JlbW92ZWQnLCBlKTsKICAgIGUucmVtb3ZlKCk7CiAgfSk7Cn0KZnVuY3Rpb24gYmxvY2sgKHNlbGVjdG9yLCBjb250ZXh0PW51bGwpIHsKICBpZiAoIWNvbnRleHQpIHsKICAgIGNvbnRleHQgPSBkb2N1bWVudDsKICB9CiAgbGV0IGZuID0gbnVsbDsKICBpZiAoT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJpc1N0cmluZyJdKShzZWxlY3RvcikpIHsKICAgIGZuID0gKCkgPT4gewogICAgICByZW1vdmUoc2VsZWN0b3IsIGNvbnRleHQpOwogICAgfTsKICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgZm4gPSAobXV0YXRpb24pID0+IHsKICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7CiAgICAgICAgaWYgKHNlbGVjdG9yKG5vZGUpKSB7CiAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3dyb25nIHNlbGVjdG9yJyk7CiAgfQogIGNvbnN0IG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7CiAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHsKICAgICAgZm4obXV0YXRpb24pOwogICAgfSk7CiAgfSk7CiAgby5vYnNlcnZlKGNvbnRleHQsIHsKICAgIGNoaWxkTGlzdDogdHJ1ZSwKICAgIHN1YnRyZWU6IHRydWUsCiAgfSk7Cn0KZnVuY3Rpb24gc2VhcmNoRnJvbVNjcmlwdHNCeVJlZ0V4cCAocGF0dGVybiwgY29udGV4dCkgewogIGNvbnN0IHNjcmlwdHMgPSBxdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnLCBjb250ZXh0KTsKICBjb25zdCBbLCAsIG1dID0gT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJmaW5kIl0pKHNjcmlwdHMsIChzKSA9PiB7CiAgICBjb25zdCBtID0gcy50ZXh0Q29udGVudC5tYXRjaChwYXR0ZXJuKTsKICAgIGlmICghbSkgewogICAgICByZXR1cm4gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXTsKICAgIH0KICAgIHJldHVybiBtOwogIH0pOwogIGlmIChtID09PSB1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9uZSJdKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIG07Cn0KZnVuY3Rpb24gc2VhcmNoRnJvbVNjcmlwdHNCeVN0cmluZyAocGF0dGVybiwgY29udGV4dCkgewogIGNvbnN0IHNjcmlwdHMgPSBxdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnLCBjb250ZXh0KTsKICBjb25zdCBbLCBtLF0gPSBPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImZpbmQiXSkoc2NyaXB0cywgKHMpID0+IHsKICAgIGNvbnN0IG0gPSBzLnRleHRDb250ZW50LmluZGV4T2YocGF0dGVybik7CiAgICBpZiAobSA8IDApIHsKICAgICAgcmV0dXJuIHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJub25lIl07CiAgICB9CiAgICByZXR1cm4gbTsKICB9KTsKICBpZiAobSA9PT0gdXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm5vbmUiXSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIHJldHVybiBtLnRleHRDb250ZW50Owp9CmZ1bmN0aW9uIHNlYXJjaEZyb21TY3JpcHRzIChwYXR0ZXJuLCBjb250ZXh0KSB7CiAgaWYgKHBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIHJldHVybiBzZWFyY2hGcm9tU2NyaXB0c0J5UmVnRXhwKHBhdHRlcm4sIGNvbnRleHQpOwogIH0gZWxzZSBpZiAoT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJpc1N0cmluZyJdKShwYXR0ZXJuKSkgewogICAgcmV0dXJuIHNlYXJjaEZyb21TY3JpcHRzQnlTdHJpbmcocGF0dGVybiwgY29udGV4dCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBudWxsOwogIH0KfQogfSksCiAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvcGVuSW1hZ2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG9wZW5JbWFnZTsgfSk7CiB2YXIgdXRpbF9saW5rX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKIHZhciB1dGlsX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CiB2YXIgdXRpbF9sb2dnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CiB2YXIgdXRpbF9taXNjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKIHZhciB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwphc3luYyBmdW5jdGlvbiBvcGVuSW1hZ2UgKGltZ1NyYywgb3B0aW9ucykgewogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogIGNvbnN0IHJlcGxhY2UgPSAhIW9wdGlvbnMucmVwbGFjZTsKICBjb25zdCByZWZlcmVyID0gISFvcHRpb25zLnJlZmVyZXI7CiAgaWYgKHJlcGxhY2UpIHsKICAgIGF3YWl0IHJlcGxhY2VCb2R5KGltZ1NyYyk7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IHJlZGlyZWN0SW1hZ2UgPSBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIkdNQVBJIl0uZ2V0VmFsdWUoJ3JlZGlyZWN0X2ltYWdlJyk7CiAgaWYgKHJlZGlyZWN0SW1hZ2UpIHsKICAgIGF3YWl0IE9iamVjdCh1dGlsX2xpbmtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sib3BlbkxpbmsiXSkoaW1nU3JjLCB7CiAgICAgIHJlZmVyZXI6IHJlZmVyZXIsCiAgICB9KTsKICB9Cn0KZnVuY3Rpb24gZW5hYmxlU2Nyb2xsaW5nICgpIHsKICBjb25zdCBvID0gZG9jdW1lbnQuY29tcGF0TW9kZSA9PT0gJ0NTUzFDb21wYXQnID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogZG9jdW1lbnQuYm9keTsKICBvLnN0eWxlLm92ZXJmbG93ID0gJyc7Cn0KZnVuY3Rpb24gdG9nZ2xlU2hyaW5raW5nICgpIHsKICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ2Fkc2J5cGFzc2VyLXNocmlua2VkJyk7Cn0KZnVuY3Rpb24gY2hlY2tTY2FsaW5nICgpIHsKICBjb25zdCBudyA9IHRoaXMubmF0dXJhbFdpZHRoOwogIGNvbnN0IG5oID0gdGhpcy5uYXR1cmFsSGVpZ2h0OwogIGNvbnN0IGN3ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOwogIGNvbnN0IGNoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKICBpZiAoKG53ID4gY3cgfHwgbmggPiBjaCkgJiYgIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZHNieXBhc3Nlci1yZXNpemFibGUnKSkgewogICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhZHNieXBhc3Nlci1yZXNpemFibGUnKTsKICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWRzYnlwYXNzZXItc2hyaW5rZWQnKTsKICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTaHJpbmtpbmcpOwogIH0gZWxzZSB7CiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlU2hyaW5raW5nKTsKICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWRzYnlwYXNzZXItc2hyaW5rZWQnKTsKICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWRzYnlwYXNzZXItcmVzaXphYmxlJyk7CiAgfQp9CmFzeW5jIGZ1bmN0aW9uIHNjYWxlSW1hZ2UgKGkpIHsKICBjb25zdCBzaVVSTCA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siR01BUEkiXS5nZXRSZXNvdXJjZVVybCgnc2NhbGVJbWFnZScpOwogIGFwcGVuZFN0eWxlVVJMKHNpVVJMKTsKICBpZiAoaS5uYXR1cmFsV2lkdGggJiYgaS5uYXR1cmFsSGVpZ2h0KSB7CiAgICBjaGVja1NjYWxpbmcuY2FsbChpKTsKICB9IGVsc2UgewogICAgaS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2hlY2tTY2FsaW5nKTsKICB9CiAgbGV0IGggPSAwOwogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7CiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGgpOwogICAgaCA9IHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrU2NhbGluZy5iaW5kKGkpLCAxMDApOwogIH0pOwp9CmFzeW5jIGZ1bmN0aW9uIGNoYW5nZUJhY2tncm91bmQgKCkgewogIGNvbnN0IGJnSW1hZ2UgPSBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIkdNQVBJIl0uZ2V0UmVzb3VyY2VVcmwoJ2JnSW1hZ2UnKTsKICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMjIyMjIyJzsKICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7YmdJbWFnZX0nKWA7Cn0KYXN5bmMgZnVuY3Rpb24gYWxpZ25DZW50ZXIgKCkgewogIGNvbnN0IGFjVVJMID0gYXdhaXQgdXRpbF9wbGF0Zm9ybV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJHTUFQSSJdLmdldFJlc291cmNlVXJsKCdhbGlnbkNlbnRlcicpOwogIGFwcGVuZFN0eWxlVVJMKGFjVVJMKTsKfQpmdW5jdGlvbiBpbmplY3RTdHlsZSAoZCwgaSkgewogIE9iamVjdCh1dGlsX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJyZW1vdmUiXSkoJ3N0eWxlLCBsaW5rW3JlbD1zdHlsZXNoZWV0XScpOwogIGQuaWQgPSAnYWRzYnlwYXNzZXItd3JhcHBlcic7CiAgaS5pZCA9ICdhZHNieXBhc3Nlci1pbWFnZSc7Cn0KZnVuY3Rpb24gYXBwZW5kU3R5bGVVUkwgKHVybCkgewogIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7CiAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7CiAgbGluay50eXBlID0gJ3RleHQvY3NzJzsKICBsaW5rLmhyZWYgPSB1cmw7CiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTsKfQphc3luYyBmdW5jdGlvbiByZXBsYWNlQm9keSAoaW1nU3JjKSB7CiAgY29uc3QgcmVkaXJlY3RJbWFnZSA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siR01BUEkiXS5nZXRWYWx1ZSgncmVkaXJlY3RfaW1hZ2UnKTsKICBpZiAoIXJlZGlyZWN0SW1hZ2UpIHsKICAgIHJldHVybjsKICB9CiAgaWYgKCFpbWdTcmMpIHsKICAgIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ3YXJuIl0pKCdmYWxzZSB1cmwnKTsKICAgIHJldHVybjsKICB9CiAgT2JqZWN0KHV0aWxfbG9nZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImluZm8iXSkoYHJlcGxhY2luZyBib2R5IHdpdGggXGAke2ltZ1NyY31cYCAuLi5gKTsKICBPYmplY3QodXRpbF9taXNjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInJlbW92ZUFsbFRpbWVyIl0pKCk7CiAgZW5hYmxlU2Nyb2xsaW5nKCk7CiAgZG9jdW1lbnQuYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTsKICBjb25zdCBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkKTsKICBjb25zdCBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgaS5zcmMgPSBpbWdTcmM7CiAgZC5hcHBlbmRDaGlsZChpKTsKICBjb25zdCBhYyA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siR01BUEkiXS5nZXRWYWx1ZSgnYWxpZ25fY2VudGVyJyk7CiAgY29uc3Qgc2kgPSBhd2FpdCB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIkdNQVBJIl0uZ2V0VmFsdWUoJ3NjYWxlX2ltYWdlJyk7CiAgaWYgKGFjIHx8IHNpKSB7CiAgICBpbmplY3RTdHlsZShkLCBpKTsKICB9CiAgaWYgKGFjKSB7CiAgICBhd2FpdCBhbGlnbkNlbnRlcigpOwogIH0KICBjb25zdCBjYiA9IGF3YWl0IHV0aWxfcGxhdGZvcm1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siR01BUEkiXS5nZXRWYWx1ZSgnY2hhbmdlX2JhY2tncm91bmQnKTsKICBpZiAoY2IpIHsKICAgIGF3YWl0IGNoYW5nZUJhY2tncm91bmQoKTsKICB9CiAgaWYgKHNpKSB7CiAgICBhd2FpdCBzY2FsZUltYWdlKGkpOwogIH0KfQogfSksCiAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvcGVuTGluayIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gb3Blbkxpbms7IH0pOwogdmFyIHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKIHZhciB1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKZnVuY3Rpb24gcHJlcGFyZSAoZSkgewogIGlmICghZG9jdW1lbnQuYm9keSkgewogICAgZG9jdW1lbnQuYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTsKICB9CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTsKICByZXR1cm4gT2JqZWN0KHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJ3YWl0Il0pKDApOwp9CmFzeW5jIGZ1bmN0aW9uIGdldCAodXJsKSB7CiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICBhLmhyZWYgPSB1cmw7CiAgbGV0IGNsaWNrZWQgPSBmYWxzZTsKICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIGNsaWNrZWQgPSB0cnVlOwogIH0sIHRydWUpOwogIGF3YWl0IHByZXBhcmUoYSk7CiAgYS5jbGljaygpOwogIGNvbnN0IHRpY2sgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICBpZiAoY2xpY2tlZCkgewogICAgICBPYmplY3QodXRpbF9sb2dnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siaW5mbyJdKSgnYWxyZWFkeSBjbGlja2VkJyk7CiAgICAgIGNsZWFySW50ZXJ2YWwodGljayk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJpbmZvIl0pKCd0cnkgYWdhaW4nKTsKICAgIGEuY2xpY2soKTsKICB9LCA1MDApOwp9CmFzeW5jIGZ1bmN0aW9uIHBvc3QgKHBhdGgsIHBhcmFtcykgewogIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTsKICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpOwogIGZvcm0ubWV0aG9kID0gJ3Bvc3QnOwogIGZvcm0uYWN0aW9uID0gcGF0aDsKICBPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImZvckVhY2giXSkocGFyYW1zLCAodmFsdWUsIGtleSkgPT4gewogICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgaW5wdXQudHlwZSA9ICdoaWRkZW4nOwogICAgaW5wdXQubmFtZSA9IGtleTsKICAgIGlucHV0LnZhbHVlID0gdmFsdWU7CiAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0KTsKICB9KTsKICBhd2FpdCBwcmVwYXJlKGZvcm0pOwogIGZvcm0uc3VibWl0KCk7Cn0KYXN5bmMgZnVuY3Rpb24gb3BlbkxpbmsgKHRvLCBvcHRpb25zKSB7CiAgaWYgKCFPYmplY3QodXRpbF9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImlzU3RyaW5nIl0pKHRvKSAmJiAhdG8pIHsKICAgIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJ3YXJuIl0pKCdmYWxzZSBVUkwnKTsKICAgIHJldHVybjsKICB9CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgY29uc3Qgd2l0aFJlZmVyZXIgPSB0eXBlb2Ygb3B0aW9ucy5yZWZlcmVyID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnJlZmVyZXI7CiAgY29uc3QgcG9zdERhdGEgPSBvcHRpb25zLnBvc3Q7CiAgY29uc3QgZnJvbSA9IHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpOwogIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJpbmZvIl0pKGAke2Zyb219IC0+ICR7dG99YCk7CiAgaWYgKHBvc3REYXRhKSB7CiAgICBhd2FpdCBwb3N0KHRvLCBwb3N0RGF0YSk7CiAgICByZXR1cm47CiAgfQogIGlmICh3aXRoUmVmZXJlcikgewogICAgYXdhaXQgZ2V0KHRvKTsKICAgIHJldHVybjsKICB9CiAgd2luZG93LnRvcC5sb2NhdGlvbi5yZXBsYWNlKHRvKTsKfQogfSksCiAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyZW1vdmVBbGxUaW1lciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVtb3ZlQWxsVGltZXI7IH0pOwogX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJudWtlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBudWtlOyB9KTsKIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZ2VuZXJhdGVSYW5kb21JUCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2VuZXJhdGVSYW5kb21JUDsgfSk7CiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImV2aWwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGV2aWw7IH0pOwogdmFyIHV0aWxfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKIHZhciB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwogdmFyIHV0aWxfbG9nZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwpmdW5jdGlvbiByZW1vdmVBbGxUaW1lciAoKSB7CiAgbGV0IGhhbmRsZSA9IHdpbmRvdy5zZXRJbnRlcnZhbCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9wIl0sIDEwKTsKICB3aGlsZSAoaGFuZGxlID4gMCkgewogICAgd2luZG93LmNsZWFySW50ZXJ2YWwoaGFuZGxlLS0pOwogIH0KICBoYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCh1dGlsX2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9wIl0sIDEwKTsKICB3aGlsZSAoaGFuZGxlID4gMCkgewogICAgd2luZG93LmNsZWFyVGltZW91dChoYW5kbGUtLSk7CiAgfQp9CmZ1bmN0aW9uIG51a2UgKHVybCkgewogIHRyeSB7CiAgICB1dGlsX3BsYXRmb3JtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInVzdyJdLmRvY3VtZW50LndyaXRlKCdudWtlZCBieSBBZHNCeXBhc3NlciwgbGVhZGluZyB0byAuLi48YnIvPicpOwogIH0gY2F0Y2ggKGUpIHsKICAgIE9iamVjdCh1dGlsX2xvZ2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ3YXJuIl0pKCdudWtlIGZhaWxlZCcsIGUpOwogIH0KICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogIGEuaHJlZiA9IHVybDsKICBhLnRleHRDb250ZW50ID0gdXJsOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7Cn0KZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21JUCAoKSB7CiAgcmV0dXJuIFswLCAwLCAwLCAwXS5tYXAoKCkgPT4gewogICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7CiAgfSkuam9pbignLicpOwp9CmZ1bmN0aW9uIGV2aWwgKHNjcmlwdCkgewogIHJldHVybiAoKAogICAgR00sCiAgICBHTV9kZWxldGVWYWx1ZSwKICAgIEdNX2dldFJlc291cmNlVVJMLAogICAgR01fZ2V0VmFsdWUsCiAgICBHTV9vcGVuSW5UYWIsCiAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kLAogICAgR01fc2V0VmFsdWUsCiAgICBHTV94bWxodHRwUmVxdWVzdCwKICAgIHVuc2FmZVdpbmRvdywKICAgIHdpbmRvdywKICApID0+IHsKICAgIHJldHVybiBldmFsKHNjcmlwdCk7CiAgfSkoKTsKfQogfSkKIF0pOw==","resources":[{"meta":{"name":"align_center.css","url":"https://raw.githubusercontent.com/adsbypasser/adsbypasser/v7.7.0/resources/css/align_center.css","ts":1567889243769,"mimetype":"text/css"},"source":"aHRtbCB7CiAgaGVpZ2h0OiAxMDAlOwp9Cgpib2R5IHsKICBoZWlnaHQ6IDEwMCU7CiAgbWFyZ2luOiAwOwp9CgojYWRzYnlwYXNzZXItd3JhcHBlciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCiNhZHNieXBhc3Nlci1pbWFnZSB7CiAgbWFyZ2luOiBhdXRvOwogIHRvcDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICByaWdodDogMDsKfQo="},{"meta":{"name":"scale_image.css","url":"https://raw.githubusercontent.com/adsbypasser/adsbypasser/v7.7.0/resources/css/scale_image.css","ts":1567889243774,"mimetype":"text/css"},"source":"I2Fkc2J5cGFzc2VyLWltYWdlLmFkc2J5cGFzc2VyLXJlc2l6YWJsZSB7CiAgY3Vyc29yOiAtd2Via2l0LXpvb20tb3V0OwogIGN1cnNvcjogLW1vei16b29tLW91dDsKICBjdXJzb3I6IHpvb20tb3V0Owp9CgojYWRzYnlwYXNzZXItaW1hZ2UuYWRzYnlwYXNzZXItcmVzaXphYmxlLmFkc2J5cGFzc2VyLXNocmlua2VkIHsKICBtYXgtd2lkdGg6IDEwMCU7CiAgbWF4LWhlaWdodDogMTAwJTsKICBjdXJzb3I6IC13ZWJraXQtem9vbS1pbjsKICBjdXJzb3I6IC1tb3otem9vbS1pbjsKICBjdXJzb3I6IHpvb20taW47Cn0K"},{"meta":{"name":"imagedoc-darknoise.png","url":"https://raw.githubusercontent.com/adsbypasser/adsbypasser/v7.7.0/resources/img/imagedoc-darknoise.png","ts":1567889243788,"mimetype":"image/png"},"source":"wolQTkcNChoKAAAADUlIRFIAAABYAAAAWAQDAAAAwoPCuy0HAAAAG1BMVEXDvsO+w74BAQHDv8O/w78KCgoDAwN/f3/DtcO1w7XCgMKAwoDDvMO8w7zDoQ8Ew7YAAAAJdFJOUwUFBQUFBQUFBcKHDsOTw70AAAvDgklEQVR4Xg3DijljwrJaEADDkBnDtnIue3lxL0HCjUkJwpp8wrEEw6NWwoJLTAkaE0swbj/Du8K9w64UB37DhS1uKsOzwqLDsMOCWHzDqMKfw4BICSlZwqjDvirCtsObw59Rw7MfQsKjc2tIwpfCtMKADcKlwpvCpcKQTxPCl13Cs8Kow4k3I13CjAzCilrCp2vCoMKIwrFZFAhjwqE/wpDDpjvChMKHIi/Dtl/CrAPCt1zDv8O0w6gLwpQnecKSd8O8w73DpMOgfcK8wobCpcOQM8OlacKVwoc/wrREw6gyF8KOYsKqKkvChsKvw6xNZylOwp49RkpVCsK+fFkME8KIw403w4x7R8OJwoDCnsOcw7xiCDnDlS4rFjIEVQ7DjsO2OgAuQF8fEcO6wo5Ow6EtI8OTCsKBND3DhMKswoYmw71xw4VtCMOtH1MXD8KXVG7CnX04V2PCkDlywrPDocOSw4LCsGAdG8OLw7cFTcO+wpjCvFYjwojDgcOLw78PUcKRW8KlLg7DskstADnClCI1w64lHcKwwqYpOsOmHzAEw4bCnsKZw79mw43DlsOqCi/Dp1HCvsO9Wz0DL8O/w4HDrmTCh8OLwrDCvEPDrsKbwqo5HkDDjA3CvcOZWsOpw7DCtsKvwpTDjENUw7DDmmENw5bDrzbDksKMw55Jw7HDpgjCulDDhMKQwpfDp8KGwrPDrcK7wprCtsKDwrcXwpZ0f8KTw6tlLMO8bMKlEsOaw7sKw58jwpXCt8KXKsOwH8OmwonDscOwPcKuVsOdScO8ZsOlV8Olw5DDiMKlCMKcw6UGw6PCh8Oqwo3DizMrbsK6w4h1woABwoHCvXpIb8OLwol4McKmwrjDojYVw4ldwpEUS8KSw6fCh8K2HcOLMMK2Y13CqR/DvlfCg8O0O8OXwrheelbCgxVSQkNXwqXCgwLDhMKeFXpdJcKaLnrCjnYIIMKQEDJ3RcO7NMOEwosrwqPDt2rDt8KKMlPDlMOtGsKUw7QnLWJvJMK0e18ew5fCg8OXw6bDtQPCqhbDryjDm8OZwrdBCsKFw4HCk3huSMK/RsKKazbDkwoqw5EET8OYwozCsMKcworCpkjCoMK4CivCn2zCs8KSw70wG3M1EEVDJMO+VTfCucKuLjYCwoJcw50ZDsObwqHCgcKgRmorw44UQ8Krw43DoMKCWDLClC/CoQTCsTLDi8KmUFjDnALCmmrCrcOow7vDhMOECsKGEA9Vw5lyE8Ojw7fDksO4wo3CnMOHWcO5wrXDnznCkMOgwqMdw7PDlk4Ow7YUwp/DvsK8wqPCssKCC37CrytFbEDDiVjCv8KmPwpgw4PCocOtFMKyB8Kawq4ow5ptZ2fDmxorCMKKEMOkw5Vmw5XCpcKewqHDjgzDu8K9w6PDlV8oP8Kzw47Cl8Oywp3Dn8OZZU5IWcKdHcKCesKRHC4uOBpBwrE/DcOtwobDhScwA8KJbcKewqPDtMO9w6/Dk8KKFxY8w45Pw74dH8ONNEkzwoEgbMKYDcO5ScKswrPDlm/Drm8YJmEDwqZ9w7zCkcKHw5gdw4fCjcKmUVXDucOXaipaR8OxAzzCrkgsccOVw4zCsMOHeMOIXsOlw4kQRsOswrMpwqjDkxMyw60rJCVvQsOkwoPDmMKuwoPDsELDqcOtw63DvkUQw7PDlyTCtcKRbGHDnC/ChDfCsx3DkywDelvCrsO2wq/DsjkIwqkLw6s0wrDDgk0AI8OPwqIEJMKvw5XCjsOQQMO+UUrCgsOEw5tuw67Di8OLw6fDm2Y6dhLDgcKASxHCh18cTGjDiMK/fMK+w6tCwqbCt3YAZQXDvMKpw73DmyQ1HMO/wppdwo7DmMK+KwAZw7Rsw7NDN3bDncOdSQQJw5LCvWkWB8OGH8KwwoHCpcKywpHDosK0w5jCjD3Cg8OFfR/CjnnDhG4/LGB+woPDvcO8eRHDncOEdsOswoohwonCoMOXCk/Dt1TDk8O6wpTCjE/DtTBnwrDDh8KAAUZlwqLCrsKPw7DCpREsGw0Ww6jCgMOcwrsNw73Dn2rCpCfCiijCgGBLOw3Dpk/Cq3Ydw67Ch0VbwrzDi8KOIsKJwokPV8OBOiDCqiLDi8OkwpUuWzkITGnCqEkLw6Rcw7vCqXPDuUvDscKawq05Py/Ci8KgYhDClMKywq/ClcOGwofCsFHCvVIuwrofw7rCnR8+wrvCsMO0RsKGwo/Cq8K4L3ZCA3kkQyYuw4ZREEjCicK7wr8FJcK8wrNPw4FsdMKvdF7CgRx7OcO2R8KYwotTNmFzMmZ/XMKNY3gJNMKVEMK9wrpTw450w4BudXknw4jCi8Oiwq3CjlrDqEkSd1ZVPMKEwq/DgzlUZMOWwrbDs8KmUsKNQ8Kyc8KswqlxOWcywoTDsMKuP8Oxw4l8w7nDjVcCwrp1RULCs8O6IsKPw7fCqMO2FcOFJgPDq8O0HnErw5IlHUrCtErDpcObwoDCj1FQamvDqcKJwqXDkcOYwpddD8KoPMKfwoTCshcfw5/CjT4LwpAvwqDChMKXJMKPV8K1w4DDv8KDwqx6w6kiIxo8fkXDlsK3GkbDvBlZw7Enw6nDvH7DvC7Dj3VwARjCs0rCjsK9VEnCnlfDiHjDrGnDtcOMEsKFw63CgsOgH8KPKQzCisKDDBzChMKXVAc9w4kGOcKjwpQgw7DDgzTCnhXCggNhw6jCiEgBc1EHw7sGwqsuPEfDnMK5w7rDsMOPw5zCiFrCiMOVwrHCtMKYE8KxwojDmsOeOsOkwqERw7/DvcKkwozDocKbUGHDmcOGw5hXGcO2IcKEO3pYw5jCpcKmw7/DpEdPF2PDksKZw4zCvsOraMO6e2HDgTzDlsOew7vDglUyw6RQBsK1wp0vw5vCgcKHwobDmG0GwpAnTsOFw4nDtykKw6vDksK7FTJiM8O6asO7w7DDtgTDnAI9Lk1aIUsDwocMNsKHTsOPJ8OJwqchMBcWwqFQw5bCp3/DpVoKwp4IwrMneAUhSsOoQ8OZEmnCucOyw45KLsOewpsTwpXChcKLDhrCicKVw5jCkMKEKjXCrsOuS8Kqw4LDp8KyFEnCg8KBWFHDkl4oHn8Ww7PCtRnCuxbDvMKJw554SxHDlsKJKcOPKnMyAhzDncKGLcKwN8OwKB9zwpjDgMK2wqPCuybDgcOyH8OQeMKSYl9YCMK3w6dfwoo/wqDCr0DCiUV0NmNOEMOqwq8xHzfDlsKbw5FIwoHDiGJbT8KXw7PCq0jCosOSBsONEcK1woBDWirCiRDCkMK5w74VdnbDh3LClHLCnsOdw7zDlSzCmMOpwoUIb8Oiw5N2AcOywpjCtHojUsOgwrUIfA06AMKrw59CY8O/VAXDksOUA8O2wpMyfsO0wrAaTcKnw68XI8K7bz8Uw7TDoMKpwpXDncKqw5XDocOGwrbDj8KZFsK7dMOgCcKIwpbDpsOOPMO+w5drJ8Oiw77CvS3CiX3CmmjDtMO9Dz4+TVPDgcKheyMcPMOWfsK5wprDgMOrGX5gU8O+TcK+c8KrM8O+G8ODw6cIw6vCjT7Dl8KBGWcTM8OuZcOqw6bCi1jDqn1Kw4TDnsKuw5V0V8OJwrvCmhPDtAd+VUh1fMKMCBYQcsOxOcKMwroSHl9lw6nCmsKIJsK9LULDncKbwrDCiyR8w63ClMKrwo9Cb8OUOkQBwokbcMK9w5HCpjZXwpnCmk9XwonClx/DjMO8Nh8CS8Okfj7ClxPCnkhywq/ClQlpKMKzw5MIw4rDm2EwwpfDrMOSw7rClMOuwoNDw5DDkCTCpyUOS33DlHvDrsO1WcK5w7gjwpEPw7J1w74Vw6c6RGjDmsK+JcKZwqtAwq7ClnXCkFpyYwcvw5RmLnPDlMKzT8OMYwYFw47CjMKrXcKEDExxwoBQwpPCn8K6ZHnCr8K/TGTDrcK8DMKBF0FUw7nDgGw9w7U2NU9Bwo4IL8OBw41rw7xEQAPDgMKAwp3DkMK4w5Q0wqnDhMOow6RVa0lOwp7CqGg7S8O3w55cFnMBdMOKdMOgTsKRccOLw60OKcOaYTQ1wonClH8ubMKqBsOpYlfCtMKsQMOBwrsiwpbCkEkHw6HCgcOCKcKvTsOAwqvCv1R7LSXDvRMZAMODwo4ZEcOMVMOcwr50OHnDigMiwpk1w61fwoofwqFWwqItRGDCg3/CuyHCusO5wp7DulTDlsK1w6XDucKhwovCnMOnw4NrCcKqwqNgworDiFdDw4XDiQfCocOZwpzDmRLCo1LDq0LDrsKGc8O5w4MHwozCkkbClMO3ekMDw7RWPMOXwobCpMOwwoHCgiUeDsO1dC9TX3UTw78efmLDrsK1CsOuR8OtwpTChcKeIUIYbsOcw7MWX2fClMKHwpo1w7oXw7sfw6rDiWzDiAASw5NkNsOewqvDuENmwpxgw5oJIcO4woDCn0lPDlLCknzDiWY1w67DpDkQZsK+GGXChcKaesOBd8Obw5fDnMKjwq15wokJaMOKT8OAwp4Two8ww6NuGQ4wwqnCligpc1TCncKgw7NWBhZfw5zDkxPDiCp3ICRnVCrDtmhRQm7DkgYaIAh6E0xNeQ15wqrCklfDjMOSE8KBw74Ww7sPw6hRwqLCjjPCngQxSMK1wo/CnMKvOCsEe8OCWMKnBUbCj8Kdw6U2I8OMY8OUZcK2B3jCicOKfMOZw7vDjcOrw5zDpEgVCMOjScOJSRTDnh8+w6HDlMKFw7jDmCrDtMKSVcKjw4YzwrTDpMOEwpfDlMKGwpN4OcKTRGEeKsOwL8K1wqbCgWjCtCfCjcO7Ric/wrhyMXLDi8Kvw6IKMsOGF2/DoFvDqMOQwoRFMWxAT8OJDMOXwovDoFvDokc9w4DCriMjA0tZwrwQAMOrWCkSw5rCisKQw4fDuX4TPMOzwobDsDDCjWPCggLDtyBkw5bCpyJuOFTCgRnDg3HDvcO5wqZfXcOmwotbwr0Iw44heUTCu8KXVcK2bktFwqLCuSlnA8O8w7XDui3CocKdw5vCkMKuNHHCv8K+B8KIB1kcwqQpwp7DuMKfInZXI3wQCwDClMKgwoM5w6wYccKOAMKYHRnDm8KMwp3CmD5sBsKeGATChlfDlsOhw719wrA+w4VTwpgSw7HCmTTDkMKwEcKFwpBDwqRkwpTDrBgJwr4ewrtMDcK1wrDCvTXDjsK6w5XDtcK7wrBxIsKvV8KJwr7Cg8KQUxtSK012wrYsUMK5GsKGw4AhBEh9FjdzL8OQTQEcU0rCvsOTw57DrWsTw6IWUmDCiMKnBMOZHcKQwq7Dpl9THCvCgnDDqFnCqcO3wqTCuQxjQ8KxKMOIZQkDAMKvw77CrUk6w6JeCcOPw7fClknDm8OvwqzDgMKqw6PCvwwEISvDvsK2cMO/F8Oaw43DviASw4jChsOyw7xEeinCoHpIAsKycsKxwoTDk8KYw4MewrnCs8OXwofDhcK7w6tALzFRw7rDrjrCoMKDTsK+w753wrkxwp7Ct8OXPsKyRMOoZcKiHcOdPQjCq2bCgSnCr8ONMMKCw5/DnBHCuFsBBMOmRMK7RsKHw4lxCwDDgQXCvk54wp4aEsKtwrlcE0xPasOzWcOnVsObMjPCj8OgwoIMwqlnwpciQcONPzXCqBXCqcOrw5h7wr5Ww7dOYRXDuDNmw5rCusKjw5Ykw7sFC8KwVVsuPkwqw5XDrk/DssOYDcKNVsOIwpTDjMOwXcOjNcOWRmrCjx3DiihTwonDjcONw4IDIVXChi8fw4VWeRbDuF0Aw45mM8KpEsOow6gKwrtewowWCWrDn8O2w79BUjB3DsOHUCzCnltOCT4wwrl0w6/ChgvDk8KfwqnDsHhVf8Kww4LDqMKfwrfDq2HCs2TCrMOeLsKnwpDDoT4kXMKDw7sCwoUvw6XCjF/CqcOww4A7w5rDkS1/O8ODJcKeJ1rDq8OTw6HDt8Knw64Ww7DCqETDi8OXwpwnw6wsw7PDpgvDuEDDpRnDjDROHwzCrSlUw6Q4BHLDmhLCvMOvw78Aw73DtABmwozDlmTDkAAAAABJRU5Ewq5CYMKC"}]},{"name":"Anti-Adblock Killer | Reek","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":true,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http://*/*","https://*/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":["raw.githubusercontent.com"],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":["*"]}},"storage":{"ts":1567932790434,"data":{"nextchecklist":"s1568019190434","nextcheckupdate":"s1568182999175"}},"enabled":true,"position":3,"file_url":"https://raw.githubusercontent.com/reek/anti-adblock-killer/master/anti-adblock-killer.user.js","uuid":"528d8528-f0db-46dc-8441-b8bfc11a9592","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQW50aS1BZGJsb2NrIEtpbGxlciB8IFJlZWsKLy8gQG5hbWVzcGFjZSBodHRwczovL3VzZXJzY3JpcHRzLm9yZy9zY3JpcHRzL3Nob3cvMTU1ODQwCi8vIEBkZXNjcmlwdGlvbiBIZWxwcyB5b3Uga2VlcCB5b3VyIEFkLUJsb2NrZXIgYWN0aXZlLCB3aGVuIHlvdSB2aXNpdCBhIHdlYnNpdGUgYW5kIGl0IGFza3MgeW91IHRvIGRpc2FibGUuCi8vIEBhdXRob3IgUmVlayB8IHJlZWtzaXRlLmNvbQovLyBAdmVyc2lvbiAxMC4wCi8vIEBlbmNvZGluZyB1dGYtOAovLyBAbGljZW5zZSBodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvNC4wLwovLyBAaWNvbiBodHRwczovL3Jhdy5naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9tYXN0ZXIvYW50aS1hZGJsb2NrLWtpbGxlci1pY29uLnBuZwovLyBAaG9tZXBhZ2UgaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci8KLy8gQHR3aXR0ZXJVUkwgaHR0cHM6Ly90d2l0dGVyLmNvbS9hbnRpYWRia2lsbGVyCi8vIEBjb250YWN0VVJMIGh0dHBzOi8vcmVlay5naXRodWIuaW8vYW50aS1hZGJsb2NrLWtpbGxlci8jY29udGFjdAovLyBAc3VwcG9ydFVSTCBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3VlcwovLyBAY29udHJpYnV0aW9uVVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIjZG9uYXRlCi8vIEB1cGRhdGVVUkwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9tYXN0ZXIvYW50aS1hZGJsb2NrLWtpbGxlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL21hc3Rlci9hbnRpLWFkYmxvY2sta2lsbGVyLnVzZXIuanMKLy8gQGluY2x1ZGUgaHR0cDovLyovKgovLyBAaW5jbHVkZSBodHRwczovLyovKgovLyBAZ3JhbnQgdW5zYWZlV2luZG93Ci8vIEBncmFudCBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgR01fZ2V0VmFsdWUKLy8gQGdyYW50IEdNX3NldFZhbHVlCi8vIEBncmFudCBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50IEdNX2xpc3RWYWx1ZXMKLy8gQGdyYW50IEdNX2dldFJlc291cmNlVGV4dAovLyBAZ3JhbnQgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGdyYW50IEdNX2xvZwovLyBAZ3JhbnQgR01fb3BlbkluVGFiCi8vIEBncmFudCBHTV9zZXRDbGlwYm9hcmQKLy8gQGdyYW50IEdNX2luZm8KLy8gQGdyYW50IEdNX2dldE1ldGFkYXRhCi8vIEBydW4tYXQgZG9jdW1lbnQtc3RhcnQKLy8gQGNvbm5lY3QgKgovLyA9PS9Vc2VyU2NyaXB0PT0KLypqc2hpbnQgZXZpbDp0cnVlIG5ld2NhcDpmYWxzZSovCi8qZ2xvYmFsIHVuc2FmZVdpbmRvdywgR01fYWRkU3R5bGUsIEdNX2dldFZhbHVlLCBHTV9zZXRWYWx1ZSwgR01feG1saHR0cFJlcXVlc3QsIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQsIEdNX2RlbGV0ZVZhbHVlLCBHTV9saXN0VmFsdWVzLCBHTV9nZXRSZXNvdXJjZVRleHQsIEdNX2dldFJlc291cmNlVVJMLCBHTV9sb2csIEdNX29wZW5JblRhYiwgR01fc2V0Q2xpcGJvYXJkLCBHTV9pbmZvLCBHTV9nZXRNZXRhZGF0YSwgJCwgZG9jdW1lbnQsIGNvbnNvbGUsIGxvY2F0aW9uLCBzZXRJbnRlcnZhbCwgc2V0VGltZW91dCwgY2xlYXJJbnRlcnZhbCovCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBUaGFua3MKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogIERvbm9yczogTS4gSG93YXJkLCBTaHVuam91LCBDaGFybWluZSwgS2llcmVrOTMsIEcuIEJhcm5hcmQsIEguIFlvdW5nLCBTZWluaG9yOSwgSW1HbG9kYXIsIEl2YW5vc2V2aXRjaCwgSG9tZURpcG8sIFIuIE1hcnRpbiwgRHJGaVosIFRpcHB5LCBCLiBSb2huZXIsIFAuIEtvemljYSwgTS4gUGF0ZWwsIFc0cmVsbCwgVHNjaGVja29mZiwgQWRCbG9jayBQb2xza2EsIEFWRU5JUiBJTlRFUk5FVCwgY29vbE5BTywgQmVuLCBKLiBQYXJrLCBDLiBZb3VuZywgSi4gQm91LCBNLiBDYW5vLCBKLiBKdW5nLCBBLiBTb25pbm8sIEouIExpdHRlbiwgTS4gU2NocnVtcGYsIEcuIFBlcGUsIEEuIFRydWZhbm92LCBSLiBQYWxtZXIsIEouIFJhdXRpYWluZW4sIFMuIEJseXN0b25lLCBNLiBTaWx2ZWlyYSwgSy4gTWFjQXJ0aHVyLCBNLiBJdmFub3YsIEEuIFNjaG1pZHQsIEEuIFdhYWdlLCBGLiBUaXNtZXIsIFMuIEVobmVydCwgSi4gQ29ycHVzLCBKLiBEbHVob3MsIE1ha2xlbWVueiwgU3Ryb2JlbGl4LCBNb2RlbGxwaWxvdC5FVSwgRS4gQmVuZWRldHRpLCBWLiBWZW5kaXR0aSwgU2hha29zLCBBLiBFbGlhc29uLCBBLiBTYWxvcmFudGEsIFMuIEdlaWdlciwgQS4gT3R0ZXJsb28sIE0uIENvcHBlbiwgUy4gRmlzY2hlciwgSC4gQmVja2VyLCBELiBBY2tlcm1hbiwgUy4gUGl0c2NoLCBLLiBQZXJ0Y2hlY2ssIFMuIEFiZWwsIEsuIE8nQ29ubm9yLCBCLiBPYnJpZW4sIFMuIFZvZ2xlciwgUy4gR29lYmwsIEEuIEJpYXIsIFMuIFNjb3R0LCBCYXNzbW9iaWxlLm9yZywgUy4gR3Jvw59lLCBNLiBQZW90LCBSLiBDaGFuIEJhbGFtLCBMLiBCb25kLUtlbm5lZHksIFIuIEVtb25kLCBBLiBQYXZsb3YsIFcuIFRyYWNleSwgQS4gU2VyZ2V5LCBSLiBMw7NwZXogTMOzcGV6LCBSLiBSZWRkeSBLYXNpcmVkZHksIEEuIE1vdWplZXIsIE0uIEJldHosIE0uIExlZsOodnJlLCBSLiBNY0N1cmR5LCBMUiBHZWVrcywgTS4gQmVhdXJlZ2FyZCwgQ2FzcGVyVGVjaCBMdGQsIE0uIER1ZGFzLCBTLiBTY2hhcmYsIFMuIFByb2tob3JvdiwgSy4gUGFwYWxpYXMsIEouIFdvam5vd3NraSwgQi4gQ3VydGlzLCBELiBMYXdyZW5jZSwgRC4gSGUsIE4uIEtlbHNhbGwsIElkb2dld2FsbGV0LCBKLiBTcGF1bGRpbmcsIFMuIExhZm9uLCBNYXQsIEguIFJvYmVydHMsIEMuIEhlZGx1bmQsIEouIEhhd2tpbnMsIEouIEFuZGVyc2VuLCBNLiBCam9ya3N0ZW4sIEIuIFdvbGZlIElJSSwgVC4gWW9jb20sIMWgLiBJbnRhcywgUy4gTW9lbmljaCwgSi4gQ2hhbmcsIEMuIE11bmssIEEuIE5hcnV0YSwg0JEuINCc0LjRhdCw0LjQuywgSi4gQmVueiwgRi4gU2xvb3QsIEouIENyZWVkLCBNLiBHaWxsYW0sIEMuIExlaWNodCwgQS4gR25hbmEsIFMuIFN1bmRhcmFtLCBBLiBLb2xsZXIsIE0uIEtvdGxhciwgUy4gQWJlbCwgVC4gRmxhbmFnYW4sIE0uIEFyZHVpbmksIFAuIFN0YWNraG91c2UsIEIuIE9saXZlciwgTS4gSm9obnNvbiwgUi4gTWFubmVydCwgRS4gU2lvcmRpYQoKICBDb2xsYWJvcmF0b3JzOiBJbmZpbml0eUNvZGluZywgQ291Y2h5LCBEaW5kb2csIEZsb3hmbG9iLCBVIEJsZXNzLCBXYXRpbGluLCBAcHJkb25haHVlLCBIb3NoaWUsIDNsZjNuTGkzZCwgQWxleG8sIENyaXRzLCBOb25hbWUxMjAsIENydDMyLCBKaXh1bk1vZSwgQXRob3JjaXMsIEtpbGxlcmJhZGdlciwgU01lZDc5LCBBbGV4YW5kZXIyNTUsIEFub25zdWJtaXR0ZXIsIFJhcG9yTG9McHJvLCBNYXluYWswMCwgUm9ib3RleCwgVmluY3R1eCwgQmxhaHgsIE1hamtpSVQsIEY0eiwgQW5nZWxzbCwgTWlraGFlbGssIE1hcmVrLCBIYW1zdGVyYmFja2UsIEdvcmhpbGwsIEhhY2tlcjk5OSwgeHhjcml0aWN4eCwgU2tyNHRjaEdyM2F6eU1vbmtpQmFsbGxsbGxaenp6LCBHaXdheXVtZSwgTXJTaGVybG9ja0hvbG1lcywgeERhcmtBUkcsIE5vYWhwNzgsIE1hcHgtCgogIFVzZXJzOiBUaGFuayB5b3UgdG8gYWxsIHRob3NlIHdobyB1c2UgQW50aSBBZGJsb2NrIEtpbGxlciwgd2hvIHJlcG9ydCBwcm9ibGVtcywgd2hvIHdyaXRlIHRoZSByZXZpZXcsIHdoaWNoIGFkZCB0byB0aGVpciBmYXZvcml0ZXMsIG1ha2luZyBkb25hdGlvbnMsIHdoaWNoIHN1cHBvcnQgdGhlIHByb2plY3QgYW5kIGhlbHAgaW4gaXRzIGRldmVsb3BtZW50IG9yIHByb21vdGUuCgo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgTWlycm9ycwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogIEdpdGh1YjogaHR0cDovL3Rpbnl1cmwuY29tL21jcmEzZG4KICBHcmVhc3lmb3JrOiBodHRwOi8vdGlueXVybC5jb20vcGJiZG5oNgogIE9wZW51c2VyanM6IGh0dHA6Ly90aW55dXJsLmNvbS9ubnFqZTMyCiAgTW9ua2V5R3V0czogaHR0cDovL3Rpbnl1cmwuY29tL2thNWZjcW0KICBVc2Vyc2NyaXB0czogaHR0cDovL3Rpbnl1cmwuY29tL3E4eGNlamwKCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBEb2N1bWVudGF0aW9uCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgR3JlYXNlbW9ua2V5OiBodHRwOi8vdGlueXVybC5jb20veWVlZm5qNQogIFNjcmlwdGlzaDogaHR0cDovL3Rpbnl1cmwuY29tL2NuZDlua2QKICBUYW1wZXJtb25rZXk6IGh0dHA6Ly90aW55dXJsLmNvbS9wZHl0ZmRlCiAgVmlvbGVudG1vbmtleTogaHR0cDovL3Rpbnl1cmwuY29tL24zNHduNmoKICBOaW5qYUtpdDogaHR0cDovL3Rpbnl1cmwuY29tL3Bra205dWcKCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBTY3JpcHQKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KCihmdW5jdGlvbiAod2luZG93KSB7CiAgInVzZSBzdHJpY3QiOwogIAogIHZhciBBYWsgPSB7CiAgICBuYW1lIDogJ0FudGktQWRibG9jayBLaWxsZXInLAogICAgdmVyc2lvbiA6ICcxMC4wJywKICAgIHNjcmlwdGlkIDogJ2dKV0VwMHZCJywKICAgIGhvbWVVUkwgOiAnaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci8nLAogICAgY2hhbmdlbG9nVVJMIDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIjY2hhbmdlbG9nJywKICAgIGRvbmF0ZVVSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyI2RvbmF0ZScsCiAgICBmZWF0dXJlc1VSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyI2ZlYXR1cmVzJywKICAgIHJlcG9ydFVSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL3dpa2kvUmVwb3J0LUd1aWRlJywKICAgIGNvbnRhY3RVUkwgOiAnaHR0cHM6Ly9yZWVrLmdpdGh1Yi5pby9hbnRpLWFkYmxvY2sta2lsbGVyLyNjb250YWN0JywKICAgIHNldHRpbmdzVVJMIDogJ2h0dHBzOi8vcmVlay5naXRodWIuaW8vYW50aS1hZGJsb2NrLWtpbGxlci8jc2V0dGluZ3MnLAogICAgdHdpdHRlclVSTCA6ICdodHRwczovL3R3aXR0ZXIuY29tL2FudGlhZGJraWxsZXInLAogICAgZG93bmxvYWRVUkwgOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9tYXN0ZXIvYW50aS1hZGJsb2NrLWtpbGxlci51c2VyLmpzJywKICAgIHN1YnNjcmliZVVSTCA6ICdodHRwczovL3JlZWsuZ2l0aHViLmlvL2FudGktYWRibG9jay1raWxsZXIvI2ZpbHRlcmxpc3QnLAogICAgbGlzdFVSTCA6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL21hc3Rlci9hbnRpLWFkYmxvY2sta2lsbGVyLWZpbHRlcnMudHh0IiwKICAgIG5hdGl2ZVVSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL3dpa2kvTmF0aXZlLU1vZGUnLAogICAgaWNvblVSTCA6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL21hc3Rlci9hbnRpLWFkYmxvY2sta2lsbGVyLWljb24ucG5nJywKICAgIGltZ0JhaXQgOiAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FRQUFBRFpjN0ovQUFBQUdrbEVRVlI0Mm1OZzBHQVlCYU5nRkl5Q1VUQUtSc0VvUUFZQVROOEFLWU5aL3g0QUFBQUFTVVZPUks1Q1lJST0nLAogICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgQWFrLnJlZ2lzdGVyU2V0dGluZ3MoKTsgLy8gcmVnaXN0ZXJpbmcgeW91ciBzZXR0aW5ncy4KICAgICAgQWFrLnJlZ2lzdGVyQ29uc29sZSgpOyAvLyByZWdpc3RlcmluZyBjdXN0b216ZWQgY29uc29sZS4KICAgICAgQWFrLnJlZ2lzdGVyQ29tbWFuZHMoKTsgLy8gYWRkIGNvbW1hbmRzIHRvIG1lbnUKICAgICAgQWFrLmNoZWNrVXBkYXRlKHRydWUpOyAvLyBjaGVjayBpZiBBYWtTY3JpcHQgaXMgdXAgdG8gZGF0ZS4KICAgICAgQWFrLmNoZWNrTGlzdCgpOyAvLyBjaGVjayBpZiBBYWtMaXN0IGlzIGVuYWJsZWQuCiAgICAgIEFhay5ibG9ja0RldGVjdCgpOyAvLyBkZXRlY3QgYW5kIGtpbGwgYW50aS1hZGJsb2Nrcy4KICAgIH0sCiAgICBhYWJzIDoge30sCiAgICBvcHRzIDoge30sCiAgICBvcHRpb25zIDogewogICAgICBhdXRvUGxheSA6IHsKICAgICAgICBncm91cCA6ICdnZW5lcmFsJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ1BsYXkgdmlkZW8gYXV0b21hdGljYWxseS4gKicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIHZpZGVvSEQgOiB7CiAgICAgICAgZ3JvdXAgOiAnZ2VuZXJhbCcsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdQbGF5IHZpZGVvIGluIEhEIHF1YWxpdHkuICoqJywKICAgICAgICBpbmZvIDogJycKICAgICAgfSwKICAgICAgZm9yY2VWTEMgOiB7CiAgICAgICAgZ3JvdXAgOiAnZ2VuZXJhbCcsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdQbGF5IHZpZGVvIHdpdGggVkxDIHBsdWdpbi4gKicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGNoZWNrTGlzdCA6IHsKICAgICAgICBncm91cCA6ICdnZW5lcmFsJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IHRydWUsCiAgICAgICAgbGFiZWwgOiAnQ2hlY2sgQWFrTGlzdCBzdWJzY3JpcHRpb24uJywKICAgICAgICBpbmZvIDogJycKICAgICAgfSwKICAgICAgY2hlY2tVcGRhdGUgOiB7CiAgICAgICAgZ3JvdXAgOiAnZ2VuZXJhbCcsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiB0cnVlLAogICAgICAgIGxhYmVsIDogJ0NoZWNrIG5ld2VyIEFha1NjcmlwdCB2ZXJzaW9uLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGRlYnVnIDogewogICAgICAgIGdyb3VwIDogJ2RlYnVnJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ0VuYWJsZSBMb2dzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGxvZ0luc2VydGVkTm9kZXMgOiB7CiAgICAgICAgZ3JvdXAgOiAnZGVidWcnLAogICAgICAgIHR5cGUgOiAnY2hlY2tib3gnLAogICAgICAgIHZhbHVlIDogZmFsc2UsCiAgICAgICAgbGFiZWwgOiAnTG9nIGluc2VydGVkIG5vZGVzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGxvZ1JlbW92ZWROb2RlcyA6IHsKICAgICAgICBncm91cCA6ICdkZWJ1ZycsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdMb2cgcmVtb3ZlZCBub2Rlcy4nLAogICAgICAgIGluZm8gOiAnJwogICAgICB9LAogICAgICBsb2dFeGNsdWRlZCA6IHsKICAgICAgICBncm91cCA6ICdkZWJ1ZycsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdMb2cgZXhjbHVkZXMgZG9tYWlucy4nLAogICAgICAgIGluZm8gOiAnJwogICAgICB9LAogICAgICBsb2dYaHIgOiB7CiAgICAgICAgZ3JvdXAgOiAnZGVidWcnLAogICAgICAgIHR5cGUgOiAnY2hlY2tib3gnLAogICAgICAgIHZhbHVlIDogZmFsc2UsCiAgICAgICAgbGFiZWwgOiAnTG9nIEhUVFAgcmVxdWVzdHMnLAogICAgICAgIGluZm8gOiAnJwogICAgICB9LAogICAgICBsb2dQbGF5ZXIgOiB7CiAgICAgICAgZ3JvdXAgOiAnZGVidWcnLAogICAgICAgIHR5cGUgOiAnY2hlY2tib3gnLAogICAgICAgIHZhbHVlIDogZmFsc2UsCiAgICAgICAgbGFiZWwgOiAnTG9nIHBsYXllciBpbnN0YW5jZXMuJywKICAgICAgICBpbmZvIDogJycKICAgICAgfSwKICAgICAgbG9nSW50ZXJjZXB0ZWRTY3JpcHRzIDogewogICAgICAgIGdyb3VwIDogJ2RlYnVnJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ0xvZyBpbnRlcmNlcHRlZCBzY3JpcHRzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGxvZ0RldGVjdGVkIDogewogICAgICAgIGdyb3VwIDogJ2RlYnVnJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ0xvZyBkZXRlY3RlZCBhbnRpLWFkYmxvY2tzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlclNldHRpbmdzIDogZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBvcHROYW1lIGluIEFhay5vcHRpb25zKSB7CiAgICAgICAgaWYgKEFhay5vcHRpb25zLmhhc093blByb3BlcnR5KG9wdE5hbWUpKQogICAgICAgICAgQWFrLm9wdHNbb3B0TmFtZV0gPSBBYWsuZ2V0VmFsdWUob3B0TmFtZSkgIT09IG51bGwgPyBBYWsuZ2V0VmFsdWUob3B0TmFtZSkgOiBBYWsub3B0aW9uc1tvcHROYW1lXS52YWx1ZTsKICAgICAgfQogICAgfSwKICAgIGNvbW1hbmRzIDogW3sKICAgICAgICBjYXB0aW9uIDogJ0hvbWVwYWdlJywKICAgICAgICBleGVjdXRlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmdvKEFhay5ob21lVVJMKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBjYXB0aW9uIDogJ1NldHRpbmdzJywKICAgICAgICBleGVjdXRlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmdvKEFhay5zZXR0aW5nc1VSTCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgY2FwdGlvbiA6ICdVcGRhdGUnLAogICAgICAgIGV4ZWN1dGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuY2hlY2tVcGRhdGUoKTsKICAgICAgICB9CiAgICAgIH0KICAgIF0sCiAgICBhZGRDb21tYW5kcyA6IGZ1bmN0aW9uIChjbWQpIHsKICAgICAgaWYgKEFhay51c2VHTSAmJiBBYWsuaXNUb3BmcmFtZSAmJiB0eXBlb2YgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCAhPSAndW5kZWZpbmVkJykgewogICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoW0Fhay5uYW1lLCBBYWsuZ2V0VmVyc2lvbigpLCBjbWQuY2FwdGlvbl0uam9pbignICcpLCBjbWQuZXhlY3V0ZSk7CiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlckNvbW1hbmRzIDogZnVuY3Rpb24gKCkgewogICAgICBBYWsucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFNjcmlwdGlzaAogICAgICAgIC8vIG5vdGU6IE5vIG1lbnUgY29tbWFuZCBpcyBjcmVhdGVkIHdoZW4gdGhlIHVzZXIgc2NyaXB0IGlzIHJ1biBpbiBhIGlmcmFtZSB3aW5kb3cuCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20va3Z2djd5dAogICAgICAgIEFhay5jb21tYW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChjbWQpIHsKICAgICAgICAgIEFhay5hZGRDb21tYW5kcyhjbWQpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlckNvbnNvbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMubG9nID0gQWFrLm9wdHMuZGVidWcgPyBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpIDogZnVuY3Rpb24gKCkge307CiAgICAgIHRoaXMuaW5mbyA9IEFhay5vcHRzLmRlYnVnID8gY29uc29sZS5pbmZvLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbiAoKSB7fTsKICAgICAgdGhpcy5lcnJvciA9IEFhay5vcHRzLmRlYnVnID8gY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpIDogZnVuY3Rpb24gKCkge307CiAgICAgIHRoaXMud2FybiA9IEFhay5vcHRzLmRlYnVnID8gY29uc29sZS53YXJuLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbiAoKSB7fTsKICAgIH0sCiAgICBpc1RvcGZyYW1lIDogKHdpbmRvdy5wYXJlbnQgPT0gd2luZG93LnNlbGYpLAogICAgdXcgOiB0eXBlb2YgdW5zYWZlV2luZG93ICE9ICd1bmRlZmluZWQnID8gdW5zYWZlV2luZG93IDogd2luZG93LAogICAgdXNlR00gOiB0eXBlb2YgR01fZ2V0VmFsdWUgIT0gJ3VuZGVmaW5lZCcsCiAgICBhcGlHTSA6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKEFhay5pc1RvcGZyYW1lKSB7CiAgICAgICAgLy8gR00gQVBJIC0gaHR0cDovL3Rpbnl1cmwuY29tL3llZWZuajUKICAgICAgICByZXR1cm4gewogICAgICAgICAgR01feG1saHR0cFJlcXVlc3QgOiB0eXBlb2YgR01feG1saHR0cFJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9zZXRWYWx1ZSA6IHR5cGVvZiBHTV9zZXRWYWx1ZSAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX2dldFZhbHVlIDogdHlwZW9mIEdNX2dldFZhbHVlICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fYWRkU3R5bGUgOiB0eXBlb2YgR01fYWRkU3R5bGUgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kIDogdHlwZW9mIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9pbmZvIDogdHlwZW9mIEdNX2luZm8gIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9nZXRNZXRhZGF0YSA6IHR5cGVvZiBHTV9nZXRNZXRhZGF0YSAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlIDogdHlwZW9mIEdNX2RlbGV0ZVZhbHVlICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fbGlzdFZhbHVlcyA6IHR5cGVvZiBHTV9saXN0VmFsdWVzICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fZ2V0UmVzb3VyY2VUZXh0IDogdHlwZW9mIEdNX2dldFJlc291cmNlVGV4dCAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX2dldFJlc291cmNlVVJMIDogdHlwZW9mIEdNX2dldFJlc291cmNlVVJMICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fbG9nIDogdHlwZW9mIEdNX2xvZyAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX29wZW5JblRhYiA6IHR5cGVvZiBHTV9vcGVuSW5UYWIgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9zZXRDbGlwYm9hcmQgOiB0eXBlb2YgR01fc2V0Q2xpcGJvYXJkICE9ICd1bmRlZmluZWQnCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGdvIDogZnVuY3Rpb24gKHVybCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDsKICAgIH0sCiAgICByZWZyZXNoIDogZnVuY3Rpb24gKCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgfSwKICAgIHJlbG9hZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgIH0sCiAgICBjb250YWlucyA6IGZ1bmN0aW9uIChzdHJpbmcsIHNlYXJjaCkgewogICAgICByZXR1cm4gc3RyaW5nLmluZGV4T2Yoc2VhcmNoKSAhPSAtMTsKICAgIH0sCiAgICBnZXRCcm93c2VyIDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgaWYgKEFhay5jb250YWlucyh1YSwgJ0ZpcmVmb3gnKSkgewogICAgICAgIHJldHVybiAiRmlyZWZveCI7CiAgICAgIH0gZWxzZSBpZiAoQWFrLmNvbnRhaW5zKHVhLCAnU2xlaXBuaXInKSkgewogICAgICAgIHJldHVybiAiU2xlaXBuaXIiOyAvLyBNb2JpbGUKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdVQ0Jyb3dzZXInKSkgewogICAgICAgIHJldHVybiAiVUNCcm93c2VyIjsgLy8gTW9iaWxlCiAgICAgIH0gZWxzZSBpZiAoQWFrLmNvbnRhaW5zKHVhLCAnRG9sZmluJykpIHsKICAgICAgICByZXR1cm4gIkRvbHBoaW4iOyAvLyBNb2JpbGUKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdNU0lFJykpIHsKICAgICAgICByZXR1cm4gIkludGVybmV0RXhwbG9yZXIiOwogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ01pZG9yaScpKSB7CiAgICAgICAgcmV0dXJuICJNaWRvcmkiOwogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ09wZXJhJykgfHwgQWFrLmNvbnRhaW5zKHVhLCAnT1BSJykpIHsKICAgICAgICByZXR1cm4gIk9wZXJhIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdDaHJvbWUnKSkgewogICAgICAgIHJldHVybiAiQ2hyb21lIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdTYWZhcmknKSkgewogICAgICAgIHJldHVybiAiU2FmYXJpIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdLb25xdWVyb3InKSkgewogICAgICAgIHJldHVybiAiS29ucXVlcm9yIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdQYWxlTW9vbicpKSB7CiAgICAgICAgcmV0dXJuICJQYWxlTW9vbiI7IC8vIGZvcmsgZmlyZWZveAogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ0N5YmVyZm94JykpIHsKICAgICAgICByZXR1cm4gIkN5YmVyZm94IjsgLy8gZm9yayBmaXJlZm94CiAgICAgIH0gZWxzZSBpZiAoQWFrLmNvbnRhaW5zKHVhLCAnU2VhTW9ua2V5JykpIHsKICAgICAgICByZXR1cm4gIlNlYU1vbmtleSI7IC8vIGZvcmsgZmlyZWZveAogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ0ljZXdlYXNlbCcpKSB7CiAgICAgICAgcmV0dXJuICJJY2V3ZWFzZWwiOyAvLyBmb3JrIGZpcmVmb3gKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdWE7CiAgICAgIH0KICAgIH0sCiAgICBnZXRWZXJzaW9uIDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gTnVtYmVyKEFhay52ZXJzaW9uKTsKICAgIH0sCiAgICBnZXRTY3JpcHRNYW5hZ2VyIDogZnVuY3Rpb24gKCkgewogICAgICBpZiAodHlwZW9mIEdNX2luZm8gPT0gJ29iamVjdCcpIHsKICAgICAgICAvLyBHcmVhc2Vtb25rZXkgKEZpcmVmb3gpCiAgICAgICAgaWYgKHR5cGVvZiBHTV9pbmZvLnV1aWQgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiAnR3JlYXNlbW9ua2V5JzsKICAgICAgICB9IC8vIFRhbXBlcm1vbmtleSAoQ2hyb21lL09wZXJhKQogICAgICAgIGVsc2UgaWYgKHR5cGVvZiBHTV9pbmZvLnNjcmlwdEhhbmRsZXIgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiAnVGFtcGVybW9ua2V5JzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gU2NyaXB0aXNoIChGaXJlZm94KQogICAgICAgIGlmICh0eXBlb2YgR01fZ2V0TWV0YWRhdGEgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgcmV0dXJuICdTY3JpcHRpc2gnOwogICAgICAgIH0gLy8gTmluamFLaXQgKFNhZmFyaS9DaHJvbWUpCiAgICAgICAgZWxzZSBpZiAodHlwZW9mIEdNX3NldFZhbHVlICE9ICd1bmRlZmluZWQnICYmCiAgICAgICAgICB0eXBlb2YgR01fZ2V0UmVzb3VyY2VUZXh0ID09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICB0eXBlb2YgR01fZ2V0UmVzb3VyY2VVUkwgPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgIHR5cGVvZiBHTV9vcGVuSW5UYWIgPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgIHR5cGVvZiBHTV9zZXRDbGlwYm9hcmQgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiAnTmluamFLaXQnOwogICAgICAgIH0gZWxzZSB7IC8vIE5hdGl2ZQogICAgICAgICAgcmV0dXJuICdOYXRpdmUnOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlSUQgOiBmdW5jdGlvbiAobGVuKSB7CiAgICAgIHZhciBzdHIgPSAnJzsKICAgICAgdmFyIGNoYXJzZXQgPSAiYWJjZGVmZ2hpamtsbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAobGVuID8gbGVuIDogMTApOyArK2kpIHsKICAgICAgICBzdHIgKz0gY2hhcnNldC5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnNldC5sZW5ndGgpKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyOwogICAgfSwKICAgIGdlbmVyYXRlVVVJRCA6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gVW5pdmVyc2FsbHkgVW5pcXVlIElEZW50aWZpZXIKICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICB2YXIgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDsKICAgICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7CiAgICAgICAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IChyICYgMHg3IHwgMHg4KSkudG9TdHJpbmcoMTYpOwogICAgICAgIH0pOwogICAgICByZXR1cm4gdXVpZDsKICAgIH0sCiAgICBnZXRVVUlEIDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgbmFtZSA9ICd1dWlkJzsKICAgICAgaWYgKEFhay5nZXRWYWx1ZShuYW1lKSA9PT0gbnVsbCkgewogICAgICAgIEFhay5zZXRWYWx1ZShuYW1lLCBBYWsuZ2VuZXJhdGVVVUlEKCkpOwogICAgICB9CiAgICAgIHJldHVybiBBYWsuZ2V0VmFsdWUobmFtZSk7CiAgICB9LAogICAgc2NoZWR1bGUgOiBmdW5jdGlvbiAoZGF5cywgbmFtZSwgY2FsbGJhY2spIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBsYXRlciA9IGlzTmFOKEFhay5nZXRWYWx1ZShuYW1lKSkgPyAxIDogTnVtYmVyKEFhay5nZXRWYWx1ZShuYW1lKSk7CiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIGlmIChsYXRlciA8IG5vdykgewogICAgICAgICAgQWFrLnNldFZhbHVlKG5hbWUsIChub3cgKyAoZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKS50b1N0cmluZygpKTsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9LCAxZTMpOwogICAgfSwKICAgIG5vdGlmaWNhdGlvbiA6IGZ1bmN0aW9uIChtZXNzYWdlLCBkZWxheSkgewogICAgICBpZiAoQWFrLmlzVG9wZnJhbWUpIHsKCiAgICAgICAgLy8gcmVtb3ZlIG9sZCBub3RpZmljYXRpb24KICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI2Fhay1ub3RpY2UtZnJhbWUnKTsKCiAgICAgICAgLy8gYWRkIG5ldyBub3RpZmljYXRpb24KICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICB0YWcgOiAnaWZyYW1lJywKICAgICAgICAgIGlkIDogJ2Fhay1ub3RpY2UtZnJhbWUnLAogICAgICAgICAgc3R5bGUgOiAncG9zaXRpb246Zml4ZWQ7IHotaW5kZXg6OTk5OTk5OyB0b3A6MTBweDsgbGVmdDoxMHB4OycsCiAgICAgICAgICB3aWR0aCA6ICczNjBweCcsCiAgICAgICAgICBoZWlnaHQgOiAnMTIwcHgnLAogICAgICAgICAgZnJhbWVib3JkZXIgOiAwLAogICAgICAgICAgc2Nyb2xsaW5nIDogJ25vJywKICAgICAgICAgIC8vc3JjIDogJy8vbG9jYWxob3N0L2dpdC9hbnRpLWFkYmxvY2sta2lsbGVyLXBhZ2VzL25vdGlmaWNhdGlvbi5odG1sIycgKyBidG9hKG1lc3NhZ2UpLAogICAgICAgICAgc3JjIDogJy8vcmVlay5naXRodWIuaW8vYW50aS1hZGJsb2NrLWtpbGxlci9ub3RpZmljYXRpb24uaHRtbCMnICsgd2luZG93LmJ0b2EobWVzc2FnZSksCiAgICAgICAgICBhcHBlbmQgOiAnYm9keScsCiAgICAgICAgICBjYWxsYmFjayA6IGZ1bmN0aW9uIChzZWxmKSB7CgogICAgICAgICAgICAvLyBtYW51YWxseSByZW1vdmUKICAgICAgICAgICAgQWFrLm9uRXZlbnQod2luZG93LCAibWVzc2FnZSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09ICJyZW1vdmVOb3RpZmljYXRpb24iKSB7CiAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmUKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgIH0sIGRlbGF5IHx8IDNlNCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICB9CiAgICB9LAogICAgY2hlY2tMaXN0IDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoQWFrLnVzZUdNICYmIEFhay5vcHRzLmNoZWNrTGlzdCAmJiBBYWsuaXNUb3BmcmFtZSkgewogICAgICAgIEFhay5zY2hlZHVsZSgxLCAnbmV4dGNoZWNrbGlzdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFhay5jcmVhdGVFbGVtZW50KHsKICAgICAgICAgICAgICB0YWcgOiAnc2NyaXB0JywKICAgICAgICAgICAgICBzcmMgOiB3aW5kb3cuYXRvYignTHk5eVpXVnJMbWRwZEdoMVlpNXBieTloYm5ScExXRmtZbXh2WTJzdGEybHNiR1Z5TDJzeVZYYzNhWE5JY2sxdE5VcFlVREZXZDJSNFl6VTJOMXBMWXpGaFdqUkpMbXB6JyksCiAgICAgICAgICAgICAgYXBwZW5kIDogJ2JvZHknLAogICAgICAgICAgICAgIGV2ZW50IDogewogICAgICAgICAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgIEFhay5pbmZvKCdBYWtMaXN0IGRldGVjdGVkICEnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsb2FkIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICBBYWsud2FybignQWFrTGlzdCBub3QgZGV0ZWN0ZWQgIScpOwogICAgICAgICAgICAgICAgICBBYWsubm90aWZpY2F0aW9uKCdJdCBzZWVtcyB0aGF0IHlvdSBoYXZlIG5vdCBzdWJzY3JpYmVkIG9yIGRpc2FibGVkIDxiPkFha0xpc3Q8L2I+LiA8YSBocmVmPSInICsgQWFrLnN1YnNjcmliZVVSTCArICciIHRhcmdldD0iX2JsYW5rIj5TdWJzY3JpYmU8L2E+IG9yIDxhIGhyZWY9IicgKyBBYWsuc2V0dGluZ3NVUkwgKyAnIiB0YXJnZXQ9Il9ibGFuayI+RGlzYWJsZSB0aGlzIGFsZXJ0PC9hPicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNoZWNrVXBkYXRlIDogZnVuY3Rpb24gKGF1dG8pIHsKCiAgICAgIHZhciBjaGVjayA9IGZ1bmN0aW9uIChub3RpZnlGYWxzZSkgewogICAgICAgIEFhay5yZXF1ZXN0KHsKICAgICAgICAgIHVybCA6IEFhay5kb3dubG9hZFVSTCwKICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgcmVzID0gcmVzcG9uc2UucmVzcG9uc2VUZXh0OwogICAgICAgICAgICB2YXIgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICBpZiAoc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgIHZhciBsb2NhbCA9IEFhay5nZXRWZXJzaW9uKCk7CiAgICAgICAgICAgICAgdmFyIHJlbW90ZSA9IE51bWJlcihyZXMubWF0Y2goL0B2ZXJzaW9uXHMrKFxkK1wuXGQrKS8pWzFdKTsKICAgICAgICAgICAgICBpZiAobG9jYWwgPCByZW1vdGUpIHsKICAgICAgICAgICAgICAgIEFhay5ub3RpZmljYXRpb24oJ0FudGktQWRibG9jayBLaWxsZXIgdicgKyByZW1vdGUgKyAnIGlzIGF2YWlsYWJsZSA8YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iJyArIEFhay5kb3dubG9hZFVSTCArICciPkluc3RhbGw8L2E+LicpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90aWZ5RmFsc2UpIHsKICAgICAgICAgICAgICAgIEFhay5ub3RpZmljYXRpb24oJ05vIHVwZGF0ZSBmb3VuZC4nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGlmIChhdXRvKSB7IC8vIGF1dG8gbW9kZQogICAgICAgIGlmIChBYWsudXNlR00gJiYgQWFrLm9wdHMuY2hlY2tVcGRhdGUgJiYgQWFrLmlzVG9wZnJhbWUpIHsKICAgICAgICAgIEFhay5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFhay5zY2hlZHVsZSg3LCAnbmV4dGNoZWNrdXBkYXRlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNoZWNrKGZhbHNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7IC8vIG1hbnVhbCBtb2RlCiAgICAgICAgaWYgKEFhay5pc1RvcGZyYW1lKSB7CiAgICAgICAgICBjaGVjayh0cnVlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICB9LAogICAgb3BlbkluVGFiIDogZnVuY3Rpb24gKHVybCkgewogICAgICBpZiAodHlwZW9mIEdNX29wZW5JblRhYiAhPSAndW5kZWZpbmVkJykgewogICAgICAgIEdNX29wZW5JblRhYih1cmwpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBuZXdXaW5kb3cgPSB3aW5kb3cub3Blbih1cmwsICJfYmxhbmsiKTsKICAgICAgICBuZXdXaW5kb3cuZm9jdXMoKTsKICAgICAgfQogICAgfSwKICAgIHJlcXVlc3QgOiBmdW5jdGlvbiAoc2V0dGluZ3MpIHsKICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsIHx8ICcnOwogICAgICBzZXR0aW5ncy5tZXRob2QgPSBzZXR0aW5ncy5tZXRob2QgfHwgJ0dFVCc7CiAgICAgIHNldHRpbmdzLmhlYWRlcnMgPSBzZXR0aW5ncy5oZWFkZXJzIHx8IHt9OwogICAgICBzZXR0aW5ncy50aW1lb3V0ID0gc2V0dGluZ3MudGltZW91dCB8fCAyZTQ7IC8vIDIwcwogICAgICBpZiAoc2V0dGluZ3MuZGF0YSB8fCBzZXR0aW5ncy5tZXRob2QgPT0gJ1BPU1QnKSB7CiAgICAgICAgc2V0dGluZ3MubWV0aG9kID0gJ1BPU1QnOwogICAgICAgIHNldHRpbmdzLmRhdGEgPSBBYWsuc2VyaWFsaXplKHNldHRpbmdzLmRhdGEgfHwge30pOwogICAgICAgIHNldHRpbmdzLmhlYWRlcnMgPSBBYWsuc2V0UHJvcGVydGllcyhzZXR0aW5ncy5oZWFkZXJzLCB7CiAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJyA6ICdYTUxIdHRwUmVxdWVzdCcsCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyBvdmVycmlkZSB0byBpbnRlZ3JhdGUgbG9nCiAgICAgIHNldHRpbmdzLl9vbmxvYWQgPSBzZXR0aW5ncy5vbmxvYWQ7CiAgICAgIHNldHRpbmdzLm9ubG9hZCA9IGZ1bmN0aW9uICh4aHIpIHsKICAgICAgICBpZiAoQWFrLm9wdHMubG9nWGhyKSB7CiAgICAgICAgICBBYWsubG9nKEFhay5nZXRTY3JpcHRNYW5hZ2VyKCkgKyAnIHhocicsIHhocik7CiAgICAgICAgfQogICAgICAgIHNldHRpbmdzLl9vbmxvYWQoeGhyKTsKICAgICAgfTsKCiAgICAgIGlmICh0eXBlb2YgR01feG1saHR0cFJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAvLyBSZXF1ZXN0IHdpdGggR00gQVBJCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vMnQ3d2JyCiAgICAgICAgR01feG1saHR0cFJlcXVlc3Qoc2V0dGluZ3MpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFJlcXVlc3Qgd2l0aCBXZWIgQVBJCiAgICAgICAgLy8gVXNpbmcgcmVtb3RlIHNlcnZlciB0byBhbGxvdyBjcm9zcy1vcmlnaW4gcmVxdWVzdHMuCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vb2R6NjY0YQogICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL3A5enJ1em4KICAgICAgICB2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHA6Ly9yZWVrc2l0ZS5jb20vcHVibGljL3hoci5waHAnLCB0cnVlKTsKICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpOwogICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcmVzID0geGhyLnJlc3BvbnNlVGV4dDsKICAgICAgICAgIHZhciBqc29uID0gSlNPTiAmJiBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoeGhyLCAicmVzcG9uc2VUZXh0IiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSA6IGpzb24ucmVzcG9uc2UKICAgICAgICAgIH0pOwogICAgICAgICAgc2V0dGluZ3Mub25sb2FkKHhocik7CiAgICAgICAgfTsKICAgICAgICB4aHIuc2VuZChBYWsuc2VyaWFsaXplKHNldHRpbmdzKSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVWYWx1ZSA6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIGlmICh0eXBlb2YgR01fZGVsZXRlVmFsdWUgIT09ICJ1bmRlZmluZWQiICYmICFuYW1lKSB7CiAgICAgICAgdmFyIHZhbHMgPSBHTV9saXN0VmFsdWVzKCk7CiAgICAgICAgZm9yICh2YXIgaSBpbiB2YWxzKSB7CiAgICAgICAgICBpZiAodmFscy5oYXNPd25Qcm9wZXJ0eShpKSkKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUodmFsc1tpXSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBHTV9kZWxldGVWYWx1ZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICBHTV9kZWxldGVWYWx1ZShuYW1lKTsKICAgICAgfQogICAgfSwKICAgIHNldFZhbHVlIDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2YgR01fc2V0VmFsdWUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgR01fc2V0VmFsdWUobmFtZSwgdmFsdWUpOwogICAgICB9CiAgICB9LAogICAgZ2V0VmFsdWUgOiBmdW5jdGlvbiAobmFtZSkgewogICAgICBpZiAodHlwZW9mIEdNX2xpc3RWYWx1ZXMgIT09ICJ1bmRlZmluZWQiICYmICFuYW1lKSB7CiAgICAgICAgdmFyIGxpc3QgPSB7fTsKICAgICAgICB2YXIgdmFscyA9IEdNX2xpc3RWYWx1ZXMoKTsKICAgICAgICBmb3IgKHZhciBpIGluIHZhbHMpIHsKICAgICAgICAgIGlmICh2YWxzLmhhc093blByb3BlcnR5KGkpKQogICAgICAgICAgICBsaXN0W3ZhbHNbaV1dID0gR01fZ2V0VmFsdWUodmFsc1tpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsaXN0OwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBHTV9nZXRWYWx1ZSAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIEdNX2dldFZhbHVlKG5hbWUpICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIHJldHVybiBHTV9nZXRWYWx1ZShuYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNldExvY2FsIDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gU2VjdXJpdHlFcnJvcjogVGhlIG9wZXJhdGlvbiBpcyBpbnNlY3VyZS4KICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS84cGVxd3ZkCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlLnRvU3RyaW5nKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBBYWsud2FybigiU29ycnkhIE5vIFdlYiBTdG9yYWdlIHN1cHBvcnQuIik7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7fQogICAgfSwKICAgIGdldExvY2FsIDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2NhbFN0b3JhZ2UgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBBYWsud2FybigiU29ycnkhIE5vIFdlYiBTdG9yYWdlIHN1cHBvcnQuIik7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNldFNlc3Npb24gOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBEb2M6IGh0dHA6Ly90aW55dXJsLmNvbS84cGVxd3ZkCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShuYW1lLCB2YWx1ZS50b1N0cmluZygpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQWFrLndhcm4oIlNvcnJ5ISBObyBXZWIgU3RvcmFnZSBzdXBwb3J0LiIpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0sCiAgICBnZXRTZXNzaW9uIDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5zZXNzaW9uU3RvcmFnZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShuYW1lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQWFrLndhcm4oIlNvcnJ5ISBObyBXZWIgU3RvcmFnZSBzdXBwb3J0LiIpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBzZXRDb29raWUgOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIHRpbWUsIHBhdGgpIHsKICAgICAgdmFyIGV4cGlyZXMgPSBuZXcgRGF0ZSgpOwogICAgICBleHBpcmVzLnNldFRpbWUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyAodGltZSB8fCAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICsgIjtleHBpcmVzPSIgKyBleHBpcmVzLnRvR01UU3RyaW5nKCkgKyAiO3BhdGg9IiArIChwYXRoIHx8ICcvJyk7CiAgICB9LAogICAgZ2V0Q29va2llIDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIHZhbHVlID0gIjsgIiArIGRvY3VtZW50LmNvb2tpZTsKICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoIjsgIiArIG5hbWUgKyAiPSIpOwogICAgICBpZiAocGFydHMubGVuZ3RoID09IDIpCiAgICAgICAgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCI7Iikuc2hpZnQoKTsKICAgIH0sCiAgICBzZXRSZWFkT25seSA6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCBuYW1lLCB7CiAgICAgICAgdmFsdWUgOiB2YWx1ZSwKICAgICAgICBjb25maWd1cmFibGUgOiBmYWxzZSwKICAgICAgICB3cml0YWJsZSA6IGZhbHNlCiAgICAgIH0pOwogICAgfSwKICAgIHN0b3BSZWRpcmVjdCA6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCd3YXRjaCcgaW4gd2luZG93KSB7CiAgICAgICAgQWFrLnV3LndhdGNoKCJsb2NhdGlvbiIsIGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICBBYWsudXcubG9jYXRpb24ud2F0Y2goImhyZWYiLCBmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQWFrLnV3LmxvY2F0aW9uID0gIiMiOwogICAgICAgIHRocm93ICdTdG9wIFJlZGlyZWN0JzsKICAgICAgfQogICAgfSwKICAgIGNvbmZpcm1MZWF2ZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfTsKICAgIH0sCiAgICBjb25maXJtUmVwb3J0IDogZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgZWxlbS5pbm5lckhUTUwgPSAnUmVwb3J0JzsKICAgICAgZWxlbS50aXRsZSA9ICdSZXBvcnQgaXNzdWUgb3IgYW50aS1hZGJsb2NrJzsKICAgICAgZWxlbS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKCJEbyB5b3Ugd2FudCB0byByZXBvcnQgaXNzdWUgb3IgYW50aS1hZGJsb2NrID8iKSkgeyAvLyBDbGljIG9uIE9LCiAgICAgICAgICBBYWsuZ28oQWFrLnJlcG9ydFVSTCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEFhay5nbyhlbGVtLmhyZWYpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICB1bnBhY2tTY3JpcHQgOiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgIC8vIGRlb2JmdXNjYXRlOiBwYWMra2VkLCBwYWMra2VyLCBtdW4rZ2VkLCB3aStzZQogICAgICAvLyBub3RlOiAiRXhjZXB0aW9uIDQwMzAwOCIgc2VlIGdyZWFzZWZvcmsgUE0KICAgICAgdmFyIHN1YnN0cmluZyA9IHNvdXJjZS5zdWJzdHJpbmcoc291cmNlLmluZGV4T2YoJ2V2YWwoJykrNCwgc291cmNlLmxhc3RJbmRleE9mKCcpJykrMSk7CiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiAnK3N1YnN0cmluZykoKTsKICAgIH0sCiAgICBoYXNTY3JpcHQgOiBmdW5jdGlvbiAoY29udGFpbnMsIGRvYykgewogICAgICAvLyBieTogV2F0aWxpbgogICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKAogICAgICAgIGRvYyAmJiBkb2Muc2NyaXB0cyB8fCBkb2N1bWVudC5zY3JpcHRzLAogICAgICAgIGZ1bmN0aW9uICgkc2NyaXB0KSB7CiAgICAgICAgdmFyIHNvdXJjZSA9ICRzY3JpcHQuaW5uZXJIVE1MOwogICAgICAgIHJldHVybiBzb3VyY2UgJiYgc291cmNlLmluZGV4T2YoY29udGFpbnMpICE9IC0xOwogICAgICB9KVswXTsKICAgIH0sCiAgICBhZGRTY3JpcHQgOiBmdW5jdGlvbiAoc291cmNlLCBib2R5KSB7CiAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgc2NyaXB0LnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgICAgc2NyaXB0LmlubmVySFRNTCA9ICh0eXBlb2Ygc291cmNlID09PSAnZnVuY3Rpb24nKSA/IEFhay5pbnRvU3RyaW5nKHNvdXJjZSkgOiBzb3VyY2UudG9TdHJpbmcoKTsKICAgICAgaWYgKGJvZHkpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9CiAgICAgIHNjcmlwdC5yZW1vdmUoKTsKICAgIH0sCiAgICBsb2FkU2NyaXB0IDogZnVuY3Rpb24gKHNyYywgYm9keSwgb25sb2FkKSB7CiAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgc2NyaXB0LnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgICAgc2NyaXB0LnNyYyA9IHNyYzsKICAgICAgaWYgKG9ubG9hZCkgewogICAgICAgIHNjcmlwdC5vbmxvYWQgPSBvbmxvYWQ7CiAgICAgIH0KICAgICAgaWYgKGJvZHkpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9CiAgICB9LAogICAgaW1wb3J0U2NyaXB0IDogZnVuY3Rpb24gKHVybCwgY2FsbGJhY2spIHsKICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgIHVybCA6IHVybCwKICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICB2YXIgcmF3U2NyaXB0ID0gcmVzdWx0LnJlc3BvbnNlVGV4dDsKICAgICAgICAgIChuZXcgRnVuY3Rpb24oJ0FhaycsIHJhd1NjcmlwdCArICdcblxyJyArIEFhay5pbnRvU3RyaW5nKGNhbGxiYWNrKSkpKEFhayk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpbnRvU3RyaW5nIDogZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdmFyIHN0ciA9IGEudG9TdHJpbmcoKTsKICAgICAgICB2YXIgZmlyc3QgPSBzdHIuaW5kZXhPZigieyIpICsgMTsKICAgICAgICB2YXIgbGFzdCA9IHN0ci5sYXN0SW5kZXhPZigifSIpOwogICAgICAgIHJldHVybiBzdHIuc3Vic3RyKGZpcnN0LCBsYXN0IC0gZmlyc3QpLnRyaW0oKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZW50cnkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGEpOwogICAgICB9IGVsc2UgeyAvLyBhcnJheSBvciBzdHJpbmcKICAgICAgICByZXR1cm4gYS50b1N0cmluZygpOwogICAgICB9CiAgICB9LAogICAgaW50b0FycmF5IDogZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcmV0dXJuIGFba2V5XTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYSA9PT0gJ3N0cmluZycpIHsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhKTsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgIH0KICAgIH0sCiAgICBpbnRvT2JqZWN0IDogZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKHR5cGVvZiBhID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBKU09OLnBhcnNlKGEpOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbyA9IHt9OyBpIDwgYS5sZW5ndGg7ICsraSkgewogICAgICAgICAgb1tpXSA9IGFbaV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBvOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiBhOwogICAgICB9CiAgICB9LAogICAgaGFzRWxlbWVudCA6IGZ1bmN0aW9uIChzZWxlY3RvciwgY2FsbGJhY2ssIHRpbWVvdXQpIHsKICAgICAgdmFyIHJlcGVhdCA9IHRpbWVvdXQgfHwgMTA7CiAgICAgIHZhciBsb29wID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGVsZW0gPSBBYWsuZ2V0RWxlbWVudChzZWxlY3Rvcik7CiAgICAgICAgICBpZiAoZWxlbSkgewogICAgICAgICAgICBjYWxsYmFjayhlbGVtKTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChsb29wKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlcGVhdCA9IChyZXBlYXQpID8gcmVwZWF0IC0gMSA6IGNsZWFySW50ZXJ2YWwobG9vcCk7CiAgICAgICAgfSwgMWUzKTsKICAgIH0sCiAgICByZW1vdmVFbGVtZW50IDogZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgaWYgKGVsZW0gaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQpIHsKICAgICAgICBlbGVtLnJlbW92ZSgpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtID09PSAic3RyaW5nIikgewogICAgICAgIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW0pOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS5sZW5ndGg7IGkrKykgewogICAgICAgICAgZWxlbVtpXS5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRFbGVtZW50IDogZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0Tm9kZSkgewogICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykgewogICAgICAgIGlmIChzZWxlY3Rvci5pbmRleE9mKCcvJykgPT09IDApIHsgLy8gZXg6IC8vaW1nW0BjbGFzcz0icGhvdG8iXQogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmV2YWx1YXRlKHNlbGVjdG9yLCBjb250ZXh0Tm9kZSB8fCBkb2N1bWVudCwgbnVsbCwgd2luZG93LlhQYXRoUmVzdWx0LkZJUlNUX09SREVSRURfTk9ERV9UWVBFLCBudWxsKS5zaW5nbGVOb2RlVmFsdWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoY29udGV4dE5vZGUgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICB9IGVsc2UgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdG9yOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlRWxlbWVudCA6IGZ1bmN0aW9uIChwcm9wcykgewogICAgICB2YXIgZWxlbSwKICAgICAgbm9kZSA9IHt9OwogICAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7CiAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICBzd2l0Y2ggKG5hbWUpIHsKICAgICAgICAgIGNhc2UgInRhZyI6CiAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ0ZXh0IjoKICAgICAgICAgICAgdmFyIHRleHQgPSAoJ2lubmVyVGV4dCcgaW4gZG9jdW1lbnQpID8gJ2lubmVyVGV4dCcgOiAndGV4dENvbnRlbnQnOwogICAgICAgICAgICBub2RlW3RleHRdID0gcHJvcHNbbmFtZV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaHRtbCI6CiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gcHJvcHNbbmFtZV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiY2xhc3NpZCI6CiAgICAgICAgICAgIG5vZGUuY2xhc3NOYW1lID0gcHJvcHNbbmFtZV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYXBwZW5kIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJwcmVwZW5kIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgaWYgKGVsZW0uY2hpbGROb2Rlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBlbGVtLmluc2VydEJlZm9yZShub2RlLCBlbGVtLmNoaWxkTm9kZXNbMF0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJiZWZvcmUiOgogICAgICAgICAgICBlbGVtID0gQWFrLmdldEVsZW1lbnQocHJvcHNbbmFtZV0pOwogICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGVsZW0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImFmdGVyIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBlbGVtLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJyZXBsYWNlIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChub2RlLCBlbGVtKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJldmVudCI6CiAgICAgICAgICAgIGZvciAodmFyIGV2TmFtZSBpbiBwcm9wcy5ldmVudCkgewogICAgICAgICAgICAgIGlmIChwcm9wcy5ldmVudC5oYXNPd25Qcm9wZXJ0eShldk5hbWUpKQogICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2TmFtZSwgcHJvcHMuZXZlbnRbZXZOYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJjYWxsYmFjayI6CiAgICAgICAgICAgIHByb3BzW25hbWVdKG5vZGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHByb3BzW25hbWVdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5vZGU7CiAgICB9LAogICAgYWRkQmFpdEVsZW1lbnQgOiBmdW5jdGlvbiAoc3RyT3B0cykgeyAvLyBleDogZGl2LmFkcyBvciBzcGFuI2Fkc0AKICAgICAgdmFyIG9wdHMgPSBzdHJPcHRzLnJlcGxhY2UoJy4nLCAnOmNsYXNzTmFtZTonKS5yZXBsYWNlKCcjJywgJzppZDonKS5zcGxpdCgnOicpOwogICAgICB2YXIgYmFpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQob3B0c1swXSk7CiAgICAgIGJhaXQuc2V0QXR0cmlidXRlKG9wdHNbMV0sIG9wdHNbMl0pOwogICAgICBiYWl0LmlubmVySFRNTCA9ICI8YnI+IjsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGJhaXQpOwogICAgICByZXR1cm4gYmFpdDsKICAgIH0sCiAgICByZXBsYWNlRWxlbWVudCA6IGZ1bmN0aW9uIChvbGROb2RlLCBuZXdOb2RlKSB7CiAgICAgIG9sZE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7CiAgICB9LAogICAgc2V0RWxlbWVudCA6IGZ1bmN0aW9uIChzZWxlY3RvciwgcHJvcHMpIHsKICAgICAgdmFyIG5vZGUgPSBBYWsuZ2V0RWxlbWVudChzZWxlY3Rvcik7CiAgICAgIGlmIChub2RlKSB7CiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykgewogICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgICAgICBjYXNlICJ0ZXh0IjoKICAgICAgICAgICAgICB2YXIgdGV4dCA9ICgnaW5uZXJUZXh0JyBpbiBkb2N1bWVudCkgPyAnaW5uZXJUZXh0JyA6ICd0ZXh0Q29udGVudCc7CiAgICAgICAgICAgICAgbm9kZVt0ZXh0XSA9IHByb3BzW25hbWVdOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJodG1sIjoKICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IHByb3BzW25hbWVdOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJjbGFzcyI6CiAgICAgICAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBwcm9wc1tuYW1lXTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCBwcm9wc1tuYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRTdHlsZSA6IGZ1bmN0aW9uIChjc3MpIHsKICAgICAgY3NzID0gY3NzLnJlcGxhY2UoLzsvZywgJyAhaW1wb3J0YW50OycpOwogICAgICBpZiAodHlwZW9mIEdNX2FkZFN0eWxlICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgR01fYWRkU3R5bGUoY3NzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpLmlubmVySFRNTCA9IGNzczsKICAgICAgfQogICAgfSwKICAgIGxvYWRTdHlsZSA6IGZ1bmN0aW9uIChzcmMpIHsKICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOwogICAgICBzdHlsZS5yZWwgPSAic3R5bGVzaGVldCI7CiAgICAgIHN0eWxlLmhyZWYgPSBzcmM7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfSwKICAgIGdldFN0eWxlIDogZnVuY3Rpb24gKHNlbGVjdG9yLCBwcm9wKSB7CiAgICAgIHZhciBlbGVtID0gQWFrLmdldEVsZW1lbnQoc2VsZWN0b3IpOwogICAgICBpZiAoZWxlbS5jdXJyZW50U3R5bGUpIHsKICAgICAgICByZXR1cm4gZWxlbS5jdXJyZW50U3R5bGVbcHJvcF07CiAgICAgIH0gZWxzZSBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUpIHsKICAgICAgICByZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApOwogICAgICB9CiAgICB9LAogICAgZGVjb2RlVVJJIDogZnVuY3Rpb24gKHN0cikgewogICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cik7CiAgICB9LAogICAgZW5jb2RlVVJJIDogZnVuY3Rpb24gKHN0cikgewogICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cik7CiAgICB9LAogICAgZW5jb2RlSFRNTCA6IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC8iL2csICcmcXVvdDsnKTsKICAgIH0sCiAgICBkZWNvZGVIVE1MIDogZnVuY3Rpb24gKHN0cikgewogICAgICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvJmFtcDsvZywgJyYnKS5yZXBsYWNlKC8mbHQ7L2csICc8JykucmVwbGFjZSgvJmd0Oy9nLCAnPicpLnJlcGxhY2UoLyZxdW90Oy9nLCAnIicpOwogICAgfSwKICAgIHNlcmlhbGl6ZSA6IGZ1bmN0aW9uIChvYmopIHsKICAgICAgaWYgKHR5cGVvZiBvYmogPT0gJ29iamVjdCcpIHsKICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHsKICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpCiAgICAgICAgICAgIGFyci5wdXNoKHByb3AgKyAnPScgKyBBYWsuZW5jb2RlVVJJKG9ialtwcm9wXSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYXJyLmpvaW4oJyYnKTsKICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIHVuc2VyaWFsaXplIDogZnVuY3Rpb24gKHN0cikgewogICAgICBzdHIgPSBBYWsuZGVjb2RlSFRNTChzdHIpOwogICAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCcmJyk7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgICAgaWYgKGVudHJ5ICE9PSAnJyAmJiBlbnRyeS5zcGxpdCgnPScpKSB7CiAgICAgICAgICB2YXIgc3BsaXRzID0gZW50cnkuc3BsaXQoJz0nKTsKICAgICAgICAgIG9ialtzcGxpdHNbMF1dID0gQWFrLmRlY29kZVVSSShzcGxpdHNbMV0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgdW5zZXRQcm9wZXJ0aWVzIDogZnVuY3Rpb24gKG9iaiwgcHJvcHMpIHsKICAgICAgcHJvcHMgPSAodHlwZW9mIHByb3BzID09ICdzdHJpbmcnKSA/IHByb3BzLnNwbGl0KCcsJykgOiBwcm9wczsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07CiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgZGVsZXRlIG9ialtwcm9wXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICBzZXRQcm9wZXJ0aWVzIDogZnVuY3Rpb24gKG9iajEsIG9iajIpIHsKICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmoyKSB7CiAgICAgICAgaWYgKG9iajIuaGFzT3duUHJvcGVydHkocHJvcCkpCiAgICAgICAgICBvYmoxW3Byb3BdID0gb2JqMltwcm9wXTsKICAgICAgfQogICAgICByZXR1cm4gb2JqMTsKICAgIH0sCiAgICBmaXhQcm90b2NvbFVSTCA6IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgaWYgKC9eaHR0cC8udGVzdCh1cmwpKSB7IC8vIGFic29sdXRlCiAgICAgICAgcmV0dXJuIHVybDsKICAgICAgfSBlbHNlIGlmICgvXlwvXC8vLnRlc3QodXJsKSkgeyAvLyByZWxhdGl2ZQogICAgICAgIHJldHVybiAnaHR0cDonICsgdXJsOwogICAgICB9IGVsc2UgeyAvLyBub25lCiAgICAgICAgcmV0dXJuICdodHRwOi8vJyArIHVybDsKICAgICAgfQogICAgfSwKICAgIGZha2VGdWNrQWRCbG9jayA6IGZ1bmN0aW9uIChpbnN0YW5jZU5hbWUsIGNsYXNzTmFtZSkgewoKICAgICAgLy8gaW5qZWN0IGZha2UgZnVja2FkYmx1Y2sKICAgICAgQWFrLmFkZFNjcmlwdChBYWsuaW50b1N0cmluZyhmdW5jdGlvbiAoKSB7CgogICAgICAgICAgdmFyIENMQVNTTkFNRSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICB2YXIgY2FsbE5vdERldGVjdGVkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGVidWcgPSB7CiAgICAgICAgICAgICAgc2V0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9uRGV0ZWN0ZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICAgICAgICB0aGlzLm9uKHRydWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5vbk5vdERldGVjdGVkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgdGhpcy5vbihmYWxzZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9uID0gZnVuY3Rpb24gKGRldGVjdGVkLCBjYWxsYmFjaykgewogICAgICAgICAgICAgIGlmICghZGV0ZWN0ZWQpIHsKICAgICAgICAgICAgICAgIGNhbGxOb3REZXRlY3RlZCA9IGNhbGxiYWNrOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhbJ0FudGlBZGJLaWxsZXInLCBsb2NhdGlvbi5ob3N0LCAnRnVja0FkQmxvY2snXSk7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgc2V0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hlY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKGNhbGxOb3REZXRlY3RlZCkKICAgICAgICAgICAgICAgIGNhbGxOb3REZXRlY3RlZCgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmVtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jbGVhckV2ZW50ID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICB9OwoKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHdpbmRvdywgewogICAgICAgICAgICBDTEFTU05BTUUgOiB7CiAgICAgICAgICAgICAgdmFsdWUgOiBDTEFTU05BTUUsCiAgICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aW5kb3csIHsKICAgICAgICAgICAgSU5TVEFOQ0VOQU1FIDogewogICAgICAgICAgICAgIHZhbHVlIDogbmV3IENMQVNTTkFNRSgpLAogICAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgIH0pLnJlcGxhY2UoL0lOU1RBTkNFTkFNRS9nLCBpbnN0YW5jZU5hbWUgfHwgJ2Z1Y2tBZEJsb2NrJykKICAgICAgICAucmVwbGFjZSgvQ0xBU1NOQU1FL2csIGNsYXNzTmFtZSB8fCAnRnVja0FkQmxvY2snKSk7CgogICAgfSwgLy8gRXZlbnRzCiAgICBvbkV2ZW50IDogZnVuY3Rpb24gKGVsZW1lbnQsIHR5cGUsIGxpc3RlbmVyLCBidWJibGVzKSB7CiAgICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgeyAvLyBGb3IgYWxsIG1ham9yIGJyb3dzZXJzLCBleGNlcHQgSUUgOCBhbmQgZWFybGllcgogICAgICAgIChlbGVtZW50IHx8IHdpbmRvdykuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgYnViYmxlcyB8fCBmYWxzZSk7CiAgICAgIH0gZWxzZSB7IC8vIEZvciBJRSA4IGFuZCBlYXJsaWVyIHZlcnNpb25zCiAgICAgICAgKGVsZW1lbnQgfHwgd2luZG93KS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpOwogICAgICB9CiAgICAgIHJldHVybiBhcmd1bWVudHM7CiAgICB9LAogICAgb2ZmRXZlbnQgOiBmdW5jdGlvbiAoZWxlbWVudCwgdHlwZSwgbGlzdGVuZXIsIGJ1YmJsZXMpIHsKICAgICAgaWYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7IC8vIEZvciBhbGwgbWFqb3IgYnJvd3NlcnMsIGV4Y2VwdCBJRSA4IGFuZCBlYXJsaWVyCiAgICAgICAgKGVsZW1lbnQgfHwgd2luZG93KS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBidWJibGVzIHx8IGZhbHNlKTsKICAgICAgfSBlbHNlIHsgLy8gRm9yIElFIDggYW5kIGVhcmxpZXIgdmVyc2lvbnMKICAgICAgICAoZWxlbWVudCB8fCB3aW5kb3cpLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7CiAgICAgIH0KICAgIH0sCiAgICBlbWl0RXZlbnQgOiBmdW5jdGlvbiAoZWxlbWVudCwgdHlwZSwgZGV0YWlsLCBidWJibGVzLCBjYW5jZWxhYmxlKSB7CiAgICAgIHZhciBldmVudDsKICAgICAgaWYgKHdpbmRvdy5DdXN0b21FdmVudCkgewogICAgICAgIGV2ZW50ID0gbmV3IHdpbmRvdy5DdXN0b21FdmVudCh0eXBlLCB7CiAgICAgICAgICAgICJkZXRhaWwiIDogZGV0YWlsIHx8IHVuZGVmaW5lZAogICAgICAgICAgfSwgYnViYmxlcyB8fCBmYWxzZSwgY2FuY2VsYWJsZSB8fCBmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTsKICAgICAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQoJ29uJyArIHR5cGUsIGJ1YmJsZXMgfHwgZmFsc2UsIGNhbmNlbGFibGUgfHwgZmFsc2UsIHsKICAgICAgICAgICJkZXRhaWwiIDogZGV0YWlsIHx8IHVuZGVmaW5lZAogICAgICAgIH0pOwogICAgICB9CiAgICAgIChlbGVtZW50IHx8IHdpbmRvdykuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9LAogICAgZGV0ZWN0ZWQgOiBmdW5jdGlvbiAobmFtZSkgewogICAgICBpZiAoQWFrLm9wdHMuZGVidWcgJiYgQWFrLm9wdHMubG9nRGV0ZWN0ZWQpIHsKICAgICAgICBBYWsuZW1pdEV2ZW50KHdpbmRvdywgJ2RldGVjdGVkJywgbmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICByZWFkeSA6IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICBBYWsub25FdmVudCh3aW5kb3csICdsb2FkJywgY2FsbGJhY2spOwogICAgfSwKICAgIHBsYXllciA6IGZ1bmN0aW9uICgpIHsKCiAgICAgIHZhciBQbGF5ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy50YXJnZXQgPSB7fTsKICAgICAgICB0aGlzLnBsYXllciA9IHt9OwogICAgICAgIHRoaXMubmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy52ZXJzaW9uID0gbnVsbDsKICAgICAgICB0aGlzLmxpYnJhcnkgPSBudWxsOwogICAgICAgIHRoaXMuZmFsbGJhY2sgPSAndmxjJzsKICAgICAgICB0aGlzLmF1dG9wbGF5ID0gQWFrLm9wdHMuYXV0b1BsYXk7CiAgICAgICAgdGhpcy5hcmdzID0gbnVsbDsKICAgICAgICB0aGlzLnNldHVwID0ge307CiAgICAgICAgdGhpcy5vcHRpb25zID0gewogICAgICAgICAgYnVpbGQgOiAnZW1iZWQnLAogICAgICAgICAgaW5zZXJ0IDogJ3JlcGxhY2UnLAogICAgICAgICAgY3Jvc3NTZXR1cCA6IHRydWUKICAgICAgICB9OwogICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHsgLy8gZmxhc2gKICAgICAgICAgIHdtb2RlIDogJ29wYXF1ZScsCiAgICAgICAgICBxdWFsaXR5IDogJ2hpZ2gnLAogICAgICAgICAgYmdjb2xvciA6ICcjMDAwMDAwJywKICAgICAgICAgIHR5cGUgOiAnYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnLAogICAgICAgICAgcGx1Z2luc3BhZ2UgOiAnaHR0cDovL3d3dy5hZG9iZS5jb20vZ28vZ2V0Zmxhc2gnLAogICAgICAgICAgYWxsb3dzY3JpcHRhY2Nlc3MgOiAnYWx3YXlzJywgLy8gbmV2ZXIgLyBhbHdheXMKICAgICAgICAgIGFsbG93ZnVsbHNjcmVlbiA6IHRydWUKICAgICAgICB9OwogICAgICB9OwoKICAgICAgUGxheWVyLnByb3RvdHlwZSA9IHsgLy8gaHR0cDovL3Rpbnl1cmwuY29tL3BiNmZ0aGoKICAgICAgICBnZXRUYXJnZXROb2RlIDogZnVuY3Rpb24gKGVsZW1lbnQpIHsKCiAgICAgICAgICB0aGlzLnRhcmdldC5ub2RlID0gQWFrLmdldEVsZW1lbnQoZWxlbWVudCk7CiAgICAgICAgICB0aGlzLnRhcmdldC5odG1sID0gdGhpcy50YXJnZXQubm9kZS5vdXRlckhUTUw7CiAgICAgICAgICB0aGlzLnRhcmdldC5wYXJlbnQgPSB0aGlzLnRhcmdldC5ub2RlLnBhcmVudE5vZGU7CiAgICAgICAgICB0aGlzLnRhcmdldC50YWcgPSB0aGlzLnRhcmdldC5ub2RlLnRhZ05hbWU7CgogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmlkID0gdGhpcy5hdHRyaWJ1dGVzLm5hbWUgPSBBYWsuZ2VuZXJhdGVJRCgpOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCA9IHRoaXMudGFyZ2V0Lm5vZGUuaGVpZ2h0IHx8IHRoaXMudGFyZ2V0Lm5vZGUuY2xpZW50SGVpZ2h0IHx8ICc0ODBweCc7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSB0aGlzLnRhcmdldC5ub2RlLndpZHRoIHx8IHRoaXMudGFyZ2V0Lm5vZGUuY2xpZW50V2lkdGggfHwgJzY0MHB4JzsKICAgICAgICB9LAogICAgICAgIGdldE1pbWVUeXBlIDogZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL2pyczhmZ3oKICAgICAgICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICBjYXNlICdtcDQnOgogICAgICAgICAgICByZXR1cm4gJ3ZpZGVvL21wNCc7CiAgICAgICAgICBjYXNlICd3ZWJtJzoKICAgICAgICAgICAgcmV0dXJuICd2aWRlby93ZWJtJzsKICAgICAgICAgIGNhc2UgJ29nZyc6CiAgICAgICAgICBjYXNlICdvZ3YnOgogICAgICAgICAgICByZXR1cm4gJ3ZpZGVvL29nZyc7CiAgICAgICAgICBjYXNlICdmbHYnOgogICAgICAgICAgICByZXR1cm4gJ3ZpZGVvL3gtZmx2JzsKICAgICAgICAgIGNhc2UgJ2hscyc6CiAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24veC1tcGVnVVJMJzsKICAgICAgICAgIGNhc2UgJ2hkcyc6CiAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vZjRtK3htbCc7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGJ1aWxkaW5nIDogZnVuY3Rpb24gKHRhZ05hbWUpIHsKICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICBpZiAoQWFrLm9wdHMuZm9yY2VWTEMgJiYgdGhpcy5uYW1lICE9PSAndmxjJykgewogICAgICAgICAgICBBYWsuaW5mbygnZm9yY2UgcGxheWluZyB3aXRoIFZMQycpOwogICAgICAgICAgICByZXR1cm4gdGhpcy52bGMuYXBwbHkodGhpcywgdGhpcy5hcmdzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzd2l0Y2ggKHRhZ05hbWUpIHsKICAgICAgICAgIGNhc2UgJ2lmcmFtZSc6CiAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuYXR0cmlidXRlcy5zcmMgfHwgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArICcvJyk7CiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuc3JjZG9jKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLm5vZGUuaGFzQXR0cmlidXRlKCJzcmNkb2MiKSB8fCAnc3JjZG9jJyBpbiB0aGlzLnBsYXllci5ub2RlKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnc3JjZG9jJywgdGhpcy5hdHRyaWJ1dGVzLnNyY2RvYyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5IHdpdGggZmxvd3BsYXllcgogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICJkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5hdHRyaWJ1dGVzLnNyY2RvYykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0aGlzLnNldHVwLndpZHRoKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHRoaXMuc2V0dXAuaGVpZ2h0KTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2hlaWdodDonICsgdGhpcy5zZXR1cC5oZWlnaHQgKyAncHg7IHdpZHRoOicgKyB0aGlzLnNldHVwLndpZHRoICsgJ3B4OycpOwogICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnZnJhbWVib3JkZXInLCAwKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3Njcm9sbGluZycsICdubycpOwogICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnYWxsb3dmdWxsc2NyZWVuJywgdHJ1ZSk7IC8vIGh0dHA6Ly90aW55dXJsLmNvbS9veXllaGFiCiAgICAgICAgICAgIC8vIGFsbG93ZnVsbHNjcmVlbiB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIG9hbGxvd2Z1bGxzY3JlZW4gbXNhbGxvd2Z1bGxzY3JlZW4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICd2aWRlbyc6CiAgICAgICAgICAgIHZhciBhdHRyTmFtZTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CiAgICAgICAgICAgIGZvciAoYXR0ck5hbWUgaW4gdGhpcy5hdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyTmFtZSkpCiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgdGhpcy5hdHRyaWJ1dGVzW2F0dHJOYW1lXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuYXV0b3BsYXkpIHsgLy8gZml4IGJ1ZyBkdXBsaWNhdGUgcGxheWluZyBvbiBmaXJlZm94L2Nocm9tZQogICAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUub25sb2Fkc3RhcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvL3RoaXMucGxheSgpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgLy8gc3dpdGNoIHRvIHBsdWdpbiBwbGF5ZXIKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHNlbGYuYXJnc1swXSA9IHNlbGYucGxheWVyLm5vZGU7CiAgICAgICAgICAgICAgICBzZWxmLnZsY3BsYXllci5hcHBseShzZWxmLCBzZWxmLmFyZ3MpOwogICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6IC8vIGVtYmVkCiAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdlbWJlZCcpOwogICAgICAgICAgICBmb3IgKGF0dHJOYW1lIGluIHRoaXMuYXR0cmlidXRlcykgewogICAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYXR0ck5hbWUpKQogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIHRoaXMuYXR0cmlidXRlc1thdHRyTmFtZV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnBsYXllci5odG1sID0gdGhpcy5wbGF5ZXIubm9kZS5vdXRlckhUTUw7CiAgICAgICAgICB0aGlzLnBsYXllci50YWcgPSB0aGlzLnBsYXllci5ub2RlLnRhZ05hbWU7CiAgICAgICAgICB0aGlzLmluc2VydGluZygpOwogICAgICAgIH0sCiAgICAgICAgaW5zZXJ0aW5nIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuaW5zZXJ0KSB7CiAgICAgICAgICBjYXNlICdpbm5lcic6CiAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm5vZGUuaW5uZXJIVE1MID0gdGhpcy5wbGF5ZXIuaHRtbDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdhcHBlbmQnOgogICAgICAgICAgICB0aGlzLnRhcmdldC5wYXJlbnQucmVwbGFjZUNoaWxkKHRoaXMucGxheWVyLm5vZGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6IC8vIHJlcGxhY2UKICAgICAgICAgICAgdGhpcy50YXJnZXQucGFyZW50LnJlcGxhY2VDaGlsZCh0aGlzLnBsYXllci5ub2RlLCB0aGlzLnRhcmdldC5ub2RlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChBYWsub3B0cy5sb2dQbGF5ZXIpIHsKICAgICAgICAgICAgQWFrLmxvZygncGxheWVyJywgdGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9LAogICAgICAgIGVkaXRpbmcgOiBmdW5jdGlvbiAoZWxlbSwgb3B0cykgeyAvLyByZXZpZXcKICAgICAgICAgIEFhay5oYXNFbGVtZW50KGVsZW0sIGZ1bmN0aW9uICh0aGlzRWxlbWVudCkgewogICAgICAgICAgICB2YXIgb2JqLAogICAgICAgICAgICBzd2YsCiAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICBwYXJ0cywKICAgICAgICAgICAgcGFyYW0sCiAgICAgICAgICAgIGF0dHJpYnV0ZXMsCiAgICAgICAgICAgIGF0dHJOYW1lOwogICAgICAgICAgICB2YXIgc28gPSB0aGlzRWxlbWVudDsKICAgICAgICAgICAgdmFyIGNsb25lID0gc28uY2xvbmVOb2RlKHRydWUpOwoKICAgICAgICAgICAgLy8gc2V0IGF0dHJpaWJ1dGVzCiAgICAgICAgICAgIGlmIChvcHRzLnNldEF0dHJpYnV0ZSkgewogICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBvcHRzLnNldEF0dHJpYnV0ZTsKICAgICAgICAgICAgICBmb3IgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgIGlmIChjbG9uZS5xdWVyeVNlbGVjdG9yKCdwYXJhbVtuYW1lPSInICsgYXR0ck5hbWUgKyAnIl0nKSkgewogICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCdwYXJhbVtuYW1lPSInICsgYXR0ck5hbWUgKyAnIl0nKS52YWx1ZSA9IGF0dHJpYnV0ZXNbYXR0ck5hbWVdOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbG9uZS5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpKSB7CiAgICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0cmlidXRlc1thdHRyTmFtZV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdW5zZXQgYXR0cmlidXRlcwogICAgICAgICAgICBpZiAob3B0cy51bnNldEF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICBhdHRyaWJ1dGVzID0gb3B0cy5kZWxBdHRyaWJ1dGVzOwogICAgICAgICAgICAgIGZvciAoYXR0ck5hbWUgaW4gYXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgaWYgKGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ3BhcmFtW25hbWU9IicgKyBhdHRyTmFtZSArICciXScpKSB7CiAgICAgICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ3BhcmFtW25hbWU9IicgKyBhdHRyTmFtZSArICciXScpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKSkgewogICAgICAgICAgICAgICAgICBkZWxldGUgYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAob3B0cy5zZXRGbGFzaHZhcnMgfHwgb3B0cy51bnNldEZsYXNodmFycykgewogICAgICAgICAgICAgIGlmIChjbG9uZS5xdWVyeVNlbGVjdG9yKCdwYXJhbVtuYW1lPSJmbGFzaHZhcnMiXScpKSB7CiAgICAgICAgICAgICAgICBwYXJhbSA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ3BhcmFtW25hbWU9ImZsYXNodmFycyJdJyk7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnZhbHVlOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuZ2V0QXR0cmlidXRlKCdmbGFzaHZhcnMnKSkgewogICAgICAgICAgICAgICAgdmFsdWUgPSBjbG9uZS5nZXRBdHRyaWJ1dGUoJ2ZsYXNodmFycycpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuZ2V0QXR0cmlidXRlKCdkYXRhJykgJiYgY2xvbmUuZ2V0QXR0cmlidXRlKCdkYXRhJykuaW5kZXhPZignPycpID49IDApIHsKICAgICAgICAgICAgICAgIHBhcnRzID0gY2xvbmUuZ2V0QXR0cmlidXRlKCdkYXRhJykuc3BsaXQoJz8nLCAyKTsKICAgICAgICAgICAgICAgIHN3ZiA9IHBhcnRzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnRzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBvYmogPSBBYWsudW5zZXJpYWxpemUodmFsdWUpOwogICAgICAgICAgICAgIGlmIChvcHRzLnNldEZsYXNodmFycykgewogICAgICAgICAgICAgICAgb2JqID0gQWFrLnNldFByb3BlcnRpZXMob2JqLCBvcHRzLnNldEZsYXNodmFycyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChvcHRzLnVuc2V0Rmxhc2h2YXJzKSB7CiAgICAgICAgICAgICAgICBvYmogPSBBYWsudW5zZXRQcm9wZXJ0aWVzKG9iaiwgb3B0cy51bnNldEZsYXNodmFycyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZhbHVlID0gQWFrLnNlcmlhbGl6ZShvYmopOwoKICAgICAgICAgICAgICBpZiAocGFyYW0pIHsKICAgICAgICAgICAgICAgIHBhcmFtLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzd2YpIHsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgnZGF0YScsIHN3ZiArICc/JyArIHZhbHVlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCdmbGFzaHZhcnMnLCB2YWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHJlcGxhY2UKICAgICAgICAgICAgQWFrLmxvZyhzbywgY2xvbmUsIG9iaik7CiAgICAgICAgICAgIEFhay5yZXBsYWNlRWxlbWVudChzbywgY2xvbmUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBlbWJlZGRpbmcgOiBmdW5jdGlvbiAoaWQsIHNldHVwLCBhdHRyaWJ1dGVzLCBvcHRpb25zKSB7IAogICAgICAgIAogICAgICAgICAgdGhpcy5nZXRUYXJnZXROb2RlKGlkKTsKICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFhay5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgYXR0cmlidXRlcyB8fCB7fSk7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pOwoKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zcmMgPSBzZXR1cC5zd2Y7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaWQgPSB0aGlzLmF0dHJpYnV0ZXMubmFtZSA9IEFhay5nZW5lcmF0ZUlEKCk7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0ID0gc2V0dXAuaGVpZ2h0IHx8IHRoaXMuYXR0cmlidXRlcy5oZWlnaHQ7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSBzZXR1cC53aWR0aCB8fCB0aGlzLmF0dHJpYnV0ZXMud2lkdGg7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuZmxhc2h2YXJzID0gQWFrLnNlcmlhbGl6ZShzZXR1cCk7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsudW5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgJ3N3ZicpOwoKICAgICAgICAgIHRoaXMuYnVpbGRpbmcoJ2VtYmVkJyk7CiAgICAgICAgfSwKICAgICAgICBqd3BsYXllciA6IGZ1bmN0aW9uIChpZCwgc2V0dXAsIGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHsKICAgICAgICAgIC8vIEp3UGxheWVyIDcgKGZsYXNoL2h0bWw1KQogICAgICAgICAgLy8gbm90ZTogcHJvYmxlbSB3aXRoIHNzbAogICAgICAgICAgLy8gc2V0dXA6IGh0dHA6Ly90aW55dXJsLmNvbS9oaHJnamFwLCBodHRwOi8vdGlueXVybC5jb20vZ3FzNDZ0bQogICAgICAgICAgLy8gYXBpOiBodHRwczovL2RldmVsb3Blci5qd3BsYXllci5jb20vanctcGxheWVyL2RvY3MvZGV2ZWxvcGVyLWd1aWRlL2FwaS9qYXZhc2NyaXB0X2FwaV9yZWZlcmVuY2UvCiAgICAgICAgICAvLyBobHM6IGh0dHA6Ly90aW55dXJsLmNvbS9weGw5c2NxCiAgICAgICAgICAvLyBobHMtdGVzdGVyOiBodHRwOi8vZGVtby5qd3BsYXllci5jb20vc3RyZWFtLXRlc3Rlci8KICAgICAgICAgIC8vIHJ0bXAtZGVtbzogaHR0cHM6Ly93d3cuc2NhbGVlbmdpbmUuY29tL2p3NgogICAgICAgICAgLy8gaWZyYW1lOiBodHRwOi8vdGlueXVybC5jb20vODZhZ2c2OAoKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZXR1cCA9IHsKICAgICAgICAgICAgICBjb250cm9scyA6IHRydWUsCiAgICAgICAgICAgICAgZmlsZSA6IHNldHVwLnNvdXJjZSwKICAgICAgICAgICAgICBhYm91dHRleHQgOiBBYWsubmFtZSwKICAgICAgICAgICAgICBhYm91dGxpbmsgOiBBYWsuaG9tZVVSTCwKICAgICAgICAgICAgICB3aWR0aCA6IHNldHVwLndpZHRoIHx8IHRoaXMuYXR0cmlidXRlcy53aWR0aCwKICAgICAgICAgICAgICBoZWlnaHQgOiBzZXR1cC5oZWlnaHQgfHwgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCwKICAgICAgICAgICAgICBhdXRvc3RhcnQgOiBzZXR1cC5hdXRvcGxheSB8fCB0aGlzLmF1dG9wbGF5LAogICAgICAgICAgICAgIHByaW1hcnkgOiAnaHRtbDUnLAogICAgICAgICAgICAgIHByZWxvYWQgOiAnYXV0bycsCiAgICAgICAgICAgICAgc2tpbiA6IHsgLy8gU2V2ZW4gfCBTaXggfCBGaXZlIHwgR2xvdyB8IEJlZWxkZW4gfCBWYXBvciB8IEJla2xlIHwgUm91bmRzdGVyIHwgU3Rvcm10cm9vcGVyCiAgICAgICAgICAgICAgICBuYW1lIDogc2V0dXAuc2tpbiB8fCAic2l4IiAvLyBkZWZhdWx0IHNraW4gSldQNgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKFsnbXA0JywgJ3dlYm0nLCAnb2dnJywgJ29ndiddLmluZGV4T2Yoc2V0dXAudHlwZSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5wcmltYXJ5ID0gJ2ZsYXNoJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2V0dXAudHlwZSA9PT0gJ2hscycpIHsKICAgICAgICAgICAgICB0aGlzLnNldHVwLmhsc2h0bWwgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNyY2RvYyA9ICc8aHRtbD48aGVhZD48c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBmb250LWZhY2V7Zm9udC1mYW1pbHk6anctaWNvbnM7c3JjOnVybCgnICsgbG9jYXRpb24ucHJvdG9jb2wgKyAnc3NsLnAuandwY2RuLmNvbS9wbGF5ZXIvdi83LjQuMy9qdy1pY29ucy53b2ZmKSBmb3JtYXQoIndvZmYiKSx1cmwoJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vc3NsLnAuandwY2RuLmNvbS9wbGF5ZXIvdi83LjQuMy9qdy1pY29ucy50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKTtmb250LXdlaWdodDo0MDA7Zm9udC1zdHlsZTpub3JtYWx9PC9zdHlsZT48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY29udGVudC5qd3BsYXRmb3JtLmNvbS9saWJyYXJpZXMvVjZOZkV6VDcuanMiPjwvc2NyaXB0PjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+aHRtbCwgYm9keXtwYWRkaW5nOjA7IG1hcmdpbjowO308L3N0eWxlPjwvaGVhZD48Ym9keT48ZGl2IGlkPSJqdy1tb3ZpZSI+PC9kaXY+PHNjcmlwdD5qd3BsYXllcigianctbW92aWUiKS5zZXR1cCgnICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR1cCkgKyAnKTs8L3NjcmlwdD48L2JvZHk+PC9odG1sPic7CgogICAgICAgICAgdGhpcy5idWlsZGluZygnaWZyYW1lJyk7CiAgICAgICAgfSwKICAgICAgICB2aWRlb2pzIDogZnVuY3Rpb24gKGlkLCBzZXR1cCwgYXR0cmlidXRlcywgb3B0aW9ucykgeyAKICAgICAgICAgIC8vIFZpZGVvSnMgNSAoZmxhc2gvaHRtbDUpCiAgICAgICAgICAvLyBzZXR1cDogaHR0cDovL3Rpbnl1cmwuY29tL3BjZ3gyb2IKICAgICAgICAgIC8vIHBsYXliYWNrOiBodHRwOi8vdGlueXVybC5jb20vbnNjenRtbQogICAgICAgICAgLy8gZGVtbzogaHR0cDovL2pzZmlkZGxlLm5ldC9OOFpzNS8xOC8KICAgICAgICAgIC8vIHBsdWdpbnM6IGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL3dpa2kvUGx1Z2lucwoKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZXR1cCA9IHsKICAgICAgICAgICAgICBjb250cm9scyA6IHRydWUsCiAgICAgICAgICAgICAgcHJlbG9hZCA6ICdhdXRvJywKICAgICAgICAgICAgICB3aWR0aCA6IHNldHVwLndpZHRoIHx8IHRoaXMuYXR0cmlidXRlcy53aWR0aCwKICAgICAgICAgICAgICBoZWlnaHQgOiBzZXR1cC5oZWlnaHQgfHwgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCwKICAgICAgICAgICAgICB0ZWNoT3JkZXIgOiBbImh0bWw1IiwgImZsYXNoIl0sCiAgICAgICAgICAgICAgYXV0b3BsYXkgOiBzZXR1cC5hdXRvcGxheSB8fCB0aGlzLmF1dG9wbGF5LAogICAgICAgICAgICAgIHNvdXJjZXMgOiBbewogICAgICAgICAgICAgICAgICB0eXBlIDogdGhpcy5nZXRNaW1lVHlwZShzZXR1cC50eXBlKSwKICAgICAgICAgICAgICAgICAgc3JjIDogc2V0dXAuc291cmNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9OwogICAgICAgICAgICAvKiBkb24ndCB3b3JrIAogICAgICAgICAgICBpZiAoc2V0dXAudHlwZSA9PT0gJ2hscycpIHsKICAgICAgICAgICAgICB0ZWNoT3JkZXIgOiBbImZsYXNoIiwgImh0bWw1Il0sCiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5mbGFzaCA9IHsKICAgICAgICAgICAgICAgIC8vc3dmIDogIi8vcmVla3NpdGUuY29tL3B1YmxpYy9zd2YvdmlkZW9qcy1mbGFzaGxzLnN3ZiIKICAgICAgICAgICAgICAgIHN3ZiA6ICdodHRwOi8vd3d3LmZsYXNobHMub3JnL3ZpZGVvanMvdmlkZW8tanMuc3dmJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKi8KICAgICAgICAgIH0KCiAgICAgICAgICAvLyAKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zcmNkb2MgPSAnPGh0bWw+PGhlYWQ+PGxpbmsgaHJlZj0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3ZpZGVvLmpzLzUuMTAuNS9hbHQvdmlkZW8tanMtY2RuLm1pbi5jc3MiIHJlbD0ic3R5bGVzaGVldCI+PHNjcmlwdCBzcmM9IicgKyBsb2NhdGlvbi5wcm90b2NvbCArICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy92aWRlby5qcy81LjEwLjUvdmlkZW8ubWluLmpzIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3ZpZGVvanMtY29udHJpYi1obHMvMy4xLjAvdmlkZW9qcy1jb250cmliLWhscy5taW4uanMiPjwvc2NyaXB0PjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+aHRtbCwgYm9keXtwYWRkaW5nOjA7IG1hcmdpbjowO30udmpzLWRlZmF1bHQtc2tpbntjb2xvcjojZWVlfS52anMtZGVmYXVsdC1za2luIC52anMtcGxheS1wcm9ncmVzcywudmpzLWRlZmF1bHQtc2tpbiAudmpzLXZvbHVtZS1sZXZlbHtiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9LnZqcy1kZWZhdWx0LXNraW4gLnZqcy1iaWctcGxheS1idXR0b24sLnZqcy1kZWZhdWx0LXNraW4gLnZqcy1jb250cm9sLWJhcntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjIpfS52anMtZGVmYXVsdC1za2luIC52anMtc2xpZGVye2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuMyl9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PHZpZGVvIGlkPSJ2anMtbW92aWUiIGNsYXNzPSJ2aWRlby1qcyB2anMtZGVmYXVsdC1za2luIHZqcy1iaWctcGxheS1jZW50ZXJlZCI+PC92aWRlbz48c2NyaXB0PnZpZGVvanMoInZqcy1tb3ZpZSIsICcgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHVwKSArICcpPC9zY3JpcHQ+PC9ib2R5PjwvaHRtbD4nOwoKICAgICAgICAgIHRoaXMuYnVpbGRpbmcoJ2lmcmFtZScpOwogICAgICAgIH0sCiAgICAgICAgZmxvd3BsYXllciA6IGZ1bmN0aW9uIChpZCwgc2V0dXAsIGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHsKICAgICAgICAgIC8vIEZsb3dQbGF5ZXIgNiAoZmxhc2gpCiAgICAgICAgICAvLyBub3RlOiBwcm9ibGVtIHdpdGggZmxhc2hwbGF5ZXIKICAgICAgICAgIC8vIHN1cHBvcnQ6IG1wNCwgZmx2LCBmNHYsIG00diwgbW92CiAgICAgICAgICAvLyBzZXR1cDogaHR0cHM6Ly9mbG93cGxheWVyLm9yZy9kb2NzL3NldHVwLmh0bWwKICAgICAgICAgIC8vIGFwaTogaHR0cHM6Ly9mbG93cGxheWVyLm9yZy9kb2NzL2FwaS5odG1sCiAgICAgICAgICAvLyBkZW1vOiBodHRwOi8vZGVtb3MuZmxvd3BsYXllci5vcmcvYmFzaWNzL2pzLXNldHVwLWF1dG9wbGF5Lmh0bWwKICAgICAgICAgIC8vIGhkczogaHR0cHM6Ly9mbG93cGxheWVyLmVsZWN0cm90ZXF1ZS5vcmcvaHR0cHN0cmVhbWluZy1oZHMvZnA2CiAgICAgICAgICAvLyBobHM6IGh0dHA6Ly9kZW1vcy5mbG93cGxheWVyLm9yZy9hcGkvaGxzanMuaHRtbAogICAgICAgICAgLy8gZmx2OiBodHRwOi8vZGVtb3MuZmxvd3BsYXllci5vcmcvYmFzaWNzL2Zsdi5odG1sCgogICAgICAgICAgdGhpcy5nZXRUYXJnZXROb2RlKGlkKTsKICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFhay5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgYXR0cmlidXRlcyB8fCB7fSk7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pOwoKICAgICAgICAgIHRoaXMuc2V0dXAgPSBzZXR1cDsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY3Jvc3NTZXR1cCA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnNldHVwID0gewogICAgICAgICAgICAgIHdpZHRoIDogc2V0dXAud2lkdGggfHwgdGhpcy5hdHRyaWJ1dGVzLndpZHRoLAogICAgICAgICAgICAgIGhlaWdodCA6IHNldHVwLmhlaWdodCB8fCB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0LAogICAgICAgICAgICAgIGF1dG9wbGF5IDogc2V0dXAuYXV0b3BsYXkgfHwgdGhpcy5hdXRvcGxheSwKICAgICAgICAgICAgICBwcmVsb2FkIDogJ2F1dG8nCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChzZXR1cC50eXBlID09PSAnaGxzJykgewogICAgICAgICAgICAgIHRoaXMuc2V0dXAuc3dmID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy9yZWxlYXNlcy5mbG93cGxheWVyLm9yZy82LjAuNS9mbG93cGxheWVyaGxzLnN3Zic7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5lbmdpbmUgPSAnaGxzanMnOwogICAgICAgICAgICB9IGVsc2UgaWYgKFsnbXA0JywgJ3dlYm0nLCAnb2dnJywgJ29ndiddLmluZGV4T2Yoc2V0dXAudHlwZSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5zd2YgPSBsb2NhdGlvbi5wcm90b2NvbCArICcvL3JlbGVhc2VzLmZsb3dwbGF5ZXIub3JnLzYuMC41L2Zsb3dwbGF5ZXIuc3dmJzsKICAgICAgICAgICAgICB0aGlzLnNldHVwLmVuZ2luZSA9ICdmbGFzaCc7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC50eXBlID0gJ3ZpZGVvL2ZsYXNoJzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNldHVwLmNsaXAgPSB7CiAgICAgICAgICAgICAgc291cmNlcyA6IFt7CiAgICAgICAgICAgICAgICAgIHR5cGUgOiB0aGlzLmdldE1pbWVUeXBlKHRoaXMuc2V0dXAudHlwZSB8fCBzZXR1cC50eXBlKSwKICAgICAgICAgICAgICAgICAgc3JjIDogc2V0dXAuc291cmNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zcmNkb2MgPSAnPGh0bWw+PGhlYWQ+PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSInICsgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy9yZWxlYXNlcy5mbG93cGxheWVyLm9yZy82LjAuNS9za2luL2Z1bmN0aW9uYWwuY3NzIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjExLjIubWluLmpzIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vcmVsZWFzZXMuZmxvd3BsYXllci5vcmcvNi4wLjUvZmxvd3BsYXllci5taW4uanMiPjwvc2NyaXB0PjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+aHRtbCwgYm9keXtwYWRkaW5nOjA7IG1hcmdpbjowO308L3N0eWxlPjwvaGVhZD48Ym9keT48ZGl2IGlkPSJmcC1tb3ZpZSI+PC9kaXY+PHNjcmlwdD5mbG93cGxheWVyKCIjZnAtbW92aWUiLCAnICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR1cCkgKyAnKTs8L3NjcmlwdD48L2JvZHk+PC9odG1sPic7CgogICAgICAgICAgdGhpcy5idWlsZGluZygnaWZyYW1lJyk7CiAgICAgICAgfSwKICAgICAgICBncmluZHBsYXllciA6IGZ1bmN0aW9uIChpZCwgc2V0dXAsIGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHsKICAgICAgICAgIC8vIEdyaW5kUGxheWVyIDEgKGZsYXNoKQogICAgICAgICAgLy8gc2V0dXA6IGh0dHA6Ly9vc21maGxzLmt1dHUucnUvZG9jcy9ncmluZC8KICAgICAgICAgIC8vIHN1cHBvcnQ6IGhscywgcnRtcAoKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZXR1cCA9IHsKICAgICAgICAgICAgICBzcmMgOiBzZXR1cC5zb3VyY2UsCiAgICAgICAgICAgICAgc3RyZWFtVHlwZSA6ICJsaXZlIiwKICAgICAgICAgICAgICBzY2FsZU1vZGUgOiAibGV0dGVyYm94IiwKICAgICAgICAgICAgICBhdXRvUGxheSA6IHNldHVwLmF1dG9wbGF5IHx8IHRoaXMuYXV0b3BsYXkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHNldHVwLnR5cGUgPT09ICdobHMnKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5wbHVnaW5faGxzID0gIi8vcmVla3NpdGUuY29tL3B1YmxpYy9zd2YvZmxhc2hsc09TTUYuc3dmIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2V0dXAucHJveHkgPT09IHRydWUpIHsKICAgICAgICAgICAgICB0aGlzLnNldHVwLnNyYyA9ICcvL3d3dy5kaWFuc2hpYm8uY29tL2ZldGNoLnBocC8nICsgc2V0dXAuc291cmNlLnN1YnN0cmluZyhzZXR1cC5zb3VyY2UuaW5kZXhPZignLy8nKSArIDIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNyYyA9IHNldHVwLnN3ZiB8fCB0aGlzLmF0dHJpYnV0ZXMuc3JjIHx8ICIvL3JlZWtzaXRlLmNvbS9wdWJsaWMvc3dmL0dyaW5kUGxheWVyLnN3ZiI7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0ID0gc2V0dXAuaGVpZ2h0IHx8IHRoaXMuYXR0cmlidXRlcy5oZWlnaHQ7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSBzZXR1cC53aWR0aCB8fCB0aGlzLmF0dHJpYnV0ZXMud2lkdGg7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuZmxhc2h2YXJzID0gQWFrLnNlcmlhbGl6ZSh0aGlzLnNldHVwKTsKCiAgICAgICAgICB0aGlzLmJ1aWxkaW5nKCdlbWJlZCcpOwogICAgICAgIH0sCiAgICAgICAgdmxjIDogZnVuY3Rpb24gKGlkLCBzZXR1cCwgYXR0cmlidXRlcywgb3B0aW9ucykgewogICAgICAgICAgLy8gVkxDIFdlYiBQbHVnaW4gKHBsdWdpbikKICAgICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL29tbHpwMzkKICAgICAgICAgIC8vIHBsdWdpbnM6IGFib3V0OnBsdWdpbnMKICAgICAgICAgIC8vIGNocm9tZTovL2ZsYWdzLyNlbmFibGUtbnBhcGkKICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LmNocm9taXVtLm9yZy9kZXZlbG9wZXJzL25wYXBpLWRlcHJlY2F0aW9uCiAgICAgICAgICAvLyBJbiBTZXB0ZW1iZXIgMjAxNSAoQ2hyb21lIDQ1KSB3ZSB3aWxsIHJlbW92ZSB0aGUgb3ZlcnJpZGUgYW5kIE5QQVBJIHN1cHBvcnQgd2lsbCBiZSBwZXJtYW5lbnRseSByZW1vdmVkIGZyb20gQ2hyb21lLiBJbnN0YWxsZWQgZXh0ZW5zaW9ucyB0aGF0IHJlcXVpcmUgTlBBUEkgcGx1Z2lucyB3aWxsIG5vIGxvbmdlciBiZSBhYmxlIHRvIGxvYWQgdGhvc2UgcGx1Z2lucy4KCiAgICAgICAgICB0aGlzLm5hbWUgPSAndmxjJzsKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNyYyA9IHNldHVwLnNvdXJjZTsKICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCA9IHNldHVwLmhlaWdodCB8fCB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0OwogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSBzZXR1cC53aWR0aCB8fCB0aGlzLmF0dHJpYnV0ZXMud2lkdGg7CiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5jb250cm9scyA9IHRydWU7CiAgICAgICAgICAgIGlmIChzZXR1cC5hdXRvcGxheSB8fCB0aGlzLmF1dG9wbGF5KSB7CiAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy50eXBlID0gImFwcGxpY2F0aW9uL3gtdmxjLXBsdWdpbiI7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucGx1Z2luc3BhZ2UgPSAiaHR0cDovL3d3dy52aWRlb2xhbi5vcmciOwogICAgICAgICAgdGhpcy5idWlsZGluZygnZW1iZWQnKTsKICAgICAgICB9LAogICAgICAgIGh0bWw1IDogZnVuY3Rpb24gKGlkLCBzZXR1cCwgYXR0cmlidXRlcywgb3B0aW9ucykgeyAKICAgICAgICAgIC8vIFZpZGVvIFRhZyAoaHRtbDUpCiAgICAgICAgICAvLyBiYXNpY3M6IGh0dHBzOi8vaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3ZpZGVvL2Jhc2ljcy8KICAgICAgICAgIC8vIHRhZzogaHR0cDovL3d3dy53M3NjaG9vbHMuY29tL3RhZ3MvdGFnX3ZpZGVvLmFzcAogICAgICAgICAgLy8gc3VwcG9ydDogbXA0LCB3ZWJtLCBvZ2cKICAgICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvaHRtbDUvdGVzdHMvdmlkZW8uaHRtbAoKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IEFhay5zZXRQcm9wZXJ0aWVzKHRoaXMub3B0aW9ucywgb3B0aW9ucyB8fCB7fSk7CgogICAgICAgICAgdGhpcy5nZXRUYXJnZXROb2RlKGlkKTsKICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFhay5zZXRQcm9wZXJ0aWVzKHt9LCBzZXR1cCB8fCB7fSk7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuc3JjID0gc2V0dXAuc291cmNlOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmlkID0gdGhpcy5hdHRyaWJ1dGVzLm5hbWUgPSBBYWsuZ2VuZXJhdGVJRCgpOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCA9IHRoaXMuYXR0cmlidXRlcy5oZWlnaHQgfHwgdGhpcy50YXJnZXQubm9kZS5jbGllbnRIZWlnaHQgfHwgIjEwMCUiOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLndpZHRoID0gdGhpcy5hdHRyaWJ1dGVzLndpZHRoIHx8IHRoaXMudGFyZ2V0Lm5vZGUuY2xpZW50V2lkdGggfHwgIjEwMCUiOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnR5cGUgPSB0aGlzLmdldE1pbWVUeXBlKHRoaXMuYXR0cmlidXRlcy50eXBlKTsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5jb250cm9scyA9ICdjb250cm9scyc7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucHJlbG9hZCA9ICdub25lJzsKICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuYXV0b3BsYXkgfHwgdGhpcy5hdXRvcGxheSkgewogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuYXV0b3BsYXkgPSAnYXV0b3BsYXknOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnN0eWxlID0gJ2Rpc3BsYXk6IGJsb2NrOyBtYXJnaW46MCBhdXRvOyc7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsudW5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgJ3NvdXJjZScpOwoKICAgICAgICAgIHRoaXMuYnVpbGRpbmcoJ3ZpZGVvJyk7CiAgICAgICAgfQogICAgICB9OwogICAgICAKICAgICAgcmV0dXJuIG5ldyBQbGF5ZXIoKTsKICAgIH0sCiAgICBydWxlcyA6IHsKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gQW50aS1BZGJsb2NrIEtpbGxlcgogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICBzZXR0aW5ncyA6IHsKICAgICAgICBob3N0IDogWydsb2NhbGhvc3QnLCAncmVlay5naXRodWIuaW8nLCAncmVla3NpdGUuY29tJ10sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgaWYgKC9cL2FudGktYWRibG9jay1raWxsZXIoLXBhZ2VzKT9cLyQvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIHZhciBzZXR0aW5nc0JveCA9IEFhay5nZXRFbGVtZW50KCcjYWFrLXNldHRpbmdzLWJveCcpOwogICAgICAgICAgICB2YXIgc2V0dGluZ3NOb3RpY2UgPSBBYWsuZ2V0RWxlbWVudCgnI2Fhay1zZXR0aW5ncy1ub3RpY2UnKTsKCiAgICAgICAgICAgIGlmICghQWFrLnVzZUdNKSB7CiAgICAgICAgICAgICAgc2V0dGluZ3NOb3RpY2UucXVlcnlTZWxlY3RvcignZGl2JykuaW5uZXJIVE1MID0gJ0luIG5hdGl2ZSBtb2RlLCB5b3UgbXVzdCBlZGl0IHRoZSBvcHRpb25zIG1hbnVhbGx5OiA8YSBocmVmPSInICsgQWFrLm5hdGl2ZVVSTCArICciPlNlZTwvYT4nOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzQm94ICYmIHNldHRpbmdzTm90aWNlKSB7CiAgICAgICAgICAgICAgc2V0dGluZ3NOb3RpY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICBzZXR0aW5nc0JveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICBBYWsuaW5mbygnR00gc3RvcmFnZTonLCBBYWsuZ2V0VmFsdWUoKSk7CiAgICAgICAgICAgICAgQWFrLmluZm8oJ0dNIG9wdGlvbnM6JywgQWFrLm9wdHMpOwogICAgICAgICAgICAgIEFhay5pbmZvKCdHTSBhcGk6JywgQWFrLnVzZUdNICYmIEFhay5hcGlHTSgpKTsKCiAgICAgICAgICAgICAgLy8gdXNlciBjb25maWcKICAgICAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgICAgICB0YWcgOiAnZGl2JywKICAgICAgICAgICAgICAgIGh0bWwgOiAnVmVyc2lvbjogJyArIEFhay5nZXRWZXJzaW9uKCkgKyAnIDxicj5BYWtTY3JpcHQ6IHRydWUgPGJyPkFha0xpc3Q6ICcgKyAoIUFhay5nZXRFbGVtZW50KCcjazJVdzdpc0hyTW01SlhQMVZ3ZHhjNTY3WktjMWFaNEknKSkgKyAnIDxicj5Ccm93c2VyOiAnICsgQWFrLmdldEJyb3dzZXIoKSArICcgPGJyPlNjcmlwdE1hbmFnZXI6ICcgKyBBYWsuZ2V0U2NyaXB0TWFuYWdlcigpLAogICAgICAgICAgICAgICAgYXBwZW5kIDogJyNhYWstc2V0dGluZ3MtY29uZmlnJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBjcmVhdGUgb3B0aW9ucyAKICAgICAgICAgICAgICBmb3IgKHZhciBvcHROYW1lIGluIEFhay5vcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAoQWFrLm9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0TmFtZSkpIHsKICAgICAgICAgICAgICAgICAgdmFyIG9wdCA9IEFhay5vcHRpb25zW29wdE5hbWVdOwogICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZCA9IEFhay5vcHRzW29wdE5hbWVdID09PSB0cnVlID8gImNoZWNrZWQiIDogJyc7CiAgICAgICAgICAgICAgICAgIEFhay5jcmVhdGVFbGVtZW50KHsKICAgICAgICAgICAgICAgICAgICB0YWcgOiAnZGl2JywKICAgICAgICAgICAgICAgICAgICBodG1sIDogJzxpbnB1dCBpZD0iJyArIG9wdE5hbWUgKyAnIiBjbGFzcz0iY3NzLWNoZWNrYm94IiAnICsgY2hlY2tlZCArICcgdHlwZT0iJyArIG9wdC50eXBlICsgJyIvPjxsYWJlbCBmb3I9IicgKyBvcHROYW1lICsgJyIgdGl0bGU9IicgKyBvcHQuaW5mbyArICciIGNsYXNzPSJjc3MtbGFiZWwiPicgKyBvcHQubGFiZWwgKyAnPC9sYWJlbD4nLAogICAgICAgICAgICAgICAgICAgIGFwcGVuZCA6ICcjYWFrLXNldHRpbmdzLScgKyBvcHQuZ3JvdXAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBzYXZlIG9wdGlvbnMgCiAgICAgICAgICAgICAgQWFrLm9uRXZlbnQoQWFrLmdldEVsZW1lbnQoIiNhYWstc2V0dGluZ3Mtc2F2ZSIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3NzLWNoZWNrYm94Jyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbXNbaV07CiAgICAgICAgICAgICAgICAgIGlmIChlbGVtLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICBBYWsuc2V0VmFsdWUoZWxlbS5pZCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgQWFrLnNldFZhbHVlKGVsZW0uaWQsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdTYXZlZCAhJyk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIC8vIENsZWFyIEdNIHN0b3JhZ2UKICAgICAgICAgICAgICBBYWsuYWRkQ29tbWFuZHMoewogICAgICAgICAgICAgICAgY2FwdGlvbiA6ICdDbGVhciBHTSBzdG9yYWdlJywKICAgICAgICAgICAgICAgIGV4ZWN1dGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIEFhay5kZWxldGVWYWx1ZSgpOwogICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ0NsZWFyZWQgIScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICB1c2Vyc2NyaXB0c19kb21haW5zIDogeyAvLyBSZWRpcmVjdCB0byBHaXRodWIKICAgICAgICBob3N0IDogWyd1c2Vyc2NyaXB0cy5vcmcnLCAndXNlcnNjcmlwdHMub3JnOjgwODAnLCAndXNlcnNjcmlwdHMtbWlycm9yLm9yZyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoLzE1NTg0MCQvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIEFhay5nbyhBYWsuaG9tZVVSTCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBvcGVudXNlcmpzX29yZyA6IHsKICAgICAgICBob3N0IDogWydvcGVudXNlcmpzLm9yZyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gQWFrLmdldEVsZW1lbnQoJ2FbaHJlZiQ9Ii9pc3N1ZXMiXScpOwogICAgICAgICAgaWYgKC9BbnRpLUFkYmxvY2tfS2lsbGVyX1JlZWsvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpICYmIGVsZW1lbnQpIHsKICAgICAgICAgICAgQWFrLmNvbmZpcm1SZXBvcnQoZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBncmVhc3lmb3JrX29yZyA6IHsKICAgICAgICBob3N0IDogWydncmVhc3lmb3JrLm9yZyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gQWFrLmdldEVsZW1lbnQoJ2FbaHJlZiQ9Ii9mZWVkYmFjayJdJyk7CiAgICAgICAgICBpZiAoLy1hbnRpLWFkYmxvY2sta2lsbGVyLXJlZWsvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpICYmIGVsZW1lbnQpIHsKICAgICAgICAgICAgQWFrLmNvbmZpcm1SZXBvcnQoZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBtb25rZXlndXRzX2NvbSA6IHsKICAgICAgICBob3N0IDogWydtb25rZXlndXRzLmNvbSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gQWFrLmdldEVsZW1lbnQoJ2FbaHJlZio9ImNvZGUucGhwP25hdj1mb3J1bSJdJyk7CiAgICAgICAgICBpZiAoL21vbmtleWd1dHMuY29tXC9jb2RlLnBocFw/aWQ9MzUxLy50ZXN0KGxvY2F0aW9uLmhyZWYpICYmIGVsZW1lbnQpIHsKICAgICAgICAgICAgQWFrLmNvbmZpcm1SZXBvcnQoZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyBTcGVjaWZpYwogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICBibG9nc3BvdCA6IHsKICAgICAgICAvLyBObyBDb3VudHJ5IFJlZGlyZWN0IChOQ1IpCiAgICAgICAgLy8gUHJldmVudCBCbG9nZ2VyIGZyb20gUmVkaXJlY3RpbmcgdG8gQ291bnRyeS1TcGVjaWZpYyBEb21haW5zCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vN3JtMzRqbwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZyL2ZvcnVtL2Rpc2N1c3Npb24vNTk1MwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy80OTAKICAgICAgICAvLyB0ZXN0OiBodHRwOi8vdGlueXVybC5jb20vbm9tY3hrYwogICAgICAgIGhvc3QgOiBbJy5ibG9nc3BvdC4nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKEFhay5pc1RvcGZyYW1lKSB7IC8vIGZpeCByZWRpcmV0aW9uIGxvb3AKICAgICAgICAgICAgdmFyIGJsb2cgPSBsb2NhdGlvbi5ob3N0LnJlcGxhY2UoJ3d3dy4nLCAnJykuc3BsaXQoIi4iKTsKICAgICAgICAgICAgaWYgKGJsb2dbYmxvZy5sZW5ndGggLSAxXSAhPSAiY29tIikgewogICAgICAgICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24uaHJlZi5zcGxpdCgiLyIpLnNsaWNlKDMpLmpvaW4oJy8nKTsKICAgICAgICAgICAgICBBYWsuZ28oImh0dHA6Ly8iICsgYmxvZ1swXSArICIuYmxvZ3Nwb3QuY29tL25jci8iICsgcGF0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJsb2dzcG90X2tub3dsZXQzMzg5IDogewogICAgICAgIC8vIG5vdGU6IGFsc28gYWRkZWQgYWJwIHJ1bGUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODMKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vQTNtQ1hRNWkKICAgICAgICBob3N0IDogWydrbm93bGV0MzM4OS5ibG9nc3BvdC4nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldExvY2FsKCdub2FkJywgZmFsc2UpOwogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjZ0FkcyB7IGhlaWdodDogMTdweDsgfSAjZ0FkMiB7IGhlaWdodDogMTdweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXB0b2JveF91cHRvc3RyZWFtIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNTEKICAgICAgICBob3N0IDogWyd1cHRvYm94LmNvbScsICd1cHRvc3RyZWFtLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBPbGQgc29sdXRpb24gW2RlcHJlY2F0ZWRdCiAgICAgICAgICB2YXIgaWQgPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvWzAtOWEtel17MTJ9Lyk7CiAgICAgICAgICBpZiAoaWQgIT09IG51bGwpIHsKICAgICAgICAgICAgQWFrLmFkZFN0eWxlKCIjIiArIGlkWzBdICsgIiB7IGhlaWdodDogMTJweDsgfSIpOwogICAgICAgICAgfQogICAgICAgICAgLy8gTmV3IDEyLjA1LjIwMTQKICAgICAgICAgIC8vICsgYWJwIHJ1bGUgKGFsdGVybmF0aXZlIHNvbHV0aW9uKQogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRibG9ja3RyYXAgeyBoZWlnaHQ6IDEycHg7IH0iKTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHJlbW92ZSBhZHMKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcqW3NyY149Imh0dHA6Ly9hZHMudXB0b2JveC5jb20vIl0sKltocmVmXj0iaHR0cDovL2Fkcy51cHRvYm94LmNvbS8iXScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYW5pc3Vic2lhX2NvbSA6IHsKICAgICAgICBob3N0IDogWydhbmlzdWJzaWEuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vICsgYWJwIHJ1bGUgI0AjLmFkc2FudGlsb2sKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFkc2FudGlsb2sgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmpBbnRpQmxvY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5DZWtCbG9rID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBmcmVlZ2FtZXNlcnZlcmhvc3RfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTEyCiAgICAgICAgaG9zdCA6IFsnZnJlZWdhbWVzZXJ2ZXJob3N0LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNmYWIxMyB7IGhlaWdodDogMTFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZWxhaG1hZF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnZWxhaG1hZC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRibG9jayB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBtcnR6Y21wM19uZXQgOiB7CiAgICAgICAgaG9zdCA6IFsnbXJ0emNtcDMubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLnJ0bV9hZCB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBoZWlnaHRfbXlUZXN0QWQgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyNDEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTgzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI5MQogICAgICAgIGhvc3QgOiBbJ2JrbmltZS5jb20nLCAnZ280dXAuY29tJywgJ2RlYnJpZG8uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLm15VGVzdEFkIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJpZGZhc3RfbmV0d29yayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9mb3J1bS9kaXNjdXNzaW9uLzk0MDYKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9mb3J1bS9kaXNjdXNzaW9uLzcwMTMKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI3MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy83NjkKICAgICAgICBob3N0IDogWydkZWJyaWRmYXN0LmNvbScsICdnZXRkZWJyaWQuY29tJywgJ2RlYnJpZC51cycsICdsZWVjaGVyLnVzJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLm15VGVzdEFkLCAubXkyNEFkLCAubmFiaWwgeyBoZWlnaHQ6IDFweDsgfSIpOwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpbXBsZUFkJykuaW5uZXJIVE1MID0gJzxwIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij5kZWJyaWRmYXN0LmNvbTwvcD4nOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmdfZ2xlZGFpX3R2IDogewogICAgICAgIGhvc3QgOiBbJ2JnLWdsZWRhaS50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5teUFkIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZXBjc3B5X2NvbSA6IHsgLy8gaHR0cDovL3RoZXBjc3B5LmNvbS9yZWFkL2hvd190b19ibG9ja19hZGJsb2NrLwogICAgICAgIGhvc3QgOiBbJ3RoZXBjc3B5LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5teVRlc3RBZCB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5ibG9ja2VkIHsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJy5ibG9ja2VkJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICB2Z19lMjRfbm8gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI5MgogICAgICAgIGhvc3QgOiBbJ3ZnLm5vJywgJ2UyNC5ubyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBZGQgdGhpcyBydWxlLCBiZWNhdXNlIEVhc3lMaXN0IGFsbG93IGFsbCBoaWRkZW4gZWxlbWVudHMuCiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5hZCB7IGRpc3BsYXk6IG5vbmU7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGF1dG9tb2JpbGVfc3BvcnRpdmVfY29tIDogewogICAgICAgIGhvc3QgOiBbJ2F1dG9tb2JpbGUtc3BvcnRpdmUuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLm15VGVzdEFkIHsgaGVpZ2h0OiA1MXB4OyBkaXNwbGF5OiBub25lOyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBzbnN3X3VzIDogewogICAgICAgIGhvc3QgOiBbJ3Nuc3cudXMnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRfMSB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB1cmxjaGVja2VyX25ldCA6IHsKICAgICAgICBob3N0IDogWyd1cmxjaGVja2VyLm5ldCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNhZGNoZWNrZXIgeyBoZWlnaHQ6IDIwcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNraXBsaW1pdGVfdHYgOiB7CiAgICAgICAgaG9zdCA6IFsnc2tpcGxpbWl0ZS50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoImRpdi5hZGR0aGlzX25hdGl2ZV90b29sYm94ICsgZGl2W2lkXSB7IGhlaWdodDogMTJweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsZWNvcmVfY29fbnogOiB7CiAgICAgICAgaG9zdCA6IFsnZmlsZWNvcmUuY28ubnonXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuYWRzZW5zZSB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB0aG9tYXNfbl9ydXRoX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTExMQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9mdTd2a1VBMQogICAgICAgIGhvc3QgOiBbJ3Rob21hcy1uLXJ1dGguY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLkdvb2dsZSB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbnRlcmZhbnNfb3JnIDogewogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly93d3cuaW50ZXJmYW5zLm9yZy9mb3J1bS8KICAgICAgICBob3N0IDogWydpbnRlcmZhbnMub3JnJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFkX2dsb2JhbF9oZWFkZXIgeyBoZWlnaHQ6IDFweDsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWF4ZGVicmlkZXVyX2NvbSA6IHsKICAgICAgICBob3N0IDogWydtYXhkZWJyaWRldXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmNsZWFyICsgZGl2W2lkXSB7IGhlaWdodDogMTJweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG9wem9uZV9pdCA6IHsKICAgICAgICBob3N0IDogWyd0b3B6b25lLmx0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmZvcnVtQWQgeyBoZWlnaHQ6IDFweDsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmFuYTEwX2NvX2lsIDogewogICAgICAgIGhvc3QgOiBbJy5uYW5hMTAuJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2FkdmVydC10cmFja2VyIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBsZWpfdHYgOiB7CiAgICAgICAgaG9zdCA6IFsncGxlai50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5hZHZlcnRfYm94IHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1hbmdhbWludF9jb20gOiB7CiAgICAgICAgLy8gbm90ZTogYWRkZWQgcnVsZSB0byBhbGxvdyAiLmFkNzI4IgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2lkL2ZvcnVtL2Rpc2N1c3Npb24vODUyNAogICAgICAgIGhvc3QgOiBbJ21hbmdhbWludC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuYWQ3MjggeyBoZWlnaHQ6IDMxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJpZGV1cnN0cmVhbV9mciA6IHsKICAgICAgICBob3N0IDogWydkZWJyaWRldXJzdHJlYW0uZnInXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjY29udGVudCBkaXZbaWRdW2FsaWduPWNlbnRlcl0geyBoZWlnaHQ6IDEycHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHByZWVtbGlua3NfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3ByZWVtbGlua3MuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2RpdmFkcyB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBoZW50YWlfdG8gOiB7CiAgICAgICAgaG9zdCA6IFsnaGVudGFpLnRvJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2hlbnRhaXRvMTIzIHsgaGVpZ2h0OiAxMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBwcm90b3R1cmtfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3Byb3RvdHVyay5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjcmVrbGFtIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG11ZmFfZGUgOiB7CiAgICAgICAgaG9zdCA6IFsnbXVmYS5kZSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNsZWFkZXJib2FyZCB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNsYXJnZS1yZWN0YW5nbGUgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWQtaGVhZGVyLTQ2OHg2MCB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB3YXRjaGFyYWJfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3dhdGNoYXJhYi5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gKyBhZHAgcnVsZSB3YXRjaGFyYWIuY29tI0AjI2FkYmxvY2sKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2FkYmxvY2sgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZnJlZWRvbWlwX2NvbSA6IHsKICAgICAgICBob3N0IDogWydmcmVlZG9tLWlwLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5wdWJfdmVydGljYWwgaW5zLCAucHViX3ZlcnRpY2FsIGRpdiB7IGhlaWdodDogMTFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgd2FrYW5pbV90diA6IHsKICAgICAgICBob3N0IDogWyd3YWthbmltLnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2RldGVjdG9yIHsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjbm9wdWIgeyBkaXNwbGF5OiBibG9jazsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2ltcGx5X2RlYnJpZF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzMzMgogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9iN01BWVhzNAogICAgICAgIGhvc3QgOiBbJ3NpbXBseS1kZWJyaWQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZHNieWdvb2dsZSA9IHt9OwogICAgICAgICAgQWFrLnV3LmFkc2J5Z29vZ2xlLmxvYWRlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYW5nYTlfY29tIDogewogICAgICAgIGhvc3QgOiBbJ21hbmdhOS5jb20nLCAnbWFuZ2FiZWUuY28nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuYWRibG9jayB7IGhlaWdodDogMzFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25lbWFuZ2EyX2NvbSA6IHsKICAgICAgICBob3N0IDogWydvbmVtYW5nYTIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFmc19hZHMgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWFuZ2FiaXJkX2NvbSA6IHsKICAgICAgICBob3N0IDogWydtYW5nYWJpcmQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFmc19hZHMgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAga29kaWxpdmVfZXUgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1MjgKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vWnh2WEtxdGMKICAgICAgICBob3N0IDogWydrb2RpbGl2ZS5ldSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5BZCB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBiYWNraW5fbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWJhY2tpbi5uZXQKICAgICAgICBob3N0IDogWydiYWNraW4ubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2RpdmFkIHsgaGVpZ2h0OiAzMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBtb2JpbGVfdHJhY2tlcl9mcmVlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTA4MgogICAgICAgIGhvc3QgOiBbJ21vYmlsZS10cmFja2VyLWZyZWUuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI215QWRzIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdvcmt1cGxvYWRfY29tIDogewogICAgICAgIC8vIG5vdGU6IG9iZnVzY2F0ZWQKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMzNAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjkwCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0NQemQyU3d4CiAgICAgICAgaG9zdCA6IFsnd29ya3VwbG9hZC5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFkQmxvY2ssIC5hZHNieWdvb2dsZSwgI3NhZCB7IGhlaWdodDogMTFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG9kYXlfaW4gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9aW50b2RheS5pbgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWJ1c2luZXNzdG9kYXkuaW4KICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vZ3o1MzlHN20KICAgICAgICBob3N0IDogWyJpbnRvZGF5LmluIiwgImJ1c2luZXNzdG9kYXkuaW4iXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJyNhZGJvY2tlcl9hbHQgeyBkaXNwbGF5OiBub25lOyB9Jyk7CiAgICAgICAgICBBYWsudXcub3BlblBvcHVwID0gZnVuY3Rpb24oKXt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgamNfbXBfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTk3CiAgICAgICAgaG9zdCA6IFsiamMtbXAuY29tIl0sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcuYWRzZW5zZSB7d2lkdGg6IDFweDsgaGVpZ2h0OiAxcHg7IHZpc2liaWxpdHk6IGhpZGRlbjsgZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTt9Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYXJpYWdlX2ZyYW5jb19tYXJvY2Fpbl9uZXQgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bWFyaWFnZS1mcmFuY28tbWFyb2NhaW4ubmV0CiAgICAgICAgaG9zdCA6IFsibWFyaWFnZS1mcmFuY28tbWFyb2NhaW4ubmV0Il0sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcjbXlfYWRfZGl2IHtoZWlnaHQ6IDFweDt9Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBoYXBweV9oYWNrX3J1IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWhhcHB5LWhhY2sucnUKICAgICAgICBob3N0IDogWydoYXBweS1oYWNrLnJ1J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2Jsb2NrYmxvY2tGNCB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tGNCB0ZCB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tGNCB0ZCBwIHt2aXNpYmlsaXR5OmludmlzaWJsZTtkaXNwbGF5Om5vbmU7fSAjYmxvY2tibG9ja0QzIHt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTpibG9jazt9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBmb3JiZXNfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84NjUKICAgICAgICBob3N0IDogWydmb3JiZXMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZignL3dlbGNvbWUnKSA+IC0xKSB7CiAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ3dlbGNvbWVBZCcsICd0cnVlJywgODY0MDAwMDAsICcvJyk7CiAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ2RhaWx5V2VsY29tZUNvb2tpZScsICd0cnVlJywgODY0MDAwMDAsICcvJyk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IEFhay5nZXRDb29raWUoJ3RvVXJsJykgfHwgJ2h0dHA6Ly93d3cuZm9yYmVzLmNvbS8nOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFpdF9hZHNieWdvb2dsZSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTQ3CiAgICAgICAgaG9zdCA6IFsnYml0Y29pbmFsaWVucy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdpbnMuYWRzYnlnb29nbGUnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJhaXRfdGVzdGVyIDogewogICAgICAgIGhvc3QgOiBbJ29zb2FyY2FkZS5jb20nLCAnZDNicmlkNHkwdS5pbmZvJywgJ2ZpbGVpY2UubmV0JywgJ25vc3RlYW0ucm8nLCAnb3BlbnJ1bm5lci5jb20nLCAnZWFzeWJpbGxldHMuY29tJywgJ3Nwb3guZnInLCAneW92b3lhZ2VzLmNvbScsICd0djMuY28ubnonLCAnZnJlZWFsbG11c2ljLmluZm8nLCAncHV0bG9ja2VyLmNvbScsICdzb2Nrc2hhcmUuY29tJywgJ2RyYW1hcGFzc2lvbi5jb20nLCAneW9vY2xpY2suY29tJywgJ29ubGluZS51YSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiN0ZXN0ZXInKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJhaXRfYWRkIDogewogICAgICAgIGhvc3QgOiBbJ2ZpbGVjb20ubmV0JywgJ3Vwc2hhcmUub3JnJywgJ3NraXBweWZpbGUuY29tJywgJ213ZmlsZXMubmV0JywgJ3VwLWZsb3cub3JnJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkZCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFpdF9hZHBidGVzdCA6IHsKICAgICAgICBob3N0IDogWydsZWFndWVzZWNyZXRhcnkuY29tJywgJ3Rla25vZ29kcy5jb20nLCAnaGVsbHNtZWRpYS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjYWRwYnRlc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJhaXRfYWR0ZXN0ZXIgOiB7CiAgICAgICAgaG9zdCA6IFsnZnJlZXNwb3J0c2JldC5jb20nLCAnc3BvcnRzcGxheXMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkLXRlc3RlcicpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdGdvX3R2X2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMzAzCiAgICAgICAgaG9zdCA6IFsndGdvLXR2LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNhZGIsICNiYW5uZXJhZDEsIC5sb2FkX3N0cmVhbSB7IGRpc3BsYXk6IG5vbmU7IH0iKTsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I3Rlc3RlcicpOwogICAgICAgIH0sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcudGhyZXNob2xkID0gMTAwMDsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcuY2hhdF9mcmFtZScpOyAvLyBidWcgcmVsb2FkIGlmcmFtZQogICAgICAgIH0KICAgICAgfSwKICAgICAgZnJlZWdhbWVob3N0aW5nX25sIDogewogICAgICAgIGhvc3QgOiBbJ2ZyZWVnYW1laG9zdGluZy5ubCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZHRlc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZXdlYXRoZXJzcGFjZV9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsndGhld2VhdGhlcnNwYWNlLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhYi1ibC1hZHZlcnRpc2VtZW50Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjbGVvZGVza3RvcF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzcxMQogICAgICAgIGhvc3QgOiBbJ2NsZW9kZXNrdG9wLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNteVRlc3RBZCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1hZ2VyYWlkZXJfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MjYKICAgICAgICBob3N0IDogWydpbWFnZXJhaWRlci5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjbXlHQ29udGFpbmVyJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICB2b2ljaV9mciA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mci9mb3J1bS9kaXNjdXNzaW9uLzEwMDkzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzgyNgogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS96RVZRSFRpRAogICAgICAgIGhvc3QgOiBbJ3ZvaWNpLmZyJywgJ3Byb2dyYW1tZS10di5uZXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjc2FzX3NjcmlwdDInKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1pbF9pbmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE2NTIKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vNDc0Tlp6UEoKICAgICAgICBob3N0IDogWydtaWwuaW5rJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2Fkc19kaXYnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGN1YmV1cGxvYWRfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL2ZvcnVtL2Rpc2N1c3Npb24vNTkxOQogICAgICAgIGhvc3QgOiBbJ2N1YmV1cGxvYWQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5jcmVhdGVFbGVtZW50KHsKICAgICAgICAgICAgdGFnIDogJ2lmcmFtZScsCiAgICAgICAgICAgIG5hbWUgOiAnaWZyYW1lJywKICAgICAgICAgICAgc3JjIDogJ2Fib3V0OmJsYW5rJywKICAgICAgICAgICAgc3R5bGUgOiAnZGlzcGxheTpub25lOycsCiAgICAgICAgICAgIGFwcGVuZCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzdHJlYW00ZnJlZV9ldSA6IHsKICAgICAgICBob3N0IDogWydzdHJlYW00ZnJlZS5ldSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyArYWJwIGFsdCBzb2x1dGlvbgogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjanBheWRheScpOwogICAgICAgICAgQWFrLnV3LmpwYXlkYXlfYWxlcnQgPSAxOwogICAgICAgIH0KICAgICAgfSwKICAgICAgXzNkbmV3c19ydSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9ydS9mb3J1bS9kaXNjdXNzaW9uLzU3NTAKICAgICAgICBob3N0IDogWyczZG5ld3MucnUnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnYWRibG9ja3dhcm4nLCAxKTsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2VhckFkcyB7IHdpZHRoOiA0MDFweDsgfSIpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjZWFyQWRzJyk7CiAgICAgICAgICBBYWsudXcuX19BVF9kZXRlY3RlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBfM2RzdGhlbV9lcyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT0zZHN0aGVtCiAgICAgICAgaG9zdCA6IFsnM2RzdGhlbS5lcyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvL0Fhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgLyoKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ21haW4uanMnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogdHJ1ZSwKICAgICAgICAgICAgICBvdmVycmlkZSA6ICcvL3Bhc3RlYmluLmNvbS9yYXcvMnlHUlBoUlonCiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgKi8KICAgICAgICB9CiAgICAgIH0sCiAgICAgIF84bXVzZXNfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPThtdXNlcwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZvcnVtL2Rpc2N1c3Npb24vODUxNQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL2ZvcnVtL2Rpc2N1c3Npb24vNjQwNwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9iTU5EeGVjcwogICAgICAgIGhvc3QgOiBbJzhtdXNlcy5jb20nXSwKICAgICAgICBvbkJlZm9yZVNjcmlwdCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIGNvbnRhaW5zIDogInR5cGVvZiBleG8iLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFwcHl0cmlwc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9aGFwcHl0cmlwcwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9FV1NFYm52dgogICAgICAgIGhvc3QgOiBbJ2hhcHB5dHJpcHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnY2FuUnVuJywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBsZ19maXJtd2FyZV9yb21fY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWxnLWZpcm13YXJlLXJvbS5jb20KICAgICAgICBob3N0IDogWydsZy1maXJtd2FyZS1yb20uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgna2lsbGFkcycsIHRydWUpOwogICAgICAgIH0KICAgICAgfSwgICAgICAKICAgICAgbWlkX2RheV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bWlkLWRheS5jb20KICAgICAgICBob3N0IDogWydtaWQtZGF5LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2NhblJ1bicsIHRydWUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFkdHZfbmV0d29yayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1iYWR0di5pdAogICAgICAgIGhvc3QgOiBbJ2JhZHR2Lml0JywgJ2JhZHRhc3RlLml0JywgJ2JhZGdhbWVzLml0JywgJ2JhZGNvbWljcy5pdCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdhZEJsb2NrQ2hlY2tlZCcsICdkaXNhdHRpdm8nKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluZGVwZW5kZW50X2NvX3VrIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWluZGVwZW5kZW50LmNvLnVrCiAgICAgICAgaG9zdCA6IFsnaW5kZXBlbmRlbnQuY28udWsnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnYWRibG9ja19kZXRlY3RlZCcsICdpZ25vcmVkJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBlc21hc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZXNtYXMuY29tCiAgICAgICAgaG9zdCA6IFsnZXNtYXMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnb3BlbmVkX2FkYmJsb2NrJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGlub3kxdHZfbmV0d29yayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1waW5veTF0dgogICAgICAgIGhvc3QgOiBbJ3Bpbm95MXR2LiddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2FsbG93YWRzJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBld2FsbHN0cmVldGVyX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1ld2FsbHN0cmVldGVyLmNvbQogICAgICAgIGhvc3QgOiBbJ2V3YWxsc3RyZWV0ZXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnT0FTX3JkbCcsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYnVzaW5lc3Nfc3RhbmRhcmRfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWJ1c2luZXNzLXN0YW5kYXJkLmNvbQogICAgICAgIGhvc3QgOiBbJ2J1c2luZXNzLXN0YW5kYXJkLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2Fkc0xvYWRlZCcsIDEpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnX3B3JywgJ3QnKTsgICAgICAgICAgCiAgICAgICAgfQogICAgICB9LAogICAgICBleHByZXNzX25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZmluYW5jaWFsZXhwcmVzcy5jb20KICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1pbmRpYW5leHByZXNzLmNvbQogICAgICAgIGhvc3QgOiBbJ2ZpbmFuY2lhbGV4cHJlc3MuY29tJywgJ2luZGlhbmV4cHJlc3MuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnUnVuQWRzJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbmRpYXRpbWVzX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1pbmRpYXRpbWVzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bWFsYXlhbGFtLnNhbWF5YW0uY29tCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL3p4dXN2eWYsIAogICAgICAgIGhvc3QgOiBbJ2luZGlhdGltZXMuY29tJywgJ3NhbWF5YW0uY29tJywgJ2JhbmdhbG9yZW1pcnJvci5jb20nXSwKICAgICAgICBvbkJlZm9yZVNjcmlwdCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ1xcXFx4NjFcXFxceDY0XFxcXHg2MicsCiAgICAgICAgICAgICAgZXh0ZXJuYWwgOiBmYWxzZSwKICAgICAgICAgICAgICByZW1vdmUgOiB0cnVlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBjb250YWlucyA6ICdmdW5jdGlvbiBpbml0QmxvY2snLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdGhlY2hpdmVfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNDUzCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1RkcFB5cmJiCiAgICAgICAgaG9zdCA6IFsndGhlY2hpdmUuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aW5kb3csIHsKICAgICAgICAgICAgICBzdGVwaGFuZURldGVjdG9yIDogewogICAgICAgICAgICAgICAgdmFsdWUgOiB7CiAgICAgICAgICAgICAgICAgIGhvb2sgOiBmdW5jdGlvbiAoY2IpIHsKICAgICAgICAgICAgICAgICAgICBjYihmYWxzZSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGluaXQgOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0UmVzdWx0IDogZnVuY3Rpb24gKCkge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmljaG9ucmFpbHNfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNDQ3CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0V3ZndnOEJHCiAgICAgICAgaG9zdCA6IFsncmljaG9ucmFpbHMuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhZHNCeUdvb2dsZUh0bWwgPSAnIjxpbnMraWQ9ImFzd2lmdF8wX2V4cGFuZCIrc3R5bGU9ImRpc3BsYXk6aW5saW5lLXRhYmxlO2JvcmRlcjpub25lO2hlaWdodDo5MHB4O21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjpyZWxhdGl2ZTt2aXNpYmlsaXR5OnZpc2libGU7d2lkdGg6NzUwcHg7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCI+PGlucytpZD0iYXN3aWZ0XzBfYW5jaG9yIitzdHlsZT0iZGlzcGxheTpibG9jaztib3JkZXI6bm9uZTtoZWlnaHQ6OTBweDttYXJnaW46MDtwYWRkaW5nOjA7cG9zaXRpb246cmVsYXRpdmU7dmlzaWJpbGl0eTp2aXNpYmxlO3dpZHRoOjc1MHB4O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQiPjxpZnJhbWUrbWFyZ2lud2lkdGg9IjAiK21hcmdpbmhlaWdodD0iMCIrdnNwYWNlPSIwIitoc3BhY2U9IjAiK2FsbG93dHJhbnNwYXJlbmN5PSJ0cnVlIitzY3JvbGxpbmc9Im5vIithbGxvd2Z1bGxzY3JlZW49InRydWUiK29ubG9hZD0idmFyK2k9dGhpcy5pZCxzPXdpbmRvdy5nb29nbGVfaWZyYW1lX29uY29weSxIPXMmYW1wOyZhbXA7cy5oYW5kbGVycyxoPUgmYW1wOyZhbXA7SFtpXSx3PXRoaXMuY29udGVudFdpbmRvdyxkO3RyeXtkPXcuZG9jdW1lbnR9Y2F0Y2goZSl7fWlmKGgmYW1wOyZhbXA7ZCZhbXA7JmFtcDsoIWQuYm9keXx8IWQuYm9keS5maXJzdENoaWxkKSl7aWYoaC5jYWxsKXtzZXRUaW1lb3V0KGgsMCl9ZWxzZStpZihoLm1hdGNoKXt0cnl7aD1zLnVwZChoLGkpfWNhdGNoKGUpe313LmxvY2F0aW9uLnJlcGxhY2UoaCl9fSIraWQ9ImFzd2lmdF8wIituYW1lPSJhc3dpZnRfMCIrc3R5bGU9ImxlZnQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDsiK3dpZHRoPSI3NTAiK2ZyYW1lYm9yZGVyPSIwIitoZWlnaHQ9IjkwIj48L2lmcmFtZT48L2lucz48L2lucz4iJzsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICB1cmwgOiAkKCIuYXJ0aWNsZS1jb250ZW50IikuZGF0YSgidXJsIiksCiAgICAgICAgICAgICAgZGF0YVR5cGUgOiAic2NyaXB0IiwKICAgICAgICAgICAgICBtZXRob2QgOiAicG9zdCIsCiAgICAgICAgICAgICAgZGF0YSA6IHsKICAgICAgICAgICAgICAgIGh0bWwgOiBhZHNCeUdvb2dsZUh0bWwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICB2YXIgZXhlYyA9IHJlc3VsdC5yZXBsYWNlKCIkKCcuYXJ0aWNsZS1jb250ZW50JykiLCAiJCgnLmFydGljbGUtY29udGVudC0yJykiKTsKICAgICAgICAgICAgICAgIG5ldyBGdW5jdGlvbihleGVjKSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIi5hcnRpY2xlLWNvbnRlbnQiKS5hZnRlcignPGRpdiBjbGFzcz0iYXJ0aWNsZS1jb250ZW50LTIiPjwvZGl2PicpLnJlbW92ZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBybXByZXB1c2JfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3JtcHJlcHVzYi5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnam90X3ZpZXdlcicsIDMpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmVvZHJpdmVfY28gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwMDEKICAgICAgICBob3N0IDogWyduZW9kcml2ZS5jbyddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gUHJldmVudCBwb3B1bmRlcgogICAgICAgICAgQWFrLnNldENvb2tpZSgnS2lmUG9wQ250JywgMSwgbnVsbCwgJy9lbWJlZC8nKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhlbnRhaWhhdmVuX29yZyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2dvcmhpbGwvdUJsb2NrL2lzc3Vlcy8xMzQwCiAgICAgICAgaG9zdCA6IFsnaGVudGFpaGF2ZW4ub3JnJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBQcmV2ZW50IHBvcHVuZGVyCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdoaF9wcG5kcjEnLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2hoX3BwbmRyMicsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJpbWVzaGFyZV90diA6IHsKICAgICAgICBob3N0IDogWydwcmltZXNoYXJlLnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkYmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJpZG5ldF9hbmRfbGl2ZWRlYnJpZCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1kZWJyaWRuZXQKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1saXZlZGVicmlkCiAgICAgICAgaG9zdCA6IFsnZGVicmlkbmV0LmNvbScsICdsaXZlZGVicmlkLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5teVRlc3RBZDIgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYubXlUZXN0QWQyJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBibHVlc2F0b3NoaV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg3MwogICAgICAgIGhvc3QgOiBbJ2JsdWVzYXRvc2hpLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiN0ZXN0IHsgaGVpZ2h0OiAyODBweDsgfSIpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjdGVzdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmF6ZXJjcnlwdF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg3MAogICAgICAgIGhvc3QgOiBbJ3JhemVyY3J5cHQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI3Rlc3QgeyBoZWlnaHQ6IDI1MHB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiN0ZXN0Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzYXRvc2hpZW1waXJlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODcyCiAgICAgICAgaG9zdCA6IFsnc2F0b3NoaWVtcGlyZS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjdGVzdCB7IGhlaWdodDogMjUwcHg7IH0iKTsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I3Rlc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9uZWFkZmF1Y2V0X2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODcxCiAgICAgICAgaG9zdCA6IFsnb25lYWRmYXVjZXQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI3Rlc3QgeyBoZWlnaHQ6IDI1MHB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiN0ZXN0Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBqa2FuaW1lX25ldCA6IHsKICAgICAgICBob3N0IDogWydqa2FuaW1lLm5ldCddLAogICAgICAgIC8vIEBAfHxqa2FuaW1lLm5ldC9hc3NldHMvanMvYWR2ZXJ0aXNlbWVudDIuanMKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjcmVjbycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgXzcyMHBta3ZfY29tIDogewogICAgICAgIGhvc3QgOiBbJzcyMHBta3YuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkdmVydCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGFpZHZlcnRzX2NvbSA6IHsKICAgICAgICBob3N0IDogWydwYWlkdmVydHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2LmFmc19hZHMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGl0YWxpYXR2X29yZyA6IHsKICAgICAgICBob3N0IDogWydpdGFsaWF0di5vcmcnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjZmFiMTMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNocmlzc21vb3ZlX2NvbSA6IHsKICAgICAgICBob3N0IDogWydjaHJpc3Ntb292ZS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy9BYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZHNlcnZlcicpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXZlbnRodWJzX2NvbSA6IHsKICAgICAgICBob3N0IDogWydldmVudGh1YnMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2JsYWh5YmxhY2kxJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzdXBlcmFuaW1lc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyOTUKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vRkRQQUtqVFEKICAgICAgICBob3N0IDogWydzdXBlcmFuaW1lcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjYmFubmVyTG9qYScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZm9ydW1fcGFjX3JvbV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI0MwogICAgICAgIGhvc3QgOiBbJ2ZvcnVtLnBhYy1yb20uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2LmJhbm5lcl9hZHMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpdHZfdHYgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyOTkKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vemNkZHZUdUMKICAgICAgICBob3N0IDogWydsaXR2LnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2LnBsYXllcl9tYXNrJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBsZXZlbGRvd25fZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU5NQogICAgICAgIGhvc3QgOiBbJ2xldmVsZG93bi5mciddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZGJsb2NrJyk7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZGJsb2NrdGVzdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2xvYmVzbG90X2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTI0CiAgICAgICAgaG9zdCA6IFsnZ2xvYmVzbG90LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZGQnKTsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkZDEnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFudGVubmVzcG9ydF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnYW50ZW5uZXNwb3J0LmNvbScsICdzZXJ2ZXJoZC5ldSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsgLy8gZm9yIGFudGVubmVzcG9ydAogICAgICAgICAgLy8gUmVtb3ZlIFB1YgogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoIiNwdWIgLnB1YmNsb3NlIik7CiAgICAgICAgICAvLyBSZWRpcmVjdCB0byBQbGF5ZXIKICAgICAgICAgIEFhay5zZXRFbGVtZW50KCcjcHViIC5lbWJlZCBpZnJhbWUnLCB7CiAgICAgICAgICAgIHNyYyA6ICcvZW1iZWQvZW1iZWQucGhwJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBkaXNhYmxlQWxlcnRib3ggOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZW4vZm9ydW0vZGlzY3Vzc2lvbi84NjExCiAgICAgICAgaG9zdCA6IFsnZHJpdmVhcmFiaWEuY29tJywgJ3B1dGxvY2tlci5jb20nLCAnZG9hdG9vbHNpdGEuYWx0ZXJ2aXN0YS5vcmcnLCAnc29ja3NoYXJlLmNvbScsICdmcmVlLW1vdmllLWhvbWUuY29tJywgJ3BjLm9ubGluZTE0My5jb20nLCAna29vb3JhLmNvbScsICdzdHIzYW10di5jby5ucicsICdzdHIzYW10di5hbHRlcnZpc3RhLm9yZycsICdzdHIzYW0uYWx0ZXJ2aXN0YS5vcmcnLCAnZmlsZWNvbS5uZXQnLCAncGlwb2Nhcy50dicsICdnZW5lcmF0dXByZW1pdW0uYml6JywgJ21lZ2EtZGVicmlkLmV1JywgJ3ByZW1pdW1zdDByZS5ibG9nc3BvdC5jb20nLCAnZGwtcHJvdGVjdC5jb20nLCAnbmV3c2lubGV2ZWxzLmNvbScsICd2aXByYWNpbmcuYml6JywgJ2J1c2luZXNzdG9kYXkuaW4nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hbGVydCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2VuZXJhdHVwcmVtaXVtX2JpeiA6IHsKICAgICAgICBob3N0IDogWydnZW5lcmF0dXByZW1pdW0uYml6J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIERpc2FibGUgQ29uZmlybSBCb3gKICAgICAgICAgIC8vQWFrLnV3LmNvbmZpcm0gPSBmdW5jdGlvbiAoKXt9OwogICAgICAgICAgQWFrLnNldENvb2tpZSgnZ2VuZXJhJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmV3c3RhdGVzbWFuX2NvbSA6IHsKICAgICAgICBob3N0IDogWyduZXdzdGF0ZXNtYW4uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2RvbmF0aW9uUG9wdXAnLCAnaGlkZScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRzd2l6el9jb20gOiB7CiAgICAgICAgLy8gYnk6IFNrcjR0Y2hHcjNhenlNb25raUJhbGxsbGxsWnp6egogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MDkKICAgICAgICBob3N0IDogWyd5ZXMuZm0nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHdpbmRvdy5jb21fYWRzd2l6el9zeW5jaHJvX2luaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVyc3RhbmRhcmRfYXQgOiB7CiAgICAgICAgLy8gYnk6IEFsZXhhbmRlcjI1NQogICAgICAgIC8vIHBhdGNoOiBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1yN1E0RHJmQgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWRlcnN0YW5kYXJkCiAgICAgICAgaG9zdCA6IFsnZGVyc3RhbmRhcmQuYXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgIHZhciBtYWtlSVNPVGltZXN0YW1wVVRDID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFkID0gZnVuY3Rpb24gKGFtb3VudCwgd2lkdGgpIHsKICAgICAgICAgICAgICB2YXIgcGFkZGluZyA9ICIiOwogICAgICAgICAgICAgIHdoaWxlIChwYWRkaW5nLmxlbmd0aCA8IHdpZHRoIC0gMSAmJiBhbW91bnQgPCBNYXRoLnBvdygxMCwgd2lkdGggLSBwYWRkaW5nLmxlbmd0aCAtIDEpKSB7CiAgICAgICAgICAgICAgICBwYWRkaW5nICs9ICIwIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHBhZGRpbmcgKyBhbW91bnQudG9TdHJpbmcoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgcmV0dXJuIFtwYWQoZGF0ZS5nZXRVVENGdWxsWWVhcigpLCA0KSwgIi0iLAogICAgICAgICAgICAgIHBhZChkYXRlLmdldFVUQ01vbnRoKCkgKyAxLCAyKSwgIi0iLAogICAgICAgICAgICAgIHBhZChkYXRlLmdldFVUQ0RhdGUoKSwgMiksICJUIiwKICAgICAgICAgICAgICBwYWQoZGF0ZS5nZXRVVENIb3VycygpLCAyKSwgIjoiLAogICAgICAgICAgICAgIHBhZChkYXRlLmdldFVUQ01pbnV0ZXMoKSwgMiksICI6IiwKICAgICAgICAgICAgICBwYWQoZGF0ZS5nZXRVVENTZWNvbmRzKCksIDIpXS5qb2luKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKS5mb3JFYWNoKGZ1bmN0aW9uIChjb29raWUpIHsKICAgICAgICAgICAgLy8gRmluZCBtYWluIHN0b3JhZ2UgY29va2llCiAgICAgICAgICAgIGlmIChjb29raWUuc3Vic3RyKDAsIDYpID09ICJNR1VJRD0iKSB7CiAgICAgICAgICAgICAgLy8gRGVjb21wb3NlIGluZm9ybWF0aW9uIGZyb20gbWFpbiBzdG9yYWdlIGNvb2tpZQogICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB7fTsKICAgICAgICAgICAgICBjb29raWUuc3Vic3RyKDYpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbiAoYXNzaWdubWVudCkgewogICAgICAgICAgICAgICAgdmFyIHBvcyA9IGFzc2lnbm1lbnQuaW5kZXhPZignPScpOwogICAgICAgICAgICAgICAgaWYgKHBvcyA+IC0xKSB7CiAgICAgICAgICAgICAgICAgIHZhbHVlc1thc3NpZ25tZW50LnN1YnN0cigwLCBwb3MpXSA9IGFzc2lnbm1lbnQuc3Vic3RyKHBvcyArIDEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBVcGRhdGUgImZpcnN0IHZpZXdlZCIgdGltZXN0YW1wCiAgICAgICAgICAgICAgdmFsdWVzLlRpbWVzdGFtcCA9IG1ha2VJU09UaW1lc3RhbXBVVEMoKTsKCiAgICAgICAgICAgICAgLy8gUmVjb21wb3NlIGluZm9ybWF0aW9uIGluIG1haW4gc3RvcmFnZSBjb29raWUKICAgICAgICAgICAgICBjb29raWUgPSAiTUdVSUQ9IjsKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7CiAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgICAgY29va2llICs9IGtleSArICI9IiArIHZhbHVlc1trZXldICsgIiYiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb29raWUgPSBjb29raWUuc3Vic3RyKDAsIChjb29raWUubGVuZ3RoIC0gMSkpOwoKICAgICAgICAgICAgICAvLyBVcGRhdGUgY29va2llCiAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRla19kb21haW5zIDogewogICAgICAgIC8vIGJ5OiBSZWVrLCBBbGV4YW5kZXIyNTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzg4CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzUxMgogICAgICAgIGhvc3QgOiBbJ3Rlay5ubycsICdnYW1lci5ubycsICd0ZWtub2ZpbC5ubycsICdpbnNpZGV0ZWxlY29tLm5vJywgJ3ByaXNndWlkZS5ubycsICdkaXNrdXNqb24ubm8nLCAndGVrbm9qb2JiLm5vJywgJ2FrYW0ubm8nLCAnaGFyZHdhcmUubm8nLCAnYW1vYmlsLm5vJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgIC8qCiAgICAgICAgICB2YXIgYWRfZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgICAgICAgIGFkX2ZyYW1lLm5hbWUgPSAiX2ZyYW1lIjsKICAgICAgICAgIGFkX2ZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFkX2ZyYW1lKTsKICAgICAgICAgIGFkX2ZyYW1lLmNvbnRlbnRXaW5kb3cud3JhcHBlZEpTT2JqZWN0LmluRklGID0gdHJ1ZTsKICAgICAgICAgICAqLwoKICAgICAgICAgIC8vIGZpeCAyNy4xMS4yMDE1CiAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgIHRhZyA6ICdkaXYnLAogICAgICAgICAgICBpZCA6ICdnb29nbGVfYWRzX2lmcmFtZV8nLAogICAgICAgICAgICBodG1sIDogJzxwPjwvcD4nLAogICAgICAgICAgICBhcHBlbmQgOiAnYm9keScKICAgICAgICAgIH0pOwoKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBsYW5ldGF0dm9ubGluZWhkX25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0NjcKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTU5CiAgICAgICAgaG9zdCA6IFsncGxhbmV0YXR2b25saW5laGQuYmxvZ3Nwb3QuJywgJ3BsYW5ldGF0dm9ubGluZWhkLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJy5hZHNhbnRpbG9rIHsgaGVpZ2h0OiAxcHg7IH0nKTsKICAgICAgICAgIC8vQWFrLnV3LmpRQW50aUFkc0Jsb2NrID0gZnVuY3Rpb24gKCl7fTsgLy8gZG9uJ3Qgd29yawogICAgICAgIH0KICAgICAgfSwKICAgICAgYmV0YV9zcGVlZHRlc3RfbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy82MjgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTYyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ4NAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlMi5vcmcvNTN5bWdoWDEKICAgICAgICBob3N0IDogWydiZXRhLnNwZWVkdGVzdC5uZXQnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZHNPb2tsYUNvbVJlYWNoYWJsZSA9IHRydWU7CiAgICAgICAgICBBYWsudXcuc2NyaXB0c0xvYWRlZCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmluYnVja3NfY29tIDogewogICAgICAgIC8vIGJ5OiBBbGV4YW5kZXIyNTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTQ1CiAgICAgICAgaG9zdCA6IFsnYmluYnVja3MuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LnRlc3RKdWljeVBheSA9IHRydWU7CiAgICAgICAgICBBYWsudXcudGVzdFNlbnNlUGF5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdoaXNreXByaWNlc19kb21haW5zIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjg0CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0VwcjV0UkVMCiAgICAgICAgaG9zdCA6IFsnd2hpc2t5cHJpanplbi5jb20nLCAnd2hpc2t5cHJpY2VzLmNvLnVrJywgJ3doaXNreXByZWlzZS5jb20nLCAnd2hpc2t5cHJpeC5mciddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lk9BX3Nob3cgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmljb2Jsb2dfb3JnIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTg0CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL01OSHBMczJWCiAgICAgICAgaG9zdCA6IFsnbmljb2Jsb2cub3JnJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNyYycpOwogICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGlfc2UgOiB7CiAgICAgICAgLy8gbm90ZTogYWRkIHRoaXMgcnVsZSBmb3IgY2hyb21lIHVzZXIKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMxOQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS85YkRQUXpNWAogICAgICAgIGhvc3QgOiBbJ2RpLnNlJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNoZWFkZXJfb3ZlcmxheScpOwogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNtZXNzYWdlX21vZGFsJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZWdvZ29fbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBQTQogICAgICAgIC8vIHNvdXJjZTE6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vY2NIUWczaG4KICAgICAgICAvLyBzb3VyY2UyOiBodHRwOi8vcGFzdGViaW4uY29tL2drMHZFUUhOCiAgICAgICAgLy8gbm90ZTogdHdvIGFkYmxvY2sgY2hlY2sKICAgICAgICBob3N0IDogWydtZWdvZ28ubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICJhZEJsb2NrIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAic2hvd0FkQmxvY2tNZXNzYWdlIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmdW5jdGlvbiAoKSB7fQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBsaWJlcnRhZGRpZ2l0YWxfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNjQyCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tLzZGenAwdnJFCiAgICAgICAgaG9zdCA6IFsnbGliZXJ0YWRkaWdpdGFsLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAiYWRfYWxyZWFkeV9wbGF5ZWQiLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZSA6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dywgInB1ZWRlTW9zdHJhckFkcyIsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCAgICAgCiAgICAgIGZvbGhhX3VvbF9jb21fYnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzOTYKICAgICAgICAvLyBzb3VyY2U6IGYoICggdHlwZW9mIHBheXdhbGxfYWNjZXNzID09ICJ1bmRlZmluZWQiIHx8IHBheXdhbGxfYWNjZXNzICE9IHRydWUgKSAmJiAoIHR5cGVvZiBmb2xoYV9hZHMgPT0gInVuZGVmaW5lZCIgfHwgZm9saGFfYWRzICE9IHRydWUgKSApIHsKICAgICAgICBob3N0IDogWydmb2xoYS51b2wuY29tLmJyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICJwYXl3YWxsX2FjY2VzcyIsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAiZm9saGFfYWRzIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdhbWVyX2NvbV90dyA6IHsKICAgICAgICAvLyBieTogbW1pczEwMDAKICAgICAgICAvLyB1c2Vyc2NyaXB0OiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL3NjcmlwdHMvMTY1MjUKICAgICAgICAvLyBpc3N1ZTogOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85NzUKICAgICAgICBob3N0IDogWydnYW1lci5jb20udHcnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dywgJ0FudGlBZCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhcm1vcmdhbWVzX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODQ1CiAgICAgICAgaG9zdCA6IFsnYXJtb3JnYW1lcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dywgJ2dhX2RldGVjdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYW5nYWhvc3RfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85NTcKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTU4CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0dycGJKRU5BCiAgICAgICAgaG9zdCA6IFsnbWFuZ2Fob3N0LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAidGVzdERpc3BsYXkiLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZSA6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpZGVvd29vZF90diA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMzOQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3ZpZGVvd29vZC50di9idWlsZC9hc3NldHMvanMvcGVtYmVkLTk3YTY0MGY2MjUuanMKICAgICAgICBob3N0IDogWyd2aWRlb3dvb2QudHYnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgQWFrLnV3LmNvbmZpZyA9IHt9OwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dy5jb25maWcsICJhZGJfcmVtaW5kIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbmZvam9ic19jb21fYnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzMzkKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vTFBnNjA5M1UKICAgICAgICAvLyByZWRpcmVjdDogaHR0cDovL3d3dy5pbmZvam9icy5jb20uYnIvbm9wdWJsaWNpdHkuYXNweAogICAgICAgIGhvc3QgOiBbJ2luZm9qb2JzLmNvbS5iciddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHdlYlVJID0gd2ViVUkgfHwge307CiAgICAgICAgICAgIHdlYlVJLlV0aWxzID0gd2ViVUkuVXRpbHMgfHwge307CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3ZWJVSS5VdGlscywgIlN0b3BBZEJsb2NrIiwgewogICAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgICAgdmFsdWUgOiBmdW5jdGlvbiAoKSB7fQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNsb3Vkd2ViY29weV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzcxNAogICAgICAgIGhvc3QgOiBbJ2Nsb3Vkd2ViY29weS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHNldFRpbWVvdXRDbG9uZSA9IEFhay51dy5zZXRUaW1lb3V0OwogICAgICAgICAgQWFrLnV3LnNldFRpbWVvdXQgPSBudWxsOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFhay51dy5zZXRUaW1lb3V0ID0gc2V0VGltZW91dENsb25lOwogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBuYXJraXZlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTY5CiAgICAgICAgaG9zdCA6IFsnbmFya2l2ZS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZGJsb2NrX3N0YXR1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHByZWdlbl9uZXQgOiB7CiAgICAgICAgaG9zdCA6IFsncHJlZ2VuLm5ldCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBza2lwIHBhZ2UgaW5mbwogICAgICAgICAgQWFrLnNldENvb2tpZSgncGduJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBwaHlzX29yZyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzY4CiAgICAgICAgaG9zdCA6IFsncGh5cy5vcmcnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5jaGtBQiA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgb252YXNvcnRpcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9b252YXNvcnRpci5jb20KICAgICAgICBob3N0IDogWydvbnZhc29ydGlyLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gK2FicCBydWxlIGFsdCBzb2x1dGlvbgogICAgICAgICAgQWFrLnV3LkplQmxvcXVlID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBmdWxsaGR6ZXZraV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZnVsbGhkemV2a2kuY29tCiAgICAgICAgaG9zdCA6IFsnZnVsbGhkemV2a2kuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyArYWJwIHJ1bGUgYWx0IHNvbHV0aW9uCiAgICAgICAgICBBYWsudXcuY2hlY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpbGxlX2lkZWFsZV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI1OAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8xNm1ubWVNYwogICAgICAgIGhvc3QgOiBbJ3ZpbGxlLWlkZWFsZS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vICthYnAgcnVsZSBhbHQgc29sdXRpb24KICAgICAgICAgIEFhay51dy5leGVjc3AgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG5vdHJlX3BsYW5ldGVfaW5mbyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjU4CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL3FyUzZRR0dFCiAgICAgICAgaG9zdCA6IFsnbm90cmUtcGxhbmV0ZS5pbmZvJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyArYWJwIHJ1bGUgYWx0IHNvbHV0aW9uCiAgICAgICAgICBBYWsudXcucHVicG9wID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBhcGttaXJyb3JfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNzgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjI0CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzc4CiAgICAgICAgaG9zdCA6IFsnYXBrbWlycm9yLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmRvQ2hlY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG10bGJsb2dfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85NDgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mb3J1bS9kaXNjdXNzaW9uLzc3NTMKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vQkZyRFBNNmIKICAgICAgICBob3N0IDogWydtdGxibG9nLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAncHVhYnMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSA6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFuaXptX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydhbml6bS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5zdG9wQWRCbG9jayA9IHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGlhcmlvaW5mb3JtYWNpb25fY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTUwCiAgICAgICAgaG9zdCA6IFsnZGlhcmlvaW5mb3JtYWNpb24uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdwcl9va3ZhbGlkYScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjbmJldGFfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMzAxCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL3ZYTkN6dHd4CiAgICAgICAgaG9zdCA6IFsnY25iZXRhLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnSkInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSA6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZW1hcmtlcl9oYWFyZXR6IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjkyCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL20wOGRrRFQ0CiAgICAgICAgaG9zdCA6IFsndGhlbWFya2VyLmNvbScsICdoYWFyZXR6LmNvLmlsJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdBZEJsb2NrVXRpbCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHZhbHVlIDoge30KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGlwb2Nhc190diA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydwaXBvY2FzLnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEFsc28gYWRkZWQgaW4gZGlzYWJsZUFsZXJ0Ym94CiAgICAgICAgICAvLyBObyBwb3B1cAogICAgICAgICAgQWFrLnNldENvb2tpZSgncG9wdXBfdXNlcl9sb2dpbicsICd5ZXMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIF8xNW1pbl9sdCA6IHsKICAgICAgICAvLyBub3RlOiByZWd1bGFyeSB1cGRhdGUgc2NyaXB0CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9MTVtaW4uaXQKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vWVdmM0hUcXIKICAgICAgICAvLyB0ZXN0OiBodHRwOi8vdGlueXVybC5jb20vaDZjNDMzNgogICAgICAgIGhvc3QgOiBbJzE1bWluLmx0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdST1VURScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogJ19iZV9yZWtsYW1vcycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2MyY2FzdHNfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTk5CiAgICAgICAgaG9zdCA6IFsnc2MyY2FzdHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbigpIHsKICAgICAgICAgICAgd2luZG93Ll9nYXEgPSB7IHB1c2g6ZnVuY3Rpb24oKSB7fSB9OwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAic2hvd2RpYWxvZyIsIHsKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgInNob3dQb3B1cDIiLCB7CiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZndW5ldHdvcmtfY29tIDogewogICAgICAgIC8vIGlzc3VlOgogICAgICAgIGhvc3QgOiBbJ3ZndW5ldHdvcmsuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnc3RvcEl0JywgMSk7CiAgICAgICAgICB2YXIgY2xvc2UgPSBBYWsuZ2V0RWxlbWVudCgnI3NvbWVfYWRfYmxvY2tfa2V5X2Nsb3NlJyk7CiAgICAgICAgICBpZiAoY2xvc2UpIHsKICAgICAgICAgICAgY2xvc2UuY2xpY2soKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtjcnlwdF93cyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjg2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvcHVsbC82NwogICAgICAgIGhvc3QgOiBbJ2xpbmtjcnlwdC53cyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRFbGVtZW50KCcjYWRfY29udCcsIHsKICAgICAgICAgICAgaWQgOiAnJywKICAgICAgICAgICAgc3R5bGUgOiAnZGlzcGxheTpibG9jazsnCiAgICAgICAgICB9KTsKICAgICAgICAgIEFhay5zZXRFbGVtZW50KCcjY29udGFpbmVyX2NoZWNrJywgewogICAgICAgICAgICBzdHlsZSA6ICdkaXNwbGF5Om5vbmU7JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBldmVudG9zcHB2X21lIDogewogICAgICAgIC8vIGlzc3VlOiAKICAgICAgICBob3N0IDogWydldmVudG9zcHB2Lm1lJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNuZjM3Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBib2xvcl90b2xpX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTUyCiAgICAgICAgaG9zdCA6IFsnYm9sb3ItdG9saS5jb20nXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBhZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiYW5uZXInKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhZCA9IGFkc1tpXTsKICAgICAgICAgICAgYWQuaW5uZXJIVE1MID0gJzxicj4nOwogICAgICAgICAgICBhZC5zdHlsZS5oZWlnaHQgPSAnMXB4JzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpdm9fc3ggOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI4MAogICAgICAgIGhvc3QgOiBbJ3Zpdm8uc3gnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBhbGVydCA9IEFhay5nZXRFbGVtZW50KCcjYWxlcnQtdGhyb3R0bGUnKTsKICAgICAgICAgIGlmIChhbGVydCkgewogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChhbGVydCk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYnV0dG9uID0gQWFrLmdldEVsZW1lbnQoJ2J1dHRvbiNhY2Nlc3MnKTsKICAgICAgICAgIGlmIChidXR0b24pIHsKICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTsKICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTsKICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdDb250aW51ZSB0byB2aWRlbyc7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGlucHV0ID0gQWFrLmdldEVsZW1lbnQoJ2lucHV0W25hbWU9InRocm90dGxlIl0nKTsKICAgICAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoaW5wdXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGx1eHlhZF9jb20gOiB7IC8vIHNraXAgcmVkaXJlY3QgbXlhbmltZXMubGkKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydsdXh5YWQuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCcvSW5mb3JtYXRpb24ucGhwJyA9PSBsb2NhdGlvbi5wYXRobmFtZSkgewogICAgICAgICAgICB2YXIgaHJlZiA9IGxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBocmVmLnN1YnN0cihocmVmLmluZGV4T2YoJ3VybD0nKSArIDQsIGhyZWYubGVuZ3RoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1ycGlyYWN5X2RvbWFpbnMgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0MDUKICAgICAgICBob3N0IDogWydtcnBpcmFjeS54eXonLCAnbXJwaXJhY3kuY2x1YiddLAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnRGVzYXRpdmEgbyBBZEJsb2NrIHBhcmEgY29udGludWFyJywKICAgICAgICAgICAgICBleHRlcm5hbCA6IGZhbHNlLAogICAgICAgICAgICAgIHJlbW92ZSA6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRicGxhbmV0X25ldCA6IHsKICAgICAgICAvLyBpc3N1ZTogUE0KICAgICAgICBob3N0IDogWydkYnBsYW5ldC5uZXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnbmV3bm9Nb3JlQWRzTm93JywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhaWRlbXVfZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6CiAgICAgICAgaG9zdCA6IFsnYWlkZW11LmZyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2FkYmxvY2tQb3B1cCcsIHRydWUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZWFtaV9pbiA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydlYW1pLmluJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdhZF9sb2NrZWQnLCAxKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJpZ2Rvd25sb2FkZXJfY29tIDogewogICAgICAgIC8vIGlzc3VlOgogICAgICAgIGhvc3QgOiBbJ2JpZ2Rvd25sb2FkZXIuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNhbnRpX2FkYmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZyZWVza2llcl9jb20gOiB7CiAgICAgICAgLy8gYnk6IEdvcmhpbGwKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNjM5CiAgICAgICAgLy8gbm90ZTogYWxzbyBhZGRlZCBsaXN0IHJ1bGUKICAgICAgICBob3N0IDogWydmcmVlc2tpZXIuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFkYi1ub3QtZW5hYmxlZCIpOwogICAgICAgICAgaWYgKGVsICE9PSBudWxsKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJkaXNwbGF5Iik7CiAgICAgICAgICB9CiAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlb0NvbnRhaW5lciIpOwogICAgICAgICAgaWYgKGVsICE9PSBudWxsKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJkaXNwbGF5Iik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBnYW1ldHJhaWxlcnNfY29tIDogewogICAgICAgIC8vIGlzc3VlOgogICAgICAgIGhvc3QgOiBbJ2dhbWV0cmFpbGVycy5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI2FkX2Jsb2NraW5nJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzY2FuX29uZXBpZWNlX25hcnV0b19teCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTgyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI3OQogICAgICAgIGhvc3QgOiBbJ3NjYW4tbXguY29tJywgJ29uZXBpZWNlLW14Lm5ldCcsICduYXJ1dG8tbXgubmV0J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRfYmxvY2tfdGVzdCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldEVsZW1lbnQoJyN5b3AnLCB7CiAgICAgICAgICAgIGlkIDogJycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gQml0Y29pbnMKICAgICAgYml0Y29pbmtlcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzIzMAogICAgICAgIGhvc3QgOiBbJ2JpdGNvaW5rZXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5jbGFpbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNFMzNGQ0NjWDJmVycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9vbmRvZ2VfY29faW4gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzM4NAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yMzIKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjMzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzIzNgogICAgICAgIGhvc3QgOiBbJ21vb25kb2dlLmNvLmluJywgJ21vb25saXRlY28uaW4nLCAnbW9vbmJpdC5jby5pbicsICdiaXRjb2luemVicmEuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNBQiwgI0U0NDJEdiwgI2VDQzVoJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiaXRjb2luZXJfbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNDkKICAgICAgICBob3N0IDogWydiaXRjb2luZXIubmV0JywgJ2xpdGVjb2luZXIubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I3Rlc3RlcicpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjYWQtdG9wJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiaXRjb2luc19ueF90YyA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydmcmVlYml0Y29pbnMubngudGMnLCAnZ2V0Yml0Y29pbnMubngudGMnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZF9ibG9ja190ZXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZnJlZWNvaW5zNF9tZSA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydmcmVlY29pbnM0Lm1lJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuY2hlY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICB0b3JyZW50X3R2X3J1IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy81MzcKICAgICAgICBob3N0IDogWyd0b3JyZW50LXR2LnJ1J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuY19Pb19BZHZlcnRfU2hvd24gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY3d0dl9jb20gOiB7CiAgICAgICAgLy8gYnk6IEthbGJhc2l0CiAgICAgICAgLy8gcHVsbDogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9wdWxsLzc2MwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNDAKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzYyCiAgICAgICAgaG9zdCA6IFsnY3d0di5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5DV1RWSXNBZEJsb2NraW5nID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmlsZF9kZSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1iaWxkCiAgICAgICAgaG9zdCA6IFsnYmlsZC5kZSddLAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnaHR0cDovL3d3dy5iaWxkLmRlL3dhL2xsL2JpbGQtZGUvdW5hbmdlbWVsZGV0LTQyOTI1NTE2LmJpbGQuaHRtbCcsCiAgICAgICAgICAgICAgZXh0ZXJuYWwgOiBmYWxzZSwKICAgICAgICAgICAgICByZXBsYWNlIDogWydqYXZhc2NyaXB0JywgJ3ZvaWQoMCk7J10uam9pbignOicpCiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgfQogICAgICB9LAogICAgICBpbm5fY29faWwgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzUzMgogICAgICAgIGhvc3QgOiBbJ2lubi5jby5pbCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIFRSQyA9IHt9OwogICAgICAgICAgICBUUkMuYmxvY2tlciA9IHsKICAgICAgICAgICAgICBzdGF0ZXMgOiB7CiAgICAgICAgICAgICAgICBBQlBfREVURUNUSU9OX0RJU0FCTEVEIDogLTIsCiAgICAgICAgICAgICAgICBBQlBfTk9UX0RFVEVDVEVEIDogMCwKICAgICAgICAgICAgICAgIEFCUF9ERVRFQ1RFRCA6IDEKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNyZWF0ZUJsb2NrRGV0ZWN0aW9uRGl2IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgaXNCbG9ja0RldGVjdGVkT25EaXYgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGlzQmxvY2tEZXRlY3RlZE9uQ2xhc3NOYW1lcyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZ2V0QmxvY2tlZFN0YXRlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiaGFza2FyX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1iaGFza2FyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZGl2eWFiaGFza2FyLmNvLmluCiAgICAgICAgaG9zdCA6IFsnYmhhc2thci5jb20nLCAnZGl2eWFiaGFza2FyLmNvLmluJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcub3BlblBvcFVwRm9yQnJlYWtQYWdlID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICBBYWsudXcuY2FuQUJQID0gdHJ1ZTsKICAgICAgICAgIEFhay51dy5jYW5SdW5BZHMgPSB0cnVlOwogICAgICAgICAgQWFrLnV3LmNhbkNoZWNrQWRzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHR1cmthbmltZV90diA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNDQ2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzOQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL3RyL2ZvcnVtL2Rpc2N1c3Npb24vNDI4Mi8KICAgICAgICBob3N0IDogWyd0dXJrYW5pbWUudHYnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZGJsb2NrYmxvY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5CbG9rS29udHJvbCA9IHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgd3RmYml0X2NoIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy80MDcKICAgICAgICBob3N0IDogWyd3dGZiaXQuY2gnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy53cml0ZUhUTUxhc0pTID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBhcmFuenVsbGFfaXQgOiB7CiAgICAgICAgLy8gYnk6IFJvYm90ZXgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1hcmFuenVsbGEuaXQKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20veU1NNllneFcKICAgICAgICBob3N0IDogWydhcmFuenVsbGEuaXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJyNhYnQxICsgU1RZTEUgKyBkaXZbaWRdW2NsYXNzXSB7ZGlzcGxheTpub25lO30nKTsKICAgICAgICB9LAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnbmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhJywKICAgICAgICAgICAgICBleHRlcm5hbCA6IGZhbHNlLAogICAgICAgICAgICAgIHJlbW92ZSA6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG5kdHZfY29tIDogewogICAgICAgIC8vIG5vdGU6IGNhblJ1bkFkcyBpbnZlcnRlZCB2YWx1ZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPW5kdHYuY29tCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2hjZm5jZHYKICAgICAgICBob3N0IDogWyduZHR2LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ19fX3BfX3AnLCAxKTsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnZ2V0Tm9Ub3BMYXRlc3ROZXdzJywgZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbGVzZWNob3NfZnIgOiB7CiAgICAgICAgLy8gUmVlaywgR2l3YXl1bWUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1sZXNlY2hvcy5mcgogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9DTU04V0dMagogICAgICAgIGhvc3QgOiBbJ2xlc2VjaG9zLmZyJywgJ2xlc2VjaG9zLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbigpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICJjaGVja0FkQmxvY2siLCB7CiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmNhbGxfQWQgPSAxOwogICAgICAgICAgQWFrLnV3LnBheXdhbGxfYWRibG9ja19hcnRpY2xlID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBiaXR2aXNpdHNfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yNjYKICAgICAgICBob3N0IDogWydiaXR2aXNpdHMuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYmxvY2tBZGJsb2NrVXNlciA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXhyYXBpZGxlZWNoX2luZm8gOiB7CiAgICAgICAgLy8gYnk6IEFsZXhhbmRlcjI1NSwgUmVlaywgR2l3YXl1bWUKICAgICAgICAvLyBwYXRjaDogaHR0cDovL3Bhc3RlYmluLmNvbS9RNjY0ZGlRMgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWV4cmFwaWRsZWVjaAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS81ZTI3c3lqQQogICAgICAgIGhvc3QgOiBbJ2V4cmFwaWRsZWVjaC5pbmZvJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICB2YXIgdG9tb3Jyb3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTsKCiAgICAgICAgICAvLyBwcmV2ZW50IHBvcHVwCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwb3BjYXNocHVDYXAnLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ3BvcGNhc2hwdScsIDEpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnbm9wb3BhdGFsbCcsIHRvbW9ycm93LmdldFRpbWUoKS50b1N0cmluZygpKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ25vYWR2dGRheScsIDApOwogICAgICAgICAgLy9BYWsuc2V0Q29va2llKCdidl9EU0tza2Rja19zMWQnLCAnYnZEU0tza2Rja3MxZCcpOwoKICAgICAgICAgIC8vIGhpZGUgbm90aWNlCiAgICAgICAgICBBYWsuYWRkU3R5bGUoJ2Rpdi5hbGVydC5hbGVydC1kYW5nZXIubGVhZCB7b3BhY2l0eTowO30nKTsKICAgICAgICAgIAogICAgICAgICAgLy8gcHJldmVudCByZWRpcmVjdCB0byB2ZXJpZnkgcGFnZQogICAgICAgICAgQWFrLnNldFJlYWRPbmx5KCdiZHZibnJfcGlkJywgW10pOwogICAgICAgICAgQWFrLnNldFJlYWRPbmx5KCdQb3BBZHMnLCAxKTsKCiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBwcmV2ZW50IHBvcHVwCiAgICAgICAgICAgICAgd2luZG93Lm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsKCiAgICAgICAgICAgICAgLy8gcHJldmVudCByZWRpcmVjdCB0byB2ZXJpZnkgcGFnZQogICAgICAgICAgICAgIHZhciBmcmFtZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgICBmcmFtZTEuc3JjID0gJ2h0dHA6Ly9iZGZybS5iaWR2ZXJ0aXNlci5jb20vQmlkVmVydGlzZXIuZGJtP3BpZD0zODM4NjUmYmlkPTE3Mzc0MTgmUkQ9JzsKICAgICAgICAgICAgICBmcmFtZTEuaWQgPSAnYmR2aSc7CiAgICAgICAgICAgICAgZnJhbWUxLnN0eWxlID0gJ2Rpc3BsYXk6bm9uZSc7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGZyYW1lMSk7CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpcGxlYWd1ZV9kb21haW5zIDogewogICAgICAgIC8vIG5vdGU6IGFsc28ga2lsbGVkIGJ5IEFha0xpc3QKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT12aXBib3gKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT12aXBsZWFndWUKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vTkVSVnpIelMKICAgICAgICBob3N0IDogWyJ2aXBsZWFndWUuaXMiLCAidmlwbGVhZ3VlLndzIiwgInZpcGxlYWd1ZS50diIsICJ2aXBsZWFndWUuc2UiLCAidmlwbGVhZ3VlLnR2IiwgInZpcGxlYWd1ZS5tZSIsICJ2aXBsZWFndWUubW9iaSIsICJ2aXBsZWFndWUuY28iLCAidmlwbGVhZ3VlLnN4IiwgInZpcGxlYWd1ZS5jaCIsICJ2aXBib3gudHYiLCAidmlwYm94LmNvIiwgInZpcGJveC5iaXoiLCAidmlwYm94LnN4IiwgInZpcGJveC5ldSIsICJ2aXBib3guc28iLCAidmlwYm94Lm51IiwgInZpcGJveHNhLmNvIiwgInN0cmlrZW91dC5jbyIsICJzdHJpa2VvdXQubWUiLCAiaG9tZXJ1bi5yZSIsICJ2aXBib3h0di5jbyIsICJ2aXBhcHAubWUiXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmlFeGlzdCA9IHRydWU7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCd4Y2xzdmlwJywgMSk7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi52aXBfMDUyeDAwMyB7IGhlaWdodDogMjUwcHg7IH0iKTsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLnZpcF8wOXg4MjcgeyBoZWlnaHQ6IDI2cHg7IH0iKTsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI292ZXJsYXkgeyBkaXNwbGF5OiBub25lOyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB6b29tdHZfbWUgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9em9vbXR2Lm1lCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL200ekFYR2N3CiAgICAgICAgaG9zdCA6IFsnem9vbXR2Lm1lJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuaWF4cEVuYWJsZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdmdfbm8gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI5MgogICAgICAgIC8vICthYnAgcnVsZQogICAgICAgIGhvc3QgOiBbJ3ZnLm5vJywgJ2UyNC5ubyddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Ll9fQUJfXyA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgcG9ybnZlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTQ3CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tLzdUUFBrcTEyCiAgICAgICAgaG9zdCA6IFsncG9ybnZlLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmFkeGp3dXBkYXRlID0gMTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxvbF9tb2FfdHcgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzExMTQKICAgICAgICBob3N0IDogWydsb2wubW9hLnR3J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBNb2FPYmogPSBNb2FPYmogfHwge307CiAgICAgICAgICAgIE1vYU9iai5hZCA9IE1vYU9iai5hZCB8fCB7fTsJCQkKICAgICAgICAgICAgTW9hT2JqLmFkLmhhc0FkYmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9OwogICAgICAgICAgICBNb2FPYmouYWQuY2hlY2tBQlAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtdWx0aXVwX29yZyA6IHsKICAgICAgICAvLyBieTogV2F0aWxpbgogICAgICAgIC8vIG5vdGU6IGFsdGVybmF0aXZlIHNvbHV0aW9uCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bXVsdGl1cC5vcmcKICAgICAgICBob3N0IDogWydtdWx0aXVwLm9yZyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aXNpdCcsIDEpOyAvLyBwcmV2ZW50IHBvcHVwCiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2hpJywgZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGFpbHliaXRjb2luc19vcmcgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwNwogICAgICAgIGhvc3QgOiBbJ2RhaWx5Yml0Y29pbnMub3JnJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJy5hZC1pbWcnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtvemFjemVrX3plYmVya2EgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQxNAogICAgICAgIGhvc3QgOiBbJ2tvemFjemVrLnBsJywgJ3plYmVya2EucGwnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnYWJsYycsIDEpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnY29va2llX3BvbGljeScsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc3Bhbmt3aXJlX3NpdGVzIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84ODcKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vVEZCMWR0Z2IKICAgICAgICBob3N0IDogWydzcGFua3dpcmUuY29tJywgJ2tlZXptb3ZpZXMuY29tJywgJ2V4dHJlbWV0dWJlLmNvbScsICdtb2Zvc2V4LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCJhYkNsb3NlZCIsICJ0cnVlIik7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCJoaWRlX2FkX21zZyIsICIxIik7CiAgICAgICAgfQogICAgICB9LAogICAgICB5b3Vwb3JuX25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg4NwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9URkIxZHRnYgogICAgICAgIGhvc3QgOiBbJ3lvdXBvcm4uY29tJywgJ3lvdXBvcm5nYXkuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoImFkYmxvY2tfbWVzc2FnZSIsICJjbG9zZWQiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNpdGF0aW9ubWFjaGluZV9uZXQgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9Y2l0YXRpb25tYWNoaW5lLm5ldAogICAgICAgIGhvc3QgOiBbJ2NpdGF0aW9ubWFjaGluZS5uZXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgic2JtX2NtX2NpdGF0aW9ucyIsIDApOwogICAgICAgIH0KICAgICAgfSwgICAgICAKICAgICAgcHNhcmlwc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1MwogICAgICAgIGhvc3QgOiBbJ3BzYXJpcHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkdmVydCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXh0cmF0b3JyZW50X2RvbWFpbnMgOiB7CiAgICAgICAgaG9zdCA6IFsnZXh0cmF0b3JyZW50LmNjJywgJ2V4dHJhdG9ycmVudC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgLy8gc291cmNlIGFyZSBvYmZ1c2NhdGVkIGluIGV4dGVybmFsIGpzCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwcHVfZGVsYXknLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ3BwdV9tYWluJywgMSk7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwcHVfc3ViJywgMSk7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwcHVfc2hvd19vbicsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG55X2N6IDogewogICAgICAgIGhvc3QgOiBbJ3RueS5jeicsICdwYXN0ZWQuY28nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgQWFrLnNldENvb2tpZSgnX18ucG9wdW5kZXJDYXAnLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ19fLnBvcHVuZGVyJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjbHViZWRvaGFyZHdhcmVfY29tX2JyIDogeyAvLyB0d28gYW50aWFkYmxvY2sKICAgICAgICBob3N0IDogWydjbHViZWRvaGFyZHdhcmUuY29tLmJyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChBYWsuY29udGFpbnMobG9jYXRpb24uaG9zdCwgJ2ZvcnVtJykpIHsKICAgICAgICAgICAgLy8gU29sdXRpb24gMQogICAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNiYW5uZXIsIHNjcmlwdCB7IGhlaWdodDogNTFweDsgfSIpOwogICAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNiYW5uZXInKTsKICAgICAgICAgIH0gZWxzZSB7IC8vIFdlYnNpdGUKICAgICAgICAgICAgLy8gU29sdXRpb24gMQogICAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2Rpdi5iYW5uZXJfdG9wbycpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKEFhay5jb250YWlucyhsb2NhdGlvbi5ob3N0LCAnZm9ydW0nKSkgewogICAgICAgICAgICAvLyBTb2x1dGlvbiAyCiAgICAgICAgICAgIEFhay51dy5hZGRCbG9ja2luZy5oaWRlKCk7CiAgICAgICAgICAgIEFhay51dy5hZGRCbG9ja2luZy5raWxsKCk7CiAgICAgICAgICB9IGVsc2UgeyAvLyBXZWJzaXRlCiAgICAgICAgICAgIC8vIFNvbHV0aW9uIDIKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pZCA9ICcnOwogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnLmFkYmxvY2snKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJhc3RhZ2lfY29tIDogewogICAgICAgIGhvc3QgOiBbJ2RlYnJhc3RhZ2kuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNzdHAtbWFpbicpOwogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNzdHAtYmcnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRkbGZyZW5jaF9vcmcgOiB7CiAgICAgICAgaG9zdCA6IFsnZGRsZnJlbmNoLm9yZyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEZpeCBidWcgZGlzcGxheSBjb250ZW50CiAgICAgICAgICBBYWsuc2V0RWxlbWVudCgnI2RsZS1jb250ZW50IC5kLWNvbnRlbnQnLCB7CiAgICAgICAgICAgICdjbGFzcycgOiAnJwogICAgICAgICAgfSk7CiAgICAgICAgICBBYWsuc2V0RWxlbWVudCgnI2NvbnRlbnQnLCB7CiAgICAgICAgICAgICdpZCcgOiAnJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZWdhZGVicmlkX2V1IDogewogICAgICAgIGhvc3QgOiBbJ21lZ2EtZGVicmlkLmV1J10sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBY3RpdmF0ZSBidXR0b24gZGVicmlkCiAgICAgICAgICBBYWsuc2V0RWxlbWVudCgnLnJlYWxidXR0b24nLCB7CiAgICAgICAgICAgICdvbmNsaWNrJyA6ICcnLAogICAgICAgICAgICAndHlwZScgOiAnc3VibWl0JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzbGlkZXBsYXllcl9kb21haW5zIDogewogICAgICAgIC8vIGJ5OiBBbGV4YW5kZXIyNTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMzMwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy81MTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjk2CiAgICAgICAgLy8gZGVtbzogaHR0cDovL3NsaWRlcGxheWVyLmZyL3NsaWRlLzEzMDQwMjYvIwogICAgICAgIGhvc3QgOiBbJ3NsaWRlcGxheWVyLionXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAvLyBEaXNhYmxlIGFudGktYWRibG9ja2VyCiAgICAgICAgICBBYWsudXcuZm9yY2VfcmVtb3ZlX2FkcyA9IHRydWU7CgogICAgICAgICAgLy8gQ2lyY3VtdmVudCAic2hhcmUgdG8gZG93bmxvYWQiIHJ1bGUKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2xpZGVfaWQgPSB3aW5kb3cuZ2V0X2N1cnJlbnRfc2xpZGVfaWQoKTsKICAgICAgICAgICAgdmFyIHNsaWRlX3NydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5ZXJfZnJhbWUiKS5zcmMuc3BsaXQoIi8iKVszXTsKICAgICAgICAgICAgdmFyIHRpbWUgPSA4NjQwMCArIE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApOwogICAgICAgICAgICB2YXIgc2VjcmV0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5zdHJ0cih3aW5kb3cuTUQ1LmJhc2U2NCgic2VjcmV0X3ByZXZlZCBzbGlkZXBsYXllciBuZXZlciBzb2x2ZWQgIiArIHRpbWUgKyBzbGlkZV9pZCArICIucHB0IiksICIrLyIsICItICIpKTsKCiAgICAgICAgICAgIHZhciB1cmwgPSAiaHR0cDovL3BsYXllci5zbGlkZXBsYXllci5vcmcvZG93bmxvYWQvIiArIHNsaWRlX3NydiArICIvIiArIHNsaWRlX2lkICsgIi8iICsgc2VjcmV0ICsgIi8iICsgdGltZSArICIvIiArIHNsaWRlX2lkICsgIi5wcHQiOwogICAgICAgICAgICB2YXIgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhLmRvd25sb2FkX2xpbmsiKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIC8qIFJlbW92ZSBvcmlnaW5hbCAic2hhcmUgdG8gZG93bmxvYWQiIHBvcHVwIGV2ZW50IGxpc3RlbmVyICovCiAgICAgICAgICAgICAgdmFyIGV2ZW50cyA9ICQuX2RhdGEobGlua3NbaV0pLmV2ZW50cy5jbGljazsKICAgICAgICAgICAgICBldmVudHMuc3BsaWNlKDAsIGV2ZW50cy5sZW5ndGgpOwoKICAgICAgICAgICAgICAvKiBTZXQgbm9ybWFsIGxpbmsgaHJlZiBpbnN0ZWFkICovCiAgICAgICAgICAgICAgbGlua3NbaV0uaHJlZiA9IHVybDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgIH0KICAgICAgfSwKICAgICAgYm9rZXBzcG90X2NvbSA6IHsKICAgICAgICBob3N0IDogWydib2tlcHNwb3QuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEhpZGUgRGlzY2xhaW1lcgogICAgICAgICAgQWFrLnNldENvb2tpZSgnaGlkZURpYWxvZycsICdoaWRlJyk7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBSZW1vdmUgRGlzYWJsZSBBZEJsb2NrCiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI3R1cGlrbGFuJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBwaWNsb2FkX2NvbSA6IHsKICAgICAgICBob3N0IDogWydwaWNsb2FkLm9yZyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwbF9hZGJsb2NrZXInLCBmYWxzZSk7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRzX2xvYWRlZCA9IHRydWU7CiAgICAgICAgICBBYWsudXcuaW1hZ2VBZHMgPSBmYWxzZTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdkaXZbb25jb250ZXh0bWVudT0icmV0dXJuIGZhbHNlOyJdJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmcmVlemVkb3dubG9hZF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnZnJlZXplZG93bmxvYWQuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKC9mcmVlemVkb3dubG9hZC5jb21cL2Rvd25sb2FkXC8vLnRlc3QobG9jYXRpb24uaHJlZikpIHsKICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJ2JvZHkgPiBkaXZbaWRdJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBtb25uc3V0b2dhdHlhX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogUE0KICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vMUx3NjBoNmsKICAgICAgICBob3N0IDogWydtb25uc3V0b2dhdHlhLmNvbSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI3NpdGUtYm94IHtkaXNwbGF5OmJsb2NrO30iKTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjZm9yLWFkLWJsb2NrZXInKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJhcGlkOF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsncmFwaWQ4LmNvbSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdkaXYuYmFja2sgKyAjYmxjb2tNemcnKTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdkaXYuYmFja2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHR1cmtkb3duX2NvbSA6IHsKICAgICAgICBob3N0IDogWyd0dXJrZG93bi5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyByZW1vdmUgZmFjZWJvb2sgYm94CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI2R1eXVydScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsbW92aXppamFfZG9tYWlucyA6IHsKICAgICAgICBob3N0IDogWydmaWxtb3ZpemlqYS5tZScsICdmaWxtb3ZpemlqYS5jb20nLCAnZmlsbW92aXppamEuaW4nLCAnZmlsbW92aXppamEubmV0J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLyoKICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTsKICAgICAgICAgIHZhciB3ZWVrZGF5ID0gWyJTdW5kYXkiLCAiTW9uZGF5IiwgIlR1ZXNkYXkiLCAiV2VkbmVzZGF5IiwgIlRodXJzZGF5IiwgIkZyaWRheSIsICJTYXR1cmRheSJdOwogICAgICAgICAgdmFyIG4gPSB3ZWVrZGF5W2QuZ2V0RGF5KCldOwogICAgICAgICAgQWFrLnNldEVsZW1lbnQoJyMnICsgbiwgewogICAgICAgICAgaHRtbCA6ICcnCiAgICAgICAgICB9KTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjJyArIG4pOwogICAgICAgICAgICovCiAgICAgICAgfQogICAgICB9LAogICAgICBoYWNraW50b3NoX3pvbmUgOiB7CiAgICAgICAgLy8gYnk6IEFsZXhhbmRlcjI1NQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWhhY2tpbnRvc2guem9uZQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlMi5vcmcvRG5COU9qNGYKICAgICAgICBob3N0IDogWydoYWNraW50b3NoLnpvbmUnXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwogICAgICAgICAgLy8gRmFrZSBHb29nbGUgYWQgZnJhbWUgY29udGVudAogICAgICAgICAgdmFyIGFkMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucyIpOwogICAgICAgICAgYWQxLmNsYXNzTmFtZSA9ICJhZHNieWdvb2dsZSI7CiAgICAgICAgICBhZDEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIkFBSyIpKTsKICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKGFkMSwgaGVhZC5jaGlsZE5vZGVzWzBdKTsKCiAgICAgICAgICAvKgogICAgICAgICAgLy8gRmFrZSBDbGVhbk15TWFjIGFkIGZyYW1lIHNpemUKICAgICAgICAgIHZhciBhZDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGFkMi5pZCAgPSAibnljdWhldmdxaSI7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYWQyLndyYXBwZWRKU09iamVjdCwgJ2NsaWVudEhlaWdodCcsIHt2YWx1ZTogMX0pOwogICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoYWQyLCBoZWFkLmNoaWxkTm9kZXNbMF0pOwogICAgICAgICAgICovCgogICAgICAgICAgdmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkc2Vuc2VncmV5Jyk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gQWFrLmltZ0JhaXQ7CiAgICAgICAgICAgIGVsZW1zW2ldLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgICAgfQoKICAgICAgICB9LAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnZGlzYWJsZSBBREJsb2NrIGNvbXBsZXRlbHknLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJpdmF0ZWluc3RhX2NvbSA6IHsKICAgICAgICBob3N0IDogWydwcml2YXRlaW5zdGEuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gKyBhYnAgcnVsZQogICAgICAgICAgQWFrLnV3LmRvbnRfc2Nyb2xsID0gZmFsc2U7CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgiI292ZXJsYXlfZGl2Iik7CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgiI292ZXJsYXlfbWFpbl9kaXYiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJpc2lrb2dlc3VuZGhlaXRfZGUgOiB7CiAgICAgICAgaG9zdCA6IFsncmlzaWtvLWdlc3VuZGhlaXQuZGUnXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2luZG93LnN0b3AoKTsKICAgICAgICAgIH0sIDUwMDApOwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25lcGxheWxpc3RfZXVfcG4gOiB7CiAgICAgICAgaG9zdCA6IFsnb25lcGxheWxpc3QuZXUucG4nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBraWxsIHBvcHVuZGVyCiAgICAgICAgICBBYWsudXcubWFrZVBvcHVuZGVyID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9LAogICAgICBvbm1lZGFfZGUgOiB7CiAgICAgICAgLy8gbm90ZTogc2NyaXB0IG9iZnVzY2F0ZWQgbGluZSAxMTEwCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi84NTc2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwNjcKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vcWY0NmJOM3oKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vUndIeUYwTkwKICAgICAgICBob3N0IDogWydvbm1lZGEuZGUnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy4kQURQID0gdHJ1ZTsKICAgICAgICAgIEFhay51dy5zYXNfY2FsbEFkID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICBBYWsudXcuc2FzX2NhbGxBZHMgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHR1cmJvZGVicmlkZXVyX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTk5CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU2MwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy81MjYKICAgICAgICBob3N0IDogWyd0dXJib2RlYnJpZGV1ci5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgIHRhZyA6ICdkaXYnLAogICAgICAgICAgICBpZCA6ICdwdWJkaXJlY3RlJywKICAgICAgICAgICAgaHRtbCA6ICc8aW1nICBzcmM9IicgKyBBYWsuaW1nQmFpdCArICciLz48YSAgaHJlZj0iIyI+Jm5ic3A7PC9hPicsCiAgICAgICAgICAgIGFwcGVuZCA6ICdib2R5JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICByb2NrZmlsZV9ldSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI1NgogICAgICAgIGhvc3QgOiBbJ3JvY2tmaWxlLmV1J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmNyZWF0ZUVsZW1lbnQoewogICAgICAgICAgICB0YWcgOiAnaWZyYW1lJywKICAgICAgICAgICAgc3JjIDogJ2Fib3V0OmJsYW5rJywKICAgICAgICAgICAgc3R5bGUgOiAndmlzaWJpbGl0eTpoaWRkZW47JywKICAgICAgICAgICAgYXBwZW5kIDogJ2JvZHknCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtidWNrc19hbnRpYWRibG9jayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTMyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ2OQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yNzcKICAgICAgICAvLyB2MzogaHR0cDovL3Bhc3RlYmluLmNvbS8wZ2g4TE1HSAogICAgICAgIC8vIG5vdGU6IG5vIHNvbHV0aW9uLCBhbnRpLWFkYmxvY2sgZGlmZmljdWx0IHRvIGJ5cGFzcyAtLT4gaHR0cDovL3Bhc3RlYmluLmNvbS8xTlJxN1d2WgogICAgICAgIGhvc3QgOiBbJ2xpbmtidWNrcy5jb20nLCAnbWluaXVybHMuY28nLCAncGljYnVja3MuY29tJywgJ3BpY3R1cmVzZXRjLm5ldCcsICdwbGFjZXBpY3R1cmVzLmNvbScsICdwb29udG93bi5uZXQnLCAncXFjLmNvJywgJ3F2dm8uY29tJywgJ3JlYWxmaWxlcy5uZXQnLCAncnFxLmNvJywgJ3NlcmlvdXNkZWFscy5uZXQnLCAnc2VyaW91c2ZpbGVzLmNvbScsICdzZXJpb3VzdXJscy5jb20nLCAnc2V4cGFsYWNlLmdzJywgJ3RoZXNlYmxvZ3MuY29tJywgJ3RoZXNlZmlsZXMuY29tJywgJ3RoZXNlZm9ydW1zLmNvbScsICd0aG9zZWdhbGxlcmllcy5jb20nLCAndGlueWJ1Y2tzLm5ldCcsICd0aW55bGlua3MuY28nLCAndG5hYnVja3MuY29tJywgJ3R1YmV2aXJhbC5jb20nLCAndWJlcnBpY3ouY29tJywgJ3ViZXJ2aWR6LmNvbScsICd1YnVja3MubmV0JywgJ3VnYWxsZXJpZXMubmV0JywgJ3VsdHJhZmlsZXMubmV0JywgJ3VybGJlYXQubmV0JywgJ3VybHB1bHNlLm5ldCcsICd3aGFja3l2aWR6LmNvbScsICd5b3VmYXAubWUnLCAneXl2LmNvJywgJ3p4eG8ubmV0JywgJ3pmZi5jbycsICdsaW5rYnVja3NkbnMuY28nLCAnbWluaXVybHMuY29tJywgJ2R5by5ncycsICdnb25ldmlyYWwuY29tJywgJ2VhZnlmc3VoLm5ldCcsICdzYXNvbnRud2MubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIGRvIG5vdGhpbmcuLi4KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtidWNrc192aXNpdHNjcmlwdCA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydyZWZlcmVuY2VtZWdhLmNvbScsICdmcGFiZC5jb20nLCAnY3JhY2thY2MuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIFNraXAgdmlzaXRTY3JpcHQgd2hlbiBzaXRlIHVzZSBDbG91ZEZsYXJlIFJvY2tldCBTY3JpcHQKICAgICAgICAgIEFhay5zZXRDb29raWUoJ19sYkdhdGVQYXNzZWQnLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtfdGwgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bGluay50bAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZyL2ZvcnVtL2Rpc2N1c3Npb24vODQzNwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8xTWtDbm1MNwogICAgICAgIGhvc3QgOiBbJ2xpbmsudGwnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcuYWRibG9jayB7IGhlaWdodDoxcHg7IH0nKTsKICAgICAgICAgIEFhay51dy5hZGJsb2NrZXIgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdzdHJlYW1fdmlkZW8gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzODIKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vRWlBUlZRWHQKICAgICAgICBob3N0IDogWyd3c3RyZWFtLnZpZGVvJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgnI2FkaXYgeyBoZWlnaHQ6NHB4OyB9Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBfNHNoYXJlZF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnNHNoYXJlZC5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBIaWRlICJEaXNhYmxlIEFkQmxvZGsiIG1lc3NhZ2VzCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgianNCbG9ja0RldGVjdCIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJvX2RvbWFpbnMgOiB7CiAgICAgICAgaG9zdCA6IFsncHJvLXppay53cycsICdwcm8tdGVjdC53cycsICdwcm8tZGRsLndzJywgJ3Byby1zcG9ydC53cyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aXNpdGVkZicsIHRydWUpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgndmlzaXRlZGgnLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbXB0b2lyaGFyZHdhcmVfY29tIDogewogICAgICAgIGhvc3QgOiBbJ2NvbXB0b2lyLWhhcmR3YXJlLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmFkYmxvY2sgPSAnbm9uJzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJha2Vyc2ZpZWxkX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNjU3CiAgICAgICAgLy8gbm90ZTogYWxzbyBzb2x1dGlvbiB0byBBYWtMaXN0CiAgICAgICAgaG9zdCA6IFsnYmFrZXJzZmllbGQuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuQURfU0xPVF9SRU5ERVJFRCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBla3N0cmFibGFkZXRfZGsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZWtzdHJhYmxhZGV0CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1IwMjlYcENyCiAgICAgICAgaG9zdCA6IFsnZWtzdHJhYmxhZGV0LmRrJywgJ2ViLmRrJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuQURURUNIID0ge307CiAgICAgICAgfQogICAgICB9LAogICAgICBwY2dhbWVzX2Rvd25sb2FkX25ldCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTQ1MQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZvcnVtL2Rpc2N1c3Npb24vOTMyOAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9FQlZaZzNWQgogICAgICAgIGhvc3QgOiBbJ3BjZ2FtZXMtZG93bmxvYWQubmV0J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdub0FkYmxvY2tOaWNlTWVzc2FnZScsIDEpOwogICAgICAgICAgQWFrLnV3Lm1nQ2FuTG9hZDMwNTQ3ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxhY2hhaW5lbWV0ZW9fY29tIDogewogICAgICAgIC8vIG5vdGU6IGFsc28ga2lsbGVkIGJ5IEFha0xpc3QKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTkwCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI0NQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yMTUKICAgICAgICBob3N0IDogWydsYWNoYWluZW1ldGVvLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmpzX2xvYWRlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYWM0ZXZlcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzk5NwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9SUW5DRVlLNgogICAgICAgIGhvc3QgOiBbJ21hYzRldmVyLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmNvcXVpbm91ID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBfNTI3OGJic19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9NTI3OGJicy5jb20KICAgICAgICBob3N0IDogWyc1Mjc4YmJzLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lm15YWFicGZ1bjEyID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICB0aGVzaW1zcmVzb3VyY2VfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPXRoZXNpbXNyZXNvdXJjZS5jb20KICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vREU5cmJqeFkKICAgICAgICBob3N0IDogWyd0aGVzaW1zcmVzb3VyY2UuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuZ2Fkc2l6ZSA9IHRydWU7CiAgICAgICAgICBBYWsudXcuaUhhdmVMb2FkZWRBZHMgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgeWVsbG93YnJpZGdlX2NvbSA6IHsKICAgICAgICBob3N0IDogWyd5ZWxsb3dicmlkZ2UuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuZmluYWxpemVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2FtZV9kZWJhdGVfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMzY2CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1V6c2lYMEZLCiAgICAgICAgaG9zdCA6IFsnZ2FtZS1kZWJhdGUuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRfYmxvY2tfdGVzdCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRzY2VuZG1lZGlhIDogewogICAgICAgIGhvc3QgOiBbJ2Fkc2NlbmRtZWRpYS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gYWRzY2VuZG1lZGlhIC0gaHR0cHM6Ly93d3cuYWRzY2VuZG1lZGlhLmNvbS8KICAgICAgICAgIHZhciByZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykuaHJlZiA9IGRvY3VtZW50LnJlZmVycmVyOwogICAgICAgICAgdmFyIGhvc3QgPSBsb2NhdGlvbi5ob3N0OwogICAgICAgICAgdmFyIHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTsKICAgICAgICAgIGlmIChBYWsuY29udGFpbnMocGF0aCwgJy93aWRnZXRfYWRibG9jay5waHAnKSAmJiAhQWFrLmNvbnRhaW5zKHJlZi5ob3N0LCBob3N0KSkgewogICAgICAgICAgICAvLyBBdXRvIHJlcG9ydAogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0Fkc2NlbmRtZWRpYScsIHJlZi5ob3N0LCBob3N0KTsKICAgICAgICAgICAgLy8gTm90aWZpY2F0aW9uCiAgICAgICAgICAgIEFhay5ub3RpZmljYXRpb24oJ1lvdSBtdXN0IHN1YnNjcmliZSB0byA8Yj5BYWtMaXN0IChBbnRpLUFkYmxvY2sgS2lsbGVyICk8L2I+IDxhIGhyZWY9IicgKyBBYWsuc3Vic2NyaWJlVVJMICsgJyIgdGFyZ2V0PSJfYmxhbmsiPlN1YnNjcmliZTwvYT4nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFkd29ya21lZGlhIDogewogICAgICAgIGhvc3QgOiBbJ2Fkd29ya21lZGlhLmNvbScsICdsb3h0ay5jb20nLCAnY29udGVudGxvY2tpbmduZXR3b3Jrcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gQWRXb3JrTWVkaWEgLSBodHRwczovL3d3dy5hZHdvcmttZWRpYS5jb20vCiAgICAgICAgICB2YXIgcmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLmhyZWYgPSBkb2N1bWVudC5yZWZlcnJlcjsKICAgICAgICAgIHZhciBob3N0ID0gbG9jYXRpb24uaG9zdDsKICAgICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7CiAgICAgICAgICBpZiAoQWFrLmNvbnRhaW5zKHBhdGgsICcvaGVscC9yZW1vdmVBQi5waHAnKSAmJiAhQWFrLmNvbnRhaW5zKHJlZi5ob3N0LCBob3N0KSkgewogICAgICAgICAgICAvLyBBdXRvIHJlcG9ydAogICAgICAgICAgICBBYWsuaW5mbygnQWR3b3JrbWVkaWEnLCByZWYuaG9zdCwgaG9zdCk7CiAgICAgICAgICAgIC8vIE5vdGlmaWNhdGlvbgogICAgICAgICAgICBBYWsubm90aWZpY2F0aW9uKCdZb3UgbXVzdCBzdWJzY3JpYmUgdG8gPGI+QWFrTGlzdCAoQW50aS1BZGJsb2NrIEtpbGxlciApPC9iPiA8YSBocmVmPSInICsgQWFrLnN1YnNjcmliZVVSTCArICciIHRhcmdldD0iX2JsYW5rIj5TdWJzY3JpYmU8L2E+Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyBQbGF5ZXJzCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgIGtpc3NhbmltZV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ1MQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zODEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMzAyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI1NwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNzgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTk2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU2CiAgICAgICAgaG9zdCA6IFsna2lzc2FuaW1lLmNvbScsICdraXNzYW5pbWUudG8nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gTWFza2luZyBhZHMKICAgICAgICAgIEFhay5hZGRTdHlsZSgnaWZyYW1lW2lkXj0iYWRzSWZybWUiXSwgLmRpdkNsb3NlQnV0IHsgZGlzcGxheTpub25lOyB9Jyk7CiAgICAgICAgICAvLyBTb2x1dGlvbiAxCiAgICAgICAgICBBYWsudXcuRG9EZXRlY3QyID0gbnVsbDsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAvLyBTb2x1dGlvbiAxIGFicCBydWxlCiAgICAgICAgICAvLyBAQHx8a2lzc2FuaW1lLmNvbV4kZWxlbWhpZGUKCiAgICAgICAgICB2YXIgZGl2Q29udGVudFZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RpdkNvbnRlbnRWaWRlbycpOwoKICAgICAgICAgIC8vIFNvbHV0aW9uIDIKICAgICAgICAgIGlmIChBYWsudXcuRG9EZXRlY3QyKSB7CiAgICAgICAgICAgIEFhay51dy5Eb0RldGVjdDIgPSBudWxsOwogICAgICAgICAgICBBYWsudXcuQ2hlY2tBZEltYWdlID0gbnVsbDsKICAgICAgICAgICAgQWFrLmluZm8oJ1NvbHV0aW9uIDInKTsKICAgICAgICAgIH0gLy9Tb2x1dGlvbiAzCiAgICAgICAgICBlbHNlIGlmIChkaXZDb250ZW50VmlkZW8pIHsKCiAgICAgICAgICAgIHZhciBkaXZEb3dubG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXZEb3dubG9hZCcpLmNsb25lTm9kZSh0cnVlKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGRpdkNvbnRlbnRWaWRlby5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICBBYWsudXcuRG9IaWRlRmFrZSgpOwogICAgICAgICAgICAgIGRpdkNvbnRlbnRWaWRlby5hcHBlbmRDaGlsZChkaXZEb3dubG9hZCk7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJ2lmcmFtZVtpZF49ImFkc0lmcm1lIl0sIC5kaXZDbG9zZUJ1dCcpOwogICAgICAgICAgICAgIEFhay5pbmZvKCdTb2x1dGlvbiAzJyk7CiAgICAgICAgICAgIH0sIDU1MDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgS2lzc2NhcnRvb25fbWUgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ4OAogICAgICAgIGhvc3QgOiBbJ2tpc3NjYXJ0b29uLm1lJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcueGFabEUgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdpZnJhbWVbaWRePSJhZHNJZnJtZSJdJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBvcGVubG9hZF9kb21haW5zIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPW9wZW5sb2FkCiAgICAgICAgaG9zdCA6IFsnb3BlbmxvYWQuY28nLCAnb3BlbmxvYWQuaW8nLCAnb3BlbmxvYWQudHYnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmFkYmxvY2sgPSBmYWxzZTsKICAgICAgICAgIEFhay51dy5hZGJsb2NrMiA9IGZhbHNlOwogICAgICAgICAgQWFrLnV3LnBvcEFkc0xvYWRlZCA9IHRydWU7CiAgICAgICAgICAvLyBoaWRlIGZha2UgcGxheSBidXR0b24gdXNlZCB0byBvcGVuIHBvcHVuZGVyCiAgICAgICAgICAvL0Fhay5hZGRTdHlsZSgnI3ZpZGVvb3ZlcmxheSB7IGRpc3BsYXk6bm9uZTsgfScpCiAgICAgICAgfQogICAgICB9LAogICAgICB5b3V3YXRjaF9vcmcgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9eW91d2F0Y2gKICAgICAgICAvLyB0ZXN0OiBodHRwOi8veW91d2F0Y2gub3JnL2VtYmVkLTU5cDdpM2Nka3NlMC00NTN4MzIwLmh0bWwKICAgICAgICAvLyB0ZXN0OiBodHRwOi8veW91d2F0Y2gub3JnLzU5cDdpM2Nka3NlMAogICAgICAgIGhvc3QgOiBbJ3lvdXdhdGNoLm9yZycsICdjaG91aGFhLmluZm8nLCAnYWh6YWhnNm9oYi5jb20nLCAnYWh6YWhnNm9oYi5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gc2tpcCBhbnRpLWFkYmxvY2sKICAgICAgICAgIEFhay51dy5hZHNTaG93UG9wdXAxID0gMTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHJlbm92ZSBhZHMgKyBmYWtlIHBsYXkgYnV0dG9uCiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI3BsYXllcl9pbWosICNwbGF5ZXJfaW1qICsgZGl2W2lkXScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXhhc2hhcmVfY29tIDogewogICAgICAgIC8vIGJ5OiBXYXRpbGluCiAgICAgICAgLy8gcHVsbDogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9wdWxsLzUxOQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWV4YXNoYXJlLmNvbQogICAgICAgIC8vIHRlc3Q6ICBodHRwOi8vZXhhc2hhcmUuY29tL2dhbHcyZ2Uya3pzdgogICAgICAgIGhvc3QgOiBbJ2V4YXNoYXJlLmNvbScsICdjaGVmdGkuaW5mbycsICdib2plbTNhLmluZm8nLCAnYWppaGV6by5pbmZvJywgJ3lhaG1haWIzYWkuY29tJywgJ3lhaG1haWIzYWkuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHNraXAgYW50aS1hZGJsb2NrCiAgICAgICAgICBBYWsudXcuYWRzU2hvd1BvcHVwMSA9IDE7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyByZW5vdmUgYWRzICsgZmFrZSBwbGF5IGJ1dHRvbgogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNwbGF5ZXJfZ2F6LCAjcGxheWVyX2dheiArIGRpdltpZF0nKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFuMW1lX3NlIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xOTAKICAgICAgICBob3N0IDogWydhbjFtZS5zZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBBYWsudXcuaXNCbG9ja0FkczIgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDAwKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhxcV90diA6IHsgLy8gcHV0bG9ja2VyLmlzCiAgICAgICAgaG9zdCA6IFsnaHFxLnR2J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gKyBhYnAgcnVsZQogICAgICAgICAgLy8gaHR0cDovL2hxcS50di9wbGF5ZXIvZW1iZWRfcGxheWVyLnBocD92aWQ9UjNER0hHM0dLWFg3JmF1dG9wbGF5PW5vCiAgICAgICAgICBpZiAoJy9wbGF5ZXIvZW1iZWRfcGxheWVyLnBocCcgPT0gbG9jYXRpb24ucGF0aG5hbWUpIHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtpZF49ImZvcm0tIl0nKS5zdWJtaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIFBvbGFuZAogICAgICB3cF9kb21haW5zIDogewogICAgICAgIC8vIE5vdGU6IGRpc2FibGUgRWFzeVByaXZhY3kKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTU2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzkwNQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zMDAKICAgICAgICBob3N0IDogWydiaXp0b2sucGwnLCAnd3AudHYnLCAnd3AucGwnLCAnc3BvcnRvd2VmYWt0eS5wbCcsICdrYWZldGVyaWEudHYnLCAna2FmZXRlcmlhLnBsJywgJy53cnp1dGEucGwnLCAncHVkZWxlay50dicsICdrb21lZGlvd28ucGwnLCAnc2ZvcmEucGwnLCAnYXV0b2tyYXRhLnBsJywgJ3Nwb3J0ZmFuLnBsJywgJ3dhd2Fsb3ZlLnBsJywgJ2hvdG1vbmV5LnBsJywgJ2FsZXNlcmlhbGUucGwnLCAnYmFib2wucGwnLCAnc25vYmthLnBsJywgJ25vY290eS5wbCcsICdtb25leS5wbCcsICdhYmN6ZHJvd2llLnBsJywgJ2dhZHpldG9tYW5pYS5wbCcsICdhdXRva3VsdC5wbCcsICdrb21vcmtvbWFuaWEucGwnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcHJldmVudCBwb3B1cCBhbnRpLWFkYmxvY2sgZnJvbSBhYmN6ZHJvd2llLnBsCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdBQkNBQkMnLCB0cnVlKTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIAogICAgICAgICAgQWFrLmhhc0VsZW1lbnQoJy53cC1wbGF5ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAKICAgICAgICAgICAgdmFyIHJlcGxhY2VQbGF5ZXJXUCA9IGZ1bmN0aW9uIChtaWQsIHBsYXllcikgewogICAgICAgICAgICAgIC8qIFJlcXVlc3QKICAgICAgICAgICAgICBodHRwOi8vZ2V0LndwLnR2Lz9taWQ9MTY2MTA1NgogICAgICAgICAgICAgIGh0dHA6Ly93cC50di9wbGF5ZXIvbWlkLDE2NjEwNTYsZW1iZWQuanNvbgogICAgICAgICAgICAgIGh0dHA6Ly9nZXQud3AudHYvP2Y9Mjg5NjQ2Mi4xNDI2MzI5MDU2OTA0Lmwud2VibSZybmQ9MQogICAgICAgICAgICAgIGh0dHBzOi8vd3AudHYvcGxheWVyL21pZCwxNzQ3MTE3LGVtYmVkLmpzb24KICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICBBYWsucmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmwgOiAnaHR0cDovL3dwLnR2L3BsYXllci9taWQsJyArIG1pZCArICcsZW1iZWQuanNvbicsCiAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgICAgICAgICAgICBBYWsubG9nKG9iaik7CgogICAgICAgICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgUGxheWVyLnZpZGVvanMocGxheWVyLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogQWFrLmZpeFByb3RvY29sVVJMKG9iai5jbGlwLnVybFsxXS51cmwpLCAvLyBIRAogICAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHJlcGxhY2VQbGF5ZXJXcnp1dGEgPSBmdW5jdGlvbiAoa2V5LCBjaGFubmVsLCBlbGVtKSB7CiAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53cnp1dGEucGwvbnBwL2VtYmVkL3dvbG5hcG9sc2thMi8wSTBIUTJtdXRKYwogICAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly93d3cud3J6dXRhLnBsL25wcC9lbWJlZC8nICsgY2hhbm5lbCArICcvJyArIGtleSwKICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICAgICAgICAgIEFhay5sb2cob2JqKTsKCiAgICAgICAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICAgICAgICBQbGF5ZXIudmlkZW9qcyhlbGVtLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogQWFrLmZpeFByb3RvY29sVVJMKG9iai51cmxbMF0udXJsKSwgLy9IRAogICAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gVXNpbmcgYW4gZXh0ZXJuYWwgZmxhc2ggcGxheWVyIGlzIGltcG9zc2libGUgYmVjYXVzZSBwcm90ZWN0ZWQgYnkgY3Jvc3Nkb21haW4ueG1sCiAgICAgICAgICAgIHZhciBwbGF5ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndwLXBsYXllcicpOyAvLyAgI1BsYXllcjAsICNQbGF5ZXIxLCAjbWFpblBsYXllcgogICAgICAgICAgICBpZiAocGxheWVycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAvLyBmaXhidWcgZ21feGhyIGxvb3AgcmVxdWVzdCAtIGh0dHA6Ly90aW55dXJsLmNvbS9wcWE5aHRxCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbWlkID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBwbGF5ZXJzW2ldOwogICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBsYXllci5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IHBsYXllci5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBwbGF5ZXIucXVlcnlTZWxlY3RvcignLnRpdGxlQ29udCBhLnRpdGxlJyk7CiAgICAgICAgICAgICAgICB2YXIgZW1iZWR2aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHRbc3JjKj0iL2VtYmVkX3ZpZGVvLmpzIl0nKTsKICAgICAgICAgICAgICAgIEFhay5sb2cocGxheWVyLCBwYXJlbnQsIHNjcmlwdCwgdGl0bGUpOwoKICAgICAgICAgICAgICAgIGlmIChlbWJlZHZpZGVvcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgLy8gcHVkZWxlay53cnp1dGEucGw6IGh0dHA6Ly90aW55dXJsLmNvbS9sOGpvNXYyCiAgICAgICAgICAgICAgICAgIC8vIHB1ZGVsZWsudHY6IGh0dHA6Ly90aW55dXJsLmNvbS9rbHl6aDZyLCBodHRwOi8vdGlueXVybC5jb20vejdmcjg5dgogICAgICAgICAgICAgICAgICAvLyBwdWRlbGVrLnR2ICh0cmlwbGUpOiBodHRwOi8vdGlueXVybC5jb20vbjliMjdvMgogICAgICAgICAgICAgICAgICAvLyBmaWxtLndwLnBsOiBodHRwOi8vdGlueXVybC5jb20vcTdrNWJ4cAogICAgICAgICAgICAgICAgICB2YXIgZW1iZWR2aWRlbyA9IGVtYmVkdmlkZW9zW2ldOwogICAgICAgICAgICAgICAgICB2YXIga2V5ID0gL2tleT0oXHcrKS8uZXhlYyhlbWJlZHZpZGVvLnNyYylbMV07CiAgICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gL2xvZ2luPShcdyspLy5leGVjKGVtYmVkdmlkZW8uc3JjKVsxXTsKICAgICAgICAgICAgICAgICAgdmFyIGF1dG9zdGFydCA9IC9hdXRvcGxheS8udGVzdChlbWJlZHZpZGVvLnNyYyk7CiAgICAgICAgICAgICAgICAgIHJlcGxhY2VQbGF5ZXJXcnp1dGEoa2V5LCBjaGFubmVsLCBwbGF5ZXIsIGF1dG9zdGFydCk7CiAgICAgICAgICAgICAgICAgIEFhay5sb2coJ2VtYmVkX3ZpZGVvLmpzJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRpdGxlICYmIC9taWQvLnRlc3QodGl0bGUuaHJlZikpIHsKICAgICAgICAgICAgICAgICAgLy8gc3BvcnRvd2VmYWt0eS5wbDogaHR0cDovL3Rpbnl1cmwuY29tL2w2emFiY3gKICAgICAgICAgICAgICAgICAgbWlkID0gdGl0bGUuaHJlZi5tYXRjaCgvbWlkWz0sXShbMC05XSspLyk7CiAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3RpdGxlLmhyZWYnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50LmlkKSB7CiAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuZGF0YXNldC51cmwpIHsKICAgICAgICAgICAgICAgICAgICAvLyB3cC50djogaHR0cDovL3Rpbnl1cmwuY29tL3B6ZGUyOXQKICAgICAgICAgICAgICAgICAgICBtaWQgPSBwYXJlbnQuZGF0YXNldC51cmwubWF0Y2goL21pZFs9LF0oWzAtOV0rKS8pOwogICAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3BhcmVudC5kYXRhc2V0LnVybCcpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucHJldmlvdXNTaWJsaW5nLmlubmVySFRNTCkgewogICAgICAgICAgICAgICAgICAgICAgLy8gd2lhZG9tb3NjaS53cC5wbDogaHR0cDovL3Rpbnl1cmwuY29tL2dxdHQ5Y2EKICAgICAgICAgICAgICAgICAgICAgIG1pZCA9IHBhcmVudC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MLm1hdGNoKC9taWRbPSxdKFswLTldKykvKTsKICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3NjcmlwdC5pbmxpbmUuaW5uZXJIVE1MJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIGthZmV0ZXJpYS50djogaHR0cDovL3Rpbnl1cmwuY29tL25vZnA1OGEKICAgICAgICAgICAgICAgICAgICAgIC8vIGFiY3pkcm93aWUucGw6IGh0dHA6Ly90aW55dXJsLmNvbS9oeDZzNWV0CiAgICAgICAgICAgICAgICAgICAgICBtaWQgPSBwYXJlbnQuaW5uZXJIVE1MLm1hdGNoKC9taWRbPSxdKFswLTldKykvKTsKICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3BhcmVudC5pbm5lckhUTUwnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NyaXB0ICYmIHNjcmlwdC50YWdOYW1lID09ICdTQ1JJUFQnKSB7CiAgICAgICAgICAgICAgICAgIC8vIGZpbG0ud3AucGw6IGh0dHA6Ly90aW55dXJsLmNvbS9taDlvbmZ3CiAgICAgICAgICAgICAgICAgIC8vIHB1ZGVsZWsudHYgKGRvdWJsZSk6IGh0dHA6Ly90aW55dXJsLmNvbS9sZWZ2d3R4CiAgICAgICAgICAgICAgICAgIG1pZCA9IHNjcmlwdC5pbm5lckhUTUwubWF0Y2goL21pZFs9LF0oWzAtOV0rKS8pOwogICAgICAgICAgICAgICAgICBBYWsubG9nKCdzY3JpcHQuc3JjLmlubmVySFRNTCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1pZCAhPT0gbnVsbCAmJiBtaWQubGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgICAgICAgcmVwbGFjZVBsYXllcldQKG1pZFsxXSwgcGxheWVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9qZV9maWxteV9uZXR3b3JrOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwMTAKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vN0cyUkJucXEKICAgICAgICBob3N0IDogWydtb2plLWZpbG15LnRrJywgJ21vamUtZmlsbXkubGl2ZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBzZWFyY2h2YWx1ZSA9IFsndmFyIHBsYXllckluc3RhbmNlJywgJ30pOyddOwogICAgICAgICAgdmFyIHNjcmlwdCA9IEFhay5oYXNTY3JpcHQoc2VhcmNodmFsdWVbMF0pOwoKICAgICAgICAgIGlmIChzY3JpcHQpIHsKICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNjcmlwdC5pbm5lckhUTUw7CiAgICAgICAgICAgIHZhciBzdHIgPSBzb3VyY2Uuc3Vic3RyaW5nKHNvdXJjZS5sYXN0SW5kZXhPZihzZWFyY2h2YWx1ZVswXSksIHNvdXJjZS5sYXN0SW5kZXhPZihzZWFyY2h2YWx1ZVsxXSkgKyBzZWFyY2h2YWx1ZVsxXS5sZW5ndGgpOwogICAgICAgICAgICBBYWsuYWRkU2NyaXB0KHN0cik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICB0dm5fcGwgOiB7CiAgICAgICAgLy8gYnk6IFJlZWssIE1hcmVrCiAgICAgICAgLy8gc29sdXRpb246IGh0dHA6Ly90aW55dXJsLmNvbS9vaGJ2ejRyLCBodHRwOi8vdGlueXVybC5jb20vanE4czQ2MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPXR2bi5wbAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPXR2bjI0LnBsCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9cGxheWVyLnBsCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL282ZDloNjYsIGh0dHA6Ly90aW55dXJsLmNvbS96NzdtNHpoCiAgICAgICAgaG9zdCA6IFsndHZuLnBsJywgJ3R2bjI0LnBsJywgJ3BsYXllci5wbCddLAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmhhc0VsZW1lbnQoJ2hlYWRlci5kZXRhaWxJbWFnZScsIGZ1bmN0aW9uICh0aGlzRWxlbWVudCkgewogICAgICAgICAgICBpZiAoQWFrLmdldENvb2tpZSgnY291bnRyeV9jb2RlJykgJiYgQWFrLmdldFNlc3Npb24oJ2dlbmVyYXRlVG9rZW4nKSkgewogICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5zcGxpdCgvWy4sXS8pOwogICAgICAgICAgICAgICAgdmFyIGlkID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMl07CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBwbGF0Zm9ybSA6ICJNb2JpbGUiLAogICAgICAgICAgICAgICAgICB0ZXJtaW5hbCA6ICJBbmRyb2lkIiwKICAgICAgICAgICAgICAgICAgZm9ybWF0IDogImpzb24iLAogICAgICAgICAgICAgICAgICB2IDogIjIuMCIsCiAgICAgICAgICAgICAgICAgIGF1dGhLZXkgOiAiYjRiYzk3MTg0MGRlNjNkMTA1YjMxNjY0MDNhYTFiZWEiLAogICAgICAgICAgICAgICAgICB0eXBlIDogImVwaXNvZGUiLAogICAgICAgICAgICAgICAgICBpZCA6IGlkLAogICAgICAgICAgICAgICAgICBzb3J0IDogIm5ld2VzdCIsCiAgICAgICAgICAgICAgICAgIG0gOiAiZ2V0SXRlbSIsCiAgICAgICAgICAgICAgICAgIGRldmljZVNjcmVlbkhlaWdodCA6IDE2MDAsCiAgICAgICAgICAgICAgICAgIGRldmljZVNjcmVlbldpZHRoIDogMjU2MAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBhcGkgPSAnaHR0cHM6Ly9hcGkudHZucGxheWVyLnBsL2FwaS8/JyArIEFhay5zZXJpYWxpemUocGFyYW1zKTsKICAgICAgICAgICAgICAgIHZhciBwcm94eSA9ICdodHRwOi8vd3d3LnByb3h5LnhtYy5wbC9pbmRleC5waHA/aGw9M2U1JnE9JzsJCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEdldCB2aWRlb1VybAogICAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICB1cmwgOiBBYWsuZ2V0Q29va2llKCdjb3VudHJ5X2NvZGUnKSAhPSAnUEwnID8gcHJveHkgKyBBYWsuZW5jb2RlVVJJKGFwaSkgOiBhcGksCiAgICAgICAgICAgICAgICAgIGhlYWRlcnMgOiB7CiAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiIDogIk1vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjI7IGVuLXVzOyBOZXh1cyAxMCBCdWlsZC9KVlAxNUkpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIFNhZmFyaS81MzQuMzAiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gcmVzdWx0LnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICBBYWsubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvVXJsID0gby5pdGVtLnZpZGVvcy5tYWluLnZpZGVvX2NvbnRlbnRbTnVtYmVyKEFhay5vcHRzLnZpZGVvSEQpXS51cmw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmVyYXRlVG9rZW4gPSBuZXcgRnVuY3Rpb24oJ3ZpZGVvVXJsJywgQWFrLmdldFNlc3Npb24oJ2dlbmVyYXRlVG9rZW4nKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvVXJsV2l0aFNlZWQgPSBnZW5lcmF0ZVRva2VuKHZpZGVvVXJsKTsKICAgICAgICAgICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgICBQbGF5ZXIudmlkZW9qcyh0aGlzRWxlbWVudCwgewogICAgICAgICAgICAgICAgICAgICAgc291cmNlIDogdmlkZW9VcmxXaXRoU2VlZCwKICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0sIHt9LCB7aW5zZXJ0Oidpbm5lcid9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoeyAvLyBnZXQgYW5kIHN0b3JlIGdlbmVyYXRlVG9rZW4gZnVuY3Rpb24KICAgICAgICAgICAgICAgIHVybCA6ICdodHRwOi8vcGFzdGViaW4uY29tL3Jhdy9EOXFNNERSMycsCiAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgQWFrLnNldFNlc3Npb24oJ2dlbmVyYXRlVG9rZW4nLCByZXMpOwogICAgICAgICAgICAgICAgICBBYWsucmVxdWVzdCh7IC8vIGdldCB1c2VyIGlwCiAgICAgICAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly9pcC1hcGkuY29tL2pzb24nLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgQWFrLnNldENvb2tpZSgnY291bnRyeV9jb2RlJywganNvbi5jb3VudHJ5Q29kZSk7CiAgICAgICAgICAgICAgICAgICAgICBBYWsucmVmcmVzaCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXBsYV90diA6IHsKICAgICAgICAvLyBieTogTWFyZWsKICAgICAgICAvLyBzb2x1dGlvbjogaHR0cDovL3Rpbnl1cmwuY29tL3B0YjR5YmcKICAgICAgICAvLyBpc3N1ZS4gaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTIyCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2h6N2dweHgKICAgICAgICBob3N0IDogWydpcGxhLnR2J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcuaHRtbDUtcGxheWVyLXdyYXBwZXIgeyBkaXNwbGF5Om5vbmU7IH0nKTsgLy8gY2hyb21lL29wZXJhCiAgICAgICAgICB2YXIgb2xkUGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh0bWw1LXBsYXllci13cmFwcGVyLCAjdm9kLXBsYXllcicpOwogICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICB1cmwgOiAnL1ZPRC9wbGF5LWluLWlwbGEvJyArIGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvdm9kLShcZCspLylbMV0sCiAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICB2YXIgdmlkZW9VUkw7CiAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgdmFyIGlkbiA9IHJlcy5tYXRjaCgvaXBsYTpcL1wvcGxheXZvZC0xXHwoW2EtejAtOV0rKS8pWzFdOwogICAgICAgICAgICAgIEFhay5sb2coaWRuKTsKICAgICAgICAgICAgICBBYWsucmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmwgOiAnaHR0cDovL2dldG1lZGlhLnJlZGVmaW5lLnBsL3ZvZHMvZ2V0X3ZvZC8/Y3BpZD0xJnVhPW1pcGxhLzIzJm1lZGlhX2lkPScgKyBpZG4sCiAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICB2YXIgbyA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICAgICAgICAgICAgQWFrLmxvZyhvKTsKICAgICAgICAgICAgICAgICAgaWYgKG8udm9kLnZpZGVvX2hkKSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9VUkwgPSBvLnZvZC52aWRlb19oZDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvLnZvZC52aWRlbykgewogICAgICAgICAgICAgICAgICAgIHZpZGVvVVJMID0gby52b2QudmlkZW87CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9VUkwgPSBvLnZvZC5jb3BpZXNbMF0udXJsOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgUGxheWVyLnZpZGVvanMob2xkUGxheWVyLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogdmlkZW9VUkwsCiAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdtcDQnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoIDogODIwLAogICAgICAgICAgICAgICAgICAgIGhlaWdodCA6IDQ1MCwKICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtvc2NpYW5fbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85MTQKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20veUdTUEJScWUKICAgICAgICBob3N0IDogWydrb3NjaWFuLm5ldCddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYW4nKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZWxlbXNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vZWxlbXNbaV0uaW5uZXJIVE1MID0gJzxicj4nOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gRnJhbmNlCiAgICAgIHBsYXl0dl9mciA6IHsgLy8gcmVzZWFyY2ggc29sdXRpb24KICAgICAgICBob3N0IDogWydwbGF5LnR2JywgJ3BsYXl0di5mciddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkge30sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7fQogICAgICB9LAogICAgICBybWNzcG9ydGJmbXR2X2NvbSA6IHsgLy8gd2VicmFkaW8KICAgICAgICBob3N0IDogWydybWNzcG9ydC5iZm10di5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgdmFyIGZsYXNodmFycyA9IHsKICAgICAgICAgICAgdXJsUmFkaW8gOiAiaHR0cDovL21wM2xnNC50ZGYtY2RuLmNvbS8xMDE2MC9ybWMubXAzIiwKICAgICAgICAgICAgbm9tIDogImxpdmUiLAogICAgICAgICAgICBjYXRlZ29yaWUgOiAibGl2ZSIsCiAgICAgICAgICAgIHVybFNtYXJ0IDogIiIgLy8gc2V0IGVtcHR5IHRvIHJlbW92ZSBhdWRpbyBhZAogICAgICAgICAgfTsKICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgIHdtb2RlIDogInRyYW5zcGFyZW50IgogICAgICAgICAgfTsKCiAgICAgICAgICBBYWsudXcuc3dmb2JqZWN0LmVtYmVkU1dGKCIvc3dmL1JNQ0xJVkUuc3dmIiwgImxpdmVwbGF5ZXIiLCAiNzAiLCAiOTAiLCAiMTAuMC4wIiwgIiIsIGZsYXNodmFycywgcGFyYW1zKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGVjbHlwc2lhX2NvbSA6IHsKICAgICAgICBob3N0IDogWydlY2x5cHNpYS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIFNvbHV0aW9uIDEKICAgICAgICAgIC8vIGFicCBydWxlcwoKICAgICAgICAgIC8vIFNvbHV0aW9uIDIKICAgICAgICAgIEFhay51dy5pc0FCQWN0aXZhdGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9OyAvLyBLaWxsIGFudGlhZGJsb2NrCiAgICAgICAgICBBYWsudXcucmVmcmVzaF9pZnJhbWUgPSBmdW5jdGlvbiAoKSB7fTsgLy8gU3RvcCBhZHMgdG8gYmUgbG9hZGVkCiAgICAgICAgfSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIFNvbHV0aW9uIDMKICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W2lkXj0id2VidHZfaWZyYW1lXyJdJyk7CiAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkgewogICAgICAgICAgICB2YXIgdmlkZW9JZCA9IGVsZW1lbnQuaWQuc3BsaXQoJ18nKVsyXTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnPGlmcmFtZSBmcmFtZWJvcmRlcj0iMCIgd2lkdGg9IjgxMiIgaGVpZ2h0PSI1MDAiIHNyYz0iaHR0cDovL3d3dy5kYWlseW1vdGlvbi5jb20vZW1iZWQvdmlkZW8vJyArIHZpZGVvSWQgKyAnP2xvZ289MCZhdXRvUGxheT0xJmF1dG9NdXRlPTAiPjwvaWZyYW1lPic7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgbTZ3ZWJfZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ2MQogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly90aW55dXJsLmNvbS9wdG4ydnJsCiAgICAgICAgaG9zdCA6IFsnbTZ3ZWIuZnInXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdvYmplY3RbaWQkPSJfZmxhc2hfYXBpIl0nKTsKICAgICAgICAgIHZhciBzY3JpcHQgPSBBYWsuaGFzU2NyaXB0KCdNNi5QbGF5ZXIuY29uZmlnJyk7CgogICAgICAgICAgaWYgKHBsYXllciAhPT0gbnVsbCAmJiBzY3JpcHQgIT09IG51bGwpIHsKICAgICAgICAgICAgdmFyIGZvdW5kID0gc2NyaXB0LmlubmVySFRNTC5tYXRjaCgvTTYuUGxheWVyLmNvbmZpZyA9IChcey4rXH0pOy8pOwogICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5wYXJzZShmb3VuZC5wb3AoKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZXBsYWNlIHBsYXllcgogICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgUGxheWVyLnZpZGVvanMocGxheWVyLnBhcmVudE5vZGUsIHsKICAgICAgICAgICAgICBzb3VyY2UgOiBjb25maWcuc291cmNlc1sxXS5zcmMsCiAgICAgICAgICAgICAgdHlwZSA6ICdtcDQnLAogICAgICAgICAgICAgIGF1dG9wbGF5IDogZmFsc2UKICAgICAgICAgICAgfSk7CgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2FtaW5ncm9vbV90diA6IHsKICAgICAgICBob3N0IDogWydnYW1pbmdyb29tLnR2J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRibG9ja19kZXRlY3QgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5HUl9hZGJsb2NrX2hpZGVfdmlkZW8gPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5hZGJsb2NrX3ZpZGVvX21zZ19zdGFydCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgICAgQWFrLnV3LmFkYmxvY2tfdmlkZW9fbXNnX3N0b3AgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5kaXNhYmxlX2NoYXQgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIEdlcm1hbnkKICAgICAgbm93X2RvbWFpbnMgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzMzNgogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly90aW55dXJsLmNvbS9wZWVvYm91CiAgICAgICAgLy8gdGVzdDogaHR0cDovL2pzYmluLmNvbS92dWNvYmVqb2ZvCiAgICAgICAgaG9zdCA6IFsndm94bm93LmRlJywgJ3J0bC1ub3cucnRsLmRlJywgJ3J0bDJub3cucnRsMi5kZScsICduLXR2bm93LmRlJywgJ3N1cGVycnRsbm93LmRlJywgJ3J0bG5pdHJvbm93LmRlJywgJ25vd3R2LmRlJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLyoKICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgUGxheWVyLmVkaXRpbmcoJyN2aWRlb3BsYXllcicsIHsKICAgICAgICAgIHVuc2V0Rmxhc2h2YXJzIDogJ2FiY2hlY2tfZW5hYmxlZCxhZGNhbGwsYWRjbGFzc2VzLGFkY29uZmlnLGFkbWV0YSxhZHNsb2csYWdvZixhbWEsYW5nZWJvdCxhcyxhc3BhcnRzLGJyZWFrYWQsY29ubmVjdGlvbmNoZWNrLGNzbG9nLGRldixkaW1tZXIsZXJyb3Jsb2csZmVlZGJhY2ssZm1zaWRlbnQsZ3R2LGhpZ2hsaWdodHMsaXZ3LGl2d19wbGF5LGpzLGpzX2V2ZW50X2Z1bmN0aW9uLGxvZ28sbG9nb19iYXNld2lkdGgsbG9nb3BvcyxuaWVsc2VuLG9yZCxvc21mLHN2bSx0aWxlLHZpZGVvcGxhemEsdmlkZW9wbGF6YV9iYXNlX3VybCx2aWRlb3BsYXphX3NoYXJlLHZpZGVvcGxhemFfdGFnLHZwRW52aXJvbm1lbnRVUkwseGwnCiAgICAgICAgICB9KTsKICAgICAgICAgICAqLwogICAgICAgIH0KICAgICAgfSwKICAgICAgcnRsX2RlIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTQxCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2g3Y2N2cXEKICAgICAgICBob3N0IDogWydydGwuZGUnXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbZGF0YS13aWRnZXQ9InZpZGVvIl0nKSkubWFwKGZ1bmN0aW9uICh2aWRlbykgewogICAgICAgICAgICB2YXIgY2ZnID0gQWFrLmludG9PYmplY3QodmlkZW8uZGF0YXNldC5wbGF5ZXJMYXllckNmZyk7CiAgICAgICAgICAgIHZhciBmaWxlID0gY2ZnLnZpZGVvaW5mby5tcDR1cmw7CiAgICAgICAgICAgIEFhay5sb2codmlkZW8sIGNmZywgZmlsZSk7CgogICAgICAgICAgICAvLyBSZXBsYWNlIHBsYXllcgogICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgUGxheWVyLnZpZGVvanModmlkZW8sIHsKICAgICAgICAgICAgICBzb3VyY2UgOiBmaWxlLAogICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBteXNwYXNzX2RlIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy83NgogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly90aW55dXJsLmNvbS9sdG85cHlkCiAgICAgICAgaG9zdCA6IFsnbXlzcGFzcy5kZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB2aWRlb2lkID0gbG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL1wvKFxkKylcLyQvKTsKCiAgICAgICAgICBpZiAodmlkZW9pZCAhPT0gbnVsbCkgewogICAgICAgICAgICBBYWsucmVxdWVzdCh7CiAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly93d3cubXlzcGFzcy5kZS9teXNwYXNzL2luY2x1ZGVzL2FwcHMvdmlkZW8vZ2V0dmlkZW9tZXRhZGF0YXhtbC5waHA/aWQ9JyArIHZpZGVvaWRbMV0sCiAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICBBYWsubG9nKHJlcyk7CgogICAgICAgICAgICAgICAgLy8gR2V0IHZpZGVvCiAgICAgICAgICAgICAgICB2YXIgcGFyc2VyID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTsKICAgICAgICAgICAgICAgIHZhciBkb20gPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlcywgImFwcGxpY2F0aW9uL3htbCIpOwogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBkb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInVybF9mbHYiKS5pdGVtKDApLnRleHRDb250ZW50OwoKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBlbGVtZW50cwogICAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJ2Rpdi5sb2FkaW5nR2lmJyk7CgogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSBwbGF5ZXIKICAgICAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICAgICAgUGxheWVyLnZpZGVvanMoJyNwbGF5ZXInLCB7CiAgICAgICAgICAgICAgICAgIHNvdXJjZSA6IGZpbGUsCiAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyBOZWRlcmxhbmQKICAgICAgcnRseGxfbmwgOiB7CiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2wyemt2M2QKICAgICAgICBob3N0IDogWydydGx4bC5ubCcsICdydGxuaWV1d3MubmwnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgUGxheWVyLmVkaXRpbmcoJyNfcnRsb3NtZjAnLCB7CiAgICAgICAgICAgIHNldEZsYXNodmFycyA6IHsKICAgICAgICAgICAgICBhZGJsb2NrIDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyBOb3J3YXkKICAgICAgdmd0dl9uZXR3b3JrIDogewogICAgICAgIC8vIG5vdGU6IHNraXAgdmlkZW8gYWRzICsgYW50aS1hZGJsb2NrCiAgICAgICAgLy8gandwbGF5ZXI6IGh0dHA6Ly90aW55dXJsLmNvbS96eXY3OWhnCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0MDIKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMzY3CiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL253cDg1dCwgaHR0cDovL3Rpbnl1cmwuY29tL253cDg1dAogICAgICAgIGhvc3QgOiBbJ3ZndHYubm8nLCAndmcubm8nXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBvbGRIYXNoID0gbnVsbDsKICAgICAgICAgIHZhciB2aWRlb0lkID0gbnVsbDsKICAgICAgICAgIHZhciB2aWRlb0lkUmVnZXggPSAvI1whXC92aWRlb1wvKFxkKylcLy87CgogICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGxvY2F0aW9uIGhhc2ggY2hhbmdlcwogICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGxheWVyID0gQWFrLmdldEVsZW1lbnQoJy52aWRlby1wbGF5ZXInKTsKCiAgICAgICAgICAgIGlmIChwbGF5ZXIgJiYgbG9jYXRpb24uaGFzaCAhPSBvbGRIYXNoICYmIHZpZGVvSWRSZWdleC50ZXN0KGxvY2F0aW9uLmhhc2gpKSB7CiAgICAgICAgICAgICAgb2xkSGFzaCA9IGxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgICAgdmlkZW9JZCA9IG9sZEhhc2gubWF0Y2godmlkZW9JZFJlZ2V4KVsxXTsKLyoKICAgICAgICAgICAgICB2YXIgaGxzdXJsID0gJ2h0dHBzOi8vc3Zwc2VjdXJlaGR2b2QtdmguYWthbWFpaGQubmV0L2kvMjAxNi8wMy8yMDE2MDMxMl81NmU0MjFmODZhZjQ1X3ZnMDEvLDEyODBfNzIwXzM1MDAsOTYwXzU0MF8xNTAwLDY0MF8zNjBfODAwLDQ4MF8yNzBfNTAwLC5tcDQuY3NtaWwvbWFzdGVyLm0zdTgnOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllcikKCiAgICAgICAgICAgICAgLy8gZG9uJ3Qgd29yayB3aXRoIGNocm9tZQogICAgICAgICAgICAgIC8vIHBsYXllci5pbm5lckhUTUwgPSAnPGRpdiBpZD0ibm9BZFBsYXllciI+VGhpcyB0ZXh0IHdpbGwgYmUgcmVwbGFjZWQgd2l0aCBhIHBsYXllci48L2Rpdj4nOwoKCiAgICAgICAgICAgICAgLy8gY2FuJ3QgbG9hZCBtM3U4IDQwMzIgc3RhdHVzIGNvZGUKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHVuc2FmZVdpbmRvdy5qd3BsYXllcikKCiAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly9zdnAudmcubm8vc3ZwL2FwaS92MS92Z3R2L2Fzc2V0cy8nICsgdmlkZW9JZCArICc/YWRkaXRpb25hbD1zZXR0aW5nc3xjaGFwdGVyc3xjdWVQb2ludHN8ZXh0ZXJuYWxJZHxiYXJyZWxzfGV4dGVybmFsQ2F0ZWdvcnlJZHxuZXh0QXNzZXQmYXBwTmFtZT12Z3R2LXdlYnNpdGUnLAogICAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICB2YXIgcmVzID0gcmVzdWx0LnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICAgICAgICAgICAgQWFrLmxvZyhvYmopOwoKICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSBwbGF5ZXIKICAgICAgICAgICAgICAgICAgdmFyIFBsYXllciA9IG5ldyBBYWsucGxheWVyKCk7CiAgICAgICAgICAgICAgICAgIFBsYXllci52bGMocGxheWVyLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogb2JqLnN0cmVhbVVybHMuaGxzLCAvLyBtM3U4CiAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdobHMnLAogICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5IDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwge30sIHsKICAgICAgICAgICAgICAgIGluc2VydCA6ICdpbm5lcicKICAgICAgICAgICAgICB9KTsKKi8KICAgICAgICAgICAgfQogICAgICAgICAgfSwgMWUzKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG10Z19yYWRpbyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTQ5NQogICAgICAgIGhvc3QgOiBbJ3BsYXkucmFkaW8xLnNlJywgJ3BsYXkuYmFuZGl0LnNlJywgJ3BsYXkubHVnbmFmYXZvcml0ZXIuY29tJywgJ3BsYXkucml4Zm0uc2UnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB3aW5kb3cucGxheWVyX2xvYWRfbGl2ZSh3aW5kb3cuc3RyZWFtX2lkKTsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRwbGF5X25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0NjMKICAgICAgICBob3N0IDogWydkcGxheS5jb20nLCAnZHBsYXkuZGsnLCAnZHBsYXkuc2UnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMzY1KTsKICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICJub3RpZmljYXRpb25TdWJtaXNzaW9uIiA6ICJzdWJtaXR0ZWQiLAogICAgICAgICAgICAgICJyZXBvcnRpbmdFeHBpcnkiIDogdGltZXN0YW1wLAogICAgICAgICAgICAgICJub3RpZmljYXRpb25FeHBpcnkiIDogdGltZXN0YW1wCiAgICAgICAgICAgIH0pOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnZHNjLWFkYmxvY2snLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICB2aWFzYXRfdHYgOiB7CiAgICAgICAgLy8gbm90ZTogc2tpcCB2aWRlbyBhZHMgKyBhbnRpLWFkYmxvY2sKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT10djNwbGF5CiAgICAgICAgLyogdGVzdDogaHR0cDovL3d3dy50djNwbGF5Lm5vL3Byb2dyYW1tZXIvcmVkbmluZ3Nza295dGEgaGRzL2hscwogICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy50djNwbGF5LmRrL3Byb2dyYW1tZXIvbGluc2Utb2ctZGlkZGUtZWtzdHJhIGhkcy9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly93d3cudHYzcGxheS5zZS9wcm9ncmFtL2dsYW1vdXJhbWEgaGRzL2hscwogICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy50djZwbGF5LnNlL3Byb2dyYW0vOTktc2FrZXItbWFuLW1hc3RlLWdvcmEtaW5uYW4tbWFuLWRvciBoZHMvaGxzCiAgICAgICAgICAgICAgICAgICBodHRwOi8vd3d3LnR2OHBsYXkuc2UvcHJvZ3JhbS9lZnRlcmx5c3QtLTEgaGRzL2hscwogICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy50djEwcGxheS5zZS9wcm9ncmFtL2dhcnBlbnMtZXVyb3BhIGhkcy9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly90dnBsYXkuc2thdGllcy5sdi9wYXJyYWlkZXMvdHYzLXppbmFzIGhkcy9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly9wbGF5LnR2My5sdC9wcm9ncmFtb3MvYmVhdG9zLXZpcnR1dmUgcnRtcC9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly90djNwbGF5LnR2My5lZS9zaXN1L3B1aGFwYWV2LXNlcG9nYSBydG1wL2hscyAqLwogICAgICAgIGhvc3QgOiBbJ3R2M3BsYXkubm8nLCAndHYzcGxheS5kaycsICd0djNwbGF5LnNlJywgJ3R2NnBsYXkuc2UnLCAndHY4cGxheS5zZScsICd0djEwcGxheS5zZScsICd0dnBsYXkuc2thdGllcy5sdicsICdwbGF5LnR2My5sdCcsICd0djNwbGF5LnR2My5lZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5oYXNFbGVtZW50KCcjdmlkZW8tcGxheWVyJywgZnVuY3Rpb24gKHRoaXNFbGVtZW50KSB7CiAgICAgICAgICAgIHRoaXNFbGVtZW50LmlkID0gJyc7CiAgICAgICAgICAgIC8vdmFyIHZpZGVvSWQgPSBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpOwogICAgICAgICAgICB2YXIgdmlkZW9JZCA9IHRoaXNFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS12aWRlby1pZCcpOwogICAgICAgICAgICBBYWsubG9nKHRoaXNFbGVtZW50LCB2aWRlb0lkKTsKCiAgICAgICAgICAgIC8vIGdldCB2aWRlbyBzb3VyY2VzCiAgICAgICAgICAgIEFhay5yZXF1ZXN0KHsKICAgICAgICAgICAgICB1cmwgOiAnaHR0cDovL3BsYXlhcGkubXRneC50di92My92aWRlb3Mvc3RyZWFtLycgKyB2aWRlb0lkLAogICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICAgICAgICAgIEFhay5sb2cob2JqKTsKCiAgICAgICAgICAgICAgICAvKiBJbm5ob2xkZXQgZHUgcHLDuHZlciDDpSBzZSBlciBrdW4gdGlsZ2plbmdlbGlnIGZvciBicnVrZXJlIGkgTm9yZ2UKICAgICAgICAgICAgICAgIFByb2dyYW1tZXQgZXIgYmxva2VyZXQgZm9yIHZpc25pbmcgZnJhIGRlbm5lIGdlb2dyYWZpc2tlIHBvc2l0aW9uLgogICAgICAgICAgICAgICAgUHJvZ3JhbcSFIGdhbGl0ZSBtYXR5dGkgdGlrIGp1bmdkYW1pZXNpIGnFoSBMaWV0dXZvcyBpbnRlcm5ldG8gdGlla8SXasWzIHRpbmtsxbMgKi8KICAgICAgICAgICAgICAgIGlmIChvYmoubXNnKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzRWxlbWVudC5pbm5lckhUTUwgPSBvYmoubXNnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5ob3N0ID09PSAndHYzcGxheS50djMuZWUnKSB7CiAgICAgICAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICAgICAgICBQbGF5ZXIuZ3JpbmRwbGF5ZXIodGhpc0VsZW1lbnQsIHsKICAgICAgICAgICAgICAgICAgICBzb3VyY2UgOiBvYmouc3RyZWFtcy5tZWRpdW0sCiAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdydG1wL21wNCcsCiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIHZpZGVvIHRhZyBmb3IgbmV3IHBsYXllcgogICAgICAgICAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgICAgICAgICAgdGFnIDogJ3ZpZGVvJywKICAgICAgICAgICAgICAgICAgICBpZCA6ICdub0FkUGxheWVyJywKICAgICAgICAgICAgICAgICAgICBjbGFzc2lkIDogJ3ZpZGVvLWpzIHZqcy1kZWZhdWx0LXNraW4nLAogICAgICAgICAgICAgICAgICAgIHdpZHRoIDogdGhpc0VsZW1lbnQuY2xpZW50V2lkdGggfHwgNzMwLAogICAgICAgICAgICAgICAgICAgIGhlaWdodCA6IHRoaXNFbGVtZW50LmNsaWVudEhlaWdodCB8fCA0MTAsCiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZCA6ICdhdXRvJywKICAgICAgICAgICAgICAgICAgICBjb250cm9scyA6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2UgOiB0aGlzRWxlbWVudAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIHNvdXJjZXMKICAgICAgICAgICAgICAgICAgdmFyIHNyY0FycmF5ID0gW107CiAgICAgICAgICAgICAgICAgIGlmIChvYmouc3RyZWFtcy5oaWdoICYmIG9iai5zdHJlYW1zLmhpZ2ggIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgc3JjQXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogInZpZGVvL21wNCIsIC8vIG1wNAogICAgICAgICAgICAgICAgICAgICAgc3JjIDogb2JqLnN0cmVhbXMuaGlnaAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9ICBpZiAob2JqLnN0cmVhbXMuaGxzICYmIG9iai5zdHJlYW1zLmhscyAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICBzcmNBcnJheS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiAiYXBwbGljYXRpb24veC1tcGVnVVJMIiwgLy8gbTN1OAogICAgICAgICAgICAgICAgICAgICAgc3JjIDogb2JqLnN0cmVhbXMuaGxzCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gIGlmIChvYmouc3RyZWFtcy5tZWRpdW0gJiYgb2JqLnN0cmVhbXMubWVkaXVtICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gb2JqLnN0cmVhbXMubWVkaXVtLmluZGV4T2YoJ3J0bXAnKSA9PT0gMCA/ICdydG1wL21wNCcgOiAnYXBwbGljYXRpb24vZjRtK3htbCc7CiAgICAgICAgICAgICAgICAgICAgc3JjQXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIHNyYyA6IG9iai5zdHJlYW1zLm1lZGl1bQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIEFhay5sb2coc3JjQXJyYXksIEpTT04uc3RyaW5naWZ5KHNyY0FycmF5KSk7CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIG5ldyBwbGF5ZXIKICAgICAgICAgICAgICAgICAgQWFrLmFkZFNjcmlwdChBYWsuaW50b1N0cmluZyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblZqc1JlYWR5KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93LnZpZGVvanMgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmpzUmVhZHkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnZpZGVvanMoIm5vQWRQbGF5ZXIiKS5zcmMoL19TT1VSQ0VTXy8pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvblZqc1JlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICAgICAgICAgIH0pLnJlcGxhY2UoIi9fU09VUkNFU18vIiwgSlNPTi5zdHJpbmdpZnkoc3JjQXJyYXkpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gUnVzc2lhCiAgICAgIHJ1dHViZV9ydSA6IHsgLy8gcmVzZWFyY2ggc29sdXRpb24KICAgICAgICAvKiB0ZXN0OiBodHRwOi8vcnV0dWJlLnJ1L3ZpZGVvL2JkNWY2MDQ3NjU3ZjBiZGNiZmJiMGVkYWQyYmI3YzYxLyAqLwogICAgICAgIGhvc3QgOiBbJ3J1dHViZS5ydSddLAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmhhc0VsZW1lbnQoJyNydXR1YmVQbGF5ZXJIb2xkZXInLCBmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgLy9kbUZ5SUc5d2RITWdQU0JCWVdzdVoyVjBSV3hsYldWdWRDZ2lJMjl3ZEdsdmJuTWlLVHNOQ2lBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJ2SUQwZ1FXRnJMbWx1ZEc5UFltcGxZM1FvYjNCMGN5NWtZWFJoYzJWMExuWmhiSFZsS1RzTkNpQWdJQ0FnSUNBZ0lDQWdJSFpoY2lCdE0zVTRWWEpzSUQwZ2J5NTJhV1JsYjE5aVlXeGhibU5sY2k1dE0zVTRPdzBLSUNBZ0lDQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29iVE4xT0ZWeWJDazdEUW9OQ2lBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJRYkdGNVpYSWdQU0J1WlhjZ1FXRnJMbkJzWVhsbGNpZ3BPdzBLSUNBZ0lDQWdJQ0FnSUNBZ1VHeGhlV1Z5TG5acFpHVnZhbk1vSnlOeWRYUjFZbVZRYkdGNVpYSkliMnhrWlhJbkxDQjdEUW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdjMjkxY21ObElEb2diVE4xT0ZWeWJDd05DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjBlWEJsSURvZ0oyaHNjeWNzRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnTHk5d2NtOTRlVG9nZEhKMVpTd05DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmhkWFJ2Y0d4aGVTQTZJSFJ5ZFdVTkNpQWdJQ0FnSUNBZ0lDQWdJQ0FnZlRzZ0tUcz0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gSXRhbHkKICAgICAgcmFpX3R2IDogeyAvLyByZXNlYXJjaCBzb2x1dGlvbgogICAgICAgIGhvc3QgOiBbJ3JhaS50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7fQogICAgICB9LAogICAgICAvLyBUViBTdHJlYW0KICAgICAgYmxvY2tfc3RyZWFtc190diA6IHsKICAgICAgICAvLyBub3RlOiByZWRpcmVjdCB0byBodHRwOi8vYmxvY2suc3RyZWFtcy50di8KICAgICAgICBob3N0IDogWydmaXJzdHJvdy5jbycsICdmaXJzdHJvd3MucnUnLCAnZmlyc3Ryb3dzLnR2JywgJ2ZpcnN0cm93cy5vcmcnLCAnZmlyc3Ryb3dzLmNvJywgJ2ZpcnN0cm93cy5iaXonLCAnZmlyc3Ryb3d1cy5ldScsICdmaXJzdHJvdzF1cy5ldScsICdmaXJzdHNyb3dzcG9ydHMuZXUnLCAnZmlyc3Ryb3dzcG9ydGVzLnR2JywgJ2ZpcnN0cm93c3BvcnRlcy5jb20nLCAnanVzdGZpcnN0cm93c3BvcnRzLmNvbScsICdoYWhhc3BvcnQubWUnLCAnd2l6aXdpZy5ydScsICd3aXppd2lnLnN4JywgJ3dpeml3aWcudG8nLCAnd2l6aXdpZy50dicsICdteXAycC5iaXonLCAnbXlwMnAudHYnLCAnbXlwMnAubGEnLCAnbXlwMnAuZWMnLCAnbXlwMnAuZXUnLCAnbXlwMnAuc3gnLCAnbXlwMnAud3MnLCAnbXlwMnAuY29tJywgJ2F0ZGhlLnJ1JywgJ2F0ZGhlLnNlJywgJ2F0ZGhlLmJ6JywgJ2F0ZGhlLnRvcCcsICdhdGRoZS50bycsICdhdGRoZS5tZScsICdhdGRoZS5teCcsICcgYXRkaGUubGknLCAnYXRkaGUuYWwnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoImFkYiIsIDEpOyAvLyBwcmV2ZW50IGFudGktYWRibG9jawogICAgICAgICAgQWFrLnV3Lm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYmFubmVySW5DZW50ZXIsICNoaWRkZW5CYW5uZXJDYW52YXMgeyBkaXNwbGF5OiBub25lOyB9Iik7IC8vIGhpZGUgYWRzCiAgICAgICAgfQogICAgICB9LAogICAgICBidXppbmFfeHl6IDogewogICAgICAgIC8vIG5vdGU6IGRpc2FibGUgcmVmY29udHJvbCwgdXNlZCBieSBmaXJzdHJvd3Nwb3J0cwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjY4CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyNDMKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODg5CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi84OTc1CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tLzhWVHJrdlM5CiAgICAgICAgaG9zdCA6IFsnYnV6aW5hLnh5eicsICdmYXJtZXQuaW5mbycsICdyaW1sYWRpLmNvbScsICdraXRvcmVsby5jb20nLCAnb21uaXBvbGEuY29tJywgJ3Bvcm9zaW4uY28udWsnLCAncmltbGVuby5jb20nLCAnc2ltcGxlNGFsbHMuY29tJywgJ2Fyc29wby5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRzZnJhbWUgeyBoZWlnaHQ6IDE1MXB4OyB9Iik7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL2J1emluYS54eXovLnRlc3QobG9jYXRpb24uaG9zdCkpIHsgLy8ga2VlcHMgc2FtZSBob3N0IHN0cmVhbQogICAgICAgICAgICBBYWsuaGFzRWxlbWVudCgnaWZyYW1lW3NyYyo9Ii5waHA/aGFzaD0iXScsIGZ1bmN0aW9uICh0aGlzRWxlbWVudCkgewogICAgICAgICAgICAgIC8vIGh0dHA6Ly9hcnNvcG8uY29tL3cyLnBocD9oYXNoPXBhbmRhNTgKICAgICAgICAgICAgICAvLyBodHRwOi8vd3d3LmJ1emluYS54eXovbmFuYTF2MS5waHA/b250aGV0b3AKICAgICAgICAgICAgICB2YXIgcGFydHMgPSB0aGlzRWxlbWVudC5zcmMuc3BsaXQoJy8nKTsKICAgICAgICAgICAgICBwYXJ0c1syXSA9IEFhay5ydWxlcy5idXppbmFfeHl6Lmhvc3QucG9wKCk7CiAgICAgICAgICAgICAgQWFrLmxvZyh0aGlzRWxlbWVudCwgcGFydHMpOwogICAgICAgICAgICAgIHRoaXNFbGVtZW50LnNyYyA9IHBhcnRzLmpvaW4oJy8nKTsKCiAgICAgICAgICAgICAgICAvKglkbUZ5SUc4Z1BTQjdDZ2tKQ1NBZ0lDQWljR3hoZVd4cGMzUWlJRG9nVzNzS0NRa0pJQ0FnSUNBZ0lDQWljSEp2ZG1sa1pYSWlJRG9nSW5KMGJYQWlMQW9KQ1FrZ0lDQWdJQ0FnSUNKMWNtd2lJRG9nSW5CaGJtUmhNVDlsSlRORU1UUTJOVEEzTURNeU5pVXlObk4wSlRORVVISjBTRmw1ZGtKNlpEbGFaRGRvUkY5bVVraFVaekV4TVRFek1DSUtDUWtKSUNBZ0lDQWdmUW9KQ1FrZ0lDQWdYU3dLQ1FrSklDQWdJQ0p3YkhWbmFXNXpJaUE2SUhzS0NRa0pJQ0FnSUNBZ0luSjBiWEFpSURvZ2V3b0pDUWtnSUNBZ0lDQWdJQ0oxY213aUlEb2dJbVpzYjNkd2JHRjVaWEl1Y25SdGNDMHpMakl1TVRFdWMzZG1JaXdnQ2drSkNRa0pMeThpZFhKc0lqb2dJbWgwZEhBNkx5OXlaV3hsWVhObGN5NW1iRzkzY0d4aGVXVnlMbTl5Wnk5emQyWXZabXh2ZDNCc1lYbGxjaTV5ZEcxd0xUTXVNaTR4TVM1emQyWWlMQW9KQ1FrZ0lDQWdJQ0FnSUNKdVpYUkRiMjV1WldOMGFXOXVWWEpzSWlBNklDSnlkRzF3T2k4dk1UZzFMamd5TGpJeE5TNDBOVG96TlRjNUwzWnZaQzhpQ2drSkNTQWdJQ0FnSUgwc0Nna0pDU0FnSUNBZ0lDSmpiMjUwY205c2N5SWdPaUI3Q2drSkNRa2dJQ0FnSW5WeWJDSTZJQ0pvZEhSd09pOHZjbVZzWldGelpYTXVabXh2ZDNCc1lYbGxjaTV2Y21jdmMzZG1MMlpzYjNkd2JHRjVaWEl1WTI5dWRISnZiSE10TXk0eUxqRTJMbk4zWmlJc0lDOHZJR0ZrWkdWa0lHSmxZMkYxYzJVZ2JXbHpjMmx1WndvSkNRa2dJQ0FnSUNBZ0lDSndiR0Y1SWlBNklHWmhiSE5sTEFvSkNRa2dJQ0FnSUNBZ0lDSnpZM0oxWW1KbGNpSWdPaUJtWVd4elpRb0pDUWtnSUNBZ0lDQjlDZ2tKQ1NBZ0lDQjlMQW9KQ1FrZ0lDQWdJbkJzWVhsbGNrbGtJaUE2SUNKd2JHRjVaWElpTEFvSkNRa2dJQ0FnSW1Oc2FYQWlJRG9nZXdvSkNRa2dJQ0FnSUNBaWRYSnNJaUE2SUNKd1lXNWtZVEUvWlNVelJERTBOalV3TnpBek1qWWxNalp6ZENVelJGQnlkRWhaZVhaQ2VtUTVXbVEzYUVSZlpsSklWR2N4TVRFeE16QWlDZ2tKQ1NBZ0lDQjlDZ2tKQ1NBZ2ZRb0tDUWtKSUNCMllYSWdibVYzVlhKc0lEMGdjR0Z5ZEhNdWMyeHBZMlVvTUN3Z015a3VhbTlwYmlnbkx5Y3BJQ3NnSnk5bWJHOTNjR3hoZVdWeUxUTXVNaTR4Tmk1emQyWS9ZMjl1Wm1sblBTY2dLeUJsYzJOaGNHVW9TbE5QVGk1emRISnBibWRwWm5rb2J5a3BPd29KQ1FrZ0lDOHZkbUZ5SUc1bGQxVnliQ0E5SUNkb2RIUndPaTh2Y21Wc1pXRnpaWE11Wm14dmQzQnNZWGxsY2k1dmNtY3ZjM2RtTDJac2IzZHdiR0Y1WlhJdE15NHlMakUyTG5OM1pqOWpiMjVtYVdjOUp5QXJJR1Z6WTJGd1pTaEtVMDlPTG5OMGNtbHVaMmxtZVNodktTazdDZ2tKQ1NBZ1kyOXVjMjlzWlM1c2IyY29ibVYzVlhKc0tUc0tDUWtKSUNCMGFHbHpSV3hsYldWdWRDNXpjbU1nUFNCdVpYZFZjbXc3CiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7IC8vIHNraXAgYW50aS1hZGJsb2NrCiAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjYWRzZnJhbWUnKTsKICAgICAgICAgICAgQWFrLmdldEVsZW1lbnQoJyNyZW1vdmUtb3ZlcicpLmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBhbGxteXZpZGVvc19uZXQgOiB7CiAgICAgICAgLy8gbm90ZTogb2JmdXNjYXRlZAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yNzQKICAgICAgICBob3N0IDogWydhbGxteXZpZGVvcy5uZXQnLCAnYW12dHYubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHNraXAgZmFrZSBwbGF5IGJ1dHRvbgogICAgICAgICAgQWFrLnNldENvb2tpZSgnX2ZhdmJ0MzMnLCAxKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGlsaXZlX2RvbWFpbnMgOiB7CiAgICAgICAgaG9zdCA6IFsnaWxpdmUudG8nLCAnc3RyZWFtbGl2ZS50byddLAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKC9eXC9lbWJlZHBsYXllci5waHAvaS50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBTa2lwIHRpbWVyCiAgICAgICAgICAgICAgQWFrLnV3LnJlbW92ZU92ZXJsYXlIVE1MKCk7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgbWljYXN0X3R2IDogewogICAgICAgIGhvc3QgOiBbJ21pY2FzdC50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBwcmV2ZW50IHBvcHVuZGVyCiAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfbWFpbicsIHRydWUpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgndmlkX3N1YicsIHRydWUpOwogICAgICAgICAgLy8gcmVtb3ZlIG92ZXJsYXkKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmICh3aW5kb3cucmVtb3ZlT3ZlcmxheUhUTUwpCiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlT3ZlcmxheUhUTUwoKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHhzdHJlYW1fdHYgOiB7CiAgICAgICAgaG9zdCA6IFsncHhzdHJlYW0udHYnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgvXlwvZW1iZWRyb3V0ZXIucGhwLy50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBTa2lwIHRpbWVyIGFuZCBjbG9zZSBhZHMKICAgICAgICAgICAgICBBYWsudXcuY2xvc2VBZCgpOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNhd2xpdmVfdHYgOiB7CiAgICAgICAgaG9zdCA6IFsnc2F3bGl2ZS50diddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgvXlwvZW1iZWRcL3dhdGNoXC8vaS50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgewogICAgICAgICAgICAvLyBTa2lwIHRpbWVyIGFuZCBjbG9zZSBhZHMKICAgICAgICAgICAgQWFrLnV3LmRpc3BsYXkgPSBmYWxzZTsKICAgICAgICAgICAgQWFrLnV3LmNsb3NlTXlBZCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgZ29vZGNhc3RfY28gOiB7CiAgICAgICAgaG9zdCA6IFsnZ29vZGNhc3QuY28nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL15cL3N0cmVhbS5waHAvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIC8vIHJlbW92ZSBhZHMgYWxsb3dlZCBieSBlYXN5bGlzdAogICAgICAgICAgICBBYWsudXcuJCgiLmFkdmVydGlzZW1lbnQiKS5oaWRlKCk7CiAgICAgICAgICAgIEFhay51dy4kKCcuYWRza3kgaWZyYW1lJykuYXR0cigic3JjIiwgImFib3V0OmJsYW5rIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBzaG93c3BvcnRfdHZfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3Nob3dzcG9ydC10di5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL15cL2NoLnBocC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICAgICAgLy8gcmVtb3ZlIGFkcyBhbGxvd2VkIGJ5IGVhc3lsaXN0CiAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjYWR2ZXJ0aXNlbWVudCwgLmFkdmVydGlzZW1lbnQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNoYXJlY2FzdF90byA6IHsKICAgICAgICBob3N0IDogWydzaGFyZWNhc3QudG8nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL15cL2VtYmVkLnBocC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKCiAgICAgICAgICAgIC8vIERpc2FibGUgcG9wdW5kZXJzCiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ3ZpZF9tYWluJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfc3ViJywgMik7CiAgICAgICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfZGVsYXknLCB0cnVlKTsKICAgICAgICAgICAgICB9LCAxMDApOwoKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgICAgIH0sIDUwMDApOwoKICAgICAgICAgICAgLy8gUmVtb3ZlIHRyYW5zcGFyZW50IG92ZXJsYXkKICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyN0YWJsZTEnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpZGVvbWVnYV90diA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT12aWRlb21lZ2EKICAgICAgICBob3N0IDogWyd2aWRlb21lZ2EudHYnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKC9eXC92aWV3LnBocC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICAgICAgLy8gcHJldmVudCBwb3B1bmRlcgogICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfbWFpbnB1JywgdHJ1ZSk7CiAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ3ZpZF9zdWJwdScsIHRydWUpOwogICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfZGVsYXknLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8ga2lsbCBhYmMKICAgICAgICAgIC8vIGZpeCBidWcgb24gZmlyZWZveDogVGhlIHZpZGVvIGNvdWxkIG5vdCBiZSBsb2FkZWQsIGVpdGhlciBiZWNhdXNlIHRoZSBzZXJ2ZXIgb3IgbmV0d29yayBmYWlsZWQgb3IgYmVjYXVzZSB0aGUgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQuCiAgICAgICAgICB2YXIgc2NyaXB0ID0gQWFrLmhhc1NjcmlwdCgnUGxlYXNlIGRpc2FibGUgQWRCbG9jayBQbHVnaW4gdG8gd2F0Y2ggdGhlIHZpZGVvJyk7CiAgICAgICAgICBpZiAoc2NyaXB0KSB7CiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzY3JpcHQuaW5uZXJIVE1MOwogICAgICAgICAgICB2YXIgc3Vic3RyaW5nID0gc291cmNlLnN1YnN0cmluZyhzb3VyY2UubGFzdEluZGV4T2YoJ2V2YWwoJyksIHNvdXJjZS5sYXN0SW5kZXhPZignKScpICsgMSk7CiAgICAgICAgICAgIHZhciBkZW9iZnVzY2F0ZWQgPSBBYWsudW5wYWNrU2NyaXB0KHN1YnN0cmluZyk7CiAgICAgICAgICAgIHZhciBuZXdTY3JpcHQgPSAnaWYoJytkZW9iZnVzY2F0ZWQuc3Vic3RyaW5nKGRlb2JmdXNjYXRlZC5pbmRleE9mKCd0cnVlJykpOwogICAgICAgICAgICBBYWsuYWRkU2NyaXB0KG5ld1NjcmlwdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBmbG93cGxheWVyX2FudGlhZGJsb2NrIDogewogICAgICAgIGhvc3QgOiBbJ3ZpZGVvZnVuLm1lJywgJ3ZpZGVvYnVnLm5ldCcsICd2aWRlbzQ0Lm5ldCcsICdwbGF5NDQubmV0JywgJ2J5em9vLm9yZycsICdwbGF5YmIubWUnLCAndmlkZW93aW5nLm1lJywgJ3ZpZGVvem9vLm1lJywgJ2Vhc3l2aWRlby5tZScsICdwbGF5cGFuZGEubmV0J10sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgCiAgICAgICAgICAvKgogICAgICAgICAgaHR0cDovL3d3dy5hbmltZXRvb24udHYvYmxhY2stbGFnb29uLWVwaXNvZGUtMQogICAgICAgICAgaHR0cDovL3ZpZGVvd2luZy5tZS9lbWJlZD93PTcxOCZoPTQzOCZ2aWRlbz1vbmdvaW5nL3l1LWdpLW9oX2FyYy12Xy1fNTMubXA0CiAgICAgICAgICBodHRwOi8vcGxheWJiLm1lL2VtYmVkLnBocD93PTcxOCZoPTQzOCZ2aWQ9YXQvbncveXUtZ2ktb2hfYXJjLXZfLV81My5tcDQKICAgICAgICAgIGh0dHA6Ly92aWRlb3pvby5tZS9lbWJlZC5waHA/dz03MTgmaD00MzgmdmlkPWF0L253L3l1LWdpLW9oX2FyYy12Xy1fNTMubXA0CiAgICAgICAgICBodHRwOi8vd3d3LmVhc3l2aWRlby5tZS9nb2dvLz93PTcxOCZoPTQzOCZmaWxlPXl1LWdpLW9oX2FyYy12Xy1fNTMubXA0JnN2PTEKICAgICAgICAgIGh0dHA6Ly9wbGF5cGFuZGEubmV0L2VtYmVkLnBocD93PTcxOCZoPTQzOCZ2aWQ9YXQvbncveXUtZ2ktb2hfYXJjLXZfLV81My5tcDQKICAgICAgICAgICAqLwoKICAgICAgICAgIC8vIGFsbG93IGZ1bGxzY3JlZW4gd2hlbiBhYnAgaXMgZW5hYmxlZCBhbmQgcmVtb3ZlIGFkIGxheWVyCiAgICAgICAgICAvLyBhZHMgYmxvY2tlZCBieSBhYnAgcnVsZQogICAgICAgICAgaWYgKC9eXC8oZW1iZWR8Z29nb3xncGx1cykvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICBQbGF5ZXIuZWRpdGluZygnI2Zsb3dwbGF5ZXJfYXBpJywgewogICAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMgOiB7CiAgICAgICAgICAgICAgICBhbGxvd2Z1bGxzY3JlZW4gOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHIzeiA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1sYWJlbDpSM1oKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vQzE1OWtldm4KICAgICAgICBob3N0IDogWydjaXR5YW0uY29tJywgJ2NvbXB1dGVyd29ybGR1ay5jb20nLCAndGVjaHdvcmxkLmNvbScsICd2My5jby51ayddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvKiBkb24ndCB3b3JrIHdpdGggY2hyb21lCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnX3IzeicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDoge30KICAgICAgICAgIH0pOwogICAgICAgICAgKi8KICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy4kKCIjcjN6LXdhaXQiKS5yZW1vdmUoKTsKICAgICAgICAgIEFhay51dy4kKCIucjN6LWhpZGUiKS5yZW1vdmVDbGFzcygicjN6LWhpZGUiKTsKICAgICAgICAgIEFhay51dy5fcjN6ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdvb2dsZV9qb2JydW5uZXIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZW4vZm9ydW0vbWVzc2FnZXMvNDA1CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzNDMKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTM0MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MzEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI3NAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjYyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU2MQogICAgICAgIGhvc3QgOiBbJ25leHQtZXBpc29kZS5uZXQnLCAna2luZ21ha2VyLm5ld3MnLCAnZ2FtZXNwb3dlcml0YS5jb20nLCAndG9kYXlpZG9sLmNvbScsICdyZWNlaXZlLWEtc21zLmNvbScsICd3YWtldXBjYWxsbWUuY29tJywgJ3JpbmdteWNlbGxwaG9uZS5jb20nLCAnZmFxbW96aWxsYS5vcmcnLCAndGhlbWVteXBjLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lmdvb2dsZV9qb2JydW5uZXIgPSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIGZ1Y2thZGJvY2sgY3VzdG9taXplZAogICAgICBmYWJfZGF3bl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE3NDcKICAgICAgICBob3N0IDogWydkYXduLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdkZXRlY3RBZEJsb2NrJywgJ0RldGVjdEFkQmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl9zcG9ydHNfZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyMTcKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vU3BFTjVkdVMKICAgICAgICBob3N0IDogWydzcG9ydHMuZnInXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnZmFiSW5zdGFuY2UnLCAnRmFiSW5zdGFuY2UnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl9ldXJvcGUxX2ZyIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTg4CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1VMZTF2elFSCiAgICAgICAgaG9zdCA6IFsnZXVyb3BlMS5mciddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdmYWJJbnN0YW5jZScsICdGYWJJbnN0YW5jZScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX25ld3lvcmtlcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzExNzcKICAgICAgICBob3N0IDogWyduZXd5b3JrZXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5mYWtlRnVja0FkQmxvY2soJ3NuaWZmQWRCbG9jaycsICdTbmlmZkFkQmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl93aXJlZF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwNjEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mci9mb3J1bS9kaXNjdXNzaW9uLzgyMzUKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vUHExNHY0RkMKICAgICAgICBob3N0IDogWyd3aXJlZC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnc25pZmZBZEJsb2NrJywgJ1NuaWZmQWRCbG9jaycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX21hbmdhc3Byb2plY3RfZG9tYWlucyA6IHsKICAgICAgICAvLyBub3RlOiBmdWNrYWRibG9jayB3aXRoIGN1c3RvbSBpbnN0YW5jZSBuYW1lCiAgICAgICAgLy8gbm90ZTogYWxzbyBhZGRlZCBhYnAgcnVsZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTI3CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZnIvZm9ydW0vZGlzY3Vzc2lvbi80MTMyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg1OAogICAgICAgIC8vIHNvdXJjZTogaHR0cHM6Ly9tYW5nYXMuemx4LmNvbS5ici9tYW5nYXpvcmRfbGliL2pzL2xpYi9jb250cm9sbGVycy9MZWl0b3IvTGVpdG9yLm1pbi5qcwogICAgICAgIGhvc3QgOiBbJ21hbmdhc3Byb2plY3QuY29tLmJyJywgJ21hbmdhc3Byb2plY3QubmV0LmJyJywgJ21hbmdhcy56bHguY29tLmJyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5mYWtlRnVja0FkQmxvY2soJ21hbmdhc0xlaXRvclNsaWRlcicsIEFhay5nZW5lcmF0ZUlEKCkpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX3FuaW1hdGVfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy83MzkKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzA1CiAgICAgICAgLy8gbm90ZTogZnVja2FkYmxvY2sgY3VzdG9taXplZAogICAgICAgIGhvc3QgOiBbJ3FuaW1hdGUuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRCbG9ja0RldGVjdGVkID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWJfZXVyb3RyYW5zcG9ydF9kZSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODU4CiAgICAgICAgLy8gbm90ZTogZnVja2FkYmxvY2sgd2l0aCBjdXN0b20gaW5zdGFuY2UgbmFtZQogICAgICAgIGhvc3QgOiBbJ2V1cm90cmFuc3BvcnQuZGUnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnYW50aUFkQmxvY2snLCBBYWsuZ2VuZXJhdGVJRCgpKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl9jYWRldGVjdCA6IHsKICAgICAgICAvLyBieTogU2tyNHRjaEdyM2F6eU1vbmtpQmFsbGxsbGxaenp6CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzc4NAogICAgICAgIC8vIG5vdGU6IGZ1Y2thZGJsb2NrIHdpdGggY3VzdG9tIGluc3RhbmNlIG5hbWUKICAgICAgICBob3N0IDogWyd0emV0emUuaXQnLCAnYmVwcGVncmlsbG8uaXQnLCAnbGEtY29zYS5pdCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdjYWRldGVjdCcsICdDQURldGVjdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX2FnYXJfZ2FtZSA6IHsKICAgICAgICAvLyBub3RlOiBmdWNrYWRibG9jayB3aXRoIGN1c3RvbSBpbnN0YW5jZSBuYW1lCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyNTcKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTEzNQogICAgICAgIGhvc3QgOiBbJ2FnYXJpby5zeCcsICdhZ2FyYWJpLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdhZ2FyaW9fU1hfYWRzJywgQWFrLmdlbmVyYXRlSUQoKSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWJfZmlsZXNwYWNlX2NvbSA6IHsKICAgICAgICAvLyBub3RlOiBmdWNrYWRibG9jayB3aXRoIGN1c3RvbSBpbnN0YW5jZSBuYW1lCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1lBUzBBczg3CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwMzcKICAgICAgICBob3N0IDogWydmaWxlc3BhY2UuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5mYWtlRnVja0FkQmxvY2soJ2ZBQicsIEFhay5nZW5lcmF0ZUlEKCkpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX3RvcHNlcmlhbHlfc2sgOiB7CiAgICAgICAgLy8gbm90ZTogZnVja2FkYmxvY2sgd2l0aCBjdXN0b20gaW5zdGFuY2UgbmFtZQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS80MnRVUTlhVgogICAgICAgIGhvc3QgOiBbJ3RvcHNlcmlhbHkuc2snXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnc3JhdE5hVmFzJywgQWFrLmdlbmVyYXRlSUQoKSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWJfY3VzdG9taXplZCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTQ1NQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNjU3CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL040MmE1QmpFCiAgICAgICAgaG9zdCA6IFsnZXBpY3VyaW91cy5jb20nLCAnZGVza3RvcHNvbHV0aW9uLm9yZycsICdpbmRpYXRpbWVzLmNvbScsICdoaW5kdXN0YW50aW1lcy5jb20nLCAnaGFwcHl0cmlwcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfc2V0QXR0cmlidXRlID0gd2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZTsKICAgICAgICAgICAgICB3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAnY2xhc3MnICYmIHZhbHVlLmluZGV4T2YoJ3RleHRfYWRzJykgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgdmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKHRoaXMsICdmYWIgaW50ZXJjZXB0ZWQgOi0pJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfc2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSwgdmFsdWUpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGQzeHQzZXJfYW50aWFkYmxvY2sgOiB7CiAgICAgICAgLy8gc2l0ZTogaHR0cDovL2QzeHQzci5jb20vYW50aS1hZGJsb2NrCiAgICAgICAgLy8gY2FzZTogaHR0cDovL3Nwb3J0LXNob3cuZnIvanMvYWR2ZXJ0aXNlbWVudC1BZEJsb2NrLmpzCiAgICAgICAgLy8gY2FzZTogaHR0cDovL3d3dy4yc2l0ZS5tZS9hZHZlcnRpc2VtZW50LUFkQmxvY2suanMKICAgICAgICBob3N0IDogWydzcG9ydC1zaG93LmZyJywgJ3ZpcGZsYXNoLm5ldCcsICcyc2l0ZS5tZSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNibG9ja2Jsb2NrQSB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tBIHRkIHt2aXNpYmlsaXR5OmludmlzaWJsZTtkaXNwbGF5Om5vbmU7fSAjYmxvY2tibG9ja0EgdGQgcCB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tCIHt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTpibG9jazt9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBhZGJsb2NrX25vdGlmeSA6IHsKICAgICAgICAvLyBieTogU2tyNHRjaEdyM2F6eU1vbmtpQmFsbGxsbGxaenp6CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE3NjYKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTM5MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMDM5CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU5MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MTMKICAgICAgICBob3N0IDogWydnYW1ldHJhbnNmZXJzLmNvbScsICd3aW5hbmRtYWMuY29tJywgJ2ZyZWUtc3RlYW0tZ2l2ZWF3YXlzLmNvbScsICdjYW5hbHdwLmNvbScsICdhbHBoYWhpc3RvcnkuY29tJywgJ25vcmRwcmVzc2UuYmUnLCAnc29zcGMubmFtZScsICdiYWJvby5jb20uYnInXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2FuQ29va2llJywgdHJ1ZSk7CiAgICAgICAgICBBYWsudXcuYW5PcHRpb25zID0ge307CiAgICAgICAgfQogICAgICB9LAogICAgICBsdXR0ZV9hZGJsb2NrIDogewogICAgICAgIC8vIHNpdGU6IGh0dHA6Ly9sdXR0ZWFkYmxvY2suYmxvZ3Nwb3QuY29tLzIwMTQvMTEvbGUtc2NyaXB0Lmh0bWwKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTM4CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU4MAogICAgICAgIGhvc3QgOiBbJ2xld2VidHZib3VxdWV0ZnJhbmNvcGhvbmUub3ZlcmJsb2cuY29tJywgJ3dlYnR2LmJsb2d1ZXouY29tJywgJ2xhdGVsZWdyYXR1aXRlLmJsb2dzcG90LmNvbScsICd0b3RhbGRlYnJpZC5vcmcnLCAnMzcuMTg3LjE3My4yMDUnLCAndHZncmF0dWl0ZS5ibG9nc3BvdC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjbXlfYWRfZGl2Jyk7CiAgICAgICAgICBBYWsudXcuamFiYmFodWQgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFudGlibG9jayA6IHsKICAgICAgICAvLyBzaXRlOiBhbnRpYmxvY2sub3JnCiAgICAgICAgLy8gbm90ZTogY3VzdG9taXplZAogICAgICAgIC8vIGlzc3VlOiAKICAgICAgICBob3N0IDogWydteWJhbmsucGwnLCAncmFwaWRncmFiLnBsJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfYWRkRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyOwogICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIudG9TdHJpbmcoKS5pbmRleE9mKCcubmV4dEZ1bmN0aW9uKCl9JykgPiAtMSkgewogICAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oWydBbnRpQWRiS2lsbGVyJywgbG9jYXRpb24uaG9zdCwgJ0FudGlCbG9ja3tjdXN0b21pemVkfSddKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJsb2NrYWRibG9jayA6IHsKICAgICAgICAvLyBzaXRlOiBibG9ja2FkYmxvY2suY29tCiAgICAgICAgLy8gbm90ZTogcmFuZG9tIGluc3RhbmNlIG5hbWUKICAgICAgICAvLyBzb3VyY2U6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1dhdGlsaW4vYWY3NWUwYTJlODJhMmVmYjM4NGJkZTljN2I0MWRlYzgKICAgICAgICAvLyBpc3N1ZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bGFiZWw6QmxvY2tBZEJsb2NrCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi84MjczCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi83NjI1CiAgICAgICAgaG9zdCA6IFsnYmxvY2thZGJsb2NrLmNvbScsICdsaW5rZHJvcC5uZXQnLCAncmV2Y2xvdWRzLmNvbScsICdsZXBvcm5vLm9yZycsICd1cGxvYWRzaHViLmNvbScsICdkYXNvbG8ub3JnJywgJ2Z1bGxzdHVmZi5uZXQnLCAnemV1c25ld3MuaXQnLCAnY2hlbWlub3RzLm5ldCcsICdsb2xzeS50dicsICdhbmltZXMtbWFuZ2FzLWRkbC5jb20nLCAnbm90aWNpYXNhdXRvbW90aXZhcy5jb20uYnInLCAnZGFya3N0YXJzLm9yZycsICdjb3JlcGFja3MuY29tJywgJ25hdHVyYWxiZC5jb20nLCAnY29vbHNvZnQuYWx0ZXJ2aXN0YS5vcmcnLCAnb3BlbmxvYWQudXMnLCAnY2RhLW9ubGluZS5wbCcsICd1cmJhbnBsYW5ldC5vcmcnLCAnbWFtYWhkLmNvbScsICdzYWRlZW1wYy5jb20nLCAnYXZtb28uY29tJywgJ3RoYWlsYW5kZS1mci5jb20nLCAnYnRhaWEuY29tJywgJ3R1c29mdC5vcmcnLCAnaGlzc2UubmV0JywgJ2V1cm9wZXVwLmNvbScsICducmouZnInLCAnc3Juay5jbycsICdhbmltbWV4LmNvJywgJ3NvY2tldGxvb3AuY29tJywgJ2NyYWNraGV4LmNvbScsICdyZXZlYWxlZHRyaWNrczR1LmNvbScsICdwaXp6YW1ha2luZy5jb20nLCAnY29tcHV0ZXJ3b3JtLm5ldCcsICd5b3VybGlmZXVwZGF0ZWQubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyB2YXJpYW50IDEKICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3NldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dDsKICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCA9IGZ1bmN0aW9uIChmbiwgZGVsYXkpIHsKICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZuLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnc3RyaW5nJyAmJiBmbi5pbmRleE9mKCdiYWJfZWxlbWVudGlkJykgPiAtMSkgewogICAgICAgICAgICAgICAgICBmbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oWydBbnRpQWRiS2lsbGVyJywgbG9jYXRpb24uaG9zdCwgJ0Jsb2NrQWRCbG9jayddKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9zZXRUaW1lb3V0LmNhbGwodGhpcywgZm4sIGRlbGF5KTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBncHRfc3AgOiB7CiAgICAgICAgLy8gYnk6IFJlZWssIEdpd2F5dW1lCiAgICAgICAgLy8gbm90ZTogd2hlbiBhZGJsb2NrIGRldGVjdGVkIGluamVjdCBuZXcgYWRzLCByZWRpcmVjdCB0byBodHRwOi8vdGlueXVybC5jb20venEyejVvNgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNjM2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1OTYKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI5NwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTQ0CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1NDIKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vOEFqaXRmYjIKICAgICAgICBob3N0IDogWydtYXJrZXR3YXRjaC5jb20nLCAnZGVhZGxpbmUuY29tJywgJ3R3ZWFrdG93bi5jb20nLCAnbnlwb3N0LmNvbScsICdyZWFsZ20uY29tJywgJ25hc2RhcS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuY29udGFpbmVyLS1iYW5uZXJBZCwgLmNvbC0tYWQgeyBkaXNwbGF5OiBub25lOyB9Iik7CiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBHaXdheXVtZSAKICAgICAgICAgICAgICB3aW5kb3cuX3NwXyA9IHdpbmRvdy5fc3BfIHx8IHt9OwogICAgICAgICAgICAgIHdpbmRvdy5fc3BfLmNvbmZpZyA9IHdpbmRvdy5fc3BfLmNvbmZpZyB8fCB7fTsKICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Ll9zcF8uY29uZmlnLCAiY29udGVudF9jb250cm9sX2NhbGxiYWNrIiwgewogICAgICAgICAgICAgICAgdmFsdWUgOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgICAgICBjb25maWd1cmFibGUgOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIFJlZWsKICAgICAgICAgICAgICB2YXIgX2FkZEV2ZW50TGlzdGVuZXIgPSB3aW5kb3cuRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7CiAgICAgICAgICAgICAgd2luZG93LkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnc3AuYmxvY2tpbmcnKSB7CiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhbJ0FudGlBZGJLaWxsZXInLCBsb2NhdGlvbi5ob3N0LCAnR1BUe3NwLWJsb2NraW5nfSddKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtydXhfYXNsIDogewogICAgICAgIC8vIG5vdGU6IHdoZW4gYWRibG9jayBkZXRlY3RlZCBpbmplY3QgbmV3IGFkcwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8wSEQ3Tjg0aQogICAgICAgIGhvc3QgOiBbJ2NvbW1lbnRjYW1hcmNoZS5uZXQnLCAnam91cm5hbGRlc2ZlbW1lcy5jb20nLCAnbGludGVybmF1dGUuY29tJ10sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW3sKICAgICAgICAgICAgICBkZXRlY3RlZCA6ICdLcnV4e2FzbH0nLAogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ0FzbC5wcm90b3R5cGUuaW5qZWN0JywKICAgICAgICAgICAgICBleHRlcm5hbCA6IGZhbHNlLAogICAgICAgICAgICAgIHJlbW92ZSA6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtydXhfYWRwIDogewogICAgICAgIC8vIG5vdGU6IHdoZW4gYWRibG9jayBkZXRlY3RlZCBpbmplY3QgbmV3IGFkcwogICAgICAgIC8vIHNvdXJjZTogCiAgICAgICAgaG9zdCA6IFsnZm91cmNoZXR0ZS1ldC1iaWtpbmkuZnInLCAnbWV0ZW9jaXR5LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRQcm90ZWN0ID0gMTsKICAgICAgICB9CiAgICAgIH0sCSAKICAgICAgcGhvZW5peF9nb3lhdmVsYWIgOiB7CiAgICAgICAgLy8gbm90ZTogd2hlbiBhZGJsb2NrIGRldGVjdGVkIGluamVjdCBuZXcgYWRzCiAgICAgICAgLy8gbm90ZTogc2NyaXB0IGFudGktYWRibG9jayBvYmZ1c2NhdGVkLAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8KICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS9nbDNnaHEyCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL2hzQW1kU3VmCiAgICAgICAgaG9zdCA6IFsnZGVtby1waG9lbml4LmNvbScsICdkcHN0cmVhbS5uZXQnLCAnZ3VtLWd1bS1zdHJlYW1pbmcuY29tJywgJ2pldS5pbmZvJywgJ3NvZm9vdC5jb20nLCAnZ2FhcmEtZnIuY29tJywgJ2dheXR1YmUuY29tJywgJ3R1eGJvYXJkLmNvbScsICd4c3RvcnktZnIuY29tJywgJ2hlbnRhaWZyLm5ldCcsICdmaWxtc3RyZWFtaW5nLWhkLmNvbScsICdmaWxtdmYubmV0JywgJ2hlbnRhaWhhdmVuLm9yZycsICduYXJ1dG9zaGlwcHVkZW52Zi5jb20nLCAndGhlYmFkYnV6ei5jb20nLCAnbWFuZ2EtbmV3cy5jb20nLCAnamV1LnZpZGVvJywgJ21hbmdhcy1mci5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vQWFrLnV3Ll9fJGRjID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJ2JvZHkge3Zpc2liaWxpdHk6IHZpc2libGU7fScpOwogICAgICAgIH0sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW3sgCiAgICAgICAgICAgICAgZGV0ZWN0ZWQgOiAnUGhvZW5peEdveWF2ZWxhYicsCiAgICAgICAgICAgICAgY29udGFpbnMgOiAnUEhFTlYnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgfQogICAgICB9LAogICAgICBhZF9kZWZlbmRfdWFicCA6IHsKICAgICAgICAvLyBub3RlOiB3aGVuIGFkYmxvY2sgZGV0ZWN0ZWQgaW5qZWN0IG5ldyBhZHMKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vY0ZRQ3A4MFcKICAgICAgICBob3N0IDogWyd0dnNwaWVsZmlsbS5kZScsICdmaW5hbnplbi5jaCddLAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgZGV0ZWN0ZWQgOiAnQWREZWZlbmR7VUFCUEluamVjdH0nLAogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ1VBQlBJbmplY3QnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRfZGVmZW5kX3VhYiA6IHsKICAgICAgICAvLyBub3RlOiB3aGVuIGFkYmxvY2sgZGV0ZWN0ZWQgaW5qZWN0IG5ldyBhZHMKICAgICAgICAvLyB1c2Vyc2NyaXB0OiBodHRwczovL29wZW51c2VyanMub3JnL3NjcmlwdHMvc2Nod2FyenRlZS9BZERlZmVuZF9LbGF0c2NoZQogICAgICAgIC8vIHVzZXJzY3JpcHQ6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2Fub255bW91cy9hOWI5OTU2YmFmMWQ1OWExMDdjNQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8xVnlXMHU5bSwgaHR0cDovL3Bhc3RlYmluLmNvbS9BWnFoUnhXVQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWxhYmVsOkFkRGVmZW5kCiAgICAgICAgLy8gcHVsbDogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9wdWxsLzQ2NwogICAgICAgIGhvc3QgOiBbJ3dhdGNoZ2VuZXJhdGlvbi5mcicsICd0dXJiby5mcicsICcyNG1hdGlucy5mcicsICdmb290MDEuY29tJywgJ2NsdWJpYy5jb20nLCAnbWFjZy5jbycsICdiZWdlZWsuZnInLCAnaWdlbi5mcicsICdnYW1lc3Rhci5kZScsICdmb2N1cy5kZScsICdzdGVybi5kZScsICdzYXQxLicsICdwcm9zaWViZW4uJywgJ2thYmVsZWlucy4nLCAnc2F0MWdvbGQuJywgJ3NpeHguJywgJ3Byb3NpZWJlbm1heHguJywgJ2ZlbS5jb20nLCAndGhlLXZvaWNlLW9mLWdlcm1hbnkuJywgJ3dldHRlci5jb20nLCAnd2V0dGVyb25saW5lLmRlJywgJ3Bjd2VsdC5kZScsICdib2Vyc2Utb25saW5lLmRlJywgJ3Nwb3J0YXV0by5kZScsICdhdXRvLW1vdG9yLXVuZC1zcG9ydC5kZScsICdtb3Rvci1rbGFzc2lrLmRlJywgJzR3aGVlbGZ1bi5kZScsICdhdXRvc3RyYXNzZW52ZXJrZWhyLmRlJywgJ2x1c3RpY2guZGUnLCAnc3BveC5jb20nLCAnc2h6LmRlJywgJ3RyYW5zZmVybWFya3QuZGUnLCAncnAtb25saW5lLmRlJywgJ21vdG9ycmFkb25saW5lLmRlJywgJzIwbWluLmNoJywgJ21haW4tc3BpdHplLmRlJywgJ3dvcm1zZXItemVpdHVuZy5kZScsICdsYW1wZXJ0aGVpbWVyLXplaXR1bmcuZGUnLCAnd2llc2JkZW5lci10YWdibGF0dC5kZScsICdidWVyc3RhZWR0ZXItemVpdHVuZy5kZScsICd3aWVzYmRlbmVyLWt1cmllci5kZScsICdyaGVpbi1tYWluLXByZXNzZS5kZScsICdhbGxnZW1laW5lLXplaXR1bmcuZGUnLCAnYXJpdmEuZGUnLCAnc3BpZWdlbC5kZScsICdicmlnaXR0ZS5kZScsICdkc2hpbmkubmV0JywgJ2dhbGEuZGUnLCAnZ2FtZXByby5kZScsICdnYW1vbmEuZGUnLCAncG5uLmRlJywgJ3Byb21vYmlsLmRlJywgJ3Nwb3J0YWwuZGUnLCAnd2ViZmFpbC5jb20nLCAnY29tcHV0ZXJiaWxkLmRlJywgJ2ZpbmFuemVuLm5ldCcsICdjb211bmlvLmRlJywgJ21lZGlzaXRlLmZyJ10sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW3sKICAgICAgICAgICAgICBkZXRlY3RlZCA6ICdBZERlZmVuZHt1YWJJbmplY3R9JywKICAgICAgICAgICAgICBjb250YWlucyA6ICd1YWJJbmplY3QnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLyogc29sdmVkIGJ5IEFha0xJc3QKICAgICAgdGlzb29taV9pbmRpcmVrdCA6IHsKICAgICAgLy8gaW5saW5lOiBodHRwOi8vcGFzdGViaW4uY29tL25wbVhUVUh3CiAgICAgIC8vIGV4dGVybmFsOiBodHRwOi8vcGFzdGViaW4uY29tL2h2V25DdUR3CiAgICAgIGhvc3QgOiBbJ2VuZXJneS5kZScsICdnZXR2aWRzLmRlJywgJ2dld2luZGUtbm9ybWVuLmRlJywgJ3BvZGNhc3QuZGUnLCAnc3BpZWxlc3BpZWxlbjI0LmRlJywgJ2RpYWxvLmRlJ10sCiAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgdmFyIHRleHQgPSB0YXJnZXQudGV4dDsKICAgICAgaWYgKEFhay5jb250YWlucyh0ZXh0LCAnbj0iYWJjZGVmZ2hpamtsbSIscj0ibm9wcXJzdHV2d3h5eiIsaT0iMDEyMzQ1Njc4OSI7dmFyIHM9dD09MD9pOnQ9PTE/bicpKSB7CiAgICAgIEFhay5zdG9wU2NyaXB0KGUpOwogICAgICBBYWsubG9nKCdUaXNvb21pIEluZGlyZWt0Jyk7CiAgICAgIH0KICAgICAgfQogICAgICB9LAogICAgICAgKi8KICAgICAgLyogc29sdmVkIGJ5IEFha0xJc3QKICAgICAgdGlzb29taV9kaXJla3QgOiB7CiAgICAgIC8vIGlubGluZTogaHR0cDovL3Bhc3RlYmluLmNvbS8ydnEzOEpYWQogICAgICBob3N0IDogWydhdXRvemVpdHVuZy5kZScsICdmb3JtZWwxLmRlJywgJ2ZyZW1kd29ydC5kZScsICdpbnNpZGUtaGFuZHkuZGUnLCAnbW90b3JzcG9ydC10b3RhbC5jb20nLCAnYXVzc2Vud2lydHNjaGFmdHNsdXBlLmRlJywgJ2Rvbm5lcndldHRlci5kZScsICd3aW50b3RhbC5kZSddLAogICAgICBvbkJlZm9yZVNjcmlwdCA6IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgIHZhciB0ZXh0ID0gdGFyZ2V0LnRleHQ7CiAgICAgIGlmIChBYWsuY29udGFpbnModGV4dCwgJ2Z1bmN0aW9uIGRldGVjdCgpJykpIHsKICAgICAgQWFrLnN0b3BTY3JpcHQoZSk7CiAgICAgIEFhay5sb2coJ1Rpc29vbWkgRGlyZWt0Jyk7CiAgICAgIH0KICAgICAgfQogICAgICB9LAogICAgICAgKi8KICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gR2VuZXJpYwogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICBnZW5lcmljIDogewogICAgICAgIGhvc3QgOiBbJy4qPyddLAogICAgICAgIG9uUmVtb3ZlIDogZnVuY3Rpb24gKHJlbW92ZWROb2RlKSB7CiAgICAgICAgICBpZiAoQWFrLm9wdHMucmVtb3ZlZCkgewogICAgICAgICAgICBpZiAocmVtb3ZlZE5vZGUuc3JjIHx8CiAgICAgICAgICAgICAgcmVtb3ZlZE5vZGUuaWQgfHwKICAgICAgICAgICAgICByZW1vdmVkTm9kZS5jbGFzc05hbWUgJiYKICAgICAgICAgICAgICAhL15maXJlYnVnLy50ZXN0KHJlbW92ZWROb2RlLmNsYXNzTmFtZSkpIHsKICAgICAgICAgICAgICAvLyBOb2RlIHJlbW92ZWQKICAgICAgICAgICAgICBBYWsubG9nKHJlbW92ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAvLyBGdWNrQWRCbG9jayAmIEJsb2NrQWRCbG9jayB2MyBhbmQgdjQKICAgICAgICAgIC8vIHNpdGU6IGh0dHA6Ly93d3cuc2l0ZXh3LmZyL2Z1Y2thZGJsb2NrLwogICAgICAgICAgLy8gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL3NpdGV4dy9GdWNrQWRCbG9jawogICAgICAgICAgLy8gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL3NpdGV4dy9CbG9ja0FkQmxvY2sKICAgICAgICAgIC8vIG5vdGU6IHdoZW4gZnVja2FkYmxvY2suanMgb3IgYmxvY2thZGJsb2NrLmpzIGlzIGJsb2NrZWQKICAgICAgICAgIC8vIGRlbW8gdjM6IGh0dHA6Ly9zaC5zdC92b3ZIRQogICAgICAgICAgLy8gZGVtbyB2NDogaHR0cDovL2FsLmx5L3FCYlhICiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODg4CiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODI0CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdmdWNrQWRCbG9jaycsICdGdWNrQWRCbG9jaycpOwogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnYmxvY2tBZEJsb2NrJywgJ0Jsb2NrQWRCbG9jaycpOwoKICAgICAgICAgIC8vIGNhblJ1bkFkcwogICAgICAgICAgLy8gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL01hdHRoZXdHcm9zcy9DYW5SdW5BZHMKICAgICAgICAgIC8vIG5vdGU6IHVzZSBleHRlcm5hbGwgc2NyaXB0ICIvanMvYWRzLmpzIiAtPiB2YXIgY2FuUnVuQWRzID0gdHJ1ZTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdjYW5SdW5BZHMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZSA6IHRydWUKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIGNhblNob3dBZHMKICAgICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTk3CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnY2FuU2hvd0FkcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gQWRibG9ja2VyIERldGVjdGluZyBTY3JpcHRzOiBNZXRob2QgMgogICAgICAgICAgLy8gZ2lzdDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vaXJhemFzeWVkLzNkMjQ3ZDNkMTIxZTc4MWEzODcyCiAgICAgICAgICAvLyBub3RlOiB1c2UgZXh0ZXJuYWxsIHNjcmlwdCAiL2pzL2Fkcy5qcyIgLT4gaXNBZEJsb2NrQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnaXNBZEJsb2NrQWN0aXZlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmYWxzZQogICAgICAgICAgfSk7CgogICAgICAgICAgLyoKICAgICAgICAgIHdpbmRvdy5pSGF2ZUxvYWRlZEFkcyA9IHRydWU7CiAgICAgICAgICB2YXIgbmljZUFkc0NoZWNrPXRydWU7CiAgICAgICAgICBhZGJsb2NrID0gZmFsc2UKICAgICAgICAgIGlzX2Jsb2NrZXIgPSBmYWxzZTsKICAgICAgICAgICAqLwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgIC8vIEFkQmxvY2sgRGV0ZWN0b3IgKFhlbkZvcm8gUmVsbGVjdCkKICAgICAgICAgIC8vIHNpdGU6IGh0dHA6Ly90aW55dXJsLmNvbS9wYTI4eGRuCiAgICAgICAgICAvLyBjbG9uZUludG86IGh0dHA6Ly90aW55dXJsLmNvbS9rNnFwaG1lCiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODA1CiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODA0CiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTkxCiAgICAgICAgICBpZiAoQWFrLnV3LlhlbkZvcm8gJiYgdHlwZW9mIEFhay51dy5YZW5Gb3JvLnJlbGxlY3QgPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgQWFrLnV3LlhlbkZvcm8ucmVsbGVjdCA9IHsKICAgICAgICAgICAgICBBZEJsb2NrRGV0ZWN0b3IgOiB7CiAgICAgICAgICAgICAgICBzdGFydCA6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FkQmxvY2sgRGV0ZWN0b3IgKFhlbkZvcm8gUmVsbGVjdCknKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvKgogICAgICAgICAgLy8gQWR1bmJsb2NrIC0gaHR0cDovL2FkdW5ibG9jay5jb20vCiAgICAgICAgICBpZiAoQWFrLmdldENvb2tpZSgnYWRibG9jaycpID09IDEpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2FkYmxvY2snLCAwKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2Jhcl9jbG9zZWQnLCAxKTsKICAgICAgICAgIH0KICAgICAgICAgICAqLwoKICAgICAgICAgIC8vIEFkYmxvY2sgQmxvY2tlcgogICAgICAgICAgLy8gaHR0cHM6Ly93b3JkcHJlc3Mub3JnL3BsdWdpbnMvYWRkYmxvY2tibG9ja2VyLwogICAgICAgICAgLy8gaHR0cDovL3Rpbnl1cmwuY29tL25zd242ZnoKICAgICAgICAgIC8vIGh0dHA6Ly9wYXN0ZWJpbi5jb20vZDY1enIzN20KICAgICAgICAgIC8qIGNhbiBjYXVzZSBhIGJ1ZwogICAgICAgICAgdmFyIGFkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Fmc19hZHMnKTsKICAgICAgICAgIHZhciBhZCA9IGFkcy5sZW5ndGggJiYgYWRzW2Fkcy5sZW5ndGggLSAxXTsKICAgICAgICAgIGlmIChhZCAmJiBhZC5pbm5lckhUTUwubGVuZ3RoID09PSAwIHx8IGFkLmNsaWVudEhlaWdodCA9PT0gMCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lTmF0aXZlID0gSFRNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lOwogICAgICAgICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkgewogICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSAnYWZzX2FkcycpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbyhbJ0FudGlBZGJLaWxsZXInLCBsb2NhdGlvbi5ob3N0LCAnQWRibG9ja0Jsb2NrZXInLCBjbGFzc05hbWVdKTsKICAgICAgICAgIHZhciB1bmlxaWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgdmFyIGJhaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGJhaXQuaW5uZXJIVE1MID0gJzxicj4nOwogICAgICAgICAgYmFpdC5jbGFzc05hbWUgPSB1bmlxaWQ7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhaXQpOwogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUodW5pcWlkKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lTmF0aXZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAgKi8KCiAgICAgICAgICAvLyBBZGJ1ZGR5CiAgICAgICAgICBpZiAodHlwZW9mIEFhay51dy5jbG9zZUFkYnVkZHkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgQWFrLnV3LmNsb3NlQWRidWRkeSgpOwogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FkYnVkZHknKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBZEJsb2NrIEFsZXJ0ZXIgKFdQKQogICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dwLXBsdWdpbnMvYWRibG9jay1hbGVydGVyCiAgICAgICAgICAvLwogICAgICAgICAgaWYgKEFhay5nZXRFbGVtZW50KCdkaXYuYWRiX292ZXJsYXkgPiBkaXYuYWRiX21vZGFsX2ltZycpKSB7CiAgICAgICAgICAgIC8vIFJlbW92ZSBBbGVydCArIEFsbG93IFNjcm9sbAogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnZGl2LmFkYl9vdmVybGF5Jyk7CiAgICAgICAgICAgIEFhay5hZGRTdHlsZSgnaHRtbCxib2R5IHtoZWlnaHQ6YXV0bzsgb3ZlcmZsb3c6IGF1dG87fScpOwogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FkQmxvY2tBbGVydGVyJyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gVW5rbm93IEFudGkgQWRCbG9jayBzeXN0ZW0KICAgICAgICAgIGlmIChBYWsuZ2V0RWxlbWVudCgnI2Jsb2NrZGl2JykgJiYgQWFrLmNvbnRhaW5zKEFhay5nZXRFbGVtZW50KCcjYmxvY2tkaXYnKS5pbm5lckhUTUwsICdkaXNhYmxlIGFkIGJsb2NraW5nIG9yIHVzZSBhbm90aGVyIGJyb3dzZXIgd2l0aG91dCBhbnkgYWRibG9ja2VyIHdoZW4geW91IHZpc2l0JykpIHsKICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNibG9ja2RpdicpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEFudGlibG9jay5vcmcgdjIKICAgICAgICAgIC8vIG5vdGU6IGRldGVjdCBhbmQgc3RvcmUgYmxvY2sgaWQKICAgICAgICAgIC8vIGRlbW86IGh0dHA6Ly90aW55dXJsLmNvbS9uaHlocHprCiAgICAgICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzdHlsZSA9IHN0eWxlc1tpXTsKICAgICAgICAgICAgdmFyIGNzc1J1bGVzID0gc3R5bGUuc2hlZXQuY3NzUnVsZXM7CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3NzUnVsZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICB2YXIgY3NzUnVsZSA9IGNzc1J1bGVzW2pdOwogICAgICAgICAgICAgIHZhciBjc3NUZXh0ID0gY3NzUnVsZS5jc3NUZXh0OwogICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gL14jKFthLXowLTldezQsMTB9KSB+IFwqIFx7IGRpc3BsYXk6IG5vbmU7IFx9LzsKICAgICAgICAgICAgICBpZiAocGF0dGVybi50ZXN0KGNzc1RleHQpKSB7CiAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXR0ZXJuLmV4ZWMoY3NzVGV4dClbMV07CiAgICAgICAgICAgICAgICBpZiAoQWFrLmhhc1NjcmlwdCgidy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywiICsgaWQgKyAiLGZhbHNlKSIpKSB7CiAgICAgICAgICAgICAgICAgIEFhay5hYWJzLmFibzIgPSBpZDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHdpbiA9IEFhay51dzsKICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gd2luKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKCEvXndlYmtpdC8udGVzdChwcm9wKSAmJiAvXlthLXowLTldezQsMTJ9JC9pLnRlc3QocHJvcCkgJiYgcHJvcCAhPT0gJ2RvY3VtZW50JyAmJiAod2luW3Byb3BdaW5zdGFuY2VvZiBIVE1MRG9jdW1lbnQpID09PSBmYWxzZSAmJiB3aW4uaGFzT3duUHJvcGVydHkocHJvcCkgJiYgdHlwZW9mIHdpbltwcm9wXSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSB3aW5bcHJvcF07CgogICAgICAgICAgICAgICAgLy8gQW50aWJsb2NrLm9yZyB2MyAmIEJldHRlclN0b3BBZGJsb2NrCiAgICAgICAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODMzCiAgICAgICAgICAgICAgICBpZiAobWV0aG9kLmRlZmVyRXhlY3V0aW9uICYmCiAgICAgICAgICAgICAgICAgIG1ldGhvZC5kaXNwbGF5TWVzc2FnZSAmJgogICAgICAgICAgICAgICAgICBtZXRob2QuZ2V0RWxlbWVudEJ5ICYmCiAgICAgICAgICAgICAgICAgIG1ldGhvZC5nZXRTdHlsZSAmJgogICAgICAgICAgICAgICAgICBtZXRob2QuaW5zZXJ0ICYmCiAgICAgICAgICAgICAgICAgIG1ldGhvZC5uZXh0RnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZC50b2dnbGUpIHsKICAgICAgICAgICAgICAgICAgICBBYWsuYWFicy5ic2EgPSBwcm9wOwogICAgICAgICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgnQmV0dGVyU3RvcEFkYmxvY2t7ZG9tfScpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIEFhay5hYWJzLmFibzMgPSBwcm9wOwogICAgICAgICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgnQW50aWJsb2NrM3tkb219Jyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgd2luW3Byb3BdID0gbnVsbDsgLy8ga2lsbCBpbnN0YW5jZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEJsb2NrQWRCbG9jawogICAgICAgICAgICAgICAgLy8gc2l0ZTogYmxvY2thZGJsb2NrLmNvbQogICAgICAgICAgICAgICAgLy8gbm90ZTogcmFuZG9tIGluc3RhbmNlIG5hbWUKICAgICAgICAgICAgICAgIC8vIHNvdXJjZTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vV2F0aWxpbi9hZjc1ZTBhMmU4MmEyZWZiMzg0YmRlOWM3YjQxZGVjOAogICAgICAgICAgICAgICAgLy8gaXNzdWVzOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWxhYmVsJTNBQmxvY2tBZEJsb2NrCiAgICAgICAgICAgICAgICBpZiAobWV0aG9kLmJhYikgeyAvLyB2YXJpYW50IDEKICAgICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdCbG9ja0FkQmxvY2t7ZG9tOnZhcmlhbnQxfScpOwogICAgICAgICAgICAgICAgICB3aW5bcHJvcF0gPSBudWxsOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyhtZXRob2QpLmxlbmd0aCA9PT0gMyAmJiBPYmplY3Qua2V5cyhtZXRob2QpLm1hcChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgICAgICB9KS5qb2luKCkubGVuZ3RoID09PSAzMikgeyAvLyB2YXJpYW50IDIKICAgICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdCbG9ja0FkQmxvY2t7ZG9tOnZhcmlhbnQyfScpOwogICAgICAgICAgICAgICAgICB3aW5bcHJvcF0gPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2Vycm9yJywgcHJvcCkKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIEFudGktQWRibG9ja2VycwogICAgICAgICAgdmFyIGFhYnMgPSB7CiAgICAgICAgICAgIC8vIFBsdWdpbnMgV29yZFByZXNzCiAgICAgICAgICAgIE5vQWRCbG9jayA6ICcoL3BsdWdpbnMvbm8tYWRibG9jay98L2Jsb2NrQmxvY2svYmxvY2tCbG9jay5qcXVlcnkuanMpJywKICAgICAgICAgICAgQmV0dGVyU3RvcEFkYmxvY2sgOiAnKC9wbHVnaW5zL2JldHRlci1zdG9wLWFkYmxvY2svfGJzYS1zY3JpcHQtZG9jdHlwZS5qc3xic2Etc2NyaXB0LW5vLWRvY3R5cGUuanMpJywKICAgICAgICAgICAgQWRCbG9ja0Jsb2NrZXIgOiAnL3BsdWdpbnMvd29yZHByZXNzLWFkYmxvY2stYmxvY2tlci8nLAogICAgICAgICAgICBBbnRpQmxvY2tCdWtzc2FBeW1hbiA6ICcvcGx1Z2lucy9hbnRpLWJsb2NrLycsCiAgICAgICAgICAgIEJsb2NrQWx5emVyIDogJy9wbHVnaW5zL2Jsb2NrYWx5emVyLWFkYmxvY2stY291bnRlci8nLAogICAgICAgICAgICBBZEJsb2NraW5nRGV0ZWN0b3IgOiAnL3BsdWdpbnMvYWQtYmxvY2tpbmctZGV0ZWN0b3IvJywKICAgICAgICAgICAgLy8gUGx1Z2lucyBXZWJzaXRlCiAgICAgICAgICAgIEFkd29ya21lZGlhIDogJyhhZHdvcmttZWRpYXxsb3h0a3xjb250ZW50bG9ja2luZ25ldHdvcmtzKS5jb20vZ0xvYWRlci5waHAnLAogICAgICAgICAgICBBZHNjZW5kbWVkaWEgOiAnYWRzY2VuZG1lZGlhLmNvbS9nd2pzLnBocCcsCiAgICAgICAgICAgIEZ1Y2tBZEJsb2NrIDogJygvZnVja2FkYmxvY2suanN8L2Jsb2NrYWRibG9jay5qcyknLAogICAgICAgICAgICBqUXVlcnlBZEJsb2NrIDogJy9qcXVlcnkuYWRibG9jay5qcycsCiAgICAgICAgICAgIGpRdWVyeUFkYmxvY2tEZXRlY3RvciA6ICcvanF1ZXJ5LmFkYmxvY2stZGV0ZWN0b3IuanMnLAogICAgICAgICAgICBBZEJsb2NrQWR2ZXJ0aXNlbWVudCA6ICcvYWR2ZXJ0aXNlbWVudC5qcycsCiAgICAgICAgICAgIEFkQmxvY2tBZHZlcnQgOiAnL2FkdmVydC5qcycsCiAgICAgICAgICAgIEFkQmxvY2tBZHZDdXN0b20gOiAnL2FkdmVydGlzZW1lbnQoLispLmpzJywKICAgICAgICAgICAgQWRCbG9ja0FkZnJhbWUgOiAnL2FkZnJhbWUuanMnLAogICAgICAgICAgICBBbnRpQWRCdXN0ZXIgOiAnL2FudGktYWQtYnVzdGVyLmpzJywKICAgICAgICAgICAgUlRLQW50aUFkYmxvY2sgOiAnL2Jsb2NrY2FrZS5qcycsCiAgICAgICAgICAgIEFkYmxvY2tEZXRlY3RvciA6ICcvQWRibG9ja0RldGVjdG9yL2hhbmRsZXIubWluLmpzJywKICAgICAgICAgICAgalF1ZXJ5QW50aUFkc0Jsb2NrIDogJy9qcXVlcnkuYW50aWFkc2Jsb2NrLmpzJywKICAgICAgICAgICAgQWRidWRkeSA6ICcvanMvYWRidWRkeS5taW4uanMnLAogICAgICAgICAgICBBbnRpQURzQmxvY2tlciA6ICcvYWFkYi9zY3JpcHQuanMnCiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBzY3JpcHRzID0gZG9jdW1lbnQuc2NyaXB0czsKICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc2NyaXB0cy5sZW5ndGg7IHkrKykgewogICAgICAgICAgICB2YXIgc2NyaXB0ID0gc2NyaXB0c1t5XTsKICAgICAgICAgICAgaWYgKHNjcmlwdC5zcmMpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWFicykgewogICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoYWFic1trZXldLCAnaScpLnRlc3Qoc2NyaXB0LnNyYykpIHsKICAgICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKFtrZXksIHNjcmlwdC5zcmNdKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgb25JbnNlcnQgOiBmdW5jdGlvbiAoaW5zZXJ0ZWROb2RlKSB7CgogICAgICAgICAgLy8gQWxsIE5vZGVzCiAgICAgICAgICBpZiAoQWFrLm9wdHMuaW5zZXJ0ZWQpIHsKICAgICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5zcmMgfHwKICAgICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQgfHwKICAgICAgICAgICAgICBpbnNlcnRlZE5vZGUuY2xhc3NOYW1lICYmCiAgICAgICAgICAgICAgIS9maXJlYnVnLy50ZXN0KGluc2VydGVkTm9kZS5pbm5lckhUTUwpKSB7CiAgICAgICAgICAgICAgLy8gTm9kZSBpbnNlcnRlZAogICAgICAgICAgICAgIEFhay5sb2coaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIE5vLUFkYmxvY2sgLSBodHRwOi8vd3d3Lm5vLWFkYmxvY2suY29tLwogICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQubGVuZ3RoID09IDQgJiYKICAgICAgICAgICAgL15bYS16MC05XXs0fSQvLnRlc3QoaW5zZXJ0ZWROb2RlLmlkKSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUubm9kZU5hbWUgPT0gJ0RJVicgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQuaWQgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQuaWQgPT0gaW5zZXJ0ZWROb2RlLmlkICYmCiAgICAgICAgICAgIEFhay5jb250YWlucyhpbnNlcnRlZE5vZGUuaW5uZXJIVE1MLCAnbm8tYWRibG9jay5jb20nKSkgewogICAgICAgICAgICAvLyBSZW1vdmUKICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdOby1BZGJsb2NrJywgZmFsc2UsIGxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChpbnNlcnRlZE5vZGUpOwogICAgICAgICAgICAvL0Fhay5sb2coaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTdG9wQWRibG9jayAtIGh0dHA6Ly9zdG9wYWRibG9jay5vcmcvZG93bmxvYWRzLwogICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQubGVuZ3RoID09IDcgJiYKICAgICAgICAgICAgL15hW2EtejAtOV17Nn0kLy50ZXN0KGluc2VydGVkTm9kZS5pZCkgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5vZGVOYW1lID09ICdESVYnICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5wYXJlbnROb2RlICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5wYXJlbnROb2RlLmlkICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5wYXJlbnROb2RlLmlkID09IGluc2VydGVkTm9kZS5pZCArICcyJyAmJgogICAgICAgICAgICBBYWsuY29udGFpbnMoaW5zZXJ0ZWROb2RlLmlubmVySFRNTCwgJ3N0b3BhZGJsb2NrLm9yZycpKSB7CiAgICAgICAgICAgIC8vIFJlbW92ZQogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ1N0b3BBZEJsb2NrJywgZmFsc2UsIGxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChpbnNlcnRlZE5vZGUpOwogICAgICAgICAgICAvL0Fhay5sb2coaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBbnRpQWRibG9jayAoUGFja2VyKQogICAgICAgICAgdmFyIHJlSWZyYW1lSWQgPSAvXih6ZHx3ZCkkLzsKICAgICAgICAgIHZhciByZUltZ0lkID0gL14oeGR8Z2QpJC87CiAgICAgICAgICB2YXIgcmVJbWdTcmMgPSAvXC9hZHNcL2Jhbm5lci5qcGcvOwogICAgICAgICAgdmFyIHJlSWZyYW1lU3JjID0gLyhcL2FkaGFuZGxlclwvfFwvYWRpbWFnZXNcL3xhZC5odG1sKS87CgogICAgICAgICAgLy8gQ29tbXVucwogICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICByZUltZ0lkLnRlc3QoaW5zZXJ0ZWROb2RlLmlkKSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUubm9kZU5hbWUgPT0gJ0lNRycgJiYKICAgICAgICAgICAgcmVJbWdTcmMudGVzdChpbnNlcnRlZE5vZGUuc3JjKSB8fAogICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQgJiYKICAgICAgICAgICAgcmVJZnJhbWVJZC50ZXN0KGluc2VydGVkTm9kZS5pZCkgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5vZGVOYW1lID09ICdJRlJBTUUnICYmCiAgICAgICAgICAgIHJlSWZyYW1lU3JjLnRlc3QoaW5zZXJ0ZWROb2RlLnNyYykpIHsKCiAgICAgICAgICAgIC8vIFZhcmlhbnQgMQogICAgICAgICAgICBpZiAoaW5zZXJ0ZWROb2RlLmlkID09ICd4ZCcpIHsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FudGlBZGJsb2NrUGFja2VyWmR4ZCcsIGZhbHNlLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgfSAvLyBWYXJpYW50IDIKICAgICAgICAgICAgZWxzZSBpZiAoaW5zZXJ0ZWROb2RlLmlkID09ICdnZCcpIHsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FudGlBZGJsb2NrUGFja2VyV2RnZCcsIGZhbHNlLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBSZW1vdmUKICAgICAgICAgICAgLy9BYWsubG9nKGluc2VydGVkTm9kZSk7CiAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gQWR1bmJsb2NrIC0gaHR0cDovL2FkdW5ibG9jay5jb20vCiAgICAgICAgICB2YXIgcmVJZCA9IC9eW2Etel17OH0kLzsKICAgICAgICAgIHZhciByZUNsYXNzID0gL15bYS16XXs4fSBbYS16XXs4fS87CiAgICAgICAgICB2YXIgcmVCZyA9IC9eW2Etel17OH0tYmckLzsKICAgICAgICAgIHZhciByZU1lc3NhZ2UgPSAvSWwgc2VtYmxlcmFpdCBxdWUgdm91cyB1dGlsaXNpZXogdW4gYmxvcXVldXIgZGUgcHVibGljaXTDqSAhLzsKCiAgICAgICAgICAvLyBDb21tdW5zCiAgICAgICAgICBpZiAodHlwZW9mIEFhay51dy52dGZhYiAhPSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgICB0eXBlb2YgQWFrLnV3LmFkYmxvY2tfYW50aWIgIT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLnBhcmVudE5vZGUgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLnBhcmVudE5vZGUubm9kZU5hbWUgPT0gJ0JPRFknICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICByZUlkLnRlc3QoaW5zZXJ0ZWROb2RlLmlkKSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUubm9kZU5hbWUgPT0gJ0RJVicgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5uZXh0U2libGluZy5jbGFzc05hbWUgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLm5vZGVOYW1lID09ICdESVYnKSB7CgogICAgICAgICAgICAvLyBGdWxsIFNjcmVlbiBNZXNzYWdlIChQcmVtaXVtKQogICAgICAgICAgICAvLyA8ZGl2IGlkPSJsZnloc3ZkcSIgY2xhc3M9InR2d25vcWRmIHN2b25leHJrIiBzdHlsZT0idG9wOiAxMDBweDsgb3BhY2l0eTogMTsgdmlzaWJpbGl0eTogdmlzaWJsZTsiPgogICAgICAgICAgICAvLyA8ZGl2IGNsYXNzPSJ0dndub3FkZi1iZyIgc3R5bGU9ImRpc3BsYXk6IGJsb2NrOyI+PC9kaXY+CiAgICAgICAgICAgIGlmIChpbnNlcnRlZE5vZGUuY2xhc3NOYW1lICYmCiAgICAgICAgICAgICAgcmVDbGFzcy50ZXN0KGluc2VydGVkTm9kZS5jbGFzc05hbWUpICYmCiAgICAgICAgICAgICAgcmVCZy50ZXN0KGluc2VydGVkTm9kZS5uZXh0U2libGluZy5jbGFzc05hbWUpICYmCiAgICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLnN0eWxlICYmCiAgICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7CgogICAgICAgICAgICAgIC8vIFJlbW92ZSBNZXNzYWdlCiAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCJBZFVuQmxvY2tQcmVtaXVtIik7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nKTsgLy8gb3ZlcmxheQogICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7IC8vIGJveAogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRvcCBiYXIgTWVzc2FnZSAoRnJlZSkKICAgICAgICAgICAgLy8gPGRpdiBpZD0idml4bWdybHkiPgogICAgICAgICAgICAvLyA8ZGl2IGlkPSJtZm5oYWl5eCIgY2xhc3M9Imxrcm52Ynl0Ij4KICAgICAgICAgICAgZWxzZSBpZiAoaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLmlkICYmCiAgICAgICAgICAgICAgcmVJZC50ZXN0KGluc2VydGVkTm9kZS5uZXh0U2libGluZy5pZCkgJiYKICAgICAgICAgICAgICByZU1lc3NhZ2UudGVzdChpbnNlcnRlZE5vZGUuaW5uZXJIVE1MKSkgewoKICAgICAgICAgICAgICAvLyBSZW1vdmUgTWVzc2FnZQogICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgiQWRVbkJsb2NrRnJlZSIpOwogICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBbnRpYmxvY2sgLSBodHRwOi8vYW50aWJsb2NrLm9yZy8KICAgICAgICAgIHZhciByZU1zZ0lkID0gL15bYS16MC05XXs0LDEwfSQvaTsKICAgICAgICAgIHZhciByZVRhZzEgPSAvXihkaXZ8c3BhbnxifGl8Zm9udHxzdHJvbmd8Y2VudGVyKSQvaTsKICAgICAgICAgIHZhciByZVRhZzIgPSAvXihhfGJ8aXxzfHV8cXxwfHN0cm9uZ3xjZW50ZXIpJC9pOwogICAgICAgICAgdmFyIHJlV29yZHMxID0gL2FkIGJsb2NrZXJ8YWQgYmxvY2t8YWQtYmxvY2t8YWRibG9ja2VyfGFkLWJsb2NrZXJ8YWRibG9ja3xibG9xdWV1cnxibG9xdWVhZG9yfFdlcmJlYmxvY2tlcnxhZGJsb2NrZXJ0fCYjMTU3MDsmIzE1ODM7JiMxNTc2OyYjMTYwNDsmIzE2MDg7JiMxNjAzOyAmIzE1NzY7JiMxNjA0OyYjMTU4Nzt80LHQu9C+0LrQuNGA0L7QstGJ0LjQutC+0LwvaTsKICAgICAgICAgIHZhciByZVdvcmRzMiA9IC9rYXBhdHxkaXNhYmxlfGTDqXNhY3RpdmV6fGTDqXNhY3RpdmVyfGRlc2FjdGl2ZXp8ZGVzYWN0aXZlcnxkZXNhdGl2ZXxkZXNhY3RpdmFyfGRlc2FjdGl2ZXxkZXNhY3RpdmF8ZGVha3RpdmllcmV8ZGlzYWJpbGl0YXJlfCYjOTQ1OyYjOTYwOyYjOTQ5OyYjOTU3OyYjOTQ5OyYjOTYxOyYjOTQ3OyYjOTU5OyYjOTYwOyYjOTU5OyYjOTQzOyYjOTUxOyYjOTYzOyYjOTUxO3wmIzEwNzk7JiMxMDcyOyYjMTA4NzsmIzEwODg7JiMxMDc3OyYjMTA5NzsmIzEwNzI7JiMxMDkwOyYjMTEwMDt8w6FsbMOtdHNkIGxlfHB1YmxpY2l0w6lzfNGA0LXQutC70LDQvNC1fHZlcmhpbmRlcnR8YWR2ZXJ0fGthcGF0xLFuxLF6L2k7CgogICAgICAgICAgLy8gQW50aWJsb2NrLm9yZyAoYWxsIHZlcnNpb24pCiAgICAgICAgICBpZiAoaW5zZXJ0ZWROb2RlLnBhcmVudE5vZGUgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmlkICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5zdHlsZSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUuY2hpbGROb2Rlcy5sZW5ndGggJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQgJiYKICAgICAgICAgICAgIWluc2VydGVkTm9kZS5maXJzdENoaWxkLmlkICYmCiAgICAgICAgICAgICFpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5jbGFzc05hbWUgJiYKICAgICAgICAgICAgcmVNc2dJZC50ZXN0KGluc2VydGVkTm9kZS5pZCkgJiYKICAgICAgICAgICAgcmVUYWcxLnRlc3QoaW5zZXJ0ZWROb2RlLm5vZGVOYW1lKSAmJgogICAgICAgICAgICByZVRhZzIudGVzdChpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgLy9BYWsubG9nKGluc2VydGVkTm9kZSk7CgogICAgICAgICAgICAvLyBLaWxsIGF1ZGlvIG1lc3NhZ2UKICAgICAgICAgICAgdmFyIGF1ZGlvID0gaW5zZXJ0ZWROb2RlLnF1ZXJ5U2VsZWN0b3IoImF1ZGlvW2xvb3BdIik7CiAgICAgICAgICAgIGlmIChhdWRpbykgewogICAgICAgICAgICAgIGF1ZGlvLnBhdXNlKCk7CiAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdBbnRpYmxvY2t7YXVkaW99Jyk7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoYXVkaW8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEFudGlibG9jay5vcmcgdjIKICAgICAgICAgICAgLy8gZGVtbzogaHR0cDovL3Rpbnl1cmwuY29tL2gzbXd0YTQKICAgICAgICAgICAgZWxzZSBpZiAoKEFhay5hYWJzLmFibzIgJiYgaW5zZXJ0ZWROb2RlLmlkID09IEFhay5hYWJzLmFibzIpIHx8CiAgICAgICAgICAgICAgKGluc2VydGVkTm9kZS5maXJzdENoaWxkLmhhc0NoaWxkTm9kZXMoKSAmJiByZVdvcmRzMS50ZXN0KGluc2VydGVkTm9kZS5maXJzdENoaWxkLmlubmVySFRNTCkgJiYgcmVXb3JkczIudGVzdChpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5pbm5lckhUTUwpKSkgewogICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgnQW50aWJsb2NrMntpbnNlcnR9Jyk7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBBbnRpYmxvY2sub3JnIHYzCiAgICAgICAgICAgIC8vIGRlbW86IGh0dHA6Ly90aW55dXJsLmNvbS9xZWNmYTd3CiAgICAgICAgICAgIC8vIGNhc2U6IGh0dHA6Ly90aW55dXJsLmNvbS96YnJscjNhIC8qIGZvcmsgKi8KICAgICAgICAgICAgZWxzZSBpZiAoKEFhay5hYWJzLmFibzMgJiYgaW5zZXJ0ZWROb2RlLmlkID09IEFhay5hYWJzLmFibzMpIHx8CiAgICAgICAgICAgICAgKGluc2VydGVkTm9kZS5maXJzdENoaWxkLmhhc0NoaWxkTm9kZXMoKSAmJiBpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5maXJzdENoaWxkLm5vZGVOYW1lID09ICdJTUcnICYmIC9eZGF0YTppbWFnZVwvcG5nO2Jhc2U2NC8udGVzdChpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5maXJzdENoaWxkLnNyYykpKSB7CiAgICAgICAgICAgICAgQWFrLnV3W0Fhay5hYWJzLmFibzNdID0gbnVsbDsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FudGlibG9jazN7aW5zZXJ0fScpOwogICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQmV0dGVyU3RvcEFkYmxvY2sKICAgICAgICAgICAgLy8gZGVtbzogaHR0cDovL3Rpbnl1cmwuY29tL2pzOXphdDQKICAgICAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1lpbWtydEtCCiAgICAgICAgICAgIC8vIGlzc3VlOiBodHRwOi8vdGlueXVybC5jb20vemV0Z2J0eAogICAgICAgICAgICBlbHNlIGlmIChBYWsuYWFicy5ic2EgJiYgaW5zZXJ0ZWROb2RlLmlkID09IEFhay5hYWJzLmJzYSkgewogICAgICAgICAgICAgIEFhay51d1tBYWsuYWFicy5ic2FdID0gbnVsbDsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0JldHRlclN0b3BBZGJsb2Nre2luc2VydH0nKTsKICAgICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChpbnNlcnRlZE5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vICBNYW55IGZhbHNlIHBvc2l0aXZlCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIC8vQWFrLnJlbW92ZUVsZW1lbnQoaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGJsb2NrRGV0ZWN0IDogZnVuY3Rpb24gKCkgewoKICAgICAgLy8gRXhjbHVkZSBkb21haW5zCiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNDY2CiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjYzCiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL2ZvcnVtL2Rpc2N1c3Npb24vODQyMi8KICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzk4NgogICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODU3CiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy82MTcKICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZnIvZm9ydW0vZGlzY3Vzc2lvbi81NDI2CiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy80MTkKICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzM3NwogICAgICB2YXIgZXhjbHVkZXMgPSBbIjM2MC5jbiIsICJhbWF6b24uIiwgImFwcGxlLmNvbSIsICJhc2suY29tIiwgImJhaWR1LmNvbSIsICJiaW5nLmNvbSIsICJidWZmZXJhcHAuY29tIiwgImNoYXRhbmdvLmNvbSIsICJjaHJvbWVhY3Rpb25zLmNvbSIsICJlYXN5aW5wbGF5Lm5ldCIsICJlYmF5LmNvbSIsICJmYWNlYm9vay5jb20iLCAiZmxhdHRyLmNvbSIsICJmbGlja3IuY29tIiwgImdoYWNrcy5uZXQiLCAiZ29vZ2xlLiIsICJpbWRiLmNvbSIsICJpbWdib3guY29tIiwgImltZ3VyLmNvbSIsICJpbnN0YWdyYW0uY29tIiwgImpzYmluLmNvbSIsICJqc2ZpZGRsZS5uZXQiLCAibGlua2VkaW4uY29tIiwgImxpdmUuY29tIiwgIm1haWwucnUiLCAibWljcm9zb2Z0LmNvbSIsICJtc24uY29tIiwgInBheXBhbC5jb20iLCAicGludGVyZXN0LmNvbSIsICJwcmVsb2FkZXJzLm5ldCIsICJxcS5jb20iLCAicmVkZGl0LmNvbSIsICJzdGFja292ZXJmbG93LmNvbSIsICJ0YW1wZXJtb25rZXkubmV0IiwgInR3aXR0ZXIuY29tIiwgInZpbWVvLmNvbSIsICJ3aWtpcGVkaWEub3JnIiwgInczc2Nob29scy5jb20iLCAieWFob28uIiwgInlhbmRleC5ydSIsICJ5b3V0dS5iZSIsICJ5b3V0dWJlLmNvbSIsICJ4ZW12dHYubmV0IiwgInZvZC5wbCIsICJhZ2FyLmlvIiwgInBhbmRvb24uaW5mbyIsICJmc2Yub3JnIiwgImFkYmxvY2twbHVzLm9yZyIsICJwbG5rci5jbyIsICJleGFjdHRhcmdldC5jb20iLCAiZG9sbGRpdmluZS5jb20iLCAicG9wbWVjaC5ydSIsICJjYWxtLmNvbSJdOwogICAgICB2YXIgaG9zdCA9IGxvY2F0aW9uLmhvc3Q7CiAgICAgIHZhciBleGNsdWRlZCA9IGZhbHNlOwogICAgICBleGNsdWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChleGNsdWRlKSB7CiAgICAgICAgaWYgKG5ldyBSZWdFeHAoZXhjbHVkZSkudGVzdChob3N0KSkgewogICAgICAgICAgZXhjbHVkZWQgPSB0cnVlOwogICAgICAgICAgaWYgKEFhay5vcHRzLmxvZ0V4Y2x1ZGVkKSB7CiAgICAgICAgICAgIEFhay53YXJuKCdFeGNsdWRlZCcpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBJbmNsdWRlIGRvbWFpbnMKICAgICAgLy8gSXNFdmVudHVwcG9ydGVkOiBodHRwOi8vdGlueXVybC5jb20vb2VlejhjNwogICAgICBpZiAoIWV4Y2x1ZGVkKSB7CgogICAgICAgIHZhciBoYW5kbGVyRXZlbnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHJ1bGUgPSBBYWsucnVsZXNbbmFtZV07CgogICAgICAgICAgcnVsZS5ob3N0LmZvckVhY2goZnVuY3Rpb24gKGhvc3QpIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaG9zdAogICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChob3N0KS50ZXN0KGxvY2F0aW9uLmhvc3QpKSB7CgogICAgICAgICAgICAgIC8vIE5hdGl2ZSBtb2RlCiAgICAgICAgICAgICAgaWYgKCFBYWsudXNlR00gJiYgQWFrLmlzVG9wZnJhbWUpIHsKICAgICAgICAgICAgICAgIEFhay53YXJuKCdSdW4gbmF0aXZlbHkuJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBMb2cgcnVsZSB1c2VkCiAgICAgICAgICAgICAgaWYgKHJ1bGUuaG9zdFswXSAhPSAnLio/JykgewogICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdydWxlJywgcnVsZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIAogICAgICAgICAgICAgIC8vIEJlZm9yZSBET00gbG9hZAogICAgICAgICAgICAgIGlmIChydWxlLm9uU3RhcnQpIHsKICAgICAgICAgICAgICAgIHJ1bGUub25TdGFydCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBPbiBhbGwgc3RhdGVtZW50cwogICAgICAgICAgICAgIGlmIChydWxlLm9uQWx3YXlzKSB7CiAgICAgICAgICAgICAgICBydWxlLm9uQWx3YXlzKCk7IC8vIHN0YXJ0CiAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdET01Db250ZW50TG9hZGVkJywgcnVsZS5vbkFsd2F5cyk7IC8vIGlkbGUKICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ2xvYWQnLCBydWxlLm9uQWx3YXlzKTsgLy8gZW5kCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIEJlZm9yZSBTY3JpcHQgRXhlY3V0ZWQKICAgICAgICAgICAgICBpZiAocnVsZS5vbkJlZm9yZVNjcmlwdCkgewoKICAgICAgICAgICAgICAgIC8vIG9wdGlvbnM6IGNvbnRhaW5zLCBzZWFyY2gsIHJlcGxhY2UsIG92ZXJyaWRlLCByZW1vdmUsIGV4dGVybmFsCiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uc0JlZm9yZVNjcmlwdCA9IHJ1bGUub25CZWZvcmVTY3JpcHQoKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc0JlZm9yZVNjcmlwdCA9PSAib2JqZWN0IikgewoKICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXJCZWZvcmVTY3JpcHQgPSBmdW5jdGlvbiAoZSwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgICAgIHZhciBpc0V2ZW50ID0gZSBpbnN0YW5jZW9mIHdpbmRvdy5FdmVudDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc1NjcmlwdCA9IChlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQpIHx8IGU7CgogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobykgeyAvLyBoYXNBdHRyaWJ1dGUKICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBvLmV4dGVybmFsID8gJ3NyYycgOiAnaW5uZXJIVE1MJzsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2ggPSBuZXcgUmVnRXhwKG8uY29udGFpbnMsIG8uZmxhZ3MgfHwgJycpOwoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzU2NyaXB0W3NyY10gJiYgdGhpc1NjcmlwdFtzcmNdLmxlbmd0aCAmJiBzZWFyY2gudGVzdCh0aGlzU2NyaXB0W3NyY10pKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIHNjcmlwdCBleGVjdXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBzY3JpcHQKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXNTY3JpcHQucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSBhIHBhcnQgb2YgdGhlIHNjcmlwdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5yZXBsYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NyaXB0W3NyY10gPSB0aGlzU2NyaXB0W3NyY10ucmVwbGFjZShzZWFyY2gsIG8ucmVwbGFjZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdTY3JpcHQsIHRoaXNTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IC8vIE92ZXJyaWRlIHNjcmlwdAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvLm92ZXJyaWRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NyaXB0W3NyY10gPSBvLm92ZXJyaWRlOwogICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3U2NyaXB0LCB0aGlzU2NyaXB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBSZW1vdmUgc2NyaXB0CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8ucmVtb3ZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXNTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5kZXRlY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIEFhay5kZXRlY3RlZChvLmRldGVjdGVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQkJCQkJCQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFhay5vcHRzLmxvZ0ludGVyY2VwdGVkU2NyaXB0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coc3JjLCBvLCB0aGlzU2NyaXB0LCBuZXdTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAvLyBCcm93c2VyIHN1cHBvcnRpbmcgZXZlbnQgYmVmb3Jlc2NyaXB0ZXhlY3V0ZQogICAgICAgICAgICAgICAgICBpZiAoJ29uYmVmb3Jlc2NyaXB0ZXhlY3V0ZScgaW4gZG9jdW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdiZWZvcmVzY3JpcHRleGVjdXRlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJCZWZvcmVTY3JpcHQoZSwgb3B0aW9uc0JlZm9yZVNjcmlwdCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIEJyb3dzZXIgbm90IHN1cHBvdGluZyBiZWZvcmVzY3JpcHRleGVjdXRlCgogICAgICAgICAgICAgICAgICAgIHZhciBsb2FkRG9jdW1lbnQgPSBmdW5jdGlvbiAob3B0aW9uc0JlZm9yZVNjcmlwdCkgewogICAgICAgICAgICAgICAgICAgICAgLy9pZiAoZG9jdW1lbnQucmVmZXJyZXIgPT09ICcnKQogICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgQWFrLndhcm4oJ29uYmVmb3Jlc2NyaXB0LWNvbXBhdGlibGUnKTsKCiAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGxvYWRpbmcKICAgICAgICAgICAgICAgICAgICAgIEFhay5hZGRTY3JpcHQoJ3dpbmRvdy5zdG9wKCk7Jyk7IC8vIGNocm9tZS9vcGVyYQogICAgICAgICAgICAgICAgICAgICAgLy9BYWsuYWRkU2NyaXB0KCdkb2N1bWVudC5vcGVuKCk7Jyk7IC8vIGZpcmVmb3gKCiAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgY29udGVudAogICAgICAgICAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgOiBsb2NhdGlvbi5ocmVmLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICJSZWZlcmVyIiA6IGRvY3VtZW50LnJlZmVycmVyCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlciA9IG5ldyB3aW5kb3cuRE9NUGFyc2VyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgInRleHQvaHRtbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JpcHRzID0gZG9jLnNjcmlwdHM7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNTY3JpcHQgPSBzY3JpcHRzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlckJlZm9yZVNjcmlwdCh0aGlzU2NyaXB0LCBvcHRpb25zQmVmb3JlU2NyaXB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXcml0ZSBuZXcgY29udGVudCB0byBIVE1MIGRvY3VtZW50OgogICAgICAgICAgICAgICAgICAgICAgICAgIEFhay5hZGRTY3JpcHQoJ2RvY3VtZW50Lm9wZW4oKTsgZG9jdW1lbnQud3JpdGUodW5lc2NhcGUoIicgKyB3aW5kb3cuZXNjYXBlKGh0bWwpICsgJyIpKTsgZG9jdW1lbnQuY2xvc2UoKTsnKTsgLy8gY2hyb21lL29wZXJhCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BYWsuYWRkU2NyaXB0KCdkb2N1bWVudC53cml0ZSh1bmVzY2FwZSgiJyArIGVzY2FwZShodG1sKSArICciKSk7IGRvY3VtZW50LmNsb3NlKCk7Jyk7IC8vIGZpcmVmb3gKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBsb2FkRG9jdW1lbnQob3B0aW9uc0JlZm9yZVNjcmlwdCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IC8vIEFmdGVyIFNjcmlwdCBFeGVjdXRlZAogICAgICAgICAgICAgIGlmIChydWxlLm9uQWZ0ZXJTY3JpcHQpIHsKICAgICAgICAgICAgICAgIGlmICgnb25hZnRlcnNjcmlwdGV4ZWN1dGUnIGluIGRvY3VtZW50KSB7IC8vIE1vemlsbGEgRmlyZWZveAogICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdhZnRlcnNjcmlwdGV4ZWN1dGUnLCBydWxlLm9uQWZ0ZXJTY3JpcHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBXaGVuIERPTSBMb2FkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25JZGxlKSB7CiAgICAgICAgICAgICAgICBpZiAoIUFhay51c2VHTSkgeyAvLyBOYXRpdmUgbW9kZQogICAgICAgICAgICAgICAgICBydWxlLm9uSWRsZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy9BYWsub25FdmVudCh3aW5kb3csICdET01Db250ZW50TG9hZGVkJywgcnVsZS5vbklkbGUpOwogICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdET01Db250ZW50TG9hZGVkJywgcnVsZS5vbklkbGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBXaGVuIFdpbmRvdyBMb2FkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25FbmQpIHsKICAgICAgICAgICAgICAgIGlmICghQWFrLnVzZUdNKSB7IC8vIE5hdGl2ZSBtb2RlCiAgICAgICAgICAgICAgICAgIHJ1bGUub25FbmQoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ2xvYWQnLCBydWxlLm9uRW5kKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gQXR0ck1vZGlmaWVkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25BdHRyTW9kaWZpZWQpIHsKICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ0RPTUF0dHJNb2RpZmllZCcsIHJ1bGUub25BdHRyTW9kaWZpZWQsIGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gU3VidHJlZU1vZGlmaWVkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25TdWJ0cmVlTW9kaWZpZWQpIHsKICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ0RPTVN1YnRyZWVNb2RpZmllZCcsIHJ1bGUub25TdWJ0cmVlTW9kaWZpZWQsIGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gRWxlbWVudHMgYXJlIEluc2VydGVkIGluIERvY3VtZW50CiAgICAgICAgICAgICAgaWYgKHJ1bGUub25JbnNlcnQpIHsKCiAgICAgICAgICAgICAgICAvLyBNdXRhdGlvbiBPYnNlcnZlcgogICAgICAgICAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vbXh4emVlNAogICAgICAgICAgICAgICAgLy8gc3VwcG9ydDogaHR0cDovL3Rpbnl1cmwuY29tL25lcG43dnkKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgIT0gJ3VuZGVmaW5lZCcgfHwKICAgICAgICAgICAgICAgICAgdHlwZW9mIFdlYktpdE11dGF0aW9uT2JzZXJ2ZXIgIT0gJ3VuZGVmaW5lZCcpIHsKCiAgICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uIE9ic2VydmVyCiAgICAgICAgICAgICAgICAgIHZhciBNdXRhdGlvbk9ic2VydmVyMSA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8IHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyOwoKICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlCiAgICAgICAgICAgICAgICAgIHZhciBvYnMxID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIxKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBzYWZlbHkgdXNlIGBmb3JFYWNoYCBiZWNhdXNlIHdlIGFscmVhZHkgdXNlIG11dGF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAvLyBvYnNlcnZlcnMgdGhhdCBhcmUgbW9yZSByZWNlbnQgdGhhbiBgZm9yRWFjaGAuIChzb3VyY2U6IE1ETikKICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3YW50IG9ubHkgYWRkZWQgbm9kZXMKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtdXRhdGlvbi5hZGRlZE5vZGVzLCBmdW5jdGlvbiAoYWRkZWROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQWFrLm9wdHMubG9nSW5zZXJ0ZWROb2RlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBYWsubG9nKGFkZGVkTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLm9uSW5zZXJ0KGFkZGVkTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlcgogICAgICAgICAgICAgICAgICBvYnMxLm9ic2VydmUoZG9jdW1lbnQsIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3QgOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHN1YnRyZWUgOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gTXV0YXRpb24gRXZlbnRzIChBbHRlcm5hdGl2ZSBTb2x1dGlvbikKICAgICAgICAgICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL29wOTVyZnkKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICJET01Ob2RlSW5zZXJ0ZWQiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChBYWsub3B0cy5sb2dJbnNlcnRlZE5vZGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBBYWsubG9nKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcnVsZS5vbkluc2VydChlLnRhcmdldCk7CiAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gRWxlbWVudHMgYXJlIFJlbW92ZWQgaW4gRG9jdW1lbnQKICAgICAgICAgICAgICBpZiAocnVsZS5vblJlbW92ZSkgewoKICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uIE9ic2VydmVyCiAgICAgICAgICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS9teHh6ZWU0CiAgICAgICAgICAgICAgICAvLyBzdXBwb3J0OiBodHRwOi8vdGlueXVybC5jb20vbmVwbjd2eQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciAhPSAndW5kZWZpbmVkJyB8fAogICAgICAgICAgICAgICAgICB0eXBlb2YgV2ViS2l0TXV0YXRpb25PYnNlcnZlciAhPSAndW5kZWZpbmVkJykgewoKICAgICAgICAgICAgICAgICAgLy8gTXV0YXRpb24gT2JzZXJ2ZXIKICAgICAgICAgICAgICAgICAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CgogICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UKICAgICAgICAgICAgICAgICAgdmFyIG9iczIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcjIoZnVuY3Rpb24gKG11dGF0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuIHNhZmVseSB1c2UgYGZvckVhY2hgIGJlY2F1c2Ugd2UgYWxyZWFkeSB1c2UgbXV0YXRpb24KICAgICAgICAgICAgICAgICAgICAgIC8vIG9ic2VydmVycyB0aGF0IGFyZSBtb3JlIHJlY2VudCB0aGFuIGBmb3JFYWNoYC4gKHNvdXJjZTogTUROKQogICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHdhbnQgb25seSByZW1vdmVkIG5vZGVzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi5yZW1vdmVkTm9kZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtdXRhdGlvbi5yZW1vdmVkTm9kZXMsIGZ1bmN0aW9uIChyZW1vdmVkTm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFhay5vcHRzLmxvZ1JlbW92ZWROb2RlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBYWsubG9nKHJlbW92ZWROb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUub25SZW1vdmUocmVtb3ZlZE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIKICAgICAgICAgICAgICAgICAgb2JzMi5vYnNlcnZlKGRvY3VtZW50LCB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0IDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlIDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uIEV2ZW50cyAoQWx0ZXJuYXRpdmUgU29sdXRpb24pCiAgICAgICAgICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS9vcDk1cmZ5CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgQWFrLm9uRXZlbnQod2luZG93LCAiRE9NTm9kZVJlbW92ZWQiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChBYWsub3B0cy5sb2dSZW1vdmVkTm9kZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coZS50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBydWxlLm9uUmVtb3ZlKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAKICAgICAgICAgICAgICAvLyBBYWsgRXZlbnRzCiAgICAgICAgICAgICAgQWFrLm9uRXZlbnQod2luZG93LCAnZGV0ZWN0ZWQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgQWFrLmluZm8oWydBbnRpQWRiS2lsbGVyJywgQWFrLmlzVG9wZnJhbWUgPyAndG9wZnJhbWUnIDogJ3N1YmZyYW1lJywgbG9jYXRpb24uaG9zdCwgZS5kZXRhaWxdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gQXBwbHkgcnVsZXMKICAgICAgICBmb3IgKHZhciBuYW1lIGluIEFhay5ydWxlcykgewogICAgICAgICAgaWYgKEFhay5ydWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICBoYW5kbGVyRXZlbnRzKEFhaywgbmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgQWFrLmluaXRpYWxpemUoKTsKCn0pKHdpbmRvdyk7"},{"name":"Enable Right Click | Reek","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http*://*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1540408179622,"data":{}},"enabled":true,"position":4,"uuid":"2b41a01a-aaa4-4e71-9403-3f2276bc17f7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgRW5hYmxlIFJpZ2h0IENsaWNrIHwgUmVlawovLyBAbmFtZXNwYWNlIE84TU1sc0ZaNGFvT2RjakIKLy8gQGRlc2NyaXB0aW9uIEVuYWJsZSByaWdodCBjbGljayBvbiB3ZWJzaXRlcyBoYXZpbmcgZGlzYWJsZWQKLy8gQHZlcnNpb24gMS4wCi8vIEBsaWNlbnNlIENyZWF0aXZlIENvbW1vbnMgQlktTkMtU0EKLy8gQGVuY29kaW5nIHV0Zi04Ci8vIEBpY29uIGh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci9hZmI4Mzc2YTlmNjM0Y2QzNTAxYWY0Mzg3ZGU2NDI1Zi5wbmcKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qCi8vID09L1VzZXJTY3JpcHQ9PQoKICAvLyBFbmFibGUgcmlnaHQgY2xpY2sKICB1bnNhZmVXaW5kb3cuZG9jdW1lbnQub25jb250ZXh0bWVudSA9IG51bGw7"},{"name":"Remove Youtube Ads","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*youtube.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1540408179623,"data":{}},"enabled":true,"position":5,"uuid":"334b2eaf-79e1-40f1-bf60-09834b6f2213","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFJlbW92ZSBZb3V0dWJlIEFkcwovLyBAbmFtZXNwYWNlICAgUFhnYW1lcgovLyBAZGVzY3JpcHRpb24gUmVtb3ZlIGFkcwovLyBAaW5jbHVkZSAgICAgKnlvdXR1YmUuY29tLyoKLy8gQHZlcnNpb24gICAgIDEKLy8gQGdyYW50ICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09Cgpkb2N1bWVudC5jb29raWU9IlZJU0lUT1JfSU5GTzFfTElWRT1vS2NrVlNxdmFHdzsgcGF0aD0vOyBkb21haW49LnlvdXR1YmUuY29tIjs="},{"name":"Hide ads on Facebook","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http://tasks.libertagia.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["libertagia.com"]}},"storage":{"ts":1540408179623,"data":{}},"enabled":true,"position":6,"uuid":"8e32de25-25cd-419a-9b44-583b146c38b4","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIEhpZGUgYWRzIG9uIEZhY2Vib29rCi8vIEBkZXNjcmlwdGlvbiAgICBSZW1vdmVzICJQZW9wbGUgeW91IG1heSBrbm93IiwgIlJlY29tbWVuZGVkIFBhZ2VzIiBhbmQgc2ltaWxhciBvbiBGYWNlYm9vay4KLy8gQG5hbWVzcGFjZSAgICAgIGh0dHA6Ly9qbnYuZ2l0aHViLmlvCi8vIEBkb21haW4gICAgICAgICBsaWJlcnRhZ2lhLmNvbQovLyBAaW5jbHVkZSAgICAgICAgaHR0cDovL3Rhc2tzLmxpYmVydGFnaWEuY29tLyoKLy8gQGdyYW50ICAgICAgICAgIEdNX2FkZFN0eWxlCi8vIEB2ZXJzaW9uIDAuMC4xLjIwMTUwMjA0MTczMzUyCi8vID09L1VzZXJTY3JpcHQ9PQoKCi8qIFRlbXBsYXRlIE5hbWU6IENvbnF1ZXIgRGVzY3JpcHRpb246IEFkbWluIERhc2hib2FyZCBUZW1wbGF0ZS4gQXV0aG9yOiBTaHVocmF0IFNhaXBvdiBBdXRob3IgVVJJOiBodHRwOi8vYXhlbGxhLmNvLnVrIFZlcnNpb246IDEuMCAqLyBALW1zLXZpZXdwb3J0IHsKCSB3aWR0aDogZGV2aWNlLXdpZHRoOwoJIG92ZXJmbG93LXk6IGF1dG87CiB9CgogLyogYm9keSBzdHlsaW5nICovIGJvZHkgewoJY29sb3I6ICMwMDA7CgkgZm9udC1mYW1pbHk6ICdBcmlhbCc7CgkgcGFkZGluZzogMHB4ICFpbXBvcnRhbnQ7CgkgbWFyZ2luOiAwcHggIWltcG9ydGFudDsKCSBvdmVyZmxvdy15OiBhdXRvOwoJIGZvbnQtc2l6ZToxM3B4OwogfQoKIC8qIGZpeCBmb3IgZm9udCBhd2Vzb21lIGljb24gY2xhc3NlcyAqLyBbY2xhc3NePSJpY29uLSJdLCBbY2xhc3MqPSIgaWNvbi0iXSxbY2xhc3NePSJpY29uLSJdOmhvdmVyLCBbY2xhc3MqPSIgaWNvbi0iXTpob3ZlciB7CgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7CiB9CgogLyogZ2VuZXJhbCB0eXBvZ3JhcGh5Ki8gaDMgc21hbGwsIGggc21hbGwsIGg1IHNtYWxsIHsKCWNvbG9yOiAjNDQ0OwogfQoKIGEgewoJdGV4dC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKCSBjb2xvcjogIzAxNmZhNzsKIH0KCiAubmV0d29yay1mb3JtIGxhYmVsewoJbWFyZ2luLXJpZ2h0OiAxMHB4ICFpbXBvcnRhbnQ7CiB9CgogLm5ldHdvcmstZm9ybSBsYWJlbCwgLm5ldHdvcmstZm9ybSBpbnB1dFt0eXBlPSJyYWRpbyJdewoJbWFyZ2luLXRvcDogNXB4ICFpbXBvcnRhbnQ7CiB9CgogLm5ldHdvcmstZm9ybXsKCW1hcmdpbi10b3A6IDNweDsKIH0KCiAucGFnZS10aXRsZSB7Cglmb250LXNpemU6IDIycHg7CgkgZGlzcGxheTogYmxvY2s7CgkgZm9udC13ZWlnaHQ6IG5vcm1hbCAhaW1wb3J0YW50OwoJIG1hcmdpbjogMTNweCAwcHggOHB4IDBweDsKIH0KCiAucGFnZS10aXRsZSBzbWFsbCB7Cglmb250LXNpemU6IDE0cHg7CiB9CgogLyogZ2VuZXJhbCB0b29scyAqLyBpbWcuY2VudGVyIHsKCXRleHQtYWxpZ246Y2VudGVyOwogfQoKIC5waG9uZS1tYXJnaW4tdG9wLTU6YmVmb3JlIHsKCWRpc3BsYXk6IGJsb2NrOwoJIG1hcmdpbi10b3A6IDVweDsKIH0KCiAubm8tcGFkZGluZyB7CglwYWRkaW5nOiAwcHggIWltcG9ydGFudDsKIH0KCiAubm8tbWFyZ2luIHsKCW1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7CiB9CgogLm5vLWJvdHRvbS1zcGFjZSB7CglwYWRkaW5nLWJvdHRvbTowcHggIWltcG9ydGFudDsKCSBtYXJnaW4tYm90dG9tOiAwcHggIWltcG9ydGFudDsKIH0KCiAubm8tdG9wLXNwYWNlIHsKCXBhZGRpbmctdG9wOjBweCAhaW1wb3J0YW50OwoJIG1hcmdpbi10b3A6IDBweCAhaW1wb3J0YW50OwogfQoKIC5ibG9jay1tYXJnaW4tYm90dG9tLTUgewoJZGlzcGxheTogaW5saW5lLWJsb2NrOwoJIG1hcmdpbi1ib3R0b206IDVweDsKIH0KCiAuaGlkZSB7CglkaXNwbGF5OiBub25lOwogfQoKIC5ib2xkIHsKCWZvbnQtd2VpZ2h0OmJvbGQ7CiB9CgogLmZpeC1tYXJnaW4gewoJbWFyZ2luLWxlZnQ6IDBweCAhaW1wb3J0YW50IAp9CgogLmJvcmRlciB7Cglib3JkZXI6IDFweCBzb2xpZCAjZGRkIAp9CgogLnNtYWxsIHsKCWZvbnQtc2l6ZTogMTFweCAhaW1wb3J0YW50OwoJIGNvbG9yOiAjMDAwOwoJIGZvbnQtd2VpZ2h0OiBib2xkOwogfQoKIC5idG4tdG9wLXNwYWNlIHsKCW1hcmdpbi10b3A6IDVweCAhaW1wb3J0YW50OwogfQoKIC5pdGFsaWMgewoJZm9udC1zdHlsZTogaXRhbGljICFpbXBvcnRhbnQ7CiB9CgogaS5iaWcgewoJZm9udC1zaXplOiAyMHB4OwogfQoKIGkud2FybmluZyB7Cgljb2xvcjogI2QxMjYxMDsKIH0KCiBpLmNyaXRpY2FsIHsKCWNvbG9yOiAjMzdiN2YzOwogfQoKIGkubm9ybWFsIHsKCWNvbG9yOiAjNTJlMTM2OwogfQoKIGhyIHsKCW1hcmdpbjogMTVweCAwOwoJIGJvcmRlcjogMDsKCSBib3JkZXItdG9wOiAxcHggc29saWQgI0UwREZERjsKCSBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0ZFRkVGRTsKIH0KCiBpLmljb24sIGEuaWNvbiB7Cgljb2xvcjogIzk5OTsKIH0KCiBhLmljb246aG92ZXIgewoJdGV4dC1kZWNvcmF0aW9uOiBub25lOwoJIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZS1pbi1vdXQ7CgkgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4xcyBlYXNlLWluLW91dDsKCSAtby10cmFuc2l0aW9uOiBhbGwgMC4xcyBlYXNlLWluLW91dDsKCSAtbXMtdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZS1pbi1vdXQ7CgkgdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZS1pbi1vdXQ7Cgkgb3BhY2l0eTogLjQ7CiB9CgogYS5pY29uLmh1Z2UgaXsKCWZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50OwogfQoKIC5zcGFjZTUgewoJZGlzcGxheTogYmxvY2s7CgkgaGVpZ2h0OiA1cHggIWltcG9ydGFudDsKCSBjbGVhcjogYm90aDsKIH0KCiAuc3BhY2U3IHsKCWhlaWdodDogN3B4ICFpbXBvcnRhbnQ7CgkgY2xlYXI6IGJvdGg7CiB9CgogLnNwYWNlMTAgewoJaGVpZ2h0OiAxMHB4ICFpbXBvcnRhbnQ7CgkgY2xlYXI6IGJvdGg7CiB9CgogLnNwYWNlMTIgewoJaGVpZ2h0OiAxMnB4ICFpbXBvcnRhbnQ7CgkgY2xlYXI6IGJvdGg7CiB9CgogLnNwYWNlMTUgewoJaGVpZ2h0OiAxNXB4ICFpbXBvcnRhbnQ7CgkgY2xlYXI6IGJvdGg7CiB9CgogLnNwYWNlMjAgewoJaGVpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7CgkgY2xlYXI6IGJvdGg7CiB9CgogLm5vLXRleHQtc2hhZG93IHsKCXRleHQtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiB9CgogLypmaXggb3V0bGluZXMgb24gY2xpY2sqLyBhLGE6Zm9jdXMsIGE6aG92ZXIsIGE6YWN0aXZlIHsKCW91dGxpbmU6IDA7CiB9CgogLypsb2dvKi8gI2hlYWRlciAuYnJhbmQgewoJbWFyZ2luLXRvcDogLTFweCAhaW1wb3J0YW50OwoJIHdpZHRoOiAxNDBweDsKIH0KCiAvKiBoZWFkZXIgbmF2IGJhciovICNoZWFkZXIubmF2YmFyIHsKCW1hcmdpbi1ib3R0b206IDNweCAhaW1wb3J0YW50OwoJIG1pbi13aWR0aDogMHB4OwogfQoKICNoZWFkZXIgLm5hdmJhci1pbm5lciAubmF2ID4gbGkuZHJvcGRvd24sIC5uYXZiYXItaW5uZXIgLm5hdiA+IGxpLmRyb3Bkb3duID4gYSB7CglwYWRkaW5nLWxlZnQ6IDRweCAhaW1wb3J0YW50OwoJIHBhZGRpbmctcmlnaHQ6IDRweCAhaW1wb3J0YW50OwogfQoKICNoZWFkZXIgLm5hdmJhci1pbm5lciAubmF2ID4gbGkgewoJbWFyZ2luLWxlZnQ6IDBweCAhaW1wb3J0YW50OwoJIG1hcmdpbi1yaWdodDogMHB4ICFpbXBvcnRhbnQ7CiB9CgogI2hlYWRlciAubmF2YmFyLWlubmVyIGxpLmRyb3Bkb3duIC5kcm9wZG93bi10b2dnbGUgaSB7Cglmb250LXNpemU6IDE1cHg7CiB9CgogI2hlYWRlciAubmF2YmFyLWlubmVyIGxpLmRyb3Bkb3duIC5kcm9wZG93bi10b2dnbGUgLmxhYmVsIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCSB0b3A6LTNweDsKCSBmb250LXNpemU6IDlweCAhaW1wb3J0YW50OwoJIHBhZGRpbmctdG9wOiAwcHggIWltcG9ydGFudDsKCSBwYWRkaW5nLWJvdHRvbTogMHB4ICFpbXBvcnRhbnQ7CgkgbWFyZ2luLXRvcDogMHB4ICFpbXBvcnRhbnQ7CgkgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7CiB9CgogI2hlYWRlciAubmF2YmFyLWlubmVyIC5uYXYgLmRyb3Bkb3duLXRvZ2dsZTpob3ZlciwgLm5hdmJhci1pbm5lciAubmF2IC5kcm9wZG93bi5vcGVuIC5kcm9wZG93bi10b2dnbGUgewoJLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CgkgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CgkgYm9yZGVyLXJhZGl1czogNHB4OwogfQoKICNoZWFkZXIubmF2YmFyLWludmVyc2UgLmJ0bi1uYXZiYXIgewoJbWFyZ2luLXRvcDogNnB4OwoJIGNvbG9yOiB3aGl0ZTsKCSB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KTsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjZTllYmVjOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2U5ZWJlYywgI2NhY2VkMSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCNlOWViZWMpLCB0bygjY2FjZWQxKSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjZTllYmVjLCAjY2FjZWQxKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjZTllYmVjLCAjY2FjZWQxKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZTllYmVjLCAjY2FjZWQxKTsKCSBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CgkgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmY2FjZWQxJywgZW5kQ29sb3JzdHI9JyNmZmNhY2VkMScsIEdyYWRpZW50VHlwZT0wKTsKCSBib3JkZXItY29sb3I6ICNjYWNlZDEgI2NhY2VkMSBibGFjazsKCSBib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKSByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjI1KTsKIH0KCiAjaGVhZGVyLm5hdmJhci1pbnZlcnNlIC5idG4tbmF2YmFyOmhvdmVyIHsKCWJhY2tncm91bmQtY29sb3I6ICNjYWNlZDE7CiB9CgogI2hlYWRlciAubmF2YmFyLWlubmVyIHsKCXRvcDowcHg7Cgkgd2lkdGg6IDEwMCU7CgkgbWFyZ2luOiAwcHggIWltcG9ydGFudDsKCSBtYXJnaW4tYm90dG9tOiAtMnB4ICFpbXBvcnRhbnQ7CgkgYm9yZGVyLXRvcDogMHB4ICFpbXBvcnRhbnQ7CgkgYm9yZGVyLWxlZnQ6IDBweCAhaW1wb3J0YW50OwoJIGJvcmRlci1yaWdodDogMHB4ICFpbXBvcnRhbnQ7CgkgcGFkZGluZzogMHB4OwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMDsKCSAtbW96LWJvcmRlci1yYWRpdXM6IDA7CgkgYm9yZGVyLXJhZGl1czogMDsKIH0KCiAjaGVhZGVyLm5hdmJhci1pbnZlcnNlIC5uYXZiYXItaW5uZXIgewoJcGFkZGluZy10b3A6IDRweDsKCSBoZWlnaHQ6IDQycHg7CiB9CgogI2hlYWRlci5uYXZiYXItaW52ZXJzZSAuZGl2aWRlci12ZXJ0aWNhbCB7CgloZWlnaHQ6IDQwcHg7CiB9CgogI2hlYWRlciAubmF2YmFyLXNlYXJjaCB7CgltYXJnaW4tbGVmdDogMTEwcHg7CiB9CgogI2hlYWRlciAudG9wLW5hdiAuZHJvcGRvd24tbWVudSB7CgltYXJnaW4tdG9wOiAzcHg7CiB9CgogI2hlYWRlciAuc2VhcmNoLXF1ZXJ5LCAjc2lkZWJhciAuc2VhcmNoLXF1ZXJ5ICB7CglwYWRkaW5nLXJpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7CiB9CgogI2hlYWRlciAuc2VhcmNoLWlucHV0LWljb24gPiBpLCAjc2lkZWJhciAuc2VhcmNoLWlucHV0LWljb24gPiBpIHsKCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OwoJIHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OwoJIHRvcDogMnB4ICFpbXBvcnRhbnQ7CgkgcmlnaHQ6IDI4cHggIWltcG9ydGFudDsKCSBmb250LXNpemU6IDE4cHg7CgkgY3Vyc29yOiBwb2ludGVyOwogfQoKIC8qIG1haW4gY29udGFpbmVyICovICNjb250YWluZXIgewp9CgogLmZpeGVkLXRvcCAjY29udGFpbmVyIHsKCW1hcmdpbi10b3A6IDQ4cHg7CiB9CgogLyogaTggZml4IGZvciBmb3JtIGlucHV0IGhlaWdodCBpbiBmbHVpZCByb3dzICovIC5pZTggLnJvdy1mbHVpZCBbY2xhc3MqPSJzcGFuIl0gewoJMW1pbi1oZWlnaHQ6IDIwcHggIWltcG9ydGFudDsKIH0KCiAvKiBib2R5IGNvbnRhaW5lciAqLyAjYm9keSB7CgltYXJnaW4tdG9wOiA3cHg7CgkgbWFyZ2luLWxlZnQ6IDIxNXB4OwoJIG1pbi1oZWlnaHQ6IDYwMHB4OwoJIGJhY2tncm91bmQ6ICNmN2Y3ZjcgdXJsKCIuLi9pbWcvYm9keS1iZy5wbmciKTsKCSBib3JkZXItYm90dG9tOiAycHggc29saWQgI2RkZDsKIH0KCiAvKiBwYWdlIGNvbnRhaW5lciAqLyAjcGFnZSB7Cn0KCiAvKiBzaWRlYmFyIG1lbnUgKi8gI3NpZGViYXIgLm5hdmJhci1zZWFyY2ggewoJYm9yZGVyOiAwcHg7CgkgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CgkgLW1vei1ib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CgkgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogfQoKICNzaWRlYmFyID4gdWwgewoJbGlzdC1zdHlsZTogbm9uZTsKCSBtYXJnaW46IDA7CgkgcGFkZGluZzogMDsKCSBtYXJnaW46IDA7CgkgcGFkZGluZzogMDsKCSAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDBweDsKCSAtbW96LWJvcmRlci1yYWRpdXM6IDBweDsKCSBib3JkZXItcmFkaXVzOiAwcHg7CiB9CgogI3NpZGViYXIgPiB1bCA+IGxpIHsKCWRpc3BsYXk6IGJsb2NrOwoJIG1hcmdpbjogMDsKCSBwYWRkaW5nOiAwOwoJIGJvcmRlcjogMHB4OwogfQoKICNzaWRlYmFyID4gdWwgPiBsaSA+IGEgewoJZGlzcGxheTogYmxvY2s7CgkgcG9zaXRpb246IHJlbGF0aXZlOwoJIG1hcmdpbjogMDsKCSBib3JkZXI6IDBweDsKCSBwYWRkaW5nOiAxMHB4IDE1cHg7CgkgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwcHggIWltcG9ydGFudDsKCSAtbW96LWJvcmRlci1yYWRpdXM6IDBweCAhaW1wb3J0YW50OwoJIGJvcmRlci1yYWRpdXM6IDBweCAhaW1wb3J0YW50OwoJIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKCSBmb250LXNpemU6IDEzcHg7CgkgZm9udC13ZWlnaHQ6IGJvbGQ7CiB9CgogI3NpZGViYXIgPiB1bCA+IGxpIGEgaSB7Cgljb2xvcjojZWFlYWVhOwoJIGZvbnQtc2l6ZTogMThweDsKIH0KCiAjc2lkZWJhciA+IHVsID4gbGkuYWN0aXZlID4gYXsKCWJvcmRlcjogbm9uZTsKIH0KCiAjc2lkZWJhciA+IHVsID4gbGkuYWN0aXZlIHsKCWJvcmRlci1yaWdodDogNHB4IHNvbGlkICNkMTI2MTA7CiB9CgogI3NpZGViYXIgPiB1bCA+IGxpLmFjdGl2ZSA+IGEgLnRyaWFuZ2xlIHsKCXdpZHRoOiAwOwoJIGhlaWdodDogMDsKCSBib3JkZXItcmlnaHQ6IDdweCBzb2xpZCAjZjNmM2YzOwoJIGJvcmRlci10b3A6IDEycHggc29saWQgdHJhbnNwYXJlbnQ7CgkgYm9yZGVyLWJvdHRvbTogMTJweCBzb2xpZCB0cmFuc3BhcmVudDsKCSBmbG9hdDogcmlnaHQ7CgkgcG9zaXRpb246IGFic29sdXRlOwoJIHJpZ2h0OjBweDsKCSB0b3A6OHB4OwogfQoKICNzaWRlYmFyIHVsID4gbGkgPiBhIC5hcnJvdyB7CglmbG9hdDogcmlnaHQ7CgkgbWFyZ2luLXRvcDogNnB4OwoJIG1hcmdpbi1yaWdodDogNXB4OwoJIHdpZHRoOiAwOwoJIGhlaWdodDogMDsKCSBib3JkZXItcmlnaHQ6IDVweCBzb2xpZCAjZjNmM2YzOwoJIGJvcmRlci10b3A6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKCSBib3JkZXItYm90dG9tOiA0cHggc29saWQgdHJhbnNwYXJlbnQ7CiB9CgogI3NpZGViYXIgPiB1bCA+IGxpID4gYSAuYXJyb3cub3BlbiB7CglmbG9hdDogcmlnaHQ7CgkgbWFyZ2luLXRvcDogMTBweDsKCSBtYXJnaW4tcmlnaHQ6IDEwcHg7Cgkgd2lkdGg6IDA7CgkgaGVpZ2h0OiAwOwoJIGJvcmRlci10b3A6IDVweCBzb2xpZCAjZjNmM2YzOwoJIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7CgkgYm9yZGVyLXJpZ2h0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7CiB9CgogI3NpZGViYXIgPiB1bCA+IGxpID4gdWwuc3ViIHsKCWRpc3BsYXk6IG5vbmU7CgkgbGlzdC1zdHlsZTogbm9uZTsKCSBjbGVhcjogYm90aDsKCSBtYXJnaW46IDEycHggMHB4IDEycHggMjBweDsKIH0KCiAjc2lkZWJhciA+IHVsID4gbGkuYWN0aXZlID4gdWwuc3ViIHsKCWRpc3BsYXk6IGJsb2NrOwogfQoKICNzaWRlYmFyID4gdWwgPiBsaSA+IHVsLnN1YiA+IGxpIHsKCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsKCSBwYWRkaW5nOiAwcHg7CiB9CgogI3NpZGViYXIgPiB1bCA+IGxpID4gdWwuc3ViID4gbGkgPiBhIHsKCWRpc3BsYXk6IGJsb2NrOwoJIHBvc2l0aW9uOiByZWxhdGl2ZTsKCSBtYXJnaW46IDRweCA0MHB4IDRweCAwOwoJIHBhZGRpbmc6IDRweCAxNXB4OwoJIGNvbG9yOiAjY2NjOwoJIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKCSB0ZXh0LXNoYWRvdzogMCAxcHggMXB4ICMwMDA7CgkgZm9udC1zaXplOiAxM3B4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwoJIGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsKIH0KCiAjc2lkZWJhciA+IHVsID4gbGkgPiB1bC5zdWIgPiBsaS5hY3RpdmUgPiBhLCAjc2lkZWJhciA+IHVsID4gbGkgPiB1bC5zdWIgPiBsaSA+IGE6aG92ZXIgewoJLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CgkgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CgkgYm9yZGVyLXJhZGl1czogNHB4OwogfQoKIC8qIGllOCwgaWU5IGZpeGVzICovIC5pZTggI3NpZGViYXIgLnNlYXJjaC1xdWVyeSwgLmllOCAjaGVhZGVyIC5zZWFyY2gtcXVlcnkgewoJcGFkZGluZy10b3A6IDdweCAhaW1wb3J0YW50OwoJIHBhZGRpbmctYm90dG9tOiA1cHggIWltcG9ydGFudDsKIH0KCiAuaWU5ICNzaWRlYmFyIC5zZWFyY2gtcXVlcnksIC5pZTkgI2hlYWRlciAuc2VhcmNoLXF1ZXJ5IHsKCXBhZGRpbmctYm90dG9tOiAwcHggIWltcG9ydGFudDsKCSBoZWlnaHQ6IDI0cHg7CiB9CgogLmllOSAjc2lkZWJhciA+IHVsID4gbGkuYWN0aXZlID4gYSAudHJpYW5nbGUgewoJcmlnaHQ6IC0xcHg7CiB9CgogLyogZm9vdGVyIGNvbnRhaW5lciAqLyAjZm9vdGVyIHsKCXBhZGRpbmc6IDhweCAyMHB4IDVweCAyMHB4OwoJIGZvbnQtc2l6ZTogMTJweDsKCSBjb2xvcjogIzk5OTsKIH0KCiAjZm9vdGVyIC5nby10b3AgewoJZGlzcGxheTogYmxvY2s7CgkgZm9udC1zaXplOiAxMnB4OwoJIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKCSBjb2xvcjogI2ZmZjsKCSBjdXJzb3I6IHBvaW50ZXI7CgkgbWFyZ2luLXRvcDogLTNweDsKCSBtYXJnaW4tcmlnaHQ6IDBweDsKCSBtYXJnaW4tYm90dG9tOiAwcHg7CgkgZm9udC1zaXplOiAxNnB4OwoJIGJhY2tncm91bmQtY29sb3I6ICMxMTE7Cgkgb3BhY2l0eTogMC44OwoJIHBhZGRpbmc6IDNweCA1cHggMnB4IDZweDsKIH0KCiAvKiBpZTEwIGZpeGVzICovIC5pZTEwIC4jaGVhZGVyIC5zZWFyY2gtaW5wdXQtaWNvbiA+IGksIC5pZTEwICNzaWRlYmFyIC5zZWFyY2gtaW5wdXQtaWNvbiA+IGkgewoJdG9wOi0ycHggIWltcG9ydGFudDsKIH0KCiAvKiBpZTggZml4ZXMgKi8gLmllOCAjc2lkZWJhciB7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgkgd2lkdGg6IDIxNXB4OwogfQoKIC5pZTggI3NpZGViYXIgdWx7CgltYXJnaW4tdG9wOjI1cHg7Cgkgd2lkdGg6IDIxNXB4OwogfQoKIC8qIGN1c3RvbSB3ZWxscyAqLyAud2VsbCB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZmFmYWZhOwoJIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CgkgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CgkgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CgkgYm9yZGVyLXJhZGl1czogNHB4OwoJIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwoJIC1tb3otYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwoJIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKIH0KCiAud2VsbC5taW5pIHsKCXBhZGRpbmc6IDdweCAhaW1wb3J0YW50OwogfQoKIC8qIGdlbmVyYWwgZm9ybSAqLyBmb3JtIGxlZ2VuZCB7CgltYXJnaW46IDE1cHggMHB4IDEwcHggMHB4ICFpbXBvcnRhbnQ7CiB9CgogLndpZGdldC1ib2R5LmZvcm0gZm9ybSB7CgltYXJnaW46IDBweCAhaW1wb3J0YW50OwoJIHBhZGRpbmc6IDBweCAhaW1wb3J0YW50OwogfQoKIC53aWRnZXQtYm9keS5mb3JtIC5jb250cm9sLWdyb3VwOmxhc3QtY2hpbGQgewoJcGFkZGluZy1ib3R0b206IDBweCAhaW1wb3J0YW50OwoJIG1hcmdpbi1ib3R0b206IDBweCAhaW1wb3J0YW50OwogfQoKIC53aWRnZXQtYm9keS5mb3JtIC5mb3JtLWFjdGlvbnN7CgltYXJnaW4tbGVmdDotMTVweCAhaW1wb3J0YW50OwoJIG1hcmdpbi1yaWdodDotMTVweCAhaW1wb3J0YW50OwoJIG1hcmdpbi10b3A6IDBweCAhaW1wb3J0YW50OwoJIG1hcmdpbi1ib3R0b206IC0xNXB4ICFpbXBvcnRhbnQ7CgkgbWFyZ2luLXRvcDogNDBweDsKCSBwYWRkaW5nLWxlZnQ6IDE5NXB4OwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMHB4IDBweCA0cHggNHB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMHB4IDBweCA0cHggNHB4OwoJIGJvcmRlci1yYWRpdXM6IDBweCAwcHggNHB4IDRweDsKIH0KCiAud2lkZ2V0LWJvZHkgLmRhdGFUYWJsZXNfaW5mbywgLndpZGdldC1ib2R5IC5kYXRhVGFibGVzX3BhZ2luYXRlIHsKCW1hcmdpbi10b3A6IDVweCAhaW1wb3J0YW50OwoJIHBhZGRpbmctYm90dG9tOiAwcHggIWltcG9ydGFudDsKCSBtYXJnaW4tYm90dG9tOiAtNHB4ICFpbXBvcnRhbnQ7CiB9CgogLndpZGdldC1ib2R5IC50YWJsZSB7CglwYWRkaW5nLWJvdHRvbTogMHB4ICFpbXBvcnRhbnQ7CgkgbWFyZ2luLWJvdHRvbTogMHB4ICFpbXBvcnRhbnQ7CiB9CgogLyogY3VzdG9tIGZvcm0gaW5wdXQgZXJyb3Igc3RhdGVzIHdpdGggaWNvbnMgKi8gLmlucHV0LWljb24gaW5wdXQgewoJcGFkZGluZy1yaWdodDogMjVweCAhaW1wb3J0YW50OwogfQoKIC5pbnB1dC1pY29uIC5pbnB1dC1lcnJvciwgLmlucHV0LWljb24gLmlucHV0LXdhcm5pbmcsIC5pbnB1dC1pY29uIC5pbnB1dC1zdWNjZXNzIHsKCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OwoJIHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OwoJIHRvcDogNHB4OwoJIHJpZ2h0OiAyNXB4ICFpbXBvcnRhbnQ7CgkgZm9udC1zaXplOiAxNnB4OwogfQoKIC5pbnB1dC1pY29uIC5pbnB1dC1lcnJvciB7Cgljb2xvcjojQjk0QTQ4OwogfQoKIC5pbnB1dC1pY29uIC5pbnB1dC13YXJuaW5nIHsKCWNvbG9yOiAjQzA5ODUzOwogfQoKIC5pbnB1dC1pY29uIC5pbnB1dC1zdWNjZXNzIHsKCWNvbG9yOiAjNDY4ODQ3OwogfQoKIC8qIGN1c3RvbSBicmVhZGNydW1iICovIC5icmVhZGNydW1iIHsKCS13ZWJraXQtYm9yZGVyLXJhZGl1czogMHB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMHB4OwoJIGJvcmRlci1yYWRpdXM6IDBweDsKCSBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CgkgbWFyZ2luLWxlZnQ6IC0yMHB4OwoJIG1hcmdpbi1yaWdodDogLTIwcHg7CgkgcGFkZGluZy1sZWZ0OiAyMHB4OwoJIHBhZGRpbmctcmlnaHQ6IDMwcHg7CgkgbWFyZ2luLWJvdHRvbTogMjBweDsKCSB0ZXh0LXNoYWRvdzpub25lICFpbXBvcnRhbnQ7CgkgYm9yZGVyOjBweCAhaW1wb3J0YW50OwoJIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGRkICFpbXBvcnRhbnQ7CgkgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQgIWltcG9ydGFudDsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjRUZFRkVGOwogfQoKIC5icmVhZGNydW1iIC50b29sdGlwIHsKCXRleHQtc2hhZG93Om5vbmUgIWltcG9ydGFudDsKIH0KCiAvKiB3aWRnZXQgY29udGFpbmVyICovIC5zb3J0YWJsZSAud2lkZ2V0IC53aWRnZXQtdGl0bGUgewoJY3Vyc29yOiBtb3ZlOwogfQoKIC5zb3J0YWJsZS1ib3gtcGxhY2Vob2xkZXIgewoJYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsKCSBib3JkZXI6IDFweCBkYXNoZWQgI0RERERERDsKCSBkaXNwbGF5OiBibG9jazsKCSAvKiBmbG9hdDogbGVmdDsKCSovIG1hcmdpbi10b3A6IDE4cHggIWltcG9ydGFudDsKCSBtYXJnaW4tbGVmdDogMSU7CgkgbWFyZ2luLXJpZ2h0OiAwLjYlOwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogM3B4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogM3B4OwoJIGJvcmRlci1yYWRpdXM6IDNweDsKIH0KCiAuc29ydGFibGUtYm94LXBsYWNlaG9sZGVyICogewoJdmlzaWJpbGl0eTpoaWRkZW47CiB9CgogLndpZGdldCB7CgliYWNrZ3JvdW5kOiBub25lIHJlcGVhdCBzY3JvbGwgMCAwICNGOUY5Rjk7CgkgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGRlZGU7CgkgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZTBkZWRlOwoJIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlMGRlZGU7CgkgY2xlYXI6IGJvdGg7CgkgbWFyZ2luLXRvcDogMHB4OwoJIG1hcmdpbi1ib3R0b206IDIwcHg7CgkgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7CgkgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7CgkgYm9yZGVyLXJhZGl1czogM3B4OwogfQoKIC53aWRnZXQtdGl0bGUgewoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwJSwgMCAxMDAlLCBmcm9tKCNGREZERkQpLCB0bygjRUFFQUVBKSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjRkRGREZEIDAlLCAjRUFFQUVBIDEwMCUpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI0ZERkRGRCAwJSwgI0VBRUFFQSAxMDAlKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KHRvcCwgI0ZERkRGRCAwJSwgI0VBRUFFQSAxMDAlKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjRkRGREZEIDAlLCAjRUFFQUVBIDEwMCUpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1saW5lYXItZ3JhZGllbnQodG9wLCAjRkRGREZEIDAlLCAjRUFFQUVBIDEwMCUpOwoJIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KCBzdGFydENvbG9yc3RyPScjZmRmZGZkJywgZW5kQ29sb3JzdHI9JyNlYWVhZWEnLEdyYWRpZW50VHlwZT0wICk7CgkgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGRlZGU7CgkgaGVpZ2h0OiAzNnB4OwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogM3B4IDNweCAwcHggMHB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogM3B4IDNweCAwcHggMHB4OwoJIGJvcmRlci1yYWRpdXM6IDNweCAzcHggMHB4IDBweDsKIH0KCiAud2lkZ2V0LXRpdGxlIGg0IHsKCWNvbG9yOiAjNDQ0OwoJIGZsb2F0OiBsZWZ0OwoJIGZvbnQtc2l6ZTogMTNweDsKCSBmb250LXdlaWdodDE6IGJvbGQ7CgkgcGFkZGluZzogMTFweCAxMXB4IDExcHggMTVweDsKCSBsaW5lLWhlaWdodDogMTJweDsKCSBtYXJnaW46IDA7CiB9CgogLndpZGdldC10aXRsZSBoNCBpIHsKCWZvbnQtc2l6ZTogMTRweDsKCSBtYXJnaW4tcmlnaHQ6IDJweDsKIH0KCiAud2lkZ2V0LXRpdGxlIHNwYW4udG9vbHMgewoJcGFkZGluZzogM3B4IDVweCAycHg7CgkgZmxvYXQ6IHJpZ2h0OwoJIG1hcmdpbjogNnB4IDBweCAwIDA7CiB9CgogLndpZGdldC10aXRsZSBzcGFuLnRvb2xzID4gYSB7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CgkgbWFyZ2luLXJpZ2h0OiA1cHg7CgkgY29sb3I6ICM1NTU7CgkgZm9udC1zaXplOiAxNHB4OwogfQoKIC53aWRnZXQtdGl0bGUgc3Bhbi50b29scyA+IGE6aG92ZXIgewoJdGV4dC1kZWNvcmF0aW9uOiBub25lOwoJIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZS1pbi1vdXQ7CgkgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4xcyBlYXNlLWluLW91dDsKCSAtby10cmFuc2l0aW9uOiBhbGwgMC4xcyBlYXNlLWluLW91dDsKCSAtbXMtdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZS1pbi1vdXQ7CgkgdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZS1pbi1vdXQ7Cgkgb3BhY2l0eTogLjY7CiB9CgogLndpZGdldC10aXRsZSAuYnRuLWdyb3VwIHsKCW1hcmdpbi1yaWdodDo1cHg7CgkgbWFyZ2luLXRvcDogLTJweDsKIH0KCiAud2lkZ2V0LXRpdGxlIC5idG4tZ3JvdXAgLmNhcmV0IHsKCW1hcmdpbi10b3A6IDhweDsKCSBtYXJnaW4tbGVmdDogM3B4OwogfQoKIC53aWRnZXQtYm9keSB7CglwYWRkaW5nOiAxNXB4IDE1cHg7CgkgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNDRENEQ0Q7CgkgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwcHggMHB4IDNweCAzcHg7CgkgLW1vei1ib3JkZXItcmFkaXVzOiAwcHggMHB4IDNweCAzcHg7CgkgYm9yZGVyLXJhZGl1czogMHB4IDBweCAzcHggM3B4OwogfQoKIC8qIGNoYXJ0cyAmIHN0YXRzICovIC5jaGFydCwgLnBpZSwgLmJhcnMgewoJaGVpZ2h0OiAzMDBweDsKIH0KCiAuc3RhdCB7CgltYXJnaW46IDBweDsKCSBwYWRkaW5nOiAwcHg7CiB9CgogLml0ZW0tbGlzdC50YWJsZSAucGVyY2VudCB7Cgl3aWR0aDogMzBweDsKCSBmbG9hdDogcmlnaHQ7CgkgbWFyZ2luLXJpZ2h0OiAxMHB4OwoJIG1hcmdpbi10b3A6IDNweDsKIH0KCiAuaXRlbS1saXN0LnRhYmxlIC50aXRsZSB7CglwYWRkaW5nLXRvcDogLTVweDsKIH0KCiAuc3RhdCAudGl0bGUgewoJbWFyZ2luLWxlZnQ6IDEwcHg7CgkgbWFyZ2luLXJpZ2h0OiAxMHB4OwoJIGZvbnQtc2l6ZTE6IDEzcHg7CiB9CgogLnN0YXQuZ29vZCAucGVyY2VudCAgewoJY29sb3I6ICM1MmUxMzY7CgkgZm9udC1zaXplOiAxNnB4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwogfQoKIC5zdGF0LmJhZCAucGVyY2VudCB7Cgljb2xvcjogI2QxMjYxMDsKCSBmb250LXNpemU6IDE2cHg7CgkgZm9udC13ZWlnaHQ6IGJvbGQ7CiB9CgogLnN0YXQub2sgLnBlcmNlbnQgewoJY29sb3I6ICMzN2I3ZjM7CgkgZm9udC1zaXplOiAxNnB4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwogfQoKIC8qIGdlbmVyYWwgbGlzdCBmb3IgaXRlbSB3aXRoIHBpY3R1cmUgKi8gdWwuaXRlbS1saXN0IGxpIC5waWMgewoJaGVpZ2h0OiA1MHB4OwoJIHdpZHRoOiA1MHB4OwoJIGZsb2F0OiBsZWZ0OwoJIG1hcmdpbi10b3A6IDNweDsKCSBtYXJnaW4tcmlnaHQ6IDVweDsKCSAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDJweCAhaW1wb3J0YW50OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMnB4ICFpbXBvcnRhbnQ7CgkgYm9yZGVyLXJhZGl1czogMnB4ICFpbXBvcnRhbnQ7CiB9CgogdWwuaXRlbS1saXN0IHsKCW1hcmdpbjogMHB4OwoJIGxpc3Qtc3R5bGU6IG5vbmU7CiB9CgogdWwuaXRlbS1saXN0IGxpIHsKCXBhZGRpbmc6IDdweCAwIDVweCAwcHg7CgkgbGlzdC1zdHlsZTogbm9uZTsKCSBib3JkZXItdG9wOiAxcHggc29saWQgd2hpdGU7CgkgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQkVCRUI7CgkgZm9udC1zaXplOiAxMnB4OwogfQoKIHVsLml0ZW0tbGlzdCBsaTpmaXJzdC1jaGlsZCB7Cglib3JkZXItdG9wOiBub25lOwoJIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRUJFQkVCOwogfQoKIHVsLml0ZW0tbGlzdCBsaTpsYXN0LWNoaWxkIHsKCWJvcmRlci10b3A6IG5vbmU7CgkgYm9yZGVyLWJvdHRvbTogbm9uZTsKIH0KCiB1bC5pdGVtLWxpc3QgbGkgLmxhYmVsIHsKCW1hcmdpbi1yaWdodDogNXB4OwogfQoKIC8qIHRvZG8gbGlzdCAqLyB1bC5pdGVtLWxpc3QudG9kbyBsaSA+IGEgewoJd2lkdGg6IDIzMHB4OwoJIGRpc3BsYXk6IGlubGluZS1ibG9jazsKCSBtYXJnaW4tcmlnaHQ6IDVweDsKIH0KCiB1bC5pdGVtLWxpc3QudG9kbyBsaSAubGFiZWwgewoJcG9zaXRpb246IGFic29sdXRlOwoJIHJpZ2h0OiA2N3B4OwogfQoKIHVsLml0ZW0tbGlzdC50b2RvIGxpIC5hY3Rpb25zIHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCSByaWdodDogMzVweDsKIH0KCiAvKiBnZW5lcmFsIHB1cnBvc2UgYmxvY2sgd2l0aCBjc3MzIGdyYWRpZW50IGJhY2tncm91bmQgKi8gLmJsb2NrIHsKCWJhY2tncm91bmQtY29sb3I6ICNGNkY2RjY7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCUsIDAgMTAwJSwgZnJvbSgjRjlGOUY5KSwgdG8oI0VERURFRCkpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI0Y5RjlGOSAwJSwgI0VERURFRCAxMDAlKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICNGOUY5RjkgMCUsICNFREVERUQgMTAwJSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1zLWxpbmVhci1ncmFkaWVudCh0b3AsICNGOUY5RjkgMCUsICNFREVERUQgMTAwJSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgI0Y5RjlGOSAwJSwgI0VERURFRCAxMDAlKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjRjlGOUY5IDAlLCAjRURFREVEIDEwMCUpOwoJIGZpbHRlcjogcHJvZ2lkOmR4aW1hZ2V0cmFuc2Zvcm0ubWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZkY5RjlGOScsIGVuZENvbG9yc3RyPScjZmZFREVERUQnLCBHcmFkaWVudFR5cGU9MCk7CgkgYm9yZGVyOiAxcHggc29saWQgI0Q1RDVENTsKCSBib3gtc2hhZG93OiAwIDFweCAwIDAgd2hpdGUgaW5zZXQsIDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMnB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMnB4OwoJIGJvcmRlci1yYWRpdXM6IDJweDsKCSBsaW5lLWhlaWdodDogMThweDsKCSBtYXJnaW46IDAgMCAyMHB4IDA7CgkgcGFkZGluZzogMTBweDsKIH0KCiAvKiBkYXNoYm9hcmQgc3RhdHMgKi8gLnN0YXRzLW92ZXJ2aWV3LWNvbnQgewoJcGFkZGluZy10b3A6MHB4OwoJIG1hcmdpbi1ib3R0b206IDE1cHg7CiB9CgogLnN0YXRzLW92ZXJ2aWV3IHsKCWNsZWFyOiBib3RoOwoJIHBhZGRpbmc6IDEwcHggMTBweCA1cHggMTBweDsKCSBtYXJnaW46IDBweDsKCSBtYXJnaW4tYm90dG9tOiA1cHg7CiB9CgogLnN0YXRzLW92ZXJ2aWV3IC5kaXNwbGF5IHsKCW1hcmdpbi1yaWdodDogNXB4OwoJIGZsb2F0OiBsZWZ0OwogfQoKIC5zdGF0cy1vdmVydmlldyAuZGV0YWlscyB7Cgljb2xvcjojODg4OwogfQoKIC5zdGF0cy1vdmVydmlldyAuZGV0YWlscyAudGl0bGUgewoJY29sb3I6ICM3Nzc7CgkgZm9udC1zaXplOiAxMHB4OwoJIGZvbnQtd2VpZ2h0OiBub3JtYWw7CgkgbWFyZ2luLWJvdHRvbTogNXB4OwoJIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CgkgbGV0dGVyLXNwYWNpbmc6IC0xcHg7CiB9CgogLnN0YXRzLW92ZXJ2aWV3IC5kZXRhaWxzIC50aXRsZSBpIHsKCWNvbG9yOiAjOTk5OwoJIG1hcmdpbi1yaWdodDogMnB4OwogfQoKIC5zdGF0cy1vdmVydmlldyAuZGV0YWlscyAubnVtYmVycyB7Cgljb2xvcjogIzc3NzsKCSBmb250LXNpemU6IDE2cHg7CgkgZm9udC13ZWlnaHQ6IGJvbGQ7CgkgbWFyZ2luLWJvdHRvbTogNnB4OwogfQoKIC5zdGF0cy1vdmVydmlldyAuZGV0YWlscyAubnVtYmVycyAuc21hbGwgewoJY29sb3I6ICM3Nzc7CgkgZm9udC13ZWlnaHQ6IGJvbGQ7CgkgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7CiB9CgogLnN0YXRzLW92ZXJ2aWV3IC5wcm9ncmVzcyB7CgloZWlnaHQ6IDEwcHg7CgkgbWFyZ2luLWJvdHRvbToxMHB4ICFpbXBvcnRhbnQ7CiB9CgogLnN0YXRzLW92ZXJ2aWV3OmhvdmVyIHsKCXRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OwoJIGJvcmRlci1jb2xvcjogIzk5OSAhaW1wb3J0YW50OwoJIGNvbG9yOiAjNDQ0ICFpbXBvcnRhbnQ7CgkgdGV4dC1zaGFkb3c6IDAgMXB4IDBweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpICFpbXBvcnRhbnQ7CgkgLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW1zLXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKCSAtby10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDBweCAzcHggcmdiYSgwLCAwLCAwLCAuNTUpICFpbXBvcnRhbnQ7CgkgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDNweCByZ2JhKDAsMCwwLC41NSkgIWltcG9ydGFudDsKCSBib3gtc2hhZG93OiAwcHggMHB4IDNweCByZ2JhKDAsIDAsIDAsIC41NSkgIWltcG9ydGFudDsKIH0KCiAvKiBtaW5pIGNoYXJ0IGFuZCBiYXIgY29udGFpbmVycyAgKi8gLmJhci1jaGFydCB7CglkaXNwbGF5OiBub25lCn0KCiAubGluZS1jaGFydCB7CglkaXNwbGF5OiBub25lCn0KCiAvKiBjdXN0b20gbGFiZWwgYW5kIGJhZGdlcyAqLyAubGFiZWwgewoJLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAycHggLW1vei1ib3JkZXItcmFkaXVzOiAycHggIWltcG9ydGFudDsKCSBib3JkZXItcmFkaXVzOiAycHggIWltcG9ydGFudDsKIH0KCiAubGFiZWwtc3VjY2VzcywgLmJhZGdlLXN1Y2Nlc3MgewoJYm9yZGVyLWNvbG9yOiAjNUFBRDM0OwoJIGJhY2tncm91bmQtY29sb3I6ICM1ZmQwMmM7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCBsZWZ0IGJvdHRvbSwgY29sb3Itc3RvcCgwJSwgIzk3ZTA3NiksIGNvbG9yLXN0b3AoMTAwJSwgIzVmZDAyYykpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgIzk3ZTA3NiwgIzVmZDAyYyk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjOTdlMDc2LCAjNWZkMDJjKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KHRvcCwgIzk3ZTA3NiwgIzVmZDAyYyk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgIzk3ZTA3NiwgIzVmZDAyYyk7CgkgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvcCwgIzk3ZTA3NiwgIzVmZDAyYyk7CiB9CgogLmxhYmVsLXdhcm5pbmcsIC5iYWRnZS13YXJuaW5nIHsKCWJvcmRlci1jb2xvcjogI0Y0QTUwNjsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNiMzIyOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCBsZWZ0IHRvcCwgbGVmdCBib3R0b20sIGNvbG9yLXN0b3AoMCUsICNmZmRlOWQpLCBjb2xvci1zdG9wKDEwMCUsICNmY2IzMjIpKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNmZmRlOWQsICNmY2IzMjIpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZmZGU5ZCwgI2ZjYjMyMik7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1zLWxpbmVhci1ncmFkaWVudCh0b3AsICNmZmRlOWQsICNmY2IzMjIpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICNmZmRlOWQsICNmY2IzMjIpOwoJIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0b3AsICNmZmRlOWQsICNmY2IzMjIpOwogfQoKIC5sYWJlbC1pbXBvcnRhbnQsIC5iYWRnZS1pbXBvcnRhbnQgewoJYm9yZGVyLWNvbG9yOiAjRkE1ODMzOwoJIGJhY2tncm91bmQtY29sb3I6ICNlZDRlMmE7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCBsZWZ0IGJvdHRvbSwgY29sb3Itc3RvcCgwJSwgI2ZiYjJhMSksIGNvbG9yLXN0b3AoMTAwJSwgI2VkNGUyYSkpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZiYjJhMSwgI2VkNGUyYSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjZmJiMmExLCAjZWQ0ZTJhKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZiYjJhMSwgI2VkNGUyYSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZiYjJhMSwgI2VkNGUyYSk7CgkgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZiYjJhMSwgI2VkNGUyYSk7CiB9CgogLmxhYmVsLWluZm8sIC5iYWRnZS1pbmZvIHsKCWJvcmRlci1jb2xvcjogIzJGQUJFOTsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjNTdiNWUzOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCBsZWZ0IHRvcCwgbGVmdCBib3R0b20sIGNvbG9yLXN0b3AoMCUsICNhZWRiZjIpLCBjb2xvci1zdG9wKDEwMCUsICM1N2I1ZTMpKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNhZWRiZjIsICM1N2I1ZTMpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2FlZGJmMiwgIzU3YjVlMyk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1zLWxpbmVhci1ncmFkaWVudCh0b3AsICNhZWRiZjIsICM1N2I1ZTMpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICNhZWRiZjIsICM1N2I1ZTMpOwoJIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0b3AsICNhZWRiZjIsICM1N2I1ZTMpOwogfQoKIC5sYWJlbC1taW5pIHsKCWZvbnQtc2l6ZTogMTFweDsKIH0KCiAvKiBpY29uIGJ1dHRvbnMgKi8gLmljb24tYnRuIHsKCWhlaWdodDogNzBweDsKCSB3aWR0aDogNTBweDsKCSBtYXJnaW46IDEwcHggMHB4IDEwcHggMHB4OwoJIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CgkgcGFkZGluZzogMTZweCAwcHggMHB4IDBweDsKCSBmb250LXNpemU6IDEwcHg7CgkgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYSAhaW1wb3J0YW50OwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZhZmFmYSwgI2VmZWZlZikgIWltcG9ydGFudDsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oI2ZhZmFmYSksIHRvKCNlZmVmZWYpKSAhaW1wb3J0YW50OwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZhZmFmYSwgI2VmZWZlZikgIWltcG9ydGFudDsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjZmFmYWZhLCAjZWZlZmVmKSAhaW1wb3J0YW50OwoJIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNmYWZhZmEsICNlZmVmZWYpICFpbXBvcnRhbnQ7CgkgZmlsdGVyOiBwcm9naWQ6ZHhpbWFnZXRyYW5zZm9ybS5taWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmZmFmYWZhJywgZW5kQ29sb3JzdHI9JyNmZmVmZWZlZicsIEdyYWRpZW50VHlwZT0wKSAhaW1wb3J0YW50OwoJIC13ZWJraXQtYm94LXNoYWRvdzogMCAxcHggMHB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjgpICFpbXBvcnRhbnQ7CgkgLW1vei1ib3gtc2hhZG93OiAwIDFweCAwcHggcmdiYSgyNTUsIDI1NSwgMjU1LCAuOCkgIWltcG9ydGFudDsKCSBib3gtc2hhZG93OiAwIDFweCAwcHggcmdiYSgyNTUsIDI1NSwgMjU1LCAuOCkgIWltcG9ydGFudDsKCSAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDJweDsKCSAtbW96LWJvcmRlci1yYWRpdXM6IDJweDsKCSBib3JkZXItcmFkaXVzOiAycHg7CgkgZGlzcGxheTpibG9jayAhaW1wb3J0YW50OwoJIGNvbG9yOiAjNjQ2NDY0ICFpbXBvcnRhbnQ7CgkgdGV4dC1zaGFkb3c6IDAgMXB4IDBweCByZ2JhKDI1NSwgMjU1LCAyNTUsIC42KSAhaW1wb3J0YW50OwoJIHRleHQtYWxpZ246IGNlbnRlcjsKCSBjdXJzb3I6IHBvaW50ZXI7CgkgcG9zaXRpb246IHJlbGF0aXZlOwoJIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIC1tb3otdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIC1tcy10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW8tdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKIH0KCiAuaWU4IC5pY29uLWJ0bjpob3ZlciB7CglmaWx0ZXI6IG5vbmUgIWltcG9ydGFudDsKIH0KCiAuaWNvbi1idG46aG92ZXIgewoJdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7CgkgYm9yZGVyLWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7CgkgY29sb3I6ICM0NDQgIWltcG9ydGFudDsKCSB0ZXh0LXNoYWRvdzogMCAxcHggMHB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMSkgIWltcG9ydGFudDsKCSAtd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKCSAtbW96LXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKCSAtbXMtdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIC1vLXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKCSB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDNweCByZ2JhKDAsIDAsIDAsIC41NSkgIWltcG9ydGFudDsKCSAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggM3B4IHJnYmEoMCwwLDAsLjU1KSAhaW1wb3J0YW50OwoJIGJveC1zaGFkb3c6IDBweCAwcHggM3B4IHJnYmEoMCwgMCwgMCwgLjU1KSAhaW1wb3J0YW50OwogfQoKIC5pY29uLWJ0bjpob3ZlciAuYmFkZ2UgewoJLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW1zLXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKCSAtby10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDBweCA0cHggcmdiYSgwLDAsMCwuNykgIWltcG9ydGFudDsKCSAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggNHB4IHJnYmEoMCwwLDAsLjcpICFpbXBvcnRhbnQ7CgkgYm94LXNoYWRvdzogMHB4IDBweCA0cHggcmdiYSgwLDAsMCwuNykgIWltcG9ydGFudDsKIH0KCiAuaWNvbi1idG4gaSB7Cglmb250LXNpemU6IDIwcHg7CgkgY29sb3I6ICM3NzcgIWltcG9ydGFudDsKIH0KCiAuaWNvbi1idG4gZGl2IHsKCW1hcmdpbi10b3A6IDVweDsKCSBtYXJnaW4tYm90dG9tOiAyMHB4OwoJIGZvbnQtc2l6ZTogMTBweCAhaW1wb3J0YW50OwogfQoKIC5pY29uLWJ0biAuYmFkZ2UgewoJcG9zaXRpb246IGFic29sdXRlOwoJIGZvbnQtc2l6ZTogMTBweCAhaW1wb3J0YW50OwoJIHRvcDogLTVweDsKCSByaWdodDogLTVweDsKCSBoZWlnaHQ6IDEycHg7CgkgcGFkZGluZzogMHB4IDVweCA0cHggNXB4OwoJIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OwoJIHRleHQtc2hhZG93OiAwIDFweCByZ2JhKDAsIDAsIDAsIDAuNTUpOwoJIGJvcmRlci13aWR0aDogMXB4OwoJIGJvcmRlci1zdHlsZTogc29saWQ7CgkgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxMHB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMTBweDsKCSBib3JkZXItcmFkaXVzOiAxMHB4OwoJIC13ZWJraXQtYm94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wOCksIGluc2V0IDAgMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTsKCSAtbW96LWJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLCBpbnNldCAwIDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7CgkgYm94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wOCksIGluc2V0IDAgMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTsKIH0KCiAvKiBjdXN0b20gZHJvcGRvd24gKi8gLmRyb3Bkb3duLW1lbnUgewoJcG9zaXRpb246IGFic29sdXRlOwoJIHRvcDogMTAwJTsKCSBsZWZ0OiAwOwoJIHotaW5kZXg6IDEwMDA7CgkgZGlzcGxheTogbm9uZTsKCSBmbG9hdDogbGVmdDsKCSBwYWRkaW5nOiAwcHggMDsKCSBtYXJnaW46IDJweCAwIDA7CgkgbGlzdC1zdHlsZTogbm9uZTsKCSB0ZXh0LXNoYWRvdzogbm9uZTsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNmY2ZjOwoJIGJvcmRlcjogNHB4IHNvbGlkIHJnYmEoMCwgMiwgMSwgMC4yKTsKCSAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDJweDsKCSAtbW96LWJvcmRlci1yYWRpdXM6IDJweDsKCSBib3JkZXItcmFkaXVzOiAycHg7CgkgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDVweCAxMHB4IHJnYmEoMCwgMiwgMSwgMC40KTsKCSAtbW96LWJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiYSgwLCAyLCAxLCAwLjQpOwoJIGJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiYSgwLCAyLCAxLCAwLjQpOwoJIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsKCSAtbW96LWJhY2tncm91bmQtY2xpcHA6IHBhZGRpbmc7CgkgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsKCSBwYWRkaW5nOiAwcHggMDsKCSBtYXJnaW46MHB4OwoJIGxpc3Qtc3R5bGU6IG5vbmU7CgkgdGV4dC1zaGFkb3c6IG5vbmU7CiB9CgogLmRyb3Bkb3duLW1lbnUub3BlbnMtbGVmdCB7CgkxbWFyZ2luLXRvcDogMnB4OwoJIG1hcmdpbi1sZWZ0OiAtODhweDsKIH0KCiAuaWU4IC5kcm9wZG93bi1tZW51Lm9wZW5zLWxlZnQgewoJbWFyZ2luLWxlZnQ6IC04MnB4OwogfQoKIC5kcm9wZG93bi1tZW51LmV4dGVuZGVkIHsKCXRvcDo0MHB4OwoJIG1pbi13aWR0aDogMTYwcHggIWltcG9ydGFudDsKCSBtYXgtd2lkdGg6IDMwMHB4ICFpbXBvcnRhbnQ7Cgkgd2lkdGg6IDIzM3B4ICFpbXBvcnRhbnQ7CiB9CgogLmRyb3Bkb3duLW1lbnUuZXh0ZW5kZWQgbGkgYXsKCWRpc3BsYXk6IGJsb2NrOwoJIHBhZGRpbmc6IDVweCAxMHB4ICFpbXBvcnRhbnQ7CgkgY2xlYXI6IGJvdGg7CgkgZm9udC13ZWlnaHQ6IG5vcm1hbDsKCSBsaW5lLWhlaWdodDogMjBweDsKCSB3aGl0ZS1zcGFjZTogbm9ybWFsICFpbXBvcnRhbnQ7CiB9CgogLmRyb3Bkb3duLW1lbnUuZXh0ZW5kZWQgLmFycm93ewoJdG9wOi0xNHB4OwoJIGxlZnQ6IDEwcHg7CgkgcG9zaXRpb246IGFic29sdXRlOwoJIG1hcmdpbi10b3A6IDZweDsKCSBtYXJnaW4tcmlnaHQ6IDEycHg7Cgkgd2lkdGg6IDA7CgkgaGVpZ2h0OiAwOwoJIGJvcmRlci1ib3R0b206IDhweCBzb2xpZCAjZjNmM2YzOwoJIGJvcmRlci1sZWZ0OiA4cHggc29saWQgdHJhbnNwYXJlbnQ7CgkgYm9yZGVyLXJpZ2h0OiA4cHggc29saWQgdHJhbnNwYXJlbnQ7CiB9CgogLmRyb3Bkb3duLW1lbnUuZXh0ZW5kZWQgbGkgaXsKCW1hcmdpbi1yaWdodDogM3B4OwogfQoKIC5kcm9wZG93bi1tZW51LmV4dGVuZGVkIGxpIGF7CglwYWRkaW5nOiAxMHB4ICFpbXBvcnRhbnQ7CgkgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYSAhaW1wb3J0YW50OwogfQoKIC5kcm9wZG93bi1tZW51LmV4dGVuZGVkIGxpIHB7CglwYWRkaW5nOiAxMHB4OwoJIGJhY2tncm91bmQtY29sb3I6ICNlZWU7CgkgbWFyZ2luOiAwcHg7CgkgY29sb3I6ICM2NjY7CiB9CgogLmRyb3Bkb3duLW1lbnUuZXh0ZW5kZWQgbGkgYXsKCXBhZGRpbmc6IDdweCAwIDVweCAwcHg7CgkgbGlzdC1zdHlsZTogbm9uZTsKCSBib3JkZXItdG9wOiAxcHggc29saWQgd2hpdGUgIWltcG9ydGFudDsKCSBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0VCRUJFQiAhaW1wb3J0YW50OwoJIGZvbnQtc2l6ZTogMTJweDsKIH0KCiAuZHJvcGRvd24tbWVudS5leHRlbmRlZCBsaTpmaXJzdC1jaGlsZCBhIHsKCWJvcmRlci10b3A6IG5vbmU7CgkgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQkVCRUIgIWltcG9ydGFudDsKIH0KCiAuZHJvcGRvd24tbWVudS5leHRlbmRlZCBsaTpsYXN0LWNoaWxkIGEgewoJYm9yZGVyLXRvcDogMXB4IHNvbGlkIHdoaXRlICFpbXBvcnRhbnQ7CgkgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQkVCRUIgIWltcG9ydGFudDsKIH0KCiAuZHJvcGRvd24tbWVudS5pbmJveCBsaSBhIC5waG90byBpbWcgewoJZmxvYXQ6IGxlZnQ7CgkgaGVpZ2h0OiA0MHB4OwoJIHdpZHRoOiA0MHB4OwoJIG1hcmdpbi1yaWdodDogNHB4OwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMnB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMnB4OwoJIGJvcmRlci1yYWRpdXM6IDJweDsKIH0KCiAuZHJvcGRvd24tbWVudS5pbmJveCBsaSBhIC5zdWJqZWN0IHsKCWRpc3BsYXk6IGJsb2NrOwogfQoKIC5kcm9wZG93bi1tZW51LmluYm94IGxpIGEgLnN1YmplY3QgLmZyb20gewoJZm9udC1zaXplOiAxMnB4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwogfQoKIC5kcm9wZG93bi1tZW51LmluYm94IGxpIGEgLnN1YmplY3QgLnRpbWUgewoJZm9udC1zaXplOiAxMXB4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwoJIGZvbnQtc3R5bGU6IGl0YWxpYzsKCSBwb3NpdGlvbjogYWJzb2x1dGU7CgkgcmlnaHQ6IDVweDsKIH0KCiAuZHJvcGRvd24tbWVudS5pbmJveCBsaSBhIC5tZXNzYWdlIHsKCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CgkgZm9udC1zaXplOiAxMXB4OwogfQoKIC8qIHN0YXIgcmF0aW5nICovIC5yYXRpbmcgewoJdW5pY29kZS1iaWRpOiBiaWRpLW92ZXJyaWRlOwoJIGRpcmVjdGlvbjogcnRsOwoJIGZvbnQtc2l6ZTogMzBweDsKIH0KCiAucmF0aW5nIHNwYW4uc3RhciwgLnJhdGluZyBzcGFuLnN0YXIgewoJZm9udC1mYW1pbHk6IEZvbnRBd2Vzb21lOwoJIGZvbnQtd2VpZ2h0OiBub3JtYWw7CgkgZm9udC1zdHlsZTogbm9ybWFsOwoJIGRpc3BsYXk6IGlubGluZS1ibG9jazsKIH0KCiAucmF0aW5nIHNwYW4uc3Rhcjpob3ZlciwgLnJhdGluZyBzcGFuLnN0YXI6aG92ZXIgewoJY3Vyc29yOiBwb2ludGVyOwogfQoKIC5yYXRpbmcgc3Bhbi5zdGFyOmJlZm9yZSwgLnJhdGluZyBzcGFuLnN0YXI6YmVmb3JlIHsKCWNvbnRlbnQ6ICJcZjAwNiI7CgkgcGFkZGluZy1yaWdodDogNXB4OwoJIGNvbG9yOiAjOTk5OTk5OwogfQoKIC5yYXRpbmcgc3Bhbi5zdGFyOmhvdmVyOmJlZm9yZSwgLnJhdGluZyBzcGFuLnN0YXI6aG92ZXI6YmVmb3JlLCAucmF0aW5nIHNwYW4uc3Rhcjpob3ZlciB+IHNwYW4uc3RhcjpiZWZvcmUsIC5yYXRpbmcgc3Bhbi5zdGFyOmhvdmVyIH4gc3Bhbi5zdGFyOmJlZm9yZSB7Cgljb250ZW50OiAiXGYwMDUiOwoJIGNvbG9yOiAjZTNjZjdhOwogfQoKIC8qIGRhc2hib2FyZCByZXBvcnQgcmFuZ2UgY29udGFpbmVycyAqLyAucmVwb3J0LXJhbmdlLWNvbnRhaW5lciB7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CgkgYmFja2dyb3VuZDogI2ZmZjsKCSBjdXJzb3I6IHBvaW50ZXI7CgkgcGFkZGluZzogNXB4IDEwcHg7CgkgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKIH0KCiAucmVwb3J0LXJhbmdlLWNvbnRhaW5lciAuY2FyZXQgewoJbWFyZ2luLXRvcDogOHB4OwoJIG1hcmdpbi1sZWZ0OjVweDsKIH0KCiAucmVwb3J0LXJhbmdlLWNvbnRhaW5lciBpIHsKCW1hcmdpbi10b3A6IDJweDsKCSBtYXJnaW4tcmlnaHQ6IDNweDsKIH0KCiAuZGFzaGJvYXJkLXJlcG9ydC1yYW5nZS1jb250YWluZXIgc3BhbiB7Cglmb250LXdlaWdodDogbm9ybWFsOwogfQoKIC5kYXNoYm9hcmQtcmVwb3J0LXJhbmdlLWNvbnRhaW5lciB7Cgl0ZXh0LXNoYWRvdzpub25lICFpbXBvcnRhbnQ7CgkgcGFkZGluZy10b3A6IDFweDsKCSBtYXJnaW4tcmlnaHQ6IC0xMHB4OwoJIG1hcmdpbi10b3A6IC04cHg7CgkgcGFkZGluZzogOHB4OwoJIGN1cnNvcjogcG9pbnRlcjsKCSBjb2xvcjogI2ZmZjsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjZDEyNjEwOwogfQoKIC5kYXNoYm9hcmQtcmVwb3J0LXJhbmdlLWNvbnRhaW5lciBpIHsKCWNvbG9yOiAjZmZmOwoJIG1hcmdpbi10b3A6IDNweDsKCSBtYXJnaW4tcmlnaHQ6IDNweDsKIH0KCiAuZGFzaGJvYXJkLXJlcG9ydC1yYW5nZS1jb250YWluZXIgc3BhbiB7Cglmb250LXdlaWdodDogbm9ybWFsOwogfQoKIC5kYXNoYm9hcmQtcmVwb3J0LXJhbmdlLWNvbnRhaW5lciAuY2FyZXQgewoJYm9yZGVyLXRvcC1jb2xvcjojZmZmICFpbXBvcnRhbnQ7CgkgbWFyZ2luLXRvcDogOHB4OwoJIG1hcmdpbi1sZWZ0OjNweDsKCSBtYXJnaW4tcmlnaHQ6IDNweDsKIH0KCiAvKiBhZGp1c3QgdW5pZm9ybSBjb21wb25lbnRzICovIC5jaGVja2JveCAgZGl2LmNoZWNrZXIgewoJbWFyZ2luLXJpZ2h0OiAycHggIWltcG9ydGFudDsKIH0KCiAudXBsb2FkZXIgewoJbWFyZ2luLXRvcDogMnB4ICFpbXBvcnRhbnQ7CiB9CgogLyogaXRlbSBibG9jayB3aXRoIGRldGFpbHMgc2hvd24gb24gaG92ZXIgKi8gLml0ZW0gewoJb3ZlcmZsb3c6IGhpZGRlbjsKCSBkaXNwbGF5OiBibG9jazsKIH0KCiAuaXRlbSAuZGV0YWlscyB7Cgl3aWR0aDogMTAwJTsKCSBkaXNwbGF5OiBub25lOwoJIGJhY2tncm91bmQtY29sb3I6ICMwMDA7CgkgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKCSBwYWRkaW5nOiA1cHg7CgkgdGV4dC1hbGlnbjogY2VudGVyOwoJIHBvc2l0aW9uOiByZWxhdGl2ZTsKCSBib3R0b206MzBweDsKCSBtYXJnaW4tYm90dG9tOi0zMHB4OwoJIG92ZXJmbG93OiBoaWRkZW47Cgkgei1pbmRleDogNjsKIH0KCiAuaXRlbTpob3ZlciAuZGV0YWlscyB7CglkaXNwbGF5OiBibG9jazsKCSBvcGFjaXR5OiAwLjc7CgkgZmlsdGVyOiBhbHBoYShvcGFjaXR5ID0gNzApOwogfQoKIC5pdGVtOmhvdmVyIC56b29tLWljb257CglvcGFjaXR5OjAuNTsKCSBmaWx0ZXI6IGFscGhhKG9wYWNpdHkgPSA1MCk7CiB9CgogLyogem9vbSBpY29uIG92ZXJsYXkgb24gaW1hZ2VzICovIC56b29tIHsKCWN1cnNvcjogcG9pbnRlcjsKCSB3aWR0aDogMTAwJTsKCSBoZWlnaHQ6IDEwMCU7CgkgcG9zaXRpb246IHJlbGF0aXZlOwoJIHotaW5kZXg6IDU7CiB9CgogLnpvb20gLnpvb20taWNvbiB7CgliYWNrZ3JvdW5kLWltYWdlOnVybCgiLi4vaW1nL292ZXJsYXktaWNvbi5wbmciKTsKCSBiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyOwoJIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CgkgYmFja2dyb3VuZC1wb3NpdGlvbjogNTAlOwoJIHBvc2l0aW9uOiBhYnNvbHV0ZTsKCSB3aWR0aDogaW5oZXJpdDsKCSBoZWlnaHQ6IGluaGVyaXQ7Cgkgb3BhY2l0eTogMDsKCSBmaWx0ZXI6IGFscGhhKG9wYWNpdHkgPSAwKTsKCSB6LWluZGV4OiA2OwoJIHRvcDowOwogfQoKIC8qIGxvZ28gcGFnZSAqLyAjbG9nbyB7Cgl3aWR0aDogMjQ3cHg7CgkgbWFyZ2luOiAwIGF1dG87CgkgbWFyZ2luLXRvcDozMHB4OwoJIHBhZGRpbmc6IDE1cHg7CgkgdGV4dC1hbGlnbjogY2VudGVyOwogfQoKICNsb2dpbiB7CgliYWNrZ3JvdW5kLWltYWdlOnVybCgiLi4vaW1nL2JvZHktYmcucG5nIik7Cgkgd2lkdGg6IDI0N3B4OwoJIG1hcmdpbjogMCBhdXRvOwoJIHBhZGRpbmc6IDIwcHg7CgkgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CgkgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CgkgYm9yZGVyLXJhZGl1czogNHB4OwogfQoKICNsb2dpbiAuZm9ybS1hY3Rpb25zIHsKCXBhZGRpbmc6IDIwcHg7CgkgbWFyZ2luLWxlZnQ6IC0yMHB4OwoJIG1hcmdpbi1yaWdodDogLTIwcHg7CgkgbWFyZ2luLWJvdHRvbTogMHB4OwoJIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMHB4IDBweCA0cHggNHB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogMHB4IDBweCA0cHggNHB4OwoJIGJvcmRlci1yYWRpdXM6IDBweCAwcHggNHB4IDRweDsKCSBtYXJnaW4tYm90dG9tOiAtMzdweDsKIH0KCiAjbG9naW4gaSB7Cgljb2xvcjogIzk5OSAhaW1wb3J0YW50OwogfQoKICNsb2dpbiBwIHsKCW1hcmdpbi10b3A6IDEwcHg7CgkgbWFyZ2luLWJvdHRvbToxMHB4OwoJIHBhZGRpbmc6IDBweDsKIH0KCiAjbG9naW4gI2ZvcmdldC1wYXNzd29yZCB7Cglmb250LXNpemU6IDExcHg7CiB9CgogI2xvZ2luLWNvcHlyaWdodCB7Cgl0ZXh0LWFsaWduOiBjZW50ZXI7Cgkgd2lkdGg6IDI1MHB4OwoJIG1hcmdpbjogMCBhdXRvOwoJIHBhZGRpbmc6IDEwcHggMTBweCAwIDEwcHg7CgkgY29sb3I6ICM5OTk7CgkgZm9udC1zaXplOiAxMXB4OwogfQoKIC8qIHN0eWxlIHN3aXRjaGVyICovICNzdHlsZXIgewoJcG9zaXRpb246IGFic29sdXRlOwoJIHdpZHRoOiAyMHB4OwoJIGhlaWdodDogMjJweDsKCSBvdmVyZmxvdzogaGlkZGVuOwoJIHRvcDo0OHB4OwoJIHJpZ2h0OiAyMXB4OwoJIHdoaXRlLXNwYWNlOiBub3dyYXA7CgkgcGFkZGluZzogNXB4OwoJIHBhZGRpbmctbGVmdDogMTBweDsKCSBwYWRkaW5nLXRvcDogNXB4OwoJIGJhY2tncm91bmQtY29sb3I6ICNhYWE7Cgkgei1pbmRleDogNTsKCSAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweCAwcHggcHggNHB4OwoJIC1tb3otYm9yZGVyLXJhZGl1czogNHB4IDBweCAwcHggNHB4OwoJIGJvcmRlci1yYWRpdXM6IDBweCAwcHggNHB4IDRweDsKIH0KCiAjc3R5bGVyID4gaSB7Cglmb250LXNpemU6IDE4cHg7CgkgY3Vyc29yOiBwb2ludGVyOwoJIGRpc3BsYXk6IGlubGluZS1ibG9jazsKCSBtYXJnaW4tcmlnaHQ6IDJweDsKCSBtYXJnaW4tdG9wOiAycHg7CiB9CgogI3N0eWxlciBsYWJlbCB7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsKIH0KCiAjc3R5bGVyIC50ZXh0IHsKCW1hcmdpbi1yaWdodDogMnB4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwoJIGZvbnQtc2l6ZTogMTRweDsKIH0KCiAjc3R5bGVyIC5zZXR0aW5ncyB7CglkaXNwbGF5OiBub25lOwogfQoKICNzdHlsZXIgLmNvbG9ycyB7Cn0KCiAjc3R5bGVyIC5jaGVja2VyIHsKCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OwoJIG1hcmdpbi10b3A6LTFweDsKIH0KCiAjc3R5bGVyIC5jb2xvcnMgc3BhbiB7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cgkgd2lkdGg6IDIwcHg7CgkgaGVpZ2h0OiAyMHB4OwoJIG1hcmdpbjogMnB4IDFweCAtN3B4IDFweDsKCSBib3JkZXI6IDJweCBzb2xpZCAjZGRkOwoJIGN1cnNvcjogcG9pbnRlcjsKIH0KCiAjc3R5bGVyIC5sYXlvdXQgewoJd2lkdGg6IDEwMHB4OwoJIG1hcmdpbi10b3A6IDdweDsKCSBtYXJnaW4tbGVmdDogNjNweDsKCSBtYXJnaW4tYm90dG9tOiA1cHg7CgkgZGlzcGxheTogYmxvY2s7CiB9CgogI3N0eWxlciAuY29sb3JzIHNwYW4uYWN0aXZlLCAjc3R5bGVyIC5jb2xvcnMgc3Bhbjpob3ZlciB7Cglib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsKIH0KCiAjc3R5bGVyIC5jb2xvcnMgLmNvbG9yLWRlZmF1bHQgewoJYmFja2dyb3VuZC1jb2xvcjogIzMzMzQzODsKIH0KCiAjc3R5bGVyIC5jb2xvcnMgLmNvbG9yLXJlZCB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjN2EyZTFjOwogfQoKICNzdHlsZXIgLmNvbG9ycyAuY29sb3ItZ3JleSB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjOTA4ZjhmOwogfQoKICNzdHlsZXIgLmNvbG9ycyAuY29sb3ItbmF2eWdyZXkgewoJYmFja2dyb3VuZC1jb2xvcjogIzQ0NDY0ZjsKIH0KCiAjc3R5bGVyIC5jb2xvcnMgLmNvbG9yLWJsdWUgewoJYmFja2dyb3VuZC1jb2xvcjogIzE5NWU3ZjsKIH0KCiAvKiovIC52ZXJ0aWNhbC1kZXZpZGVyIHsKCW1hcmdpbjogNXB4OwoJIHdpZHRoOjJweDsKCSBoZWlnaHQ6IDEwMCU7CgkgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZGRkOwoJIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlZWU7CiB9CgogLmllOCAua25vYmlmeSB7CglkaXNwbGF5OiBub25lOwogfQoKIC5pZTggLmNpcmNsZS1zdGF0cyB7Cn0KCiAvKiBDaXJjbGUgc3RhdHMgKi8gLmNpcmNsZS1zdGF0cyB7Cglwb3NpdGlvbjogcmVsYXRpdmU7CgkgbWFyZ2luOiAxMHB4IDBweCAxMHB4IDBweDsKIH0KCiAuY2lyY2xlLXN0YXQgewoJcGFkZGluZzoycHg7CiB9CgogLmNpcmNsZS1zdGF0OmhvdmVyIHsKCXRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OwoJIGJvcmRlci1jb2xvcjogIzk5OSAhaW1wb3J0YW50OwoJIGNvbG9yOiAjNDQ0ICFpbXBvcnRhbnQ7CgkgdGV4dC1zaGFkb3c6IDAgMXB4IDBweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpICFpbXBvcnRhbnQ7CgkgLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgLW1zLXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UgIWltcG9ydGFudDsKCSAtby10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlICFpbXBvcnRhbnQ7CgkgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZSAhaW1wb3J0YW50OwoJIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDBweCAzcHggcmdiYSgwLCAwLCAwLCAuNTUpICFpbXBvcnRhbnQ7CgkgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDNweCByZ2JhKDAsMCwwLC41NSkgIWltcG9ydGFudDsKCSBib3gtc2hhZG93OiAwcHggMHB4IDNweCByZ2JhKDAsIDAsIDAsIC41NSkgIWltcG9ydGFudDsKIH0KCiAuY2lyY2xlLXN0YXQgY2FudmFzIHsKfQoKIC5jaXJjbGUtc3RhdDpiZWZvcmUsIC5jaXJjbGUtc3RhdDphZnRlciB7CglkaXNwbGF5OiB0YWJsZTsKCSBsaW5lLWhlaWdodDogMDsKCSBjb250ZW50OiAiIjsKIH0KCiAuY2lyY2xlLXN0YXQ6YWZ0ZXIgewoJY2xlYXI6IGJvdGg7CiB9CgogLmNpcmNsZS1zdGF0IC52aXN1YWwgewoJZGlzcGxheTogYmxvY2s7CgkgZmxvYXQ6IGxlZnQ7CiB9CgogLmNpcmNsZS1zdGF0IC5kZXRhaWxzIHsKCWRpc3BsYXk6IGJsb2NrOwoJIGZsb2F0OiBsZWZ0OwoJIG1hcmdpbi1sZWZ0OiA1cHg7CgkgcGFkZGluZy10b3A6IDdweDsKIH0KCiAuY2lyY2xlLXN0YXQgLmRldGFpbHMgLnRpdGxlIHsKCW1hcmdpbjogMTBweCAwcHggNXB4IDBweCAhaW1wb3J0YW50OwoJIHBhZGRpbmc6IDBweCAhaW1wb3J0YW50OwoJIGZvbnQtc2l6ZTogMTNweDsKCSB0ZXh0LXNoYWRvdzogMCAxcHggcmdiYSgyMzIsIDIzMiwgMjMyLCAwLjc1KTsKCSBjb2xvcjogIzc3NzsKIH0KCiAuaWU4IC5jaXJjbGUtc3RhdCAuZGV0YWlscyAudGl0bGUgewoJbWFyZ2luLXRvcDo1cHggIWltcG9ydGFudDsKIH0KCiAuaWU4IC5jaXJjbGUtc3RhdCAuZGV0YWlscyB7CglwYWRkaW5nLXRvcDogMHB4ICFpbXBvcnRhbnQ7CgkgbWFyZ2luLWJvdHRvbTogNXB4ICFpbXBvcnRhbnQ7CiB9CgogLmNpcmNsZS1zdGF0IC5kZXRhaWxzIC50aXRsZSBpIHsKCW1hcmdpbi10b3A6MnB4ICFpbXBvcnRhbnQ7CgkgY29sb3I6ICM1MmUxMzY7CgkgZm9udC1zaXplOiAxNnB4OwogfQoKIC5jaXJjbGUtc3RhdCAuZGV0YWlscyAudGl0bGUgaS5kb3duIHsKCWNvbG9yOiAjYjYzNjI1OwogfQoKIC5jaXJjbGUtc3RhdCAuZGV0YWlscyAubnVtYmVyIHsKCW1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7CgkgbWFyZ2luLWJvdHRvbTogN3B4ICFpbXBvcnRhbnQ7CgkgZm9udC1zaXplOiAyNHB4OwoJIHBhZGRpbmc6IDBweDsKCSBmb250LXdlaWdodDogYm9sZDsKCSB0ZXh0LXNoYWRvdzogMCAxcHggcmdiYSgyNDQsIDI0NCwgMjQ0LCAwLjg1KTsKCSBjb2xvcjogIzk5OTsKIH0KCiAvKm1hcCBzdGF0cyovIC5tYXAtc3RhdCB7CgltYXJnaW46IDIwcHg7CgkgZGlzcGxheTogYmxvY2s7CiB9CgogLm1hcC1zdGF0OmJlZm9yZSwgLm1hcC1zdGF0OmFmdGVyIHsKCWRpc3BsYXk6IHRhYmxlOwoJIGxpbmUtaGVpZ2h0OiAwOwoJIGNvbnRlbnQ6ICIiOwogfQoKIC5tYXAtc3RhdDphZnRlciB7CgljbGVhcjogYm90aDsKIH0KCiAubWFwLXN0YXQgLnZpc3VhbCB7Cgl3aWR0aDogNzBweDsKCSBoZWlnaHQ6IDYwcHg7CgkgbWFyZ2luLXJpZ2h0OiA1cHg7CgkgZGlzcGxheTogYmxvY2s7CgkgZmxvYXQ6IGxlZnQ7CiB9CgogLm1hcC1zdGF0IC52aXN1YWwgaXsKCW1hcmdpbi10b3A6IDE1cHg7CgkgZGlzcGxheTogYmxvY2s7CgkgZm9udC1zaXplOiA2OHB4OwoJIGNvbG9yOiAjNGQ0ZDRkOwogfQoKIC5tYXAtc3RhdCAuZGV0YWlscyB7CglkaXNwbGF5OiBibG9jazsKCSBmbG9hdDogbGVmdDsKCSBtYXJnaW4tbGVmdDogNXB4OwoJIHBhZGRpbmctdG9wOiAwcHg7CiB9CgogLm1hcC1zdGF0IC5kZXRhaWxzIC50aXRsZSB7CgltYXJnaW46IDBweCAwcHggNXB4IDBweCAhaW1wb3J0YW50OwoJIHBhZGRpbmc6IDBweCAhaW1wb3J0YW50OwoJIGZvbnQtc2l6ZTogMTJweDsKCSBjb2xvcjogIzg3ODc4NzsKIH0KCiAubWFwLXN0YXQgLmRldGFpbHMgLnRpdGxlIGkgewoJbWFyZ2luLXRvcDoycHggIWltcG9ydGFudDsKCSBjb2xvcjogIzUyZTEzNjsKCSBmb250LXNpemU6IDE2cHg7CiB9CgogLm1hcC1zdGF0IC5kZXRhaWxzIC50aXRsZSBpLmRvd24gewoJY29sb3I6ICNiNjM2MjU7CiB9CgogLm1hcC1zdGF0IC5kZXRhaWxzIC5udW1iZXIgewoJbWFyZ2luOiAwcHggIWltcG9ydGFudDsKCSBtYXJnaW4tYm90dG9tOiA3cHggIWltcG9ydGFudDsKCSBmb250LXNpemU6IDQycHg7CgkgcGFkZGluZzogMHB4OwoJIGZvbnQtd2VpZ2h0OiBib2xkOwoJIGNvbG9yOiAjMzVkMWZlOwogfQoKIC8qc2Nyb2xsZXIgcGFkZGluZyovIC5zY3JvbGxlciB7CglwYWRkaW5nLXJpZ2h0OiAxMHB4OwogfQoKIC8qanF2bWFwIGNoYW5nZXMqLyAuanF2bWFwLXpvb21pbiB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7CiB9CgogLmpxdm1hcC16b29tb3V0IHsKCWJhY2tncm91bmQtY29sb3I6ICM2NjYgIWltcG9ydGFudDsKIH0KCiAudm1hcHMgewoJcG9zaXRpb246IHJlbGF0aXZlOwoJIG92ZXJmbG93OiBoaWRkZW47CgkgaGVpZ2h0OiAzMDBweDsKIH0KCiAvKiBhZHZhbmNlIHRhYmxlcyovIC50YWJsZS1hZHZhbmNlIHsKCW1hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDsKIH0KCiAudGFibGUtYWR2YW5jZSB0aGVhZCB7Cgljb2xvcjogIzk5OTsKIH0KCiAudGFibGUtYWR2YW5jZSB0aGVhZCB0ciB0aHsKCWJhY2tncm91bmQtY29sb3I6ICNEREQ7CgkgY29sb3I6ICM2NjY7CiB9CgogLnRhYmxlLWFkdmFuY2UgZGl2LnN1Y2Nlc3MsIC50YWJsZS1hZHZhbmNlIGRpdi5pbmZvLCAudGFibGUtYWR2YW5jZSBkaXYuaW1wb3J0YW50LCAudGFibGUtYWR2YW5jZSBkaXYud2FybmluZywgLnRhYmxlLWFkdmFuY2UgZGl2LmRhbmdlciB7Cglwb3NpdGlvbjogYWJzb2x1dGU7CgkgbWFyZ2luLXRvcDotNXB4OwoJIGZsb2F0OiBsZWZ0OwoJIHdpZHRoOiAycHg7CgkgaGVpZ2h0OiAzMHB4OwoJIG1hcmdpbi1yaWdodDogMjBweCAhaW1wb3J0YW50OwogfQoKIC50YWJsZS1hZHZhbmNlIHRyIHRkIHsKCWJvcmRlci1sZWZ0LXdpZHRoOiAwcHg7CiB9CgogLnRhYmxlLWFkdmFuY2UgdHIgdGQ6Zmlyc3QtY2hpbGQgewoJYm9yZGVyLWxlZnQtd2lkdGg6IDFweCAhaW1wb3J0YW50OwogfQoKIC50YWJsZS1hZHZhbmNlIHRyIHRkLmhpZ2hsaWdodDpmaXJzdC1jaGlsZCBhIHsKCW1hcmdpbi1sZWZ0OiAxNXB4OwogfQoKIC50YWJsZS1hZHZhbmNlIHRkLmhpZ2hsaWdodCBkaXYuc3VjY2VzcyB7Cglib3JkZXItbGVmdDogNHB4IHNvbGlkICM2NmVlNjY7CiB9CgogLnRhYmxlLWFkdmFuY2UgdGQuaGlnaGxpZ2h0IGRpdi5pbmZvIHsKCWJvcmRlci1sZWZ0OiA0cHggc29saWQgIzg3Y2VlYjsKIH0KCiAudGFibGUtYWR2YW5jZSB0ZC5oaWdobGlnaHQgZGl2LmltcG9ydGFudCB7Cglib3JkZXItbGVmdDogNHB4IHNvbGlkICNmMDJjNzE7CiB9CgogLnRhYmxlLWFkdmFuY2UgdGQuaGlnaGxpZ2h0IGRpdi53YXJuaW5nIHsKCWJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZkYmIzOTsKIH0KCiAudGFibGUtYWR2YW5jZSB0ZC5oaWdobGlnaHQgZGl2LmRhbmdlciB7Cglib3JkZXItbGVmdDogNHB4IHNvbGlkICNlMjNlMjk7CiB9CgogLypncml0dGVyIGNoYW5nZXMqLyAuZ3JpdHRlci1jbG9zZSB7CglsZWZ0OmF1dG8gIWltcG9ydGFudDsKCSByaWdodDogM3B4ICFpbXBvcnRhbnQ7CiB9CgogLyogY2FsZW5kYXIgYW5kIGNhbGVuZGFyIGZvcm0gKi8gLmV4dGVybmFsLWV2ZW50IHsKCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OwoJIGN1cnNvcjptb3ZlOwoJIG1hcmdpbi1ib3R0b206IDVweCAhaW1wb3J0YW50OwoJIG1hcmdpbi1yaWdodDogNXB4ICFpbXBvcnRhbnQ7CiB9CgogLyogZml4IGZ1bGwgY2FsZW5kYXIgdGl0bGUgKi8gLmhhcy10b29sYmFyIC5mYy1oZWFkZXItcmlnaHQgewoJcGFkZGluZy1yaWdodDogNTBweCAhaW1wb3J0YW50OwogfQoKIC5mYy1oZWFkZXItdGl0bGUgaDIgewoJZm9udC1zaXplOiAxM3B4ICFpbXBvcnRhbnQ7CgkgbGluZS1oZWlnaHQ6IDIwcHg7CgkgY29sb3I6ICMxMTE7CiB9CgogLmV2ZW50LWZvcm0tdGl0bGUgewoJbWFyZ2luLXRvcDowcHg7CgkgbWFyZ2luLWJvdHRvbTogMTNweDsKCSBmb250LXNpemU6IDEzcHggIWltcG9ydGFudDsKCSBsaW5lLWhlaWdodDogMjBweDsKCSBjb2xvcjogIzExMTsKIH0KCiAuZmMtZXZlbnQtc2tpbiB7Cglib3JkZXI6IDBweCAhaW1wb3J0YW50OwoJIGJhY2tncm91bmQtY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsKIH0KCiAuZmMtZXZlbnQubGFiZWwgewoJdGV4dC1zaGFkb3c6bm9uZSAhaW1wb3J0YW50OwoJIHBhZGRpbmc6IDRweCA0cHggIWltcG9ydGFudDsKIH0KCiAubGFiZWwtZGVmYXVsdCAgewoJYmFja2dyb3VuZC1jb2xvcjogIzk5OSAhaW1wb3J0YW50OwogfQoKIC8qIGZpeCBjYWxlbmRhciB0aXRsZSBmb3IgaWU4IGFuZCBpZTkgKi8gLmllOCAubGFiZWwtc3VjY2VzcywgLmllOSAubGFiZWwtc3VjY2VzcyB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjNWZkMDJjICFpbXBvcnRhbnQ7CiB9CgogLmllOCAubGFiZWwtd2FybmluZywgLmllOSAubGFiZWwtd2FybmluZyB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZmNiMzIyICFpbXBvcnRhbnQ7CiB9CgogLmllOCAubGFiZWwtaW1wb3J0YW50LCAuaWU5IC5sYWJlbC1pbXBvcnRhbnQgewoJYmFja2dyb3VuZC1jb2xvcjogI2VkNGUyYSAhaW1wb3J0YW50OwogfQoKIC5pZTggLmxhYmVsLWluZm8sIC5pZTkgLmxhYmVsLWluZm8gewoJYmFja2dyb3VuZC1jb2xvcjogIzU3YjVlMyAhaW1wb3J0YW50OwogfQoKIC8qIGhpZGUgY2hvc2VuIHNlYXJjaCBib3ggKi8gLmV2ZW50X3ByaW9yaXR5X2Noem4gLmNoem4tc2VhcmNoIHsKCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKIH0KCiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICogUEVSU09OQUwgU1RZTEVTICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovICNNZW1iZXJDaGFuZ2VTaWRlRm9ybSBsYWJlbHsKCW1hcmdpbjogMCAyMHB4IDAgNXB4OwogfQoKICNNZW1iZXJDaGFuZ2VTaWRlRm9ybSBpbnB1dHsKCW1hcmdpbi10b3A6IC0zcHg7CiB9CgogLnN0YXRzLW92ZXJ2aWV3IC50aXRsZXsKCW1hcmdpbi10b3A6IDJweDsKIH0KCiAuZGFzaGJvYXJkIHsKCW1hcmdpbi10b3A6IDIwcHg7CiB9CgogLmJ1dHRvbi11cHsKCW1hcmdpbi10b3A6IC01MHB4OwogfQoKICNncml0dGVyLW5vdGljZS13cmFwcGVyewoJZGlzcGxheTogbm9uZTsKIH0KCiAjYmFubmVyUm90YXRvclBhcmVudF84MTg0NnsKCWRpc3BsYXk6IG5vbmU7CiB9CgogaDUuc21hbGx7CgltYXJnaW46IDA7CiB9CgogLnByb2dyZXNzIHsKCW1hcmdpbi1ib3R0b206IDdweDsKIH0KCiAucHJvZ3Jlc3MtcnVieSAuYmFyIHsKCWJhY2tncm91bmQtY29sb3I6ICM5QTA2NUM7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCM5QTA2NUMsIzhDMDc1NCk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsMCAwLDAgMTAwJSxmcm9tKCM5QTA2NUMpLHRvKCM4QzA3NTQpKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIzlBMDY1QywjOEMwNzU0KTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCM5QTA2NUMsIzhDMDc1NCk7CgkgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjOUEwNjVDLCM4QzA3NTQpOwoJIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKCSBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmY2MmM0NjInLGVuZENvbG9yc3RyPScjZmY1N2E5NTcnLEdyYWRpZW50VHlwZT0wKTsKIH0KCiAudGl0bGUtcnVieXsKCWNvbG9yOiAjOUEwNjVDOwogfQoKIC5wcm9ncmVzcy1lc21lcmFsZCAuYmFyIHsKCWJhY2tncm91bmQtY29sb3I6ICM0Mzk3ODA7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCM0Mzk3ODAsIzNFODk3NSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsMCAwLDAgMTAwJSxmcm9tKCM0Mzk3ODApLHRvKCMzRTg5NzUpKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIzQzOTc4MCwjM0U4OTc1KTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCM0Mzk3ODAsIzNFODk3NSk7CgkgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjNDM5NzgwLCMzRTg5NzUpOwoJIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKCSBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmY2MmM0NjInLGVuZENvbG9yc3RyPScjZmY1N2E5NTcnLEdyYWRpZW50VHlwZT0wKTsKIH0KCiAudGl0bGUtZXNtZXJhbGR7Cgljb2xvcjogIzQzOTc4MDsKIH0KCiAucHJvZ3Jlc3MtZGlhbW9uZCAuYmFyIHsKCWJhY2tncm91bmQtY29sb3I6ICNBQUE5QjQ7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCNBQUE5QjQsIzlBOTlBMyk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsMCAwLDAgMTAwJSxmcm9tKCNBQUE5QjQpLHRvKCM5QTk5QTMpKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsI0FBQTlCNCwjOUE5OUEzKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCNBQUE5QjQsIzlBOTlBMyk7CgkgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjQUFBOUI0LCM5QTk5QTMpOwoJIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKCSBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmY2MmM0NjInLGVuZENvbG9yc3RyPScjZmY1N2E5NTcnLEdyYWRpZW50VHlwZT0wKTsKIH0KCiAudGl0bGUtZGlhbW9uZHsKCWNvbG9yOiAjOUE5OUEzOwogfQoKIC5wcm9ncmVzcy1kaWFtb25kLWRvdWJsZSAuYmFyIHsKCWJhY2tncm91bmQtY29sb3I6ICM4RjhEOUM7CgkgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCM4RjhEOUMsIzgyODA4RCk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsMCAwLDAgMTAwJSxmcm9tKCM4RjhEOUMpLHRvKCM4MjgwOEQpKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIzhGOEQ5QywjODI4MDhEKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCM4RjhEOUMsIzgyODA4RCk7CgkgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjOEY4RDlDLCM4MjgwOEQpOwoJIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKCSBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmY2MmM0NjInLGVuZENvbG9yc3RyPScjZmY1N2E5NTcnLEdyYWRpZW50VHlwZT0wKTsKIH0KCiAudGl0bGUtZGlhbW9uZC1kb3VibGV7Cgljb2xvcjogIzgyODA4RDsKIH0KCiAucHJvZ3Jlc3MtZGlhbW9uZC10cmlwbGUgLmJhciB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjNzQ3MjgzOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwjNzQ3MjgzLCM2OTY4NzcpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLDAgMCwwIDEwMCUsZnJvbSgjNzQ3MjgzKSx0bygjNjk2ODc3KSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCM3NDcyODMsIzY5Njg3Nyk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwjNzQ3MjgzLCM2OTY4NzcpOwoJIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIzc0NzI4MywjNjk2ODc3KTsKCSBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CgkgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmNjJjNDYyJyxlbmRDb2xvcnN0cj0nI2ZmNTdhOTU3JyxHcmFkaWVudFR5cGU9MCk7CiB9CgogLnRpdGxlLWRpYW1vbmQtdHJpcGxlewoJY29sb3I6ICM3NDcyODM7CiB9CgogLnByb2dyZXNzLWdsb2JhbC1hbWJhc3NhZG9yIC5iYXIgewoJYmFja2dyb3VuZC1jb2xvcjogIzVFNUI2QTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsIzVFNUI2QSwjNTU1MzYwKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwwIDAsMCAxMDAlLGZyb20oIzVFNUI2QSksdG8oIzU1NTM2MCkpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwjNUU1QjZBLCM1NTUzNjApOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsIzVFNUI2QSwjNTU1MzYwKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCM1RTVCNkEsIzU1NTM2MCk7CgkgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwoJIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZjYyYzQ2MicsZW5kQ29sb3JzdHI9JyNmZjU3YTk1NycsR3JhZGllbnRUeXBlPTApOwogfQoKIC50aXRsZS1nbG9iYWwtYW1iYXNzYWRvcnsKCWNvbG9yOiAjNUU1QjZBOwogfQoKIC5wcm9ncmVzcy1wYXJ0bmVyIC5iYXIgewoJYmFja2dyb3VuZC1jb2xvcjogI0RDOTQwMDsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsI0RDOTQwMCwjQzY4NTAwKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwwIDAsMCAxMDAlLGZyb20oI0RDOTQwMCksdG8oI0M2ODUwMCkpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwjREM5NDAwLCNDNjg1MDApOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsI0RDOTQwMCwjQzY4NTAwKTsKCSBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCNEQzk0MDAsI0M2ODUwMCk7CgkgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwoJIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZjYyYzQ2MicsZW5kQ29sb3JzdHI9JyNmZjU3YTk1NycsR3JhZGllbnRUeXBlPTApOwogfQoKIC50aXRsZS1wYXJ0bmVyewoJY29sb3I6ICNEQzk0MDA7CiB9CgogLnByb2dyZXNzLXBhcnRuZXItZGlyZWN0b3IgLmJhciB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjRERBQjAwOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwjRERBQjAwLCNDODlCMDEpOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLDAgMCwwIDEwMCUsZnJvbSgjRERBQjAwKSx0bygjQzg5QjAxKSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCNEREFCMDAsI0M4OUIwMSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwjRERBQjAwLCNDODlCMDEpOwoJIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI0REQUIwMCwjQzg5QjAxKTsKCSBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CgkgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmNjJjNDYyJyxlbmRDb2xvcnN0cj0nI2ZmNTdhOTU3JyxHcmFkaWVudFR5cGU9MCk7CiB9CgogLnRpdGxlLXBhcnRuZXItZGlyZWN0b3J7Cgljb2xvcjogI0REQUIwMDsKIH0KCiAucHJvZ3Jlc3MtcGFydG5lci1wcmVzaWRlbnQgLmJhciB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjRkZDQTAwOwoJIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwjRkZDQTAwLCNFNUI2MDApOwoJIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLDAgMCwwIDEwMCUsZnJvbSgjRkZDQTAwKSx0bygjRTVCNjAwKSk7CgkgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCNGRkNBMDAsI0U1QjYwMCk7CgkgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwjRkZDQTAwLCNFNUI2MDApOwoJIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI0ZGQ0EwMCwjRTVCNjAwKTsKCSBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CgkgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmNjJjNDYyJyxlbmRDb2xvcnN0cj0nI2ZmNTdhOTU3JyxHcmFkaWVudFR5cGU9MCk7CiB9CgogLnRpdGxlLXBhcnRuZXItcHJlc2lkZW50ewoJY29sb3I6ICNGRkNBMDA7CiB9CgogaW1nLmZ1bGx7Cgl3aWR0aDogMTAwJTsKIH0KCiAjc2lkZWJhciB1bCB7CgltYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7CiB9CgoKLmhlYWRlci1uYW1lewoJIHBhZGRpbmc6IDVweCAxNXB4OwoJIGNvbG9yOiAjOTk5OwoJIGxpbmUtaGVpZ2h0OiA0MHB4OwoJIGZvbnQtc2l6ZTogMTFweDsKCSB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwp9CgoKLnJhZGlvIGlucHV0W3R5cGU9InJhZGlvIl0sIC5jaGVja2JveCBpbnB1dFt0eXBlPSJjaGVja2JveCJdIHsKCQoJbWFyZ2luLWxlZnQ6IDBweDsKCQoJbWFyZ2luLXJpZ2h0OiA3cHg7CgkKCn0KCgoKZGl2LmNoZWNrZXIgaW5wdXQgewoJCglvcGFjaXR5OiAxICFpbXBvcnRhbnQ7CgkKCWZpbHRlcjogYWxwaGEob3BhY2l0eToxKTsKCQoKfQoKCgouc21hbGx7CgkKCWZvbnQtc2l6ZTogMTBweCAhaW1wb3J0YW50OwoJCglsaW5lLWhlaWdodDogMTJweCAhaW1wb3J0YW50OwoJCglmb250LXdlaWdodDogMTAwICFpbXBvcnRhbnQ7CgkKCn0KCg=="},{"name":"Remove Tumblr ads","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http://www.tumblr.com/dashboard*","https://www.tumblr.com/dashboard*","http://www.tumblr.com/reblog*","https://www.tumblr.com/reblog*","http://www.tumblr.com/search*","https://www.tumblr.com/search*","http://www.tumblr.com/explore*","https://www.tumblr.com/explore*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1540408179624,"data":{}},"enabled":true,"position":7,"uuid":"d99065c1-4904-4f3d-a3cd-384ed02bdafe","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgUmVtb3ZlIFR1bWJsciBhZHMKLy8gQG5hbWVzcGFjZSAgICAgaHR0cDovL3VzZXJzdHlsZXMub3JnCi8vIEBkZXNjcmlwdGlvbgkgIDxiPlRoaXMgdXNlciBzdHlsZSBpcyBubyBsb25nZXIgYmVpbmcgdXBkYXRlZCBhbmQgbWF5IG9yIG1heSBub3Qgd29yay48L2I+Ci8vIEBhdXRob3IgICAgICAgIGNpY2VyYWtlcwovLyBAaG9tZXBhZ2UgICAgICBodHRwczovL3VzZXJzdHlsZXMub3JnL3N0eWxlcy8xMTI3NzcKLy8gQGluY2x1ZGUgICAgICAgaHR0cDovL3d3dy50dW1ibHIuY29tL2Rhc2hib2FyZCoKLy8gQGluY2x1ZGUgICAgICAgaHR0cHM6Ly93d3cudHVtYmxyLmNvbS9kYXNoYm9hcmQqCi8vIEBpbmNsdWRlICAgICAgIGh0dHA6Ly93d3cudHVtYmxyLmNvbS9yZWJsb2cqCi8vIEBpbmNsdWRlICAgICAgIGh0dHBzOi8vd3d3LnR1bWJsci5jb20vcmVibG9nKgovLyBAaW5jbHVkZSAgICAgICBodHRwOi8vd3d3LnR1bWJsci5jb20vc2VhcmNoKgovLyBAaW5jbHVkZSAgICAgICBodHRwczovL3d3dy50dW1ibHIuY29tL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgICAgaHR0cDovL3d3dy50dW1ibHIuY29tL2V4cGxvcmUqCi8vIEBpbmNsdWRlICAgICAgIGh0dHBzOi8vd3d3LnR1bWJsci5jb20vZXhwbG9yZSoKLy8gQHJ1bi1hdCAgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQHZlcnNpb24gICAgICAgMC4yMDE3MDcyNzEwMzA0OQovLyA9PS9Vc2VyU2NyaXB0PT0KKGZ1bmN0aW9uKCkge3ZhciBjc3MgPSBbCgkiLnN0cmV0Y2h5X2tpZHMgeyIsCgkiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAoJIn0iLAoJIiIsCgkiLm5vdGlmaWNhdGlvbi5zaW5nbGVfbm90aWZpY2F0aW9uLmFsdC50YWtlb3Zlci1jb250YWluZXIubWJfdHJhY2tlZCB7IiwKCSIgICAgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7IiwKCSJ9IiwKCSIiLAoJIi55YW1wbHVzLXVuaXQtY29udGFpbmVyIHsiLAoJIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKCSJ9IiwKCSIiLAoJIi5zcG9uc29yZWRfcG9zdCB7IiwKCSIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCgkifSIsCgkiIiwKCSIucmVtbmFudC11bml0LWNvbnRhaW5lciB7IiwKCSIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCgkifSIsCgkiIiwKCSIucmVtbmFudF9hZCB7IiwKCSIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCgkifSIsCgkiIiwKCSIudGFrZW92ZXItY29udGFpbmVyIC5zcG9uc29yZWQtZGF5LW1lZGlhLXNlY3Rpb24geyIsCgkiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAoJIn0iLAoJIiIsCgkiLmltYWdlLWFkIHsiLAoJIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKCSJ9IiwKCSIiLAoJIi5kaXNwbGF5LWFkLS15YWhvby5zZWFyY2gtdGV4dC1hZC5wdC5wb3N0X2JyaWNrIHsiLAoJIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKCSJ9IiwKCSIiLAoJIiNwb3N0cy5wb3N0cz5saS5ub3RpZmljYXRpb24uc2luZ2xlX25vdGlmaWNhdGlvbi5hbHQudGFrZW92ZXItY29udGFpbmVyLmJpZy1tYXJnaW4geyIsCgkiCW1hcmdpbjogMHB4OyIsCgkifSIsCgkiIiwKCSIuc2lkZWJhci1hZC1jb250YWluZXIgeyIsCgkiCWRpc3BsYXk6IG5vbmU7IiwKCSJ9IiwKCSIiLAoJIi5kZnAtYWQtY29udGFpbmVyIHsiLAoJIglkaXNwbGF5OiBub25lOyIsCgkifSIsCgkiIiwKCSIvKiBWaWRlbyBBZHMgSGlkZGVuICovIiwKCSIiLAoJIi52aWRlby1hZCBzcGFuLCAudmlkZW8tYWQgLmNvbnRlbnQsIC52aWRlby1hZCAuaGVhZGVyLCAudmlkZW8tYWQgLnBvc3RfZm9vdGVyLmNsZWFyZml4LCAudmlkZW8tYWQgYXJ0aWNsZSB7IiwKCSIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCgkifSIsCgkiIiwKCSIudmlkZW8tYWQgZGl2LCAudmlkZW8tYWQgeyIsCgkiCXdpZHRoOiAxcHggIWltcG9ydGFudDsiLAoJIgloZWlnaHQ6IDBweCAhaW1wb3J0YW50OyIsCgkifSIKXS5qb2luKCJcbiIpOwppZiAodHlwZW9mIEdNX2FkZFN0eWxlICE9ICJ1bmRlZmluZWQiKSB7CglHTV9hZGRTdHlsZShjc3MpOwp9IGVsc2UgaWYgKHR5cGVvZiBQUk9fYWRkU3R5bGUgIT0gInVuZGVmaW5lZCIpIHsKCVBST19hZGRTdHlsZShjc3MpOwp9IGVsc2UgaWYgKHR5cGVvZiBhZGRTdHlsZSAhPSAidW5kZWZpbmVkIikgewoJYWRkU3R5bGUoY3NzKTsKfSBlbHNlIHsKCXZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKCW5vZGUudHlwZSA9ICJ0ZXh0L2NzcyI7Cglub2RlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpOwoJdmFyIGhlYWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKTsKCWlmIChoZWFkcy5sZW5ndGggPiAwKSB7CgkJaGVhZHNbMF0uYXBwZW5kQ2hpbGQobm9kZSk7Cgl9IGVsc2UgewoJCS8vIG5vIGhlYWQgeWV0LCBzdGljayBpdCB3aGVyZWV2ZXIKCQlkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7Cgl9Cn0KfSkoKTsK"},{"name":"Direct links out","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://google.*","*://www.google.*","*://encrypted.google.*"],"merge_includes":true,"use_matches":[],"orig_matches":["*://yandex.ru/*","*://yandex.ua/*","*://yandex.by/*","*://yandex.kz/*","*://yandex.com.tr/*","*://yandex.com/*","*://*.yandex.ru/*","*://*.yandex.ua/*","*://*.yandex.by/*","*://*.yandex.kz/*","*://*.yandex.com.tr/*","*://*.yandex.com/*","*://youtube.com/*","*://*.youtube.com/*","*://wikimapia.org/*","*://deviantart.com/*","*://*.deviantart.com/*","*://joyreactor.cc/*","*://*.joyreactor.cc/*","*://reactor.cc/*","*://*.reactor.cc/*","*://joyreactor.com/*","*://*.joyreactor.com/*","*://vk.com/*","*://*.vk.com/*","*://ok.ru/*","*://*.ok.ru/*","*://steamcommunity.com/*","*://*.steamcommunity.com/*","*://facebook.com/*","*://*.facebook.com/*","*://twitter.com/*","*://*.twitter.com/*","*://4pda.ru/*","*://*.4pda.ru/*","*://kat.cr/*","*://kickassto.co/*","*://katproxy.is/*","*://thekat.tv/*","*://*.kat.cr/*","*://*.kickassto.co/*","*://*.katproxy.is/*","*://*.thekat.tv/*","*://addons.mozilla.org/*","*://pixiv.net/*","*://*.pixiv.net/*","*://tumblr.com/*","*://*.tumblr.com/*","*://danieldefo.ru/*","*://*.danieldefo.ru/*","*://yaplakal.com/*","*://*.yaplakal.com/*","*://soundcloud.com/*","*://*.soundcloud.com/*","*://upwork.com/*","*://*.upwork.com/*","*://picarto.tv/*","*://*.picarto.tv/*","*://taker.im/*","*://*.taker.im/*","*://*.forumavia.ru/*","*://*.slack.com/*","*://instagram.com/*","*://*.instagram.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1540408179633,"data":{}},"enabled":true,"position":8,"file_url":"https://openuserjs.org/install/nokeya/Direct_links_out.user.js","uuid":"124e9ac6-77a1-4d2d-ba40-281d2181b423","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIERpcmVjdCBsaW5rcyBvdXQKLy8gQG5hbWU6cnUgICAgINCf0YDRj9C80YvQtSDRgdGB0YvQu9C60Lgg0L3QsNGA0YPQttGDCi8vIEBkZXNjcmlwdGlvbiBSZW1vdmVzIGFsbCAiWW91IGFyZSBsZWF2aW5nIG91ciBzaXRlIiBhbmQgcmVkaXJlY3Rpb24gc3R1ZmYgZnJvbSBsaW5rcwovLyBAZGVzY3JpcHRpb246cnUg0KPQsdC40YDQsNC10YIgItCR0LvQsC3QsdC70LAt0LHQu9CwLCDQktGLINC/0L7QutC40LTQsNC10YLQtSDQvdCw0Ygg0YHQsNC50YIiINC4INC/0LXRgNC10LDQtNGA0LXRgdCw0YbQuNC4INC40Lcg0YHRgdGL0LvQvtC6Ci8vIEBuYW1lc3BhY2UgICBodHRwczovL2dpdGh1Yi5jb20vbm9rZXlhCi8vIEBhdXRob3IgICAgICBub2tleWEKLy8gQHVwZGF0ZSAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2tleWEvZGlyZWN0LWxpbmtzLW91dC9yYXcvbWFzdGVyL2RpcmVjdC1saW5rcy1vdXQudXNlci5qcwovLyBAaWNvbiAgICAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL25va2V5YS9kaXJlY3QtbGlua3Mtb3V0L21hc3Rlci9pY29uLnBuZwovLyBAdmVyc2lvbiAgICAgMi4xOQovLyBAZ3JhbnQgICAgICAgbm9uZQovL2dvb2dsZQovLyBAaW5jbHVkZSAgICAgKjovL2dvb2dsZS4qCi8vIEBpbmNsdWRlICAgICAqOi8vd3d3Lmdvb2dsZS4qCi8vIEBpbmNsdWRlICAgICAqOi8vZW5jcnlwdGVkLmdvb2dsZS4qCi8veWFuZGV4Ci8vIEBtYXRjaCAgICAgICAqOi8veWFuZGV4LnJ1LyoKLy8gQG1hdGNoICAgICAgICo6Ly95YW5kZXgudWEvKgovLyBAbWF0Y2ggICAgICAgKjovL3lhbmRleC5ieS8qCi8vIEBtYXRjaCAgICAgICAqOi8veWFuZGV4Lmt6LyoKLy8gQG1hdGNoICAgICAgICo6Ly95YW5kZXguY29tLnRyLyoKLy8gQG1hdGNoICAgICAgICo6Ly95YW5kZXguY29tLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnlhbmRleC5ydS8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi55YW5kZXgudWEvKgovLyBAbWF0Y2ggICAgICAgKjovLyoueWFuZGV4LmJ5LyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnlhbmRleC5rei8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi55YW5kZXguY29tLnRyLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnlhbmRleC5jb20vKgovL3lvdXR1YmUKLy8gQG1hdGNoICAgICAgICo6Ly95b3V0dWJlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi55b3V0dWJlLmNvbS8qCi8vd2lraW1hcGlhCi8vIEBtYXRjaCAgICAgICAqOi8vd2lraW1hcGlhLm9yZy8qCi8vZGV2aWFudGFydAovLyBAbWF0Y2ggICAgICAgKjovL2RldmlhbnRhcnQuY29tLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLmRldmlhbnRhcnQuY29tLyoKLy9qb3lyZWFjdG9yCi8vIEBtYXRjaCAgICAgICAqOi8vam95cmVhY3Rvci5jYy8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi5qb3lyZWFjdG9yLmNjLyoKLy8gQG1hdGNoICAgICAgICo6Ly9yZWFjdG9yLmNjLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnJlYWN0b3IuY2MvKgovLyBAbWF0Y2ggICAgICAgKjovL2pveXJlYWN0b3IuY29tLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLmpveXJlYWN0b3IuY29tLyoKLy92awovLyBAbWF0Y2ggICAgICAgKjovL3ZrLmNvbS8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi52ay5jb20vKgovL29rCi8vIEBtYXRjaCAgICAgICAqOi8vb2sucnUvKgovLyBAbWF0Y2ggICAgICAgKjovLyoub2sucnUvKgovL3N0ZWFtCi8vIEBtYXRjaCAgICAgICAqOi8vc3RlYW1jb21tdW5pdHkuY29tLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnN0ZWFtY29tbXVuaXR5LmNvbS8qCi8vZmIKLy8gQG1hdGNoICAgICAgICo6Ly9mYWNlYm9vay5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyouZmFjZWJvb2suY29tLyoKLy90d2l0dGVyCi8vIEBtYXRjaCAgICAgICAqOi8vdHdpdHRlci5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyoudHdpdHRlci5jb20vKgovLzRwZGEKLy8gQG1hdGNoICAgICAgICo6Ly80cGRhLnJ1LyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLjRwZGEucnUvKgovL2tpY2thc3MKLy8gQG1hdGNoICAgICAgICo6Ly9rYXQuY3IvKgovLyBAbWF0Y2ggICAgICAgKjovL2tpY2thc3N0by5jby8qCi8vIEBtYXRjaCAgICAgICAqOi8va2F0cHJveHkuaXMvKgovLyBAbWF0Y2ggICAgICAgKjovL3RoZWthdC50di8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi5rYXQuY3IvKgovLyBAbWF0Y2ggICAgICAgKjovLyoua2lja2Fzc3RvLmNvLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLmthdHByb3h5LmlzLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnRoZWthdC50di8qCi8vQU1PCi8vIEBtYXRjaCAgICAgICAqOi8vYWRkb25zLm1vemlsbGEub3JnLyoKLy9waXhpdgovLyBAbWF0Y2ggICAgICAgKjovL3BpeGl2Lm5ldC8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi5waXhpdi5uZXQvKgovL3R1bWJscgovLyBAbWF0Y2ggICAgICAgKjovL3R1bWJsci5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyoudHVtYmxyLmNvbS8qCi8vZGFuaWVsZGVmbwovLyBAbWF0Y2ggICAgICAgKjovL2RhbmllbGRlZm8ucnUvKgovLyBAbWF0Y2ggICAgICAgKjovLyouZGFuaWVsZGVmby5ydS8qCi8veWFwbGFrYWwKLy8gQG1hdGNoICAgICAgICo6Ly95YXBsYWthbC5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyoueWFwbGFrYWwuY29tLyoKLy9zb3VuZGNsb3VkCi8vIEBtYXRjaCAgICAgICAqOi8vc291bmRjbG91ZC5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyouc291bmRjbG91ZC5jb20vKgovL3Vwd29yawovLyBAbWF0Y2ggICAgICAgKjovL3Vwd29yay5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyoudXB3b3JrLmNvbS8qCi8vcGljYXJ0bwovLyBAbWF0Y2ggICAgICAgKjovL3BpY2FydG8udHYvKgovLyBAbWF0Y2ggICAgICAgKjovLyoucGljYXJ0by50di8qCi8vdGFrZXIKLy8gQG1hdGNoICAgICAgICo6Ly90YWtlci5pbS8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi50YWtlci5pbS8qCi8vZm9ydW1hdmlhCi8vIEBtYXRjaCAgICAgICAqOi8vKi5mb3J1bWF2aWEucnUvKgovL3NsYWNrCi8vIEBtYXRjaCAgICAgICAqOi8vKi5zbGFjay5jb20vKgovL2luc3RhZ3JhbQovLyBAbWF0Y2ggICAgICAgKjovL2luc3RhZ3JhbS5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovLyouaW5zdGFncmFtLmNvbS8qCgovLyA9PS9Vc2VyU2NyaXB0PT0KKGZ1bmN0aW9uKCkgewogICAgLy8gYW5jaG9ycyBhbmQgZnVuY3Rpb25zCiAgICB2YXIgYW5jaG9yOwogICAgdmFyIGFmdGVyOwogICAgdmFyIHJ3TGluayA9IGZ1bmN0aW9uKCl7fTsKICAgIHZhciByd0FsbCA9IGZ1bmN0aW9uKCl7fTsKICAgIHZhciByZXRUcnVlID0gZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9OyAvL2R1bW15IGZ1bmN0aW9uIHRvIGFsd2F5cyByZXR1cm4gdHJ1ZQoKICAgIC8vIHNpbXBsZSByZXdyaXRlIGxpbmsgLSAgYmFzZWQgb24gYW5jaG9ycwogICAgZnVuY3Rpb24gcndTaW1wbGUobGluayl7CiAgICAgICAgaWYgKGFuY2hvcil7CiAgICAgICAgICAgIHZhciBuZHggPSBsaW5rLmhyZWYuaW5kZXhPZihhbmNob3IpOwogICAgICAgICAgICBpZiAobmR4ICE9IC0xKXsKICAgICAgICAgICAgICAgIHZhciBuZXdsaW5rID0gbGluay5ocmVmLnN1YnN0cmluZyhuZHggKyBhbmNob3IubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGlmIChhZnRlcil7CiAgICAgICAgICAgICAgICAgICAgbmR4ID0gbmV3bGluay5pbmRleE9mKGFmdGVyKTsKICAgICAgICAgICAgICAgICAgICBpZiAobmR4ICE9IC0xKQogICAgICAgICAgICAgICAgICAgICAgICBuZXdsaW5rID0gbmV3bGluay5zdWJzdHJpbmcoMCwgbmR4KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVuZXNjYXBlKG5ld2xpbmspOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcndhU2ltcGxlKCl7CiAgICAgICAgdmFyIGxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgKytpKQogICAgICAgICAgICByd0xpbmsobGlua3NbaV0pOwogICAgfQogICAgLy8gdmsKICAgIGZ1bmN0aW9uIHJ3VksobGluayl7CiAgICAgICAgaWYgKGxpbmsuY2xhc3NOYW1lID09PSAncGFnZV9tZWRpYV9saW5rX3RodW1iJykKICAgICAgICB7CiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBsaW5rLnBhcmVudE5vZGU7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKICAgICAgICAgICAgcGFyZW50LnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpOwogICAgICAgICAgICBwYXJlbnQucmVtb3ZlQXR0cmlidXRlKCdvbmNsaWNrJyk7CiAgICAgICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdvbmNsaWNrJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbmR4ID0gbGluay5ocmVmLmluZGV4T2YoYW5jaG9yKTsKICAgICAgICBpZiAobmR4ICE9IC0xKXsKICAgICAgICAgICAgdmFyIG5ld2xpbmsgPSBsaW5rLmhyZWYuc3Vic3RyaW5nKG5keCArIGFuY2hvci5sZW5ndGgpOwogICAgICAgICAgICB2YXIgYWZ0ZXJBcnIgPSBbJyZwb3N0PScsICcmZWw9c25pcHBldCcsICcmY2Nfa2V5PSddOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFmdGVyQXJyLmxlbmd0aDsgKytpKXsKICAgICAgICAgICAgICAgIG5keCA9IG5ld2xpbmsuaW5kZXhPZihhZnRlckFycltpXSk7CiAgICAgICAgICAgICAgICBpZiAobmR4ICE9IC0xKQogICAgICAgICAgICAgICAgICAgIG5ld2xpbmsgPSBuZXdsaW5rLnN1YnN0cmluZygwLCBuZHgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVuZXNjYXBlKG5ld2xpbmspOwogICAgICAgIH0KICAgIH0KICAgIC8vIHR3aXR0ZXIKICAgIGZ1bmN0aW9uIHJ3VHdpdHRlcihsaW5rKXsKICAgICAgICBpZiAobGluay5oYXNBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQtdXJsJykpewogICAgICAgICAgICBsaW5rLmhyZWYgPSBsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1leHBhbmRlZC11cmwnKTsKICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQtdXJsJyk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcndhVHdpdHRlcigpewogICAgICAgIHZhciBsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3R3aXR0ZXItdGltZWxpbmUtbGluaycpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyArK2kpCiAgICAgICAgICAgIHJ3TGluayhsaW5rc1tpXSk7CiAgICB9CiAgICAvLyBraWNrYXNzCiAgICBmdW5jdGlvbiByd0tpY2thc3MobGluayl7CiAgICAgICAgdmFyIG5keCA9IGxpbmsuaHJlZi5pbmRleE9mKGFuY2hvcik7CiAgICAgICAgaWYgKG5keCAhPSAtMSl7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHdpbmRvdy5hdG9iKHVuZXNjYXBlKGxpbmsuaHJlZi5zdWJzdHJpbmcobmR4ICsgYW5jaG9yLmxlbmd0aCwgbGluay5ocmVmLmxlbmd0aCAtIDEpKSk7CiAgICAgICAgICAgIGxpbmsuY2xhc3NOYW1lID0gJyc7CiAgICAgICAgfQogICAgfQogICAgLy8geW91dHViZQogICAgZnVuY3Rpb24gcndZb3V0dWJlKGxpbmspewogICAgICAgIGlmICgvcmVkaXJlY3QvaS50ZXN0KGxpbmsuY2xhc3NOYW1lKSkKICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVkaXJlY3QtaHJlZi11cGRhdGVkJywgJ3RydWUnKTsKICAgICAgICByd1NpbXBsZShsaW5rKTsKICAgIH0KICAgIC8vIGZhY2Vib29rCiAgICBmdW5jdGlvbiByd0ZhY2Vib29rKGxpbmspewogICAgICAgIGlmICgvcmVmZXJyZXJfbG9nL2kudGVzdChsaW5rLm9uY2xpY2spKXsKICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ29uY2xpY2snKTsKICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ29ubW91c2VvdmVyJyk7CiAgICAgICAgfQogICAgICAgIHJ3U2ltcGxlKGxpbmspOwogICAgfQogICAgLy8gZ29vZ2xlCiAgICBmdW5jdGlvbiByd0dvb2dsZShsaW5rKXsKICAgICAgICAvLyByZXBsYWNlIGdsb2JhbCByd3Qgc2NyaXB0CiAgICAgICAgaWYgKHdpbmRvdy5yd3QgJiYgd2luZG93LnJ3dCAhPSByZXRUcnVlKXsKICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy5yd3Q7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdyd3QnLCB7IHZhbHVlOiByZXRUcnVlLCB3cml0YWJsZTogZmFsc2UgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBtYWluIHNlYXJjaAogICAgICAgIGlmIChsaW5rLmhhc0F0dHJpYnV0ZSgnb25tb3VzZWRvd24nKSkKICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ29ubW91c2Vkb3duJyk7CiAgICAgICAgLy8gaW1hZ2VzCiAgICAgICAgaWYgKGxpbmsuaGFzQXR0cmlidXRlKCdqc2FjdGlvbicpKXsKICAgICAgICAgICB2YXIgdG1wID0gbGluay5nZXRBdHRyaWJ1dGUoJ2pzYWN0aW9uJyk7CiAgICAgICAgICAgaWYgKHRtcCkKICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2pzYWN0aW9uJywgdG1wLnJlcGxhY2UoLyhtb3VzZWRvd246aXJjLnJsfGtleWRvd246aXJjLnJsaykvZywnJykpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyB5YW5kZXgKICAgIGZ1bmN0aW9uIHJ3WWFuZGV4KGxpbmspewogICAgICAgIC8vIG1haW4gc2VhcmNoCiAgICAgICAgaWYgKGxpbmsuaGFzQXR0cmlidXRlKCdvbm1vdXNlZG93bicpKQogICAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnb25tb3VzZWRvd24nKTsKICAgICAgICAvLyBpbWFnZXMKICAgICAgICBhbmNob3IgPSAnJmltZ191cmw9JzsKICAgICAgICBhZnRlciA9ICcmcG9zPSc7CiAgICAgICAgcndTaW1wbGUobGluayk7CiAgICB9CiAgICAvL21vemlsbGEgYWRkb25zIHN0b3JlCiAgICBmdW5jdGlvbiByd0FNTyhsaW5rKXsKICAgICAgICBpZiAoL291dGdvaW5nLnByb2QubW96YXdzLm5ldC9pLnRlc3QobGluay5ocmVmKSl7CiAgICAgICAgICAgIHZhciB0bXAgPSBsaW5rLmhyZWY7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9ICIjIjsKICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byBmaWdodCBtb3ppbGxhJ3MgcmVwbGFjaW5nIG9mIGRpcmVjdCByZWRpcmVjdCBzdHJpbmcgd2l0aCBqcXVlcnkgZXZlbnRzCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgbGluay5ocmVmID0gdW5lc2NhcGUodG1wLnJlcGxhY2UoLyhodHRwfGh0dHBzKTpcL1wvb3V0Z29pbmcucHJvZC5tb3phd3MubmV0XC92MVwvWzAtOWEtekEtWl0rXC8vaSwnJykpOyB9LCAxMDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBkYW5pdWVsZGVmbwogICAgZnVuY3Rpb24gcndEYW5pZWxEZWZvKGxpbmspewogICAgICAgIGlmIChsaW5rLmhhc0F0dHJpYnV0ZSgnZGF0YS1wcm94eS1ocmVmJykpCiAgICAgICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXByb3h5LWhyZWYnKTsKICAgIH0KCiAgICAvLyBzbGFjawogICAgZnVuY3Rpb24gcndTbGFjayhsaW5rKXsKICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnb25jbGljaycpOwogICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdvbm1vdXNlb3ZlcicpOwogICAgfQoKICAgIC8vIGRldGVybWluZSBhbmNob3JzLCBmdW5jdGlvbnMgYW5kIGxpc3RlbmVycwogICAgKGZ1bmN0aW9uICgpCiAgICB7CiAgICAgICAgcndMaW5rID0gcndTaW1wbGU7CiAgICAgICAgcndBbGwgPSByd2FTaW1wbGU7CgogICAgICAgIHZhciBsb2MgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7CiAgICAgICAgaWYgKC9nb29nbGUvaS50ZXN0KGxvYykpCiAgICAgICAgICAgIHJ3TGluayA9IHJ3R29vZ2xlOwogICAgICAgIGVsc2UgaWYgKC95b3V0dWJlL2kudGVzdChsb2MpKXsKICAgICAgICAgICAgYW5jaG9yID0gJ3JlZGlyZWN0P3E9JzsKICAgICAgICAgICAgYWZ0ZXIgPSAnJnJlZGlyX3Rva2VuPSc7CiAgICAgICAgICAgIHJ3TGluayA9IHJ3WW91dHViZTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoL2ZhY2Vib29rL2kudGVzdChsb2MpKXsKICAgICAgICAgICAgYW5jaG9yID0gJ3U9JzsKICAgICAgICAgICAgYWZ0ZXIgPSAnJmg9JzsKICAgICAgICAgICAgcndMaW5rID0gcndGYWNlYm9vazsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoL2luc3RhZ3JhbS9pLnRlc3QobG9jKSl7CiAgICAgICAgICAgIGFuY2hvciA9ICd1PSc7CiAgICAgICAgICAgIGFmdGVyID0gJyZlPSc7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKC90d2l0dGVyL2kudGVzdChsb2MpKXsKICAgICAgICAgICAgcndMaW5rID0gcndUd2l0dGVyOwogICAgICAgICAgICByd0FsbCA9IHJ3YVR3aXR0ZXI7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKC95YW5kZXgvaS50ZXN0KGxvYykpCiAgICAgICAgICAgIHJ3TGluayA9IHJ3WWFuZGV4OwogICAgICAgIGVsc2UgaWYgKC92ay9pLnRlc3QobG9jKSl7CiAgICAgICAgICAgIGFuY2hvciA9ICd0bz0nOwogICAgICAgICAgICByd0xpbmsgPSByd1ZLOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgvb2svaS50ZXN0KGxvYykpewogICAgICAgICAgICBhbmNob3IgPSAnc3QubGluaz0nOwogICAgICAgICAgICBhZnRlciA9ICcmc3QubmFtZT0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgvcGl4aXYvaS50ZXN0KGxvYykpCiAgICAgICAgICAgIGFuY2hvciA9ICdqdW1wLnBocD8nOwogICAgICAgIGVsc2UgaWYgKC90dW1ibHIvaS50ZXN0KGxvYykpewogICAgICAgICAgICBhbmNob3IgPSAicmVkaXJlY3Q/ej0iOwogICAgICAgICAgICBhZnRlciA9ICImdD0iOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgvZGV2aWFudGFydC9pLnRlc3QobG9jKSkKICAgICAgICAgICAgYW5jaG9yID0gJ291dGdvaW5nPyc7CiAgICAgICAgZWxzZSBpZiAoLyhzdGVhbXxyZWFjdG9yKS9pLnRlc3QobG9jKSkKICAgICAgICAgICAgYW5jaG9yID0gJ3VybD0nOwogICAgICAgIGVsc2UgaWYgKC8oa2F0fGtpY2thc3MpL2kudGVzdChsb2MpKXsKICAgICAgICAgICAgYW5jaG9yID0gJ2NvbmZpcm0vdXJsLyc7CiAgICAgICAgICAgIHJ3TGluayA9IHJ3S2lja2FzczsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoL3NvdW5kY2xvdWQvaS50ZXN0KGxvYykpCiAgICAgICAgICAgIGFuY2hvciA9ICJleGl0LnNjLz91cmw9IjsKICAgICAgICBlbHNlIGlmICgvdXB3b3JrL2kudGVzdChsb2MpKQogICAgICAgICAgICBhbmNob3IgPSAnbGVhdmluZy1vZGVzaz9yZWY9JzsKICAgICAgICBlbHNlIGlmICgvNHBkYS9pLnRlc3QobG9jKSl7CiAgICAgICAgICAgIGFuY2hvciA9ICdnby8/dT0nOwogICAgICAgICAgICBhZnRlciA9ICcmZT0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgvbW96aWxsYS9pLnRlc3QobG9jKSkKICAgICAgICAgICAgcndMaW5rID0gcndBTU87CiAgICAgICAgZWxzZSBpZiAoL2RhbmllbGRlZm8vaS50ZXN0KGxvYykpCiAgICAgICAgICAgIHJ3TGluayA9IHJ3RGFuaWVsRGVmbzsKICAgICAgICBlbHNlIGlmICgveWFwbGFrYWwvaS50ZXN0KGxvYykpCiAgICAgICAgICAgIGFuY2hvciA9ICJnby8/IjsKICAgICAgICBlbHNlIGlmICgvd2lraW1hcGlhLm9yZy9pLnRlc3QobG9jKSkKICAgICAgICAgICAgYW5jaG9yID0gJ2V4dGVybmFsX2xpbms/dXJsPSc7CiAgICAgICAgZWxzZSBpZiAoL2ZvcnVtYXZpYS5ydS9pLnRlc3QobG9jKSkKICAgICAgICAgICAgYW5jaG9yID0gJy9lLz9sPSc7CiAgICAgICAgZWxzZSBpZiAoL3BpY2FydG8vaS50ZXN0KGxvYykpewogICAgICAgICAgICBhbmNob3IgPSAicmVmZXJyZXI/Z289IjsKICAgICAgICAgICAgYWZ0ZXIgPSAiJnJlZj0iOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgvdGFrZXIvaS50ZXN0KGxvYykpCiAgICAgICAgICAgIGFuY2hvciA9ICJwaHBCQjIvZ290by8iOwogICAgICAgIGVsc2UgaWYgKC9zbGFjay9pLnRlc3QobG9jKSkKICAgICAgICAgICAgcndMaW5rID0gcndTbGFjazsKCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICBpZiAoIWV2ZW50IHx8ICFldmVudC50YXJnZXQgfHwgIShldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KQogICAgICAgICAgICAgICAgcndMaW5rKG5vZGUpOwogICAgICAgICAgICB2YXIgbGlua3MgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyArK2kpCiAgICAgICAgICAgICAgICByd0xpbmsobGlua3NbaV0pOwogICAgICAgIH0sIGZhbHNlKTsKICAgIH0pKCk7CiAgICByd0FsbCgpOwp9KSgpOwo="},{"name":"Pinterest without registration","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http://*.pinterest.com/*","https://*.pinterest.com/*","https://*.pinterest.*/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1540408179643,"data":{}},"enabled":true,"position":9,"uuid":"d117d6bf-9a3f-4ebd-bee2-5b47a44d3c98","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFBpbnRlcmVzdCB3aXRob3V0IHJlZ2lzdHJhdGlvbgovLyBAbmFtZXNwYWNlICAgaHR0cDovL2FuZHJlYWxhenphcm90dG8uY29tLwovLyBAdmVyc2lvbiAgICAgMi4yCi8vIEBkZXNjcmlwdGlvbiBBbGxvd3MgdG8gYnJvd3NlIFBpbnRlcmVzdCB3aXRob3V0IGxvZ2luL3JlZ2lzdHJhdGlvbiwgcmVtb3ZpbmcgdGhlIG9mZmVuZGluZyBtb2RhbCBwb3B1cAovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGludGVyZXN0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyoucGludGVyZXN0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyoucGludGVyZXN0LiovKgovLyBAY29weXJpZ2h0ICAgMjAxNCssIEFuZHJlYSBMYXp6YXJvdHRvCi8vIEByZXF1aXJlICAgICBodHRwOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS1sYXRlc3QubWluLmpzCi8vIEBsaWNlbnNlICAgICBHUEwgdmVyc2lvbiAzIG9yIGFueSBsYXRlciB2ZXJzaW9uOyBodHRwOi8vd3d3LmdudS5vcmcvY29weWxlZnQvZ3BsLmh0bWwKLy8gQGdyYW50ICAgICAgIEdNX2FkZFN0eWxlCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gVmVyeSBodW1ibGUgcXVlcnkgc3RyaW5nIGV4dHJhY3RvcgpmdW5jdGlvbiBzZWFyY2hQYXJhbWV0ZXIoKSB7CiAgICBpZiAobG9jYXRpb24uaHJlZi5pbmRleE9mKCdxPScpID4gLTEpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gbG9jYXRpb24uaHJlZi5zcGxpdCgncT0nKVsxXS5zcGxpdCgnJicpWzBdOwogICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0LnJlcGxhY2UoL1wrL2csICcgJykpOwogICAgfQogICAgcmV0dXJuOwp9CgokKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CglpZihsb2NhdGlvbi5wYXRobmFtZSA9PSAiLyIpCgkJbG9jYXRpb24uaHJlZiA9ICJodHRwczovL3d3dy5waW50ZXJlc3QuY29tL2NhdGVnb3JpZXMiOwoKCUdNX2FkZFN0eWxlKCIuVW5hdXRoQmFubmVyLCBib2R5ID4gLk1vZGFsLCAuTW9kYWxNYW5hZ2VyID4gLk1vZGFsLCAuQ2xvc2V1cF9fd3JhcHBlciA+IGRpdltzdHlsZSo9J2ZpeGVkJ10geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0gIiArCgkJIi5ub1Njcm9sbCB7IG92ZXJmbG93OiBhdXRvICFpbXBvcnRhbnQ7IH0gIiArCgkJImRpdltzdHlsZSo9J2N1YmljLWJlemllciddLCBkaXZbc3R5bGUqPSdmaXhlZCddPmRpdltzdHlsZSo9J29wYWNpdHk6IDAuNSddLCBkaXZbc3R5bGUqPSdiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7J10sIC5GdWxsUGFnZU1vZGFsX19zY3JvbGxlciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfSAiICsKCQkiZGl2LmdyaWRDb250YWluZXIgPiBkaXYsIC5HcmlkIHsgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IH0iKTsKICAgIEdNX2FkZFN0eWxlKCIuSGVhZGVyIHsgd2lkdGg6IDEwMCU7IH0iKTsKCUdNX2FkZFN0eWxlKCIjZGVza3RvcFdyYXBwZXIgeyBwb3NpdGlvbjogaW5oZXJpdCAhaW1wb3J0YW50fSIgKwogICAgICAgICcuRGVuemVsUmVhY3RCcmlkZ2UgPiBkaXYgPiBkaXZbc3R5bGUqPSJvcGFjaXR5OiAxIl0ge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9Jyk7CgoJJCgiYm9keSIpLnJlbW92ZUNsYXNzKCJub1RvdWNoIikuY3NzKCdoZWlnaHQnLCAnYXV0bycpOwoJJCgnZGl2W2RhdGEtcmVhY3RpZF1bc3R5bGUqPWZpeGVkXScpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTsKCSQoIiNkZXNrdG9wV3JhcHBlciArICogKyBkaXYiKS5yZW1vdmUoKTsKCiAgICAvLyBGaXggbGlua3MKICAgICQoJy5Hcm93dGhVbmF1dGhQaW5JbWFnZSA+IGFbaHJlZl0nKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBsaW5rID0gJCh0aGlzKTsKICAgICAgICBsaW5rLnBhcmVudCgpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gbGluay5hdHRyKCdocmVmJyk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvLyBBZGQgc2ltcGxlIHNlYXJjaCBmb3JtCiAgICB2YXIgc2VhcmNoRm9ybSA9ICQoIjxmb3JtIG5hbWU9J3NlYXJjaCcgYWN0aW9uPScvc2VhcmNoL3BpbnMvJz4iICsKICAgICAgICAgICAgICAgICAgICAgICAiPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J3EnIC8+IiArCiAgICAgICAgICAgICAgICAgICAgICAgIjxidXR0b24gdHlwZT0nc3VibWl0Jz4iICsKICAgICAgICAgICAgICAgICAgICAgICAiPGltZyBzdHlsZT0nd2lkdGg6IDI0cHg7IG1hcmdpbi10b3A6IC00cHgnIHNyYz0naHR0cHM6Ly9pLmltZ3VyLmNvbS9ON1hZMWd6LnBuZyc+IiArCiAgICAgICAgICAgICAgICAgICAgICAgIjwvYnV0dG9uPjwvZm9ybT4iKTsKICAgIHNlYXJjaEZvcm0uY3NzKCdtYXJnaW4tcmlnaHQnLCAnNGVtJykuZmluZCgnaW5wdXQsIGJ1dHRvbicpLmNzcyh7CiAgICAgICAgJ2hlaWdodCc6ICc0MHB4JywKICAgICAgICAnbGluZS1oZWlnaHQnOiAnMzZweCcsCiAgICAgICAgJ3BhZGRpbmcnOiAnMCAxZW0nLAogICAgICAgICdib3JkZXInOiAnMXB4IHNvbGlkICNkZGQnLAogICAgICAgICdiYWNrZ3JvdW5kJzogJ3doaXRlJywKICAgICAgICAnYm9yZGVyLXJhZGl1cyc6ICc0cHgnLAogICAgICAgICdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLAogICAgICAgICdmb250LXNpemUnOiAnMTRweCcKICAgIH0pOwogICAgc2VhcmNoRm9ybS5maW5kKCdpbnB1dCcpLnZhbChzZWFyY2hQYXJhbWV0ZXIoKSkuY3NzKCd3aWR0aCcsICdjYWxjKDEwMHZ3IC0gNjQwcHgpJyk7CiAgICBzZWFyY2hGb3JtLmZpbmQoJ2J1dHRvbicpLmNzcyh7CiAgICAgICAgJ21hcmdpbi1sZWZ0JzogJzFlbScsCiAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAnI2ViZWJlYicsCiAgICAgICAgJ2JvcmRlcic6IDAKICAgIH0pOwogICAgaWYgKCEkKCdpbnB1dC5PcGVuU2VhcmNoQm94SW5wdXQnKS5sZW5ndGgpCiAgICAgICAgJCgiLlVuYXV0aEhlYWRlcl9fcmlnaHRDb250ZW50Q29udGFpbmVyIikuYmVmb3JlKHNlYXJjaEZvcm0pOwp9KTs=","requires":[{"meta":{"name":"jquery-latest.min.js","url":"http://code.jquery.com/jquery-latest.min.js","ts":1566110292117,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMS4xIHwgKGMpIDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi8KIWZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBiKGEpfTpiKGEpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9IjEuMTEuMSIsbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbS5mbi5pbml0KGEsYil9LG49L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLG89L14tbXMtLyxwPS8tKFtcZGEtel0pL2dpLHE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTttLmZuPW0ucHJvdG90eXBlPXtqcXVlcnk6bCxjb25zdHJ1Y3RvcjptLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1tLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbS5leHRlbmQ9bS5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG0uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihtLmlzUGxhaW5PYmplY3QoYyl8fChiPW0uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbS5pc0FycmF5KGEpP2E6W10pOmY9YSYmbS5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1tLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbS5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKGwrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW0udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bS50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbS5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSk+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1tLnR5cGUoYSl8fGEubm9kZVR5cGV8fG0uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFqLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWouY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKGsub3duTGFzdClmb3IoYiBpbiBhKXJldHVybiBqLmNhbGwoYSxiKTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ai5jYWxsKGEsYil9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YSsiIjoib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8Im9iamVjdCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYil7YiYmbS50cmltKGIpJiYoYS5leGVjU2NyaXB0fHxmdW5jdGlvbihiKXthLmV2YWwuY2FsbChhLGIpfSkoYil9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG8sIm1zLSIpLnJlcGxhY2UocCxxKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXIoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6KGErIiIpLnJlcGxhY2UobiwiIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocihPYmplY3QoYSkpP20ubWVyZ2UoYywic3RyaW5nIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihiKXtpZihnKXJldHVybiBnLmNhbGwoYixhLGMpO2ZvcihkPWIubGVuZ3RoLGM9Yz8wPmM/TWF0aC5tYXgoMCxkK2MpOmM6MDtkPmM7YysrKWlmKGMgaW4gYiYmYltjXT09PWEpcmV0dXJuIGN9cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO3doaWxlKGM+ZClhW2UrK109YltkKytdO2lmKGMhPT1jKXdoaWxlKHZvaWQgMCE9PWJbZF0pYVtlKytdPWJbZCsrXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1yKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBiJiYoZj1hW2JdLGI9YSxhPWYpLG0uaXNGdW5jdGlvbihhKT8oYz1kLmNhbGwoYXJndW1lbnRzLDIpLGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGMuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGUuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxtLmd1aWQrKyxlKTp2b2lkIDB9LG5vdzpmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX0sc3VwcG9ydDprfSksbS5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7aFsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiByKGEpe3ZhciBiPWEubGVuZ3RoLGM9bS50eXBlKGEpO3JldHVybiJmdW5jdGlvbiI9PT1jfHxtLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOiJhcnJheSI9PT1jfHwwPT09Ynx8Im51bWJlciI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciBzPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9InNpenpsZSIrLW5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2IoKSx6PWdiKCksQT1nYigpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPSJ1bmRlZmluZWQiLEQ9MTw8MzEsRT17fS5oYXNPd25Qcm9wZXJ0eSxGPVtdLEc9Ri5wb3AsSD1GLnB1c2gsST1GLnB1c2gsSj1GLnNsaWNlLEs9Ri5pbmRleE9mfHxmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMubGVuZ3RoO2M+YjtiKyspaWYodGhpc1tiXT09PWEpcmV0dXJuIGI7cmV0dXJuLTF9LEw9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixOPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsTz1OLnJlcGxhY2UoInciLCJ3IyIpLFA9IlxcWyIrTSsiKigiK04rIikoPzoiK00rIiooWypeJHwhfl0/PSkiK00rIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitPKyIpKXwpIitNKyIqXFxdIixRPSI6KCIrTisiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrUCsiKSopfC4qKVxcKXwpIixSPW5ldyBSZWdFeHAoIl4iK00rIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTSsiKyQiLCJnIiksUz1uZXcgUmVnRXhwKCJeIitNKyIqLCIrTSsiKiIpLFQ9bmV3IFJlZ0V4cCgiXiIrTSsiKihbPit+XXwiK00rIikiK00rIioiKSxVPW5ldyBSZWdFeHAoIj0iK00rIiooW15cXF0nXCJdKj8pIitNKyIqXFxdIiwiZyIpLFY9bmV3IFJlZ0V4cChRKSxXPW5ldyBSZWdFeHAoIl4iK08rIiQiKSxYPXtJRDpuZXcgUmVnRXhwKCJeIygiK04rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTisiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTi5yZXBsYWNlKCJ3IiwidyoiKSsiKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrUCksUFNFVURPOm5ldyBSZWdFeHAoIl4iK1EpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK0wrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxkJC9pLCQ9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLF89L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxhYj0vWyt+XS8sYmI9Lyd8XFwvZyxjYj1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK00rIj98KCIrTSsiKXwuKSIsImlnIiksZGI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9O3RyeXtJLmFwcGx5KEY9Si5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxGW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGViKXtJPXthcHBseTpGLmxlbmd0aD9mdW5jdGlvbihhLGIpe0guYXBwbHkoYSxKLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYihhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIGQ7aWYoMSE9PShrPWIubm9kZVR5cGUpJiY5IT09aylyZXR1cm5bXTtpZihwJiYhZSl7aWYoZj1fLmV4ZWMoYSkpaWYoaj1mWzFdKXtpZig5PT09ayl7aWYoaD1iLmdldEVsZW1lbnRCeUlkKGopLCFofHwhaC5wYXJlbnROb2RlKXJldHVybiBkO2lmKGguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNlIGlmKGIub3duZXJEb2N1bWVudCYmKGg9Yi5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGopKSYmdChiLGgpJiZoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZXtpZihmWzJdKXJldHVybiBJLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoaj1mWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEkuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaikpLGR9aWYoYy5xc2EmJighcXx8IXEudGVzdChhKSkpe2lmKHM9cj11LHc9Yix4PTk9PT1rJiZhLDE9PT1rJiYib2JqZWN0IiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bz1nKGEpLChyPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXIucmVwbGFjZShiYiwiXFwkJiIpOmIuc2V0QXR0cmlidXRlKCJpZCIscykscz0iW2lkPSciK3MrIiddICIsbD1vLmxlbmd0aDt3aGlsZShsLS0pb1tsXT1zK3FiKG9bbF0pO3c9YWIudGVzdChhKSYmb2IoYi5wYXJlbnROb2RlKXx8Yix4PW8uam9pbigiLCIpfWlmKHgpdHJ5e3JldHVybiBJLmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFIsIiQxIiksYixkLGUpfWZ1bmN0aW9uIGdiKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYysiICIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjKyIgIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBoYihhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGliKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24gamIoYSxiKXt2YXIgYz1hLnNwbGl0KCJ8IiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24ga2IoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEQpLSh+YS5zb3VyY2VJbmRleHx8RCk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIGxiKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG1iKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1jfHwiYnV0dG9uIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYihhKXtyZXR1cm4gaGIoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaGIoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBvYihhKXtyZXR1cm4gYSYmdHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1DJiZhfWM9ZmIuc3VwcG9ydD17fSxmPWZiLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj8iSFRNTCIhPT1iLm5vZGVOYW1lOiExfSxtPWZiLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGU9YT9hLm93bmVyRG9jdW1lbnR8fGE6dixnPWUuZGVmYXVsdFZpZXc7cmV0dXJuIGUhPT1uJiY5PT09ZS5ub2RlVHlwZSYmZS5kb2N1bWVudEVsZW1lbnQ/KG49ZSxvPWUuZG9jdW1lbnRFbGVtZW50LHA9IWYoZSksZyYmZyE9PWcudG9wJiYoZy5hZGRFdmVudExpc3RlbmVyP2cuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixmdW5jdGlvbigpe20oKX0sITEpOmcuYXR0YWNoRXZlbnQmJmcuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixmdW5jdGlvbigpe20oKX0pKSxjLmF0dHJpYnV0ZXM9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPSJpIiwhYS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1pYihmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlLmNyZWF0ZUNvbW1lbnQoIiIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT0kLnRlc3QoZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSYmaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PiIsYS5maXJzdENoaWxkLmNsYXNzTmFtZT0iaSIsMj09PWEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaSIpLmxlbmd0aH0pLGMuZ2V0QnlJZD1pYihmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFlLmdldEVsZW1lbnRzQnlOYW1lfHwhZS5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRCeUlkIT09QyYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaWQiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSE9PUMmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuIHR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09Qz9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoIioiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PUMmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT0kLnRlc3QoZS5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYihmdW5jdGlvbihhKXthLmlubmVySFRNTD0iPHNlbGVjdCBtc2FsbG93Y2xpcD0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsYS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NsaXBePScnXSIpLmxlbmd0aCYmcS5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8cS5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK0wrIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIil9KSxpYihmdW5jdGlvbihhKXt2YXIgYj1lLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoJiZxLnB1c2goIm5hbWUiK00rIipbKl4kfCF+XT89IiksYS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aHx8cS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGEucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpLHEucHVzaCgiLC4qOiIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmliKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsImRpdiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixRKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09ZXx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1lfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0suY2FsbChrLGEpLUsuY2FsbChrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGY9YS5wYXJlbnROb2RlLGc9Yi5wYXJlbnROb2RlLGg9W2FdLGk9W2JdO2lmKCFmfHwhZylyZXR1cm4gYT09PWU/LTE6Yj09PWU/MTpmPy0xOmc/MTprP0suY2FsbChrLGEpLUsuY2FsbChrLGIpOjA7aWYoZj09PWcpcmV0dXJuIGtiKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaS51bnNoaWZ0KGMpO3doaWxlKGhbZF09PT1pW2RdKWQrKztyZXR1cm4gZD9rYihoW2RdLGlbZF0pOmhbZF09PT12Py0xOmlbZF09PT12PzE6MH0sZSk6bn0sZmIubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYihhLG51bGwsbnVsbCxiKX0sZmIubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFUsIj0nJDEnXSIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBmYihiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxmYi5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGZiLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZFLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxmYi5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrYSl9LGZiLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1mYi5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9IiIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoInN0cmluZyI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9ZmIuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aGIsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKGNiLGRiKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHwiIikucmVwbGFjZShjYixkYiksIn49Ij09PWFbMl0mJihhWzNdPSIgIithWzNdKyIgIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGZiLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKCJldmVuIj09PWFbM118fCJvZGQiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fCJvZGQiPT09YVszXSkpOmFbM10mJmZiLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBYLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fCIiOmMmJlYudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZigiKSIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2ErIigiK00rInwkKSIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoInN0cmluZyI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fHR5cGVvZiBhLmdldEF0dHJpYnV0ZSE9PUMmJmEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWZiLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT8iIT0iPT09YjpiPyhlKz0iIiwiPSI9PT1iP2U9PT1jOiIhPSI9PT1iP2UhPT1jOiJePSI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6Iio9Ij09PWI/YyYmZS5pbmRleE9mKGMpPi0xOiIkPSI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6In49Ij09PWI/KCIgIitlKyIgIikuaW5kZXhPZihjKT4tMToifD0iPT09Yj9lPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YysiLSI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0ibnRoIiE9PWEuc2xpY2UoMCwzKSxnPSJsYXN0IiE9PWEuc2xpY2UoLTQpLGg9Im9mLXR5cGUiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPSFpJiYhaDtpZihxKXtpZihmKXt3aGlsZShwKXtsPWI7d2hpbGUobD1sW3BdKWlmKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9Im9ubHkiPT09YSYmIW8mJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGZiLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsIiIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aGIoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUsuY2FsbChhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDpoYihmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUiwiJDEiKSk7cmV0dXJuIGRbdV0/aGIoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksIWMucG9wKCl9fSksaGFzOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmIoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYihmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHwiIil8fGZiLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGIuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErIi0iKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1iJiYhIWEuY2hlY2tlZHx8Im9wdGlvbiI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWi50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1iJiYiYnV0dG9uIj09PWEudHlwZXx8ImJ1dHRvbiI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpuYihmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6bmIoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm5iKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46bmIoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6bmIoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpuYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om5iKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1sYihiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1tYihiKTtmdW5jdGlvbiBwYigpe31wYi5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHBiLGc9ZmIudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYSsiICJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLCIgIil9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtmb3IoZyBpbiBkLmZpbHRlcikhKGU9WFtnXS5leGVjKGgpKXx8altnXSYmIShlPWpbZ10oZSkpfHwoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZyxtYXRjaGVzOmV9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtpZighYylicmVha31yZXR1cm4gYj9oLmxlbmd0aDpoP2ZiLmVycm9yKGEpOnooYSxpKS5zbGljZSgwKX07ZnVuY3Rpb24gcWIoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPSIiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiByYihhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiYicGFyZW50Tm9kZSI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gc2IoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdGIoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylmYihhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdWIoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB2YihhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD12YihkKSksZSYmIWVbdV0mJihlPXZiKGUsZikpLGhiKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHRiKGJ8fCIqIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnViKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj11YihyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/Sy5jYWxsKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj11YihyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SS5hcHBseShnLHIpfSl9ZnVuY3Rpb24gd2IoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVsiICJdLGk9Zz8xOjAsaz1yYihmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9cmIoZnVuY3Rpb24oYSl7cmV0dXJuIEsuY2FsbChiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSl9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3JiKHNiKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB2YihpPjEmJnNiKG0pLGk+MSYmcWIoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZToiICI9PT1hW2ktMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShSLCIkMSIpLGMsZT5pJiZ3YihhLnNsaWNlKGksZSkpLGY+ZSYmd2IoYT1hLnNsaWNlKGUpKSxmPmUmJnFiKGEpKX1tLnB1c2goYyl9cmV0dXJuIHNiKG0pfWZ1bmN0aW9uIHhiKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT0iMCIscj1mJiZbXSxzPVtdLHQ9aix1PWZ8fGUmJmQuZmluZC5UQUcoIioiLGspLHY9dys9bnVsbD09dD8xOk1hdGgucmFuZG9tKCl8fC4xLHg9dS5sZW5ndGg7Zm9yKGsmJihqPWchPT1uJiZnKTtxIT09eCYmbnVsbCE9KGw9dVtxXSk7cSsrKXtpZihlJiZsKXttPTA7d2hpbGUobz1hW20rK10paWYobyhsLGcsaCkpe2kucHVzaChsKTticmVha31rJiYodz12KX1jJiYoKGw9IW8mJmwpJiZwLS0sZiYmci5wdXNoKGwpKX1pZihwKz1xLGMmJnEhPT1wKXttPTA7d2hpbGUobz1iW20rK10pbyhyLHMsZyxoKTtpZihmKXtpZihwPjApd2hpbGUocS0tKXJbcV18fHNbcV18fChzW3FdPUcuY2FsbChpKSk7cz11YihzKX1JLmFwcGx5KGkscyksayYmIWYmJnMubGVuZ3RoPjAmJnArYi5sZW5ndGg+MSYmZmIudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9dixqPXQpLHJ9O3JldHVybiBjP2hiKGYpOmZ9cmV0dXJuIGg9ZmIuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYSsiICJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXdiKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx4YihlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9ZmIuc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj0iZnVuY3Rpb24iPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJiJJRCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVgubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNiLGRiKSxhYi50ZXN0KGpbMF0udHlwZSkmJm9iKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYihqKSwhYSlyZXR1cm4gSS5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSxhYi50ZXN0KGEpJiZvYihiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGpiKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGpiKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGliKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYihMLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYn0oYSk7bS5maW5kPXMsbS5leHByPXMuc2VsZWN0b3JzLG0uZXhwclsiOiJdPW0uZXhwci5wc2V1ZG9zLG0udW5pcXVlPXMudW5pcXVlU29ydCxtLnRleHQ9cy5nZXRUZXh0LG0uaXNYTUxEb2M9cy5pc1hNTCxtLmNvbnRhaW5zPXMuY29udGFpbnM7dmFyIHQ9bS5leHByLm1hdGNoLm5lZWRzQ29udGV4dCx1PS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8sdj0vXi5bXjojXFtcLixdKiQvO2Z1bmN0aW9uIHcoYSxiLGMpe2lmKG0uaXNGdW5jdGlvbihiKSlyZXR1cm4gbS5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbS5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKCJzdHJpbmciPT10eXBlb2YgYil7aWYodi50ZXN0KGIpKXJldHVybiBtLmZpbHRlcihiLGEsYyk7Yj1tLmZpbHRlcihiLGEpfXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gbS5pbkFycmF5KGEsYik+PTAhPT1jfSl9bS5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF07cmV0dXJuIGMmJihhPSI6bm90KCIrYSsiKSIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bS5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTptLmZpbmQubWF0Y2hlcyhhLG0uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbS5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz1bXSxkPXRoaXMsZT1kLmxlbmd0aDtpZigic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMucHVzaFN0YWNrKG0oYSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtlPmI7YisrKWlmKG0uY29udGFpbnMoZFtiXSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IoYj0wO2U+YjtiKyspbS5maW5kKGEsZFtiXSxjKTtyZXR1cm4gYz10aGlzLnB1c2hTdGFjayhlPjE/bS51bmlxdWUoYyk6YyksYy5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrIiAiK2E6YSxjfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXcodGhpcywic3RyaW5nIj09dHlwZW9mIGEmJnQudGVzdChhKT9tKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHgseT1hLmRvY3VtZW50LHo9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxBPW0uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBhKXtpZihjPSI8Ij09PWEuY2hhckF0KDApJiYiPiI9PT1hLmNoYXJBdChhLmxlbmd0aC0xKSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTp6LmV4ZWMoYSksIWN8fCFjWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8eCkuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoY1sxXSl7aWYoYj1iIGluc3RhbmNlb2YgbT9iWzBdOmIsbS5tZXJnZSh0aGlzLG0ucGFyc2VIVE1MKGNbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6eSwhMCkpLHUudGVzdChjWzFdKSYmbS5pc1BsYWluT2JqZWN0KGIpKWZvcihjIGluIGIpbS5pc0Z1bmN0aW9uKHRoaXNbY10pP3RoaXNbY10oYltjXSk6dGhpcy5hdHRyKGMsYltjXSk7cmV0dXJuIHRoaXN9aWYoZD15LmdldEVsZW1lbnRCeUlkKGNbMl0pLGQmJmQucGFyZW50Tm9kZSl7aWYoZC5pZCE9PWNbMl0pcmV0dXJuIHguZmluZChhKTt0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZH1yZXR1cm4gdGhpcy5jb250ZXh0PXksdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTptLmlzRnVuY3Rpb24oYSk/InVuZGVmaW5lZCIhPXR5cGVvZiB4LnJlYWR5P3gucmVhZHkoYSk6YShtKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxtLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bS5mbix4PW0oeSk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTttLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWFbYl07d2hpbGUoZSYmOSE9PWUubm9kZVR5cGUmJih2b2lkIDA9PT1jfHwxIT09ZS5ub2RlVHlwZXx8IW0oZSkuaXMoYykpKTE9PT1lLm5vZGVUeXBlJiZkLnB1c2goZSksZT1lW2JdO3JldHVybiBkfSxzaWJsaW5nOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfX0pLG0uZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGIsYz1tKGEsdGhpcyksZD1jLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2Q+YjtiKyspaWYobS5jb250YWlucyh0aGlzLGNbYl0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXQudGVzdChhKXx8InN0cmluZyIhPXR5cGVvZiBhP20oYSxifHx0aGlzLmNvbnRleHQpOjA7ZT5kO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJm0uZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9tLnVuaXF1ZShmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP20uaW5BcnJheSh0aGlzWzBdLG0oYSkpOm0uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS51bmlxdWUobS5tZXJnZSh0aGlzLmdldCgpLG0oYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gRChhLGIpe2RvIGE9YVtiXTt3aGlsZShhJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9bS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBtLmRpcihhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0uZGlyKGEsInBhcmVudE5vZGUiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZGlyKGEsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZGlyKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLmRpcihhLCJuZXh0U2libGluZyIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0uZGlyKGEsInByZXZpb3VzU2libGluZyIsYyl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBtLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBtLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG0ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDptLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe20uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1tLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW0uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHwoZT1tLnVuaXF1ZShlKSksQi50ZXN0KGEpJiYoZT1lLnJldmVyc2UoKSkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBFPS9cUysvZyxGPXt9O2Z1bmN0aW9uIEcoYSl7dmFyIGI9RlthXT17fTtyZXR1cm4gbS5lYWNoKGEubWF0Y2goRSl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bS5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/RlthXXx8RyhhKTptLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmLGcsaD1bXSxpPSFhLm9uY2UmJltdLGo9ZnVuY3Rpb24obCl7Zm9yKGM9YS5tZW1vcnkmJmwsZD0hMCxmPWd8fDAsZz0wLGU9aC5sZW5ndGgsYj0hMDtoJiZlPmY7ZisrKWlmKGhbZl0uYXBwbHkobFswXSxsWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlKXtjPSExO2JyZWFrfWI9ITEsaCYmKGk/aS5sZW5ndGgmJmooaS5zaGlmdCgpKTpjP2g9W106ay5kaXNhYmxlKCkpfSxrPXthZGQ6ZnVuY3Rpb24oKXtpZihoKXt2YXIgZD1oLmxlbmd0aDshZnVuY3Rpb24gZihiKXttLmVhY2goYixmdW5jdGlvbihiLGMpe3ZhciBkPW0udHlwZShjKTsiZnVuY3Rpb24iPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmInN0cmluZyIhPT1kJiZmKGMpfSl9KGFyZ3VtZW50cyksYj9lPWgubGVuZ3RoOmMmJihnPWQsaihjKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBoJiZtLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYyl7dmFyIGQ7d2hpbGUoKGQ9bS5pbkFycmF5KGMsaCxkKSk+LTEpaC5zcGxpY2UoZCwxKSxiJiYoZT49ZCYmZS0tLGY+PWQmJmYtLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bS5pbkFycmF5KGEsaCk+LTE6ISghaHx8IWgubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gaD1bXSxlPTAsdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBoPWk9Yz12b2lkIDAsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haH0sbG9jazpmdW5jdGlvbigpe3JldHVybiBpPXZvaWQgMCxjfHxrLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haX0sZmlyZVdpdGg6ZnVuY3Rpb24oYSxjKXtyZXR1cm4haHx8ZCYmIWl8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sYj9pLnB1c2goYyk6aihjKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBrLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBrfSxtLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG0uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbS5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBtLkRlZmVycmVkKGZ1bmN0aW9uKGMpe20uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bS5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZtLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5kb25lKGMucmVzb2x2ZSkuZmFpbChjLnJlamVjdCkucHJvZ3Jlc3MoYy5ub3RpZnkpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP20uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbS5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1kLmNhbGwoYXJndW1lbnRzKSxlPWMubGVuZ3RoLGY9MSE9PWV8fGEmJm0uaXNGdW5jdGlvbihhLnByb21pc2UpP2U6MCxnPTE9PT1mP2E6bS5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihlKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6ZSxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGU+MSlmb3IoaT1uZXcgQXJyYXkoZSksaj1uZXcgQXJyYXkoZSksaz1uZXcgQXJyYXkoZSk7ZT5iO2IrKyljW2JdJiZtLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5kb25lKGgoYixrLGMpKS5mYWlsKGcucmVqZWN0KS5wcm9ncmVzcyhoKGIsaixpKSk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEg7bS5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbS5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxtLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9tLnJlYWR5V2FpdCsrOm0ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXtpZihhPT09ITA/IS0tbS5yZWFkeVdhaXQ6IW0uaXNSZWFkeSl7aWYoIXkuYm9keSlyZXR1cm4gc2V0VGltZW91dChtLnJlYWR5KTttLmlzUmVhZHk9ITAsYSE9PSEwJiYtLW0ucmVhZHlXYWl0PjB8fChILnJlc29sdmVXaXRoKHksW21dKSxtLmZuLnRyaWdnZXJIYW5kbGVyJiYobSh5KS50cmlnZ2VySGFuZGxlcigicmVhZHkiKSxtKHkpLm9mZigicmVhZHkiKSkpfX19KTtmdW5jdGlvbiBJKCl7eS5hZGRFdmVudExpc3RlbmVyPyh5LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEosITEpLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsSiwhMSkpOih5LmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEopLGEuZGV0YWNoRXZlbnQoIm9ubG9hZCIsSikpfWZ1bmN0aW9uIEooKXsoeS5hZGRFdmVudExpc3RlbmVyfHwibG9hZCI9PT1ldmVudC50eXBlfHwiY29tcGxldGUiPT09eS5yZWFkeVN0YXRlKSYmKEkoKSxtLnJlYWR5KCkpfW0ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtpZighSClpZihIPW0uRGVmZXJyZWQoKSwiY29tcGxldGUiPT09eS5yZWFkeVN0YXRlKXNldFRpbWVvdXQobS5yZWFkeSk7ZWxzZSBpZih5LmFkZEV2ZW50TGlzdGVuZXIpeS5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixKLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLEosITEpO2Vsc2V7eS5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixKKSxhLmF0dGFjaEV2ZW50KCJvbmxvYWQiLEopO3ZhciBjPSExO3RyeXtjPW51bGw9PWEuZnJhbWVFbGVtZW50JiZ5LmRvY3VtZW50RWxlbWVudH1jYXRjaChkKXt9YyYmYy5kb1Njcm9sbCYmIWZ1bmN0aW9uIGUoKXtpZighbS5pc1JlYWR5KXt0cnl7Yy5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGEpe3JldHVybiBzZXRUaW1lb3V0KGUsNTApfUkoKSxtLnJlYWR5KCl9fSgpfXJldHVybiBILnByb21pc2UoYil9O3ZhciBLPSJ1bmRlZmluZWQiLEw7Zm9yKEwgaW4gbShrKSlicmVhaztrLm93bkxhc3Q9IjAiIT09TCxrLmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ITEsbShmdW5jdGlvbigpe3ZhciBhLGIsYyxkO2M9eS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLGMmJmMuc3R5bGUmJihiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksZD15LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksdHlwZW9mIGIuc3R5bGUuem9vbSE9PUsmJihiLnN0eWxlLmNzc1RleHQ9ImRpc3BsYXk6aW5saW5lO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGsuaW5saW5lQmxvY2tOZWVkc0xheW91dD1hPTM9PT1iLm9mZnNldFdpZHRoLGEmJihjLnN0eWxlLnpvb209MSkpLGMucmVtb3ZlQ2hpbGQoZCkpfSksZnVuY3Rpb24oKXt2YXIgYT15LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKG51bGw9PWsuZGVsZXRlRXhwYW5kbyl7ay5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2suZGVsZXRlRXhwYW5kbz0hMX19YT1udWxsfSgpLG0uYWNjZXB0RGF0YT1mdW5jdGlvbihhKXt2YXIgYj1tLm5vRGF0YVsoYS5ub2RlTmFtZSsiICIpLnRvTG93ZXJDYXNlKCldLGM9K2Eubm9kZVR5cGV8fDE7cmV0dXJuIDEhPT1jJiY5IT09Yz8hMTohYnx8YiE9PSEwJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3NpZCIpPT09Yn07dmFyIE09L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxOPS8oW0EtWl0pL2c7ZnVuY3Rpb24gTyhhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE4sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpNLnRlc3QoYyk/bS5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bS5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwfXJldHVybiBjfWZ1bmN0aW9uIFAoYSl7dmFyIGI7Zm9yKGIgaW4gYSlpZigoImRhdGEiIT09Ynx8IW0uaXNFbXB0eU9iamVjdChhW2JdKSkmJiJ0b0pTT04iIT09YilyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBRKGEsYixkLGUpe2lmKG0uYWNjZXB0RGF0YShhKSl7dmFyIGYsZyxoPW0uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP20uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoOwppZihrJiZqW2tdJiYoZXx8altrXS5kYXRhKXx8dm9pZCAwIT09ZHx8InN0cmluZyIhPXR5cGVvZiBiKXJldHVybiBrfHwoaz1pP2FbaF09Yy5wb3AoKXx8bS5ndWlkKys6aCksaltrXXx8KGpba109aT97fTp7dG9KU09OOm0ubm9vcH0pLCgib2JqZWN0Ij09dHlwZW9mIGJ8fCJmdW5jdGlvbiI9PXR5cGVvZiBiKSYmKGU/altrXT1tLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1tLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbS5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbS5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFIoYSxiLGMpe2lmKG0uYWNjZXB0RGF0YShhKSl7dmFyIGQsZSxmPWEubm9kZVR5cGUsZz1mP20uY2FjaGU6YSxoPWY/YVttLmV4cGFuZG9dOm0uZXhwYW5kbztpZihnW2hdKXtpZihiJiYoZD1jP2dbaF06Z1toXS5kYXRhKSl7bS5pc0FycmF5KGIpP2I9Yi5jb25jYXQobS5tYXAoYixtLmNhbWVsQ2FzZSkpOmIgaW4gZD9iPVtiXTooYj1tLmNhbWVsQ2FzZShiKSxiPWIgaW4gZD9bYl06Yi5zcGxpdCgiICIpKSxlPWIubGVuZ3RoO3doaWxlKGUtLSlkZWxldGUgZFtiW2VdXTtpZihjPyFQKGQpOiFtLmlzRW1wdHlPYmplY3QoZCkpcmV0dXJufShjfHwoZGVsZXRlIGdbaF0uZGF0YSxQKGdbaF0pKSkmJihmP20uY2xlYW5EYXRhKFthXSwhMCk6ay5kZWxldGVFeHBhbmRvfHxnIT1nLndpbmRvdz9kZWxldGUgZ1toXTpnW2hdPW51bGwpfX19bS5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP20uY2FjaGVbYVttLmV4cGFuZG9dXTphW20uZXhwYW5kb10sISFhJiYhUChhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFEoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFIoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBRKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUihhLGIsITApfX0pLG0uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bS5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbS5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW0uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLE8oZixkLGVbZF0pKSk7bS5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXttLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXttLmRhdGEodGhpcyxhLGIpfSk6Zj9PKGYsYSxtLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXttLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG0uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1tLl9kYXRhKGEsYiksYyYmKCFkfHxtLmlzQXJyYXkoYyk/ZD1tLl9kYXRhKGEsYixtLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW0ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bS5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXttLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbS5fZGF0YShhLGMpfHxtLl9kYXRhKGEsYyx7ZW1wdHk6bS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bS5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbS5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxtLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bS5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1tLnF1ZXVlKHRoaXMsYSxiKTttLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm0uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1tLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW0uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFM9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsVD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLFU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLCJub25lIj09PW0uY3NzKGEsImRpc3BsYXkiKXx8IW0uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxWPW0uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1tLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyltLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxtLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobShhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxXPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPXkuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksYz15LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixrLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1iLmZpcnN0Q2hpbGQubm9kZVR5cGUsay50Ym9keT0hYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsay5odG1sU2VyaWFsaXplPSEhYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxrLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09eS5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxhLnR5cGU9ImNoZWNrYm94IixhLmNoZWNrZWQ9ITAsYy5hcHBlbmRDaGlsZChhKSxrLmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkLGIuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixrLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYy5hcHBlbmRDaGlsZChiKSxiLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J3JhZGlvJyBjaGVja2VkPSdjaGVja2VkJyBuYW1lPSd0Jy8+IixrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsay5ub0Nsb25lRXZlbnQ9ITAsYi5hdHRhY2hFdmVudCYmKGIuYXR0YWNoRXZlbnQoIm9uY2xpY2siLGZ1bmN0aW9uKCl7ay5ub0Nsb25lRXZlbnQ9ITF9KSxiLmNsb25lTm9kZSghMCkuY2xpY2soKSksbnVsbD09ay5kZWxldGVFeHBhbmRvKXtrLmRlbGV0ZUV4cGFuZG89ITA7dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2goZCl7ay5kZWxldGVFeHBhbmRvPSExfX19KCksZnVuY3Rpb24oKXt2YXIgYixjLGQ9eS5jcmVhdGVFbGVtZW50KCJkaXYiKTtmb3IoYiBpbntzdWJtaXQ6ITAsY2hhbmdlOiEwLGZvY3VzaW46ITB9KWM9Im9uIitiLChrW2IrIkJ1YmJsZXMiXT1jIGluIGEpfHwoZC5zZXRBdHRyaWJ1dGUoYywidCIpLGtbYisiQnViYmxlcyJdPWQuYXR0cmlidXRlc1tjXS5leHBhbmRvPT09ITEpO2Q9bnVsbH0oKTt2YXIgWD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksWT0vXmtleS8sWj0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLywkPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxfPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gYWIoKXtyZXR1cm4hMH1mdW5jdGlvbiBiYigpe3JldHVybiExfWZ1bmN0aW9uIGNiKCl7dHJ5e3JldHVybiB5LmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1tLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbixvLHAscSxyPW0uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW0uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiB0eXBlb2YgbT09PUt8fGEmJm0uZXZlbnQudHJpZ2dlcmVkPT09YS50eXBlP3ZvaWQgMDptLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGsuZWxlbSxhcmd1bWVudHMpfSxrLmVsZW09YSksYj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGg9Yi5sZW5ndGg7d2hpbGUoaC0tKWY9Xy5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW0uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm0uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChuPWdbb10pfHwobj1nW29dPVtdLG4uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP24uc3BsaWNlKG4uZGVsZWdhdGVDb3VudCsrLDAsbCk6bi5wdXNoKGwpLG0uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxuLG8scCxxLHI9bS5oYXNEYXRhKGEpJiZtLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9Xy5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyl7bD1tLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbj1rW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK3Auam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksaT1mPW4ubGVuZ3RoO3doaWxlKGYtLSlnPW5bZl0sIWUmJnEhPT1nLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1nLmd1aWR8fGgmJiFoLnRlc3QoZy5uYW1lc3BhY2UpfHxkJiZkIT09Zy5zZWxlY3RvciYmKCIqKiIhPT1kfHwhZy5zZWxlY3Rvcil8fChuLnNwbGljZShmLDEpLGcuc2VsZWN0b3ImJm4uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsZykpO2kmJiFuLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG0ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUga1tvXSl9ZWxzZSBmb3IobyBpbiBrKW0uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bS5pc0VtcHR5T2JqZWN0KGspJiYoZGVsZXRlIHIuaGFuZGxlLG0uX3JlbW92ZURhdGEoYSwiZXZlbnRzIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLGwsbixvPVtkfHx5XSxwPWouY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscT1qLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihoPWw9ZD1kfHx5LDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmISQudGVzdChwK20uZXZlbnQudHJpZ2dlcmVkKSYmKHAuaW5kZXhPZigiLiIpPj0wJiYocT1wLnNwbGl0KCIuIikscD1xLnNoaWZ0KCkscS5zb3J0KCkpLGc9cC5pbmRleE9mKCI6Iik8MCYmIm9uIitwLGI9YlttLmV4cGFuZG9dP2I6bmV3IG0uRXZlbnQocCwib2JqZWN0Ij09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWU/MjozLGIubmFtZXNwYWNlPXEuam9pbigiLiIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Euam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm0ubWFrZUFycmF5KGMsW2JdKSxrPW0uZXZlbnQuc3BlY2lhbFtwXXx8e30sZXx8IWsudHJpZ2dlcnx8ay50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhay5ub0J1YmJsZSYmIW0uaXNXaW5kb3coZCkpe2ZvcihpPWsuZGVsZWdhdGVUeXBlfHxwLCQudGVzdChpK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGw9aDtsPT09KGQub3duZXJEb2N1bWVudHx8eSkmJm8ucHVzaChsLmRlZmF1bHRWaWV3fHxsLnBhcmVudFdpbmRvd3x8YSl9bj0wO3doaWxlKChoPW9bbisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPW4+MT9pOmsuYmluZFR5cGV8fHAsZj0obS5fZGF0YShoLCJldmVudHMiKXx8e30pW2IudHlwZV0mJm0uX2RhdGEoaCwiaGFuZGxlIiksZiYmZi5hcHBseShoLGMpLGY9ZyYmaFtnXSxmJiZmLmFwcGx5JiZtLmFjY2VwdERhdGEoaCkmJihiLnJlc3VsdD1mLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtpZihiLnR5cGU9cCwhZSYmIWIuaXNEZWZhdWx0UHJldmVudGVkKCkmJighay5fZGVmYXVsdHx8ay5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpPT09ITEpJiZtLmFjY2VwdERhdGEoZCkmJmcmJmRbcF0mJiFtLmlzV2luZG93KGQpKXtsPWRbZ10sbCYmKGRbZ109bnVsbCksbS5ldmVudC50cmlnZ2VyZWQ9cDt0cnl7ZFtwXSgpfWNhdGNoKHIpe31tLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbCYmKGRbZ109bCl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1tLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShtLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1tLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1tLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGc9MDt3aGlsZSgoZT1mLmhhbmRsZXJzW2crK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZS5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWUsYS5kYXRhPWUuZGF0YSxjPSgobS5ldmVudC5zcGVjaWFsW2Uub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxlLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1jJiYoYS5yZXN1bHQ9Yyk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHwiY2xpY2siIT09YS50eXBlKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZT1bXSxmPTA7aD5mO2YrKylkPWJbZl0sYz1kLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1lW2NdJiYoZVtjXT1kLm5lZWRzQ29udGV4dD9tKGMsdGhpcykuaW5kZXgoaSk+PTA6bS5maW5kKGMsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxlW2NdJiZlLnB1c2goZCk7ZS5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmV9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW20uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1aLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlkudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBtLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9Zi5zcmNFbGVtZW50fHx5KSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxhLm1ldGFLZXk9ISFhLm1ldGFLZXksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxwcm9wczoiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b24sZz1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihkPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fHksZT1kLmRvY3VtZW50RWxlbWVudCxjPWQuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZSYmZS5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShlJiZlLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGUmJmUuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGUmJmUuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmcmJihhLnJlbGF0ZWRUYXJnZXQ9Zz09PWEudGFyZ2V0P2IudG9FbGVtZW50OmcpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09Y2IoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1jYigpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbS5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bS5leHRlbmQobmV3IG0uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtkP20uZXZlbnQudHJpZ2dlcihlLG51bGwsYik6bS5ldmVudC5kaXNwYXRjaC5jYWxsKGIsZSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbS5yZW1vdmVFdmVudD15LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKHR5cGVvZiBhW2RdPT09SyYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbS5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgbS5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/YWI6YmIpOnRoaXMudHlwZT1hLGImJm0uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG0ubm93KCksdm9pZCh0aGlzW20uZXhwYW5kb109ITApKTpuZXcgbS5FdmVudChhLGIpfSxtLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOmJiLGlzUHJvcGFnYXRpb25TdG9wcGVkOmJiLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmJiLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWFiLGEmJihhLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9YWIsYSYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9YWIsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG0uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXttLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFtLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLnN1Ym1pdEJ1YmJsZXN8fChtLmV2ZW50LnNwZWNpYWwuc3VibWl0PXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsImZvcm0iKT8hMTp2b2lkIG0uZXZlbnQuYWRkKHRoaXMsImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsYz1tLm5vZGVOYW1lKGIsImlucHV0Iil8fG0ubm9kZU5hbWUoYiwiYnV0dG9uIik/Yi5mb3JtOnZvaWQgMDtjJiYhbS5fZGF0YShjLCJzdWJtaXRCdWJibGVzIikmJihtLmV2ZW50LmFkZChjLCJzdWJtaXQuX3N1Ym1pdCIsZnVuY3Rpb24oYSl7YS5fc3VibWl0X2J1YmJsZT0hMH0pLG0uX2RhdGEoYywic3VibWl0QnViYmxlcyIsITApKX0pfSxwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YS5fc3VibWl0X2J1YmJsZSYmKGRlbGV0ZSBhLl9zdWJtaXRfYnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZtLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhLCEwKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG0ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbS5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxrLmNoYW5nZUJ1YmJsZXN8fChtLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBYLnRlc3QodGhpcy5ub2RlTmFtZSk/KCgiY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhpcy50eXBlKSYmKG0uZXZlbnQuYWRkKHRoaXMsInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGEpeyJjaGVja2VkIj09PWEub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksbS5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhYS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITEpLG0uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxhLCEwKX0pKSwhMSk6dm9pZCBtLmV2ZW50LmFkZCh0aGlzLCJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlIixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDtYLnRlc3QoYi5ub2RlTmFtZSkmJiFtLl9kYXRhKGIsImNoYW5nZUJ1YmJsZXMiKSYmKG0uZXZlbnQuYWRkKGIsImNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXshdGhpcy5wYXJlbnROb2RlfHxhLmlzU2ltdWxhdGVkfHxhLmlzVHJpZ2dlcnx8bS5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLnBhcmVudE5vZGUsYSwhMCl9KSxtLl9kYXRhKGIsImNoYW5nZUJ1YmJsZXMiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBtLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFYLnRlc3QodGhpcy5ub2RlTmFtZSl9fSksay5mb2N1c2luQnViYmxlc3x8bS5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe20uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxtLmV2ZW50LmZpeChhKSwhMCl9O20uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1tLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbS5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW0uX2RhdGEoZCxiKS0xO2U/bS5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG0uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG0uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc7aWYoIm9iamVjdCI9PXR5cGVvZiBhKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihmIGluIGEpdGhpcy5vbihmLGIsYyxhW2ZdLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoInN0cmluZyI9PXR5cGVvZiBiPyhkPWMsYz12b2lkIDApOihkPWMsYz1iLGI9dm9pZCAwKSksZD09PSExKWQ9YmI7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihnPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbSgpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1tLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixtKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuKGI9PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPWJiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXttLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP20uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO2Z1bmN0aW9uIGRiKGEpe3ZhciBiPWViLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfXZhciBlYj0iYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlbyIsZmI9LyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZyxnYj1uZXcgUmVnRXhwKCI8KD86IitlYisiKVtcXHMvPl0iLCJpIiksaGI9L15ccysvLGliPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksamI9LzwoW1x3Ol0rKS8sa2I9Lzx0Ym9keS9pLGxiPS88fCYjP1x3KzsvLG1iPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksbmI9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksb2I9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLHBiPS9edHJ1ZVwvKC4qKS8scWI9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLHJiPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxsZWdlbmQ6WzEsIjxmaWVsZHNldD4iLCI8L2ZpZWxkc2V0PiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0scGFyYW06WzEsIjxvYmplY3Q+IiwiPC9vYmplY3Q+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDprLmh0bWxTZXJpYWxpemU/WzAsIiIsIiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sc2I9ZGIoeSksdGI9c2IuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmIub3B0Z3JvdXA9cmIub3B0aW9uLHJiLnRib2R5PXJiLnRmb290PXJiLmNvbGdyb3VwPXJiLmNhcHRpb249cmIudGhlYWQscmIudGg9cmIudGQ7ZnVuY3Rpb24gdWIoYSxiKXt2YXIgYyxkLGU9MCxmPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09Sz9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fCIqIik6dHlwZW9mIGEucXVlcnlTZWxlY3RvckFsbCE9PUs/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fCIqIik6dm9pZCAwO2lmKCFmKWZvcihmPVtdLGM9YS5jaGlsZE5vZGVzfHxhO251bGwhPShkPWNbZV0pO2UrKykhYnx8bS5ub2RlTmFtZShkLGIpP2YucHVzaChkKTptLm1lcmdlKGYsdWIoZCxiKSk7cmV0dXJuIHZvaWQgMD09PWJ8fGImJm0ubm9kZU5hbWUoYSxiKT9tLm1lcmdlKFthXSxmKTpmfWZ1bmN0aW9uIHZiKGEpe1cudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIHdiKGEsYil7cmV0dXJuIG0ubm9kZU5hbWUoYSwidGFibGUiKSYmbS5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiB4YihhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bS5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24geWIoYSl7dmFyIGI9cGIuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiB6YihhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW0uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG0uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBBYihhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZtLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW0uX2RhdGEoYSksZz1tLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyltLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW0uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBCYihhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWsubm9DbG9uZUV2ZW50JiZiW20uZXhwYW5kb10pe2U9bS5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyltLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobS5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oeGIoYikudGV4dD1hLnRleHQseWIoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGsuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFtLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmVy50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOigiaW5wdXQiPT09Y3x8InRleHRhcmVhIj09PWMpJiYoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfX1tLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1tLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihrLmh0bWw1Q2xvbmV8fG0uaXNYTUxEb2MoYSl8fCFnYi50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KHRiLmlubmVySFRNTD1hLm91dGVySFRNTCx0Yi5yZW1vdmVDaGlsZChmPXRiLmZpcnN0Q2hpbGQpKSwhKGsubm9DbG9uZUV2ZW50JiZrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxtLmlzWE1MRG9jKGEpKSlmb3IoZD11YihmKSxoPXViKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmQmIoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8dWIoYSksZD1kfHx1YihmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUFiKGUsZFtnXSk7ZWxzZSBBYihhLGYpO3JldHVybiBkPXViKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJnpiKGQsIWkmJnViKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixsLG49YS5sZW5ndGgsbz1kYihiKSxwPVtdLHE9MDtuPnE7cSsrKWlmKGY9YVtxXSxmfHwwPT09ZilpZigib2JqZWN0Ij09PW0udHlwZShmKSltLm1lcmdlKHAsZi5ub2RlVHlwZT9bZl06Zik7ZWxzZSBpZihsYi50ZXN0KGYpKXtoPWh8fG8uYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaT0oamIuZXhlYyhmKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxsPXJiW2ldfHxyYi5fZGVmYXVsdCxoLmlubmVySFRNTD1sWzFdK2YucmVwbGFjZShpYiwiPCQxPjwvJDI+IikrbFsyXSxlPWxbMF07d2hpbGUoZS0tKWg9aC5sYXN0Q2hpbGQ7aWYoIWsubGVhZGluZ1doaXRlc3BhY2UmJmhiLnRlc3QoZikmJnAucHVzaChiLmNyZWF0ZVRleHROb2RlKGhiLmV4ZWMoZilbMF0pKSwhay50Ym9keSl7Zj0idGFibGUiIT09aXx8a2IudGVzdChmKT8iPHRhYmxlPiIhPT1sWzFdfHxrYi50ZXN0KGYpPzA6aDpoLmZpcnN0Q2hpbGQsZT1mJiZmLmNoaWxkTm9kZXMubGVuZ3RoO3doaWxlKGUtLSltLm5vZGVOYW1lKGo9Zi5jaGlsZE5vZGVzW2VdLCJ0Ym9keSIpJiYhai5jaGlsZE5vZGVzLmxlbmd0aCYmZi5yZW1vdmVDaGlsZChqKX1tLm1lcmdlKHAsaC5jaGlsZE5vZGVzKSxoLnRleHRDb250ZW50PSIiO3doaWxlKGguZmlyc3RDaGlsZCloLnJlbW92ZUNoaWxkKGguZmlyc3RDaGlsZCk7aD1vLmxhc3RDaGlsZH1lbHNlIHAucHVzaChiLmNyZWF0ZVRleHROb2RlKGYpKTtoJiZvLnJlbW92ZUNoaWxkKGgpLGsuYXBwZW5kQ2hlY2tlZHx8bS5ncmVwKHViKHAsImlucHV0IiksdmIpLHE9MDt3aGlsZShmPXBbcSsrXSlpZigoIWR8fC0xPT09bS5pbkFycmF5KGYsZCkpJiYoZz1tLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxoPXViKG8uYXBwZW5kQ2hpbGQoZiksInNjcmlwdCIpLGcmJnpiKGgpLGMpKXtlPTA7d2hpbGUoZj1oW2UrK10pb2IudGVzdChmLnR5cGV8fCIiKSYmYy5wdXNoKGYpfXJldHVybiBoPW51bGwsb30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkLGUsZixnLGg9MCxpPW0uZXhwYW5kbyxqPW0uY2FjaGUsbD1rLmRlbGV0ZUV4cGFuZG8sbj1tLmV2ZW50LnNwZWNpYWw7bnVsbCE9KGQ9YVtoXSk7aCsrKWlmKChifHxtLmFjY2VwdERhdGEoZCkpJiYoZj1kW2ldLGc9ZiYmaltmXSkpe2lmKGcuZXZlbnRzKWZvcihlIGluIGcuZXZlbnRzKW5bZV0/bS5ldmVudC5yZW1vdmUoZCxlKTptLnJlbW92ZUV2ZW50KGQsZSxnLmhhbmRsZSk7altmXSYmKGRlbGV0ZSBqW2ZdLGw/ZGVsZXRlIGRbaV06dHlwZW9mIGQucmVtb3ZlQXR0cmlidXRlIT09Sz9kLnJlbW92ZUF0dHJpYnV0ZShpKTpkW2ldPW51bGwsYy5wdXNoKGYpKX19fSksbS5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9tLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHx5KS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj13Yih0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPXdiKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9tLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bS5jbGVhbkRhdGEodWIoYykpLGMucGFyZW50Tm9kZSYmKGImJm0uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZ6Yih1YihjLCJzY3JpcHQiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm0uY2xlYW5EYXRhKHViKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbS5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbS5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UoZmIsIiIpOnZvaWQgMDtpZighKCJzdHJpbmciIT10eXBlb2YgYXx8bWIudGVzdChhKXx8IWsuaHRtbFNlcmlhbGl6ZSYmZ2IudGVzdChhKXx8IWsubGVhZGluZ1doaXRlc3BhY2UmJmhiLnRlc3QoYSl8fHJiWyhqYi5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpe2E9YS5yZXBsYWNlKGliLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihtLmNsZWFuRGF0YSh1YihiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbS5jbGVhbkRhdGEodWIodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG49dGhpcyxvPWwtMSxwPWFbMF0scT1tLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiYic3RyaW5nIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJm5iLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1uLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoaT1tLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksYz1pLmZpcnN0Q2hpbGQsMT09PWkuY2hpbGROb2Rlcy5sZW5ndGgmJihpPWMpLGMpKXtmb3IoZz1tLm1hcCh1YihpLCJzY3JpcHQiKSx4YiksZj1nLmxlbmd0aDtsPmo7aisrKWQ9aSxqIT09byYmKGQ9bS5jbG9uZShkLCEwLCEwKSxmJiZtLm1lcmdlKGcsdWIoZCwic2NyaXB0IikpKSxiLmNhbGwodGhpc1tqXSxkLGopO2lmKGYpZm9yKGg9Z1tnLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG0ubWFwKGcseWIpLGo9MDtmPmo7aisrKWQ9Z1tqXSxvYi50ZXN0KGQudHlwZXx8IiIpJiYhbS5fZGF0YShkLCJnbG9iYWxFdmFsIikmJm0uY29udGFpbnMoaCxkKSYmKGQuc3JjP20uX2V2YWxVcmwmJm0uX2V2YWxVcmwoZC5zcmMpOm0uZ2xvYmFsRXZhbCgoZC50ZXh0fHxkLnRleHRDb250ZW50fHxkLmlubmVySFRNTHx8IiIpLnJlcGxhY2UocWIsIiIpKSk7aT1jPW51bGx9cmV0dXJuIHRoaXN9fSksbS5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oYSxiKXttLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPTAsZT1bXSxnPW0oYSksaD1nLmxlbmd0aC0xO2g+PWQ7ZCsrKWM9ZD09PWg/dGhpczp0aGlzLmNsb25lKCEwKSxtKGdbZF0pW2JdKGMpLGYuYXBwbHkoZSxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIENiLERiPXt9O2Z1bmN0aW9uIEViKGIsYyl7dmFyIGQsZT1tKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTptLmNzcyhlWzBdLCJkaXNwbGF5Iik7cmV0dXJuIGUuZGV0YWNoKCksZn1mdW5jdGlvbiBGYihhKXt2YXIgYj15LGM9RGJbYV07cmV0dXJuIGN8fChjPUViKGEsYiksIm5vbmUiIT09YyYmY3x8KENiPShDYnx8bSgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj0oQ2JbMF0uY29udGVudFdpbmRvd3x8Q2JbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9RWIoYSxiKSxDYi5kZXRhY2goKSksRGJbYV09YyksY30hZnVuY3Rpb24oKXt2YXIgYTtrLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxkO3JldHVybiBjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksZD15LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksdHlwZW9mIGIuc3R5bGUuem9vbSE9PUsmJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChkKSxhKTp2b2lkIDB9fSgpO3ZhciBHYj0vXm1hcmdpbi8sSGI9bmV3IFJlZ0V4cCgiXigiK1MrIikoPyFweClbYS16JV0rJCIsImkiKSxJYixKYixLYj0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhJYj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSxudWxsKX0sSmI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxJYihhKSxnPWM/Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdOnZvaWQgMCxjJiYoIiIhPT1nfHxtLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bS5zdHlsZShhLGIpKSxIYi50ZXN0KGcpJiZHYi50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDA9PT1nP2c6ZysiIn0pOnkuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSYmKEliPWZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX0sSmI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxJYihhKSxnPWM/Y1tiXTp2b2lkIDAsbnVsbD09ZyYmaCYmaFtiXSYmKGc9aFtiXSksSGIudGVzdChnKSYmIUtiLnRlc3QoYikmJihkPWgubGVmdCxlPWEucnVudGltZVN0eWxlLGY9ZSYmZS5sZWZ0LGYmJihlLmxlZnQ9YS5jdXJyZW50U3R5bGUubGVmdCksaC5sZWZ0PSJmb250U2l6ZSI9PT1iPyIxZW0iOmcsZz1oLnBpeGVsTGVmdCsicHgiLGgubGVmdD1kLGYmJihlLmxlZnQ9ZikpLHZvaWQgMD09PWc/ZzpnKyIifHwiYXV0byJ9KTtmdW5jdGlvbiBMYihhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXt2YXIgYz1hKCk7aWYobnVsbCE9YylyZXR1cm4gYz92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkLGUsZixnLGg7aWYoYj15LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGIuaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iLGQ9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdLGM9ZCYmZC5zdHlsZSl7Yy5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGsub3BhY2l0eT0iMC41Ij09PWMub3BhY2l0eSxrLmNzc0Zsb2F0PSEhYy5jc3NGbG9hdCxiLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsYi5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGsuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1iLnN0eWxlLmJhY2tncm91bmRDbGlwLGsuYm94U2l6aW5nPSIiPT09Yy5ib3hTaXppbmd8fCIiPT09Yy5Nb3pCb3hTaXppbmd8fCIiPT09Yy5XZWJraXRCb3hTaXppbmcsbS5leHRlbmQoayx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWcmJmkoKSxnfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1mJiZpKCksZn0scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1lJiZpKCksZX0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1oJiZpKCksaH19KTtmdW5jdGlvbiBpKCl7dmFyIGIsYyxkLGk7Yz15LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9eS5jcmVhdGVFbGVtZW50KCJkaXYiKSxkPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksZC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChkKS5hcHBlbmRDaGlsZChiKSxiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIixlPWY9ITEsaD0hMCxhLmdldENvbXB1dGVkU3R5bGUmJihlPSIxJSIhPT0oYS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt9KS50b3AsZj0iNHB4Ij09PShhLmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e3dpZHRoOiI0cHgifSkud2lkdGgsaT1iLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudCgiZGl2IikpLGkuc3R5bGUuY3NzVGV4dD1iLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsaS5zdHlsZS5tYXJnaW5SaWdodD1pLnN0eWxlLndpZHRoPSIwIixiLnN0eWxlLndpZHRoPSIxcHgiLGg9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkubWFyZ2luUmlnaHQpKSxiLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsaT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGlbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZz0wPT09aVswXS5vZmZzZXRIZWlnaHQsZyYmKGlbMF0uc3R5bGUuZGlzcGxheT0iIixpWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGc9MD09PWlbMF0ub2Zmc2V0SGVpZ2h0KSxjLnJlbW92ZUNoaWxkKGQpKX19fSgpLG0uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIE1iPS9hbHBoYVwoW14pXSpcKS9pLE5iPS9vcGFjaXR5XHMqPVxzKihbXildKikvLE9iPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxQYj1uZXcgUmVnRXhwKCJeKCIrUysiKSguKikkIiwiaSIpLFFiPW5ldyBSZWdFeHAoIl4oWystXSk9KCIrUysiKSIsImkiKSxSYj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sU2I9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LFRiPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gVWIoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9Yi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9YixlPVRiLmxlbmd0aDt3aGlsZShlLS0paWYoYj1UYltlXStjLGIgaW4gYSlyZXR1cm4gYjtyZXR1cm4gZH1mdW5jdGlvbiBWYihhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1tLl9kYXRhKGQsIm9sZGRpc3BsYXkiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHwibm9uZSIhPT1jfHwoZC5zdHlsZS5kaXNwbGF5PSIiKSwiIj09PWQuc3R5bGUuZGlzcGxheSYmVShkKSYmKGZbZ109bS5fZGF0YShkLCJvbGRkaXNwbGF5IixGYihkLm5vZGVOYW1lKSkpKTooZT1VKGQpLChjJiYibm9uZSIhPT1jfHwhZSkmJm0uX2RhdGEoZCwib2xkZGlzcGxheSIsZT9jOm0uY3NzKGQsImRpc3BsYXkiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiYibm9uZSIhPT1kLnN0eWxlLmRpc3BsYXkmJiIiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkPVBiLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fCJweCIpOmJ9ZnVuY3Rpb24gWGIoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKSJtYXJnaW4iPT09YyYmKGcrPW0uY3NzKGEsYytUW2ZdLCEwLGUpKSxkPygiY29udGVudCI9PT1jJiYoZy09bS5jc3MoYSwicGFkZGluZyIrVFtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09bS5jc3MoYSwiYm9yZGVyIitUW2ZdKyJXaWR0aCIsITAsZSkpKTooZys9bS5jc3MoYSwicGFkZGluZyIrVFtmXSwhMCxlKSwicGFkZGluZyIhPT1jJiYoZys9bS5jc3MoYSwiYm9yZGVyIitUW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBZYihhLGIsYyl7dmFyIGQ9ITAsZT0id2lkdGgiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9SWIoYSksZz1rLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bS5jc3MoYSwiYm94U2l6aW5nIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPUpiKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksSGIudGVzdChlKSlyZXR1cm4gZTtkPWcmJihrLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrWGIoYSxiLGN8fChnPyJib3JkZXIiOiJjb250ZW50IiksZCxmKSsicHgifW0uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9SmIoYSwib3BhY2l0eSIpO3JldHVybiIiPT09Yz8iMSI6Y319fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjprLmNzc0Zsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW0uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtpZihiPW0uY3NzUHJvcHNbaF18fChtLmNzc1Byb3BzW2hdPVViKGksaCkpLGc9bS5jc3NIb29rc1tiXXx8bS5jc3NIb29rc1toXSx2b2lkIDA9PT1jKXJldHVybiBnJiYiZ2V0ImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTtpZihmPXR5cGVvZiBjLCJzdHJpbmciPT09ZiYmKGU9UWIuZXhlYyhjKSkmJihjPShlWzFdKzEpKmVbMl0rcGFyc2VGbG9hdChtLmNzcyhhLGIpKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiIT09Znx8bS5jc3NOdW1iZXJbaF18fChjKz0icHgiKSxrLmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1jfHwwIT09Yi5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChpW2JdPSJpbmhlcml0IiksIShnJiYic2V0ImluIGcmJnZvaWQgMD09PShjPWcuc2V0KGEsYyxkKSkpKSl0cnl7aVtiXT1jfWNhdGNoKGope319fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bS5jYW1lbENhc2UoYik7cmV0dXJuIGI9bS5jc3NQcm9wc1toXXx8KG0uY3NzUHJvcHNbaF09VWIoYS5zdHlsZSxoKSksZz1tLmNzc0hvb2tzW2JdfHxtLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGY9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZiYmKGY9SmIoYSxiLGQpKSwibm9ybWFsIj09PWYmJmIgaW4gU2ImJihmPVNiW2JdKSwiIj09PWN8fGM/KGU9cGFyc2VGbG9hdChmKSxjPT09ITB8fG0uaXNOdW1lcmljKGUpP2V8fDA6Zik6Zn19KSxtLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz9PYi50ZXN0KG0uY3NzKGEsImRpc3BsYXkiKSkmJjA9PT1hLm9mZnNldFdpZHRoP20uc3dhcChhLFJiLGZ1bmN0aW9uKCl7cmV0dXJuIFliKGEsYixkKX0pOlliKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmSWIoYSk7cmV0dXJuIFdiKGEsYyxkP1hiKGEsYixkLGsuYm94U2l6aW5nJiYiYm9yZGVyLWJveCI9PT1tLmNzcyhhLCJib3hTaXppbmciLCExLGUpLGUpOjApfX19KSxrLm9wYWNpdHl8fChtLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiBOYi50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHwiIik/LjAxKnBhcnNlRmxvYXQoUmVnRXhwLiQxKSsiIjpiPyIxIjoiIn0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHlsZSxkPWEuY3VycmVudFN0eWxlLGU9bS5pc051bWVyaWMoYik/ImFscGhhKG9wYWNpdHk9IisxMDAqYisiKSI6IiIsZj1kJiZkLmZpbHRlcnx8Yy5maWx0ZXJ8fCIiO2Muem9vbT0xLChiPj0xfHwiIj09PWIpJiYiIj09PW0udHJpbShmLnJlcGxhY2UoTWIsIiIpKSYmYy5yZW1vdmVBdHRyaWJ1dGUmJihjLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIiksIiI9PT1ifHxkJiYhZC5maWx0ZXIpfHwoYy5maWx0ZXI9TWIudGVzdChmKT9mLnJlcGxhY2UoTWIsZSk6ZisiICIrZSl9fSksbS5jc3NIb29rcy5tYXJnaW5SaWdodD1MYihrLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9tLnN3YXAoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sSmIsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG0uZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPSJzdHJpbmciPT10eXBlb2YgYz9jLnNwbGl0KCIgIik6W2NdOzQ+ZDtkKyspZVthK1RbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sR2IudGVzdChhKXx8KG0uY3NzSG9va3NbYStiXS5zZXQ9V2IpfSksbS5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobS5pc0FycmF5KGIpKXtmb3IoZD1JYihhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1tLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bS5zdHlsZShhLGIsYyk6bS5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gVmIodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gVmIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7VSh0aGlzKT9tKHRoaXMpLnNob3coKTptKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIFpiKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBaYi5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW0uVHdlZW49WmIsWmIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpaYixpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHwic3dpbmciLHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobS5jc3NOdW1iZXJbY10/IiI6InB4IikKfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1aYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6WmIucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9WmIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPWI9dGhpcy5vcHRpb25zLmR1cmF0aW9uP20uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6WmIucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sWmIucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVpiLnByb3RvdHlwZSxaYi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW0uY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKTphLmVsZW1bYS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGEpe20uZnguc3RlcFthLnByb3BdP20uZnguc3RlcFthLnByb3BdKGEpOmEuZWxlbS5zdHlsZSYmKG51bGwhPWEuZWxlbS5zdHlsZVttLmNzc1Byb3BzW2EucHJvcF1dfHxtLmNzc0hvb2tzW2EucHJvcF0pP20uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpOmEuZWxlbVthLnByb3BdPWEubm93fX19LFpiLnByb3BIb29rcy5zY3JvbGxUb3A9WmIucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbS5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfX0sbS5meD1aYi5wcm90b3R5cGUuaW5pdCxtLmZ4LnN0ZXA9e307dmFyICRiLF9iLGFjPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxiYz1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrUysiKShbYS16JV0qKSQiLCJpIiksY2M9L3F1ZXVlSG9va3MkLyxkYz1baWNdLGVjPXsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPWJjLmV4ZWMoYiksZj1lJiZlWzNdfHwobS5jc3NOdW1iZXJbYV0/IiI6InB4IiksZz0obS5jc3NOdW1iZXJbYV18fCJweCIhPT1mJiYrZCkmJmJjLmV4ZWMobS5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fCIuNSIsZy89aCxtLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBmYygpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGI9dm9pZCAwfSksJGI9bS5ub3coKX1mdW5jdGlvbiBnYyhhLGIpe3ZhciBjLGQ9e2hlaWdodDphfSxlPTA7Zm9yKGI9Yj8xOjA7ND5lO2UrPTItYiljPVRbZV0sZFsibWFyZ2luIitjXT1kWyJwYWRkaW5nIitjXT1hO3JldHVybiBiJiYoZC5vcGFjaXR5PWQud2lkdGg9YSksZH1mdW5jdGlvbiBoYyhhLGIsYyl7Zm9yKHZhciBkLGU9KGVjW2JdfHxbXSkuY29uY2F0KGVjWyIqIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIGljKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixsLG49dGhpcyxvPXt9LHA9YS5zdHlsZSxxPWEubm9kZVR5cGUmJlUoYSkscj1tLl9kYXRhKGEsImZ4c2hvdyIpO2MucXVldWV8fChoPW0uX3F1ZXVlSG9va3MoYSwiZngiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxuLmFsd2F5cyhmdW5jdGlvbigpe24uYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG0ucXVldWUoYSwiZngiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJigiaGVpZ2h0ImluIGJ8fCJ3aWR0aCJpbiBiKSYmKGMub3ZlcmZsb3c9W3Aub3ZlcmZsb3cscC5vdmVyZmxvd1gscC5vdmVyZmxvd1ldLGo9bS5jc3MoYSwiZGlzcGxheSIpLGw9Im5vbmUiPT09aj9tLl9kYXRhKGEsIm9sZGRpc3BsYXkiKXx8RmIoYS5ub2RlTmFtZSk6aiwiaW5saW5lIj09PWwmJiJub25lIj09PW0uY3NzKGEsImZsb2F0IikmJihrLmlubGluZUJsb2NrTmVlZHNMYXlvdXQmJiJpbmxpbmUiIT09RmIoYS5ub2RlTmFtZSk/cC56b29tPTE6cC5kaXNwbGF5PSJpbmxpbmUtYmxvY2siKSksYy5vdmVyZmxvdyYmKHAub3ZlcmZsb3c9ImhpZGRlbiIsay5zaHJpbmtXcmFwQmxvY2tzKCl8fG4uYWx3YXlzKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxhYy5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHE/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFyfHx2b2lkIDA9PT1yW2RdKWNvbnRpbnVlO3E9ITB9b1tkXT1yJiZyW2RdfHxtLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihtLmlzRW1wdHlPYmplY3QobykpImlubGluZSI9PT0oIm5vbmUiPT09aj9GYihhLm5vZGVOYW1lKTpqKSYmKHAuZGlzcGxheT1qKTtlbHNle3I/ImhpZGRlbiJpbiByJiYocT1yLmhpZGRlbik6cj1tLl9kYXRhKGEsImZ4c2hvdyIse30pLGYmJihyLmhpZGRlbj0hcSkscT9tKGEpLnNob3coKTpuLmRvbmUoZnVuY3Rpb24oKXttKGEpLmhpZGUoKX0pLG4uZG9uZShmdW5jdGlvbigpe3ZhciBiO20uX3JlbW92ZURhdGEoYSwiZnhzaG93Iik7Zm9yKGIgaW4gbyltLnN0eWxlKGEsYixvW2JdKX0pO2ZvcihkIGluIG8pZz1oYyhxP3JbZF06MCxkLG4pLGQgaW4gcnx8KHJbZF09Zy5zdGFydCxxJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PSJ3aWR0aCI9PT1kfHwiaGVpZ2h0Ij09PWQ/MTowKSl9fWZ1bmN0aW9uIGpjKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9bS5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxtLmlzQXJyYXkoZikmJihlPWZbMV0sZj1hW2NdPWZbMF0pLGMhPT1kJiYoYVtkXT1mLGRlbGV0ZSBhW2NdKSxnPW0uY3NzSG9va3NbZF0sZyYmImV4cGFuZCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24ga2MoYSxiLGMpe3ZhciBkLGUsZj0wLGc9ZGMubGVuZ3RoLGg9bS5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9JGJ8fGZjKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm0uZXh0ZW5kKHt9LGIpLG9wdHM6bS5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTokYnx8ZmMoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW0uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKGpjKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1kY1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG0ubWFwKGssaGMsaiksbS5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbS5meC50aW1lcihtLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1tLkFuaW1hdGlvbj1tLmV4dGVuZChrYyx7dHdlZW5lcjpmdW5jdGlvbihhLGIpe20uaXNGdW5jdGlvbihhKT8oYj1hLGE9WyIqIl0pOmE9YS5zcGxpdCgiICIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWM9YVtkXSxlY1tjXT1lY1tjXXx8W10sZWNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9kYy51bnNoaWZ0KGEpOmRjLnB1c2goYSl9fSksbS5zcGVlZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSYmIm9iamVjdCI9PXR5cGVvZiBhP20uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bS5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFtLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW0uZngub2ZmPzA6Im51bWJlciI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBtLmZ4LnNwZWVkcz9tLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTptLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9ImZ4IiksZC5vbGQ9ZC5jb21wbGV0ZSxkLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bS5pc0Z1bmN0aW9uKGQub2xkKSYmZC5vbGQuY2FsbCh0aGlzKSxkLnF1ZXVlJiZtLmRlcXVldWUodGhpcyxkLnF1ZXVlKX0sZH0sbS5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoVSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bS5pc0VtcHR5T2JqZWN0KGEpLGY9bS5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtjKHRoaXMsbS5leHRlbmQoe30sYSksZik7KGV8fG0uX2RhdGEodGhpcywiZmluaXNoIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYSsicXVldWVIb29rcyIsZj1tLnRpbWVycyxnPW0uX2RhdGEodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmY2MudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZtLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1tLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1tLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbS5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxtLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bS5mbltiXTttLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoZ2MoYiwhMCksYSxkLGUpfX0pLG0uZWFjaCh7c2xpZGVEb3duOmdjKCJzaG93Iiksc2xpZGVVcDpnYygiaGlkZSIpLHNsaWRlVG9nZ2xlOmdjKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bS5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxtLnRpbWVycz1bXSxtLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW0udGltZXJzLGM9MDtmb3IoJGI9bS5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxtLmZ4LnN0b3AoKSwkYj12b2lkIDB9LG0uZngudGltZXI9ZnVuY3Rpb24oYSl7bS50aW1lcnMucHVzaChhKSxhKCk/bS5meC5zdGFydCgpOm0udGltZXJzLnBvcCgpfSxtLmZ4LmludGVydmFsPTEzLG0uZnguc3RhcnQ9ZnVuY3Rpb24oKXtfYnx8KF9iPXNldEludGVydmFsKG0uZngudGljayxtLmZ4LmludGVydmFsKSl9LG0uZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoX2IpLF9iPW51bGx9LG0uZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LG0uZm4uZGVsYXk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1tLmZ4P20uZnguc3BlZWRzW2FdfHxhOmEsYj1ifHwiZngiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZTtiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksYi5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixkPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxjPXkuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksZT1jLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpLGE9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXSxkLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGsuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWIuY2xhc3NOYW1lLGsuc3R5bGU9L3RvcC8udGVzdChkLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksay5ocmVmTm9ybWFsaXplZD0iL2EiPT09ZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSxrLmNoZWNrT249ISFhLnZhbHVlLGsub3B0U2VsZWN0ZWQ9ZS5zZWxlY3RlZCxrLmVuY3R5cGU9ISF5LmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGMuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hZS5kaXNhYmxlZCxhPXkuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxrLmlucHV0PSIiPT09YS5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYS52YWx1ZT0idCIsYS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGsucmFkaW9WYWx1ZT0idCI9PT1hLnZhbHVlfSgpO3ZhciBsYz0vXHIvZzttLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bS5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG0odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPSIiOiJudW1iZXIiPT10eXBlb2YgZT9lKz0iIjptLmlzQXJyYXkoZSkmJihlPW0ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPW0udmFsSG9va3NbdGhpcy50eXBlXXx8bS52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW0udmFsSG9va3NbZS50eXBlXXx8bS52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UobGMsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLG0uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bS5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOm0udHJpbShtLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZD1hLm9wdGlvbnMsZT1hLnNlbGVjdGVkSW5kZXgsZj0ic2VsZWN0LW9uZSI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZtLm5vZGVOYW1lKGMucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKGI9bShjKS52YWwoKSxmKXJldHVybiBiO2cucHVzaChiKX1yZXR1cm4gZ30sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPW0ubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWlmKGQ9ZVtnXSxtLmluQXJyYXkobS52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPj0wKXRyeXtkLnNlbGVjdGVkPWM9ITB9Y2F0Y2goaCl7ZC5zY3JvbGxIZWlnaHR9ZWxzZSBkLnNlbGVjdGVkPSExO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxlfX19fSksbS5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7bS52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uaXNBcnJheShiKT9hLmNoZWNrZWQ9bS5pbkFycmF5KG0oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobS52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pO3ZhciBtYyxuYyxvYz1tLmV4cHIuYXR0ckhhbmRsZSxwYz0vXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLHFjPWsuZ2V0U2V0QXR0cmlidXRlLHJjPWsuaW5wdXQ7bS5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxtLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09Sz9tLnByb3AoYSxiLGMpOigxPT09ZiYmbS5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bS5hdHRySG9va3NbYl18fChtLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP25jOm1jKSksdm9pZCAwPT09Yz9kJiYiZ2V0ImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW0uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmInNldCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6dm9pZCBtLnJlbW92ZUF0dHIoYSxiKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1tLnByb3BGaXhbY118fGMsbS5leHByLm1hdGNoLmJvb2wudGVzdChjKT9yYyYmcWN8fCFwYy50ZXN0KGMpP2FbZF09ITE6YVttLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK2MpXT1hW2RdPSExOm0uYXR0cihhLGMsIiIpLGEucmVtb3ZlQXR0cmlidXRlKHFjP2M6ZCl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJm0ubm9kZU5hbWUoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksbmM9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9tLnJlbW92ZUF0dHIoYSxjKTpyYyYmcWN8fCFwYy50ZXN0KGMpP2Euc2V0QXR0cmlidXRlKCFxYyYmbS5wcm9wRml4W2NdfHxjLGMpOmFbbS5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtjXT0hMCxjfX0sbS5lYWNoKG0uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9b2NbYl18fG0uZmluZC5hdHRyO29jW2JdPXJjJiZxY3x8IXBjLnRlc3QoYik/ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPW9jW2JdLG9jW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCxvY1tiXT1mKSxlfTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmFbbS5jYW1lbENhc2UoImRlZmF1bHQtIitiKV0/Yi50b0xvd2VyQ2FzZSgpOm51bGx9fSkscmMmJnFjfHwobS5hdHRySG9va3MudmFsdWU9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0ubm9kZU5hbWUoYSwiaW5wdXQiKT92b2lkKGEuZGVmYXVsdFZhbHVlPWIpOm1jJiZtYy5zZXQoYSxiLGMpfX0pLHFjfHwobWM9e3NldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGMpO3JldHVybiBkfHxhLnNldEF0dHJpYnV0ZU5vZGUoZD1hLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKGMpKSxkLnZhbHVlPWIrPSIiLCJ2YWx1ZSI9PT1jfHxiPT09YS5nZXRBdHRyaWJ1dGUoYyk/Yjp2b2lkIDB9fSxvYy5pZD1vYy5uYW1lPW9jLmNvb3Jkcz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJiIiIT09ZC52YWx1ZT9kLnZhbHVlOm51bGx9LG0udmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZU5vZGUoYik7cmV0dXJuIGMmJmMuc3BlY2lmaWVkP2MudmFsdWU6dm9pZCAwfSxzZXQ6bWMuc2V0fSxtLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e3NldDpmdW5jdGlvbihhLGIsYyl7bWMuc2V0KGEsIiI9PT1iPyExOmIsYyl9fSxtLmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGEsYil7bS5hdHRySG9va3NbYl09e3NldDpmdW5jdGlvbihhLGMpe3JldHVybiIiPT09Yz8oYS5zZXRBdHRyaWJ1dGUoYiwiYXV0byIpLGMpOnZvaWQgMH19fSkpLGsuc3R5bGV8fChtLmF0dHJIb29rcy5zdHlsZT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0eWxlLmNzc1RleHR8fHZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3R5bGUuY3NzVGV4dD1iKyIifX0pO3ZhciBzYz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSx0Yz0vXig/OmF8YXJlYSkkL2k7bS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gYT1tLnByb3BGaXhbYV18fGEsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3RoaXNbYV09dm9pZCAwLGRlbGV0ZSB0aGlzW2FdfWNhdGNoKGIpe319KX19KSxtLmV4dGVuZCh7cHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW0uaXNYTUxEb2MoYSksZiYmKGI9bS5wcm9wRml4W2JdfHxiLGU9bS5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJiJnZXQiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW0uZmluZC5hdHRyKGEsInRhYmluZGV4Iik7cmV0dXJuIGI/cGFyc2VJbnQoYiwxMCk6c2MudGVzdChhLm5vZGVOYW1lKXx8dGMudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6LTF9fX19KSxrLmhyZWZOb3JtYWxpemVkfHxtLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXttLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxrLm9wdFNlbGVjdGVkfHwobS5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSxtLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe20ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSxrLmVuY3R5cGV8fChtLnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmciKTt2YXIgdWM9L1tcdFxyXG5cZl0vZzttLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MCxpPXRoaXMubGVuZ3RoLGo9InN0cmluZyI9PXR5cGVvZiBhJiZhO2lmKG0uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe20odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoailmb3IoYj0oYXx8IiIpLm1hdGNoKEUpfHxbXTtpPmg7aCsrKWlmKGM9dGhpc1toXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KCIgIitjLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UodWMsIiAiKToiICIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKCIgIitlKyIgIik8MCYmKGQrPWUrIiAiKTtnPW0udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MCxpPXRoaXMubGVuZ3RoLGo9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgYSYmYTtpZihtLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXttKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGopZm9yKGI9KGF8fCIiKS5tYXRjaChFKXx8W107aT5oO2grKylpZihjPXRoaXNbaF0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPygiICIrYy5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHVjLCIgIik6IiIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKCIgIitlKyIgIik+PTApZD1kLnJlcGxhY2UoIiAiK2UrIiAiLCIgIik7Zz1hP20udHJpbShkKToiIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXttKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoInN0cmluZyI9PT1jKXt2YXIgYixkPTAsZT1tKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09S3x8ImJvb2xlYW4iPT09YykmJih0aGlzLmNsYXNzTmFtZSYmbS5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT8iIjptLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iICIrYSsiICIsYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jO2MrKylpZigxPT09dGhpc1tjXS5ub2RlVHlwZSYmKCIgIit0aGlzW2NdLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UodWMsIiAiKS5pbmRleE9mKGIpPj0wKXJldHVybiEwO3JldHVybiExfX0pLG0uZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe20uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG0uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSwiKioiKTp0aGlzLm9mZihiLGF8fCIqKiIsYyl9fSk7dmFyIHZjPW0ubm93KCksd2M9L1w/Lyx4Yz0vKCwpfChcW3x7KXwofXxdKXwiKD86W14iXFxcclxuXXxcXFsiXFxcL2JmbnJ0XXxcXHVbXGRhLWZBLUZdezR9KSoiXHMqOj98dHJ1ZXxmYWxzZXxudWxsfC0/KD8hMFxkKVxkKyg/OlwuXGQrfCkoPzpbZUVdWystXT9cZCt8KS9nO20ucGFyc2VKU09OPWZ1bmN0aW9uKGIpe2lmKGEuSlNPTiYmYS5KU09OLnBhcnNlKXJldHVybiBhLkpTT04ucGFyc2UoYisiIik7dmFyIGMsZD1udWxsLGU9bS50cmltKGIrIiIpO3JldHVybiBlJiYhbS50cmltKGUucmVwbGFjZSh4YyxmdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gYyYmYiYmKGQ9MCksMD09PWQ/YTooYz1lfHxiLGQrPSFmLSFlLCIiKX0pKT9GdW5jdGlvbigicmV0dXJuICIrZSkoKTptLmVycm9yKCJJbnZhbGlkIEpTT046ICIrYil9LG0ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGMsZDtpZighYnx8InN0cmluZyIhPXR5cGVvZiBiKXJldHVybiBudWxsO3RyeXthLkRPTVBhcnNlcj8oZD1uZXcgRE9NUGFyc2VyLGM9ZC5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKSk6KGM9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bS5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIHljLHpjLEFjPS8jLiokLyxCYz0vKFs/Jl0pXz1bXiZdKi8sQ2M9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxEYz0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxFYz0vXig/OkdFVHxIRUFEKSQvLEZjPS9eXC9cLy8sR2M9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sSGM9e30sSWM9e30sSmM9IiovIi5jb25jYXQoIioiKTt0cnl7emM9bG9jYXRpb24uaHJlZn1jYXRjaChLYyl7emM9eS5jcmVhdGVFbGVtZW50KCJhIiksemMuaHJlZj0iIix6Yz16Yy5ocmVmfXljPUdjLmV4ZWMoemMudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIExjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihtLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gTWMoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09SWM7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxtLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBOYyhhLGIpe3ZhciBjLGQsZT1tLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZtLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gT2MoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gUGMoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1tLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6emMsdHlwZToiR0VUIixpc0xvY2FsOkRjLnRlc3QoeWNbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6SmMsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjptLnBhcnNlSlNPTiwidGV4dCB4bWwiOm0ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP05jKE5jKGEsbS5hamF4U2V0dGluZ3MpLGIpOk5jKG0uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOkxjKEhjKSxhamF4VHJhbnNwb3J0OkxjKEljKSxhamF4OmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1tLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxuPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9tKGwpOm0uZXZlbnQsbz1tLkRlZmVycmVkKCkscD1tLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PSJjYW5jZWxlZCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighail7aj17fTt3aGlsZShiPUNjLmV4ZWMoZikpaltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1qW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZjpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gaSYmaS5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fHpjKSsiIikucmVwbGFjZShBYywiIikucmVwbGFjZShGYyx5Y1sxXSsiLy8iKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1tLnRyaW0oay5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbIiJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihjPUdjLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFjfHxjWzFdPT09eWNbMV0mJmNbMl09PT15Y1syXSYmKGNbM118fCgiaHR0cDoiPT09Y1sxXT8iODAiOiI0NDMiKSk9PT0oeWNbM118fCgiaHR0cDoiPT09eWNbMV0/IjgwIjoiNDQzIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1tLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSksTWMoSGMsayxiLHYpLDI9PT10KXJldHVybiB2O2g9ay5nbG9iYWwsaCYmMD09PW0uYWN0aXZlKysmJm0uZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0hRWMudGVzdChrLnR5cGUpLGU9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZT1rLnVybCs9KHdjLnRlc3QoZSk/IiYiOiI/Iikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPUJjLnRlc3QoZSk/ZS5yZXBsYWNlKEJjLCIkMV89Iit2YysrKTplKyh3Yy50ZXN0KGUpPyImIjoiPyIpKyJfPSIrdmMrKykpLGsuaWZNb2RpZmllZCYmKG0ubGFzdE1vZGlmaWVkW2VdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixtLmxhc3RNb2RpZmllZFtlXSksbS5ldGFnW2VdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLG0uZXRhZ1tlXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKygiKiIhPT1rLmRhdGFUeXBlc1swXT8iLCAiK0pjKyI7IHE9MC4wMSI6IiIpOmsuYWNjZXB0c1siKiJdKTtmb3IoZCBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGQsay5oZWFkZXJzW2RdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT0iYWJvcnQiO2ZvcihkIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbZF0oa1tkXSk7aWYoaT1NYyhJYyxrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGgmJm4udHJpZ2dlcigiYWpheFNlbmQiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoInRpbWVvdXQiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxpLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHgoYSxiLGMsZCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGk9dm9pZCAwLGY9ZHx8IiIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGMmJih1PU9jKGssdixjKSksdT1QYyhrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYobS5sYXN0TW9kaWZpZWRbZV09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKG0uZXRhZ1tlXT13KSksMjA0PT09YXx8IkhFQUQiPT09ay50eXBlP3g9Im5vY29udGVudCI6MzA0PT09YT94PSJub3Rtb2RpZmllZCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9ImVycm9yIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpKyIiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxoJiZuLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGgmJihuLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3Ysa10pLC0tbS5hY3RpdmV8fG0uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG0uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe21bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG0uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG0uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG0uZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGEsYil7bS5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG0uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uYWpheCh7dXJsOmEsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sbS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7aWYobS5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bSh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPW0oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0Q2hpbGQmJjE9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUpYT1hLmZpcnN0Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXttKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bSh0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1tLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXttKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bS5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fG0odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG0uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB8fCFrLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpJiYibm9uZSI9PT0oYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxtLmNzcyhhLCJkaXNwbGF5IikpfSxtLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFtLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciBRYz0vJTIwL2csUmM9L1xbXF0kLyxTYz0vXHI/XG4vZyxUYz0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksVWM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIFZjKGEsYixjLGQpe3ZhciBlO2lmKG0uaXNBcnJheShiKSltLmVhY2goYixmdW5jdGlvbihiLGUpe2N8fFJjLnRlc3QoYSk/ZChhLGUpOlZjKGErIlsiKygib2JqZWN0Ij09dHlwZW9mIGU/YjoiIikrIl0iLGUsYyxkKX0pO2Vsc2UgaWYoY3x8Im9iamVjdCIhPT1tLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilWYyhhKyJbIitlKyJdIixiW2VdLGMsZCl9bS5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bS5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iPyIiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQoYil9O2lmKHZvaWQgMD09PWImJihiPW0uYWpheFNldHRpbmdzJiZtLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksbS5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIW0uaXNQbGFpbk9iamVjdChhKSltLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKVZjKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oIiYiKS5yZXBsYWNlKFFjLCIrIil9LG0uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbS5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW0ucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP20ubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIW0odGhpcykuaXMoIjpkaXNhYmxlZCIpJiZVYy50ZXN0KHRoaXMubm9kZU5hbWUpJiYhVGMudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVcudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1tKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bS5pc0FycmF5KGMpP20ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShTYywiXHJcbiIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoU2MsIlxyXG4iKX19KS5nZXQoKX19KSxtLmFqYXhTZXR0aW5ncy54aHI9dm9pZCAwIT09YS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmWmMoKXx8JGMoKX06WmM7dmFyIFdjPTAsWGM9e30sWWM9bS5hamF4U2V0dGluZ3MueGhyKCk7YS5BY3RpdmVYT2JqZWN0JiZtKGEpLm9uKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIFhjKVhjW2FdKHZvaWQgMCwhMCl9KSxrLmNvcnM9ISFZYyYmIndpdGhDcmVkZW50aWFscyJpbiBZYyxZYz1rLmFqYXg9ISFZYyxZYyYmbS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe2lmKCFhLmNyb3NzRG9tYWlufHxrLmNvcnMpe3ZhciBiO3JldHVybntzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytXYztpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGNbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZSBpbiBjKXZvaWQgMCE9PWNbZV0mJmYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0rIiIpO2Yuc2VuZChhLmhhc0NvbnRlbnQmJmEuZGF0YXx8bnVsbCksYj1mdW5jdGlvbihjLGUpe3ZhciBoLGksajtpZihiJiYoZXx8ND09PWYucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIFhjW2ddLGI9dm9pZCAwLGYub25yZWFkeXN0YXRlY2hhbmdlPW0ubm9vcCxlKTQhPT1mLnJlYWR5U3RhdGUmJmYuYWJvcnQoKTtlbHNle2o9e30saD1mLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0JiYoai50ZXh0PWYucmVzcG9uc2VUZXh0KTt0cnl7aT1mLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1ofHwhYS5pc0xvY2FsfHxhLmNyb3NzRG9tYWluPzEyMjM9PT1oJiYoaD0yMDQpOmg9ai50ZXh0PzIwMDo0MDR9aiYmZChoLGksaixmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYS5hc3luYz80PT09Zi5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYik6Zi5vbnJlYWR5c3RhdGVjaGFuZ2U9WGNbZ109YjpiKCl9LGFib3J0OmZ1bmN0aW9uKCl7YiYmYih2b2lkIDAsITApfX19fSk7ZnVuY3Rpb24gWmMoKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319ZnVuY3Rpb24gJGMoKXt0cnl7cmV0dXJuIG5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2goYil7fX1tLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBtLmdsb2JhbEV2YWwoYSksYX19fSksbS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG0uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPXkuaGVhZHx8bSgiaGVhZCIpWzBdfHx5LmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihkLGUpe2I9eS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxlKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgX2M9W10sYWQ9Lyg9KVw/KD89JnwkKXxcP1w/LzttLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9X2MucG9wKCl8fG0uZXhwYW5kbysiXyIrdmMrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG0uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGFkLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmYWQudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW0uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGFkLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPSh3Yy50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bS5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssX2MucHVzaChlKSksZyYmbS5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbS5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fHk7dmFyIGQ9dS5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW0uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbShlKS5yZW1vdmUoKSxtLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgYmQ9bS5mbi5sb2FkO20uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhJiZiZClyZXR1cm4gYmQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD49MCYmKGQ9bS50cmltKGEuc2xpY2UoaCxhLmxlbmd0aCkpLGE9YS5zbGljZSgwLGgpKSxtLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmIm9iamVjdCI9PXR5cGVvZiBiJiYoZj0iUE9TVCIpLGcubGVuZ3RoPjAmJm0uYWpheCh7dXJsOmEsdHlwZTpmLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2U9YXJndW1lbnRzLGcuaHRtbChkP20oIjxkaXY+IikuYXBwZW5kKG0ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxlfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxtLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbS5ncmVwKG0udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgY2Q9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gZGQoYSl7cmV0dXJuIG0uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1tLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW0uY3NzKGEsInBvc2l0aW9uIiksbD1tKGEpLG49e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1tLmNzcyhhLCJ0b3AiKSxpPW0uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZtLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbS5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG4udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG4ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG4pOmwuY3NzKG4pfX0sbS5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe20ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9e3RvcDowLGxlZnQ6MH0sZT10aGlzWzBdLGY9ZSYmZS5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbS5jb250YWlucyhiLGUpPyh0eXBlb2YgZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1LJiYoZD1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPWRkKGYpLHt0b3A6ZC50b3ArKGMucGFnZVlPZmZzZXR8fGIuc2Nyb2xsVG9wKS0oYi5jbGllbnRUb3B8fDApLGxlZnQ6ZC5sZWZ0KyhjLnBhZ2VYT2Zmc2V0fHxiLnNjcm9sbExlZnQpLShiLmNsaWVudExlZnR8fDApfSk6ZH0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9e3RvcDowLGxlZnQ6MH0sZD10aGlzWzBdO3JldHVybiJmaXhlZCI9PT1tLmNzcyhkLCJwb3NpdGlvbiIpP2I9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxtLm5vZGVOYW1lKGFbMF0sImh0bWwiKXx8KGM9YS5vZmZzZXQoKSksYy50b3ArPW0uY3NzKGFbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksYy5sZWZ0Kz1tLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDpiLnRvcC1jLnRvcC1tLmNzcyhkLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OmIubGVmdC1jLmxlZnQtbS5jc3MoZCwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxjZDt3aGlsZShhJiYhbS5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bS5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxjZH0pfX0pLG0uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO20uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9ZGQoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bShmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bShmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbS5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT1MYihrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1KYihhLGIpLEhiLnRlc3QoYyk/bShhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxtLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe20uZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpiLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24oYyxkKXttLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fCJib29sZWFuIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbS5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbInNjcm9sbCIrYV0sZVsic2Nyb2xsIithXSxiLmJvZHlbIm9mZnNldCIrYV0sZVsib2Zmc2V0IithXSxlWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09ZD9tLmNzcyhiLGMsZyk6bS5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxtLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG0uZm4uYW5kU2VsZj1tLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG19KTt2YXIgZWQ9YS5qUXVlcnksZmQ9YS4kO3JldHVybiBtLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW0mJihhLiQ9ZmQpLGImJmEualF1ZXJ5PT09bSYmKGEualF1ZXJ5PWVkKSxtfSx0eXBlb2YgYj09PUsmJihhLmpRdWVyeT1hLiQ9bSksbX0pOwo="}]},{"name":"AntiAdware","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http*://*180upload.com/*","http*://*4upfiles.com/*","http*://*get*.adobe.com/*flashplayer/*","http*://*get*.adobe.com/*reader/*","http*://*afterdawn.com/software/*","http*://*akafile.com/akago.php","http*://*chip.de/downloads/*","http*://*clicknupload.com/*","http*://*cloudyvideos.com/*","http*://*coolrom.com/*/*","http*://*clipconverter.cc/download/*","http*://*dailyuploads.net/*","http*://*datafilehost.com/d/*","http*://*davvas.com/*","http*://*d-h.st/*","http*://*download.cnet.com/*","http*://*telecharger.cnet.com/*","http*://*descargar.cnet.com/*","http*://*de.download.cnet.com/*","http*://*filefactory.com/file/*","http*://*filescdn.com/*","http*://*filehippo.com/*download*","http*://*freewarefiles.com/downloads_counter.php*","http*://*google.*/earth/download/ge/agree.html","http*://*hugefiles.net/*","http*://*hulkload.com/*","http*://*kingfiles.net/*","http*://*letitbit.net/download/*","http*://*loveroms.com/*","http*://*up.media1fire.com/*","http*://*mightyupload.com/*","http*://*mp3fil.*/get/*","http*://*mp3juices.to/*","http*://*mp3olimp.net/*","http*://*mp3olimpz.com/*","http*://*opensubtitles.org/*/subtitles/*","http*://*revclouds.com/*","http*://*romhustler.net/download/*","http*://*romhustler.net/rom/*","http*://*secureupload.eu/*","http*://*sendspace.com/file/*","http*://*sharebeast.com/*","http*://*shared.com/*","http*://*softm8.com*","http*://*.softonic.*","http*://*sourceforge.net/*","http*://*tusfiles.net/*","http*://*unlimitzone.com/*","http*://*uploading.com/*","http*://*uploadocean.com/*","http*://*uplod.ws/*","http*://*uploads.to/*","http*://*uptobox.com/*","http*://*userscdn.com/*","http*://*ziddu.com/downloadfile/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1555249425677,"data":{}},"enabled":true,"position":10,"file_url":"https://greasyfork.org/scripts/4294-antiadware/code/AntiAdware.user.js","uuid":"914256a8-6b79-426e-a90c-0421a7a5ffe2","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQW50aUFkd2FyZQovLyBAbmFtZTpmciBBbnRpQWR3YXJlCi8vIEBuYW1lOmRlIEFudGlBZHdhcmUKLy8gQG5hbWU6emgtVFcgQW50aUFkd2FyZQovLyBAbmFtZTp6aC1DTiBBbnRpQWR3YXJlCi8vIEBhdXRob3Igbm9uYW1lMTIwCi8vIEBuYW1lc3BhY2UgSGFuZHlVc2Vyc2NyaXB0cwovLyBAaWNvbiBodHRwczovL2kuaW1ndXIuY29tL3RxN1BKcjAucG5nCi8vIEBkZXNjcmlwdGlvbiBSZW1vdmUgZm9yY2VkIGRvd25sb2FkIGFjY2VsZXJhdG9ycywgbWFuYWdlcnMsIGFuZCBhZHdhcmUgb24gc3VwcG9ydGVkIHdlYnNpdGVzCi8vIEBkZXNjcmlwdGlvbjpmciDDiXZpdGV6IGxlcyBhcHBsaWNhdGlvbnMgaW5kw6lzaXJhYmxlcyBsb3JzIGRlcyB0w6lsw6ljaGFyZ2VtZW50cyBzdXIgZGUgbm9tYnJldXggc2l0ZXMgYXZlYyBBbnRpQWR3YXJlICEKLy8gQGRlc2NyaXB0aW9uOmRlIE1pdCBBbnRpQWR3YXJlIHZlcm1laWRlc3QgZHUgYXVmIHphaGxyZWljaGVuIFdlYnNlaXRlbiBkZW4gdmVyc2VoZW50bGljaGVuIERvd25sb2FkIHZvbiB1bmVyd8O8bnNjaHRlbiBQcm9ncmFtbWVuCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyBBbnRpQWR3YXJlLCDorpPkvaDpgb/lhY3lnKjoqLHlpJrntrLnq5nkuIrmhI/lpJbkuIvovInliLDlu6PlkYrou5/pq5QuCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiBBbnRpQWR3YXJlLCDorqnkvaDpgb/lhY3lnKjorrjlpJrnvZHnq5nkuIrmhI/lpJbkuIvovb3liLDlub/lkYrova/kvZMuCi8vIEB2ZXJzaW9uIDEuNDIuMQovLyBAbGljZW5zZSBDcmVhdGl2ZSBDb21tb25zIEJZLU5DLVNBCgovLyBqUXVlcnkgZGVwZW5kZW5jeTsgYW4gb2ZmbGluZSB2ZXJzaW9uIG9mIHRoaXMgaXMgaW5jbHVkZWQgaW4gdGhlIHNjcmlwdCBpbiBjYXNlIGl0IGdvZXMgZG93bgovLyBAcmVxdWlyZSBodHRwOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjAuMy5taW4uanMKCi8vIEBpbmNsdWRlIGh0dHAqOi8vKjE4MHVwbG9hZC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyo0dXBmaWxlcy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypnZXQqLmFkb2JlLmNvbS8qZmxhc2hwbGF5ZXIvKgovLyBAaW5jbHVkZSBodHRwKjovLypnZXQqLmFkb2JlLmNvbS8qcmVhZGVyLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qYWZ0ZXJkYXduLmNvbS9zb2Z0d2FyZS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmFrYWZpbGUuY29tL2FrYWdvLnBocAovLyBAaW5jbHVkZSBodHRwKjovLypjaGlwLmRlL2Rvd25sb2Fkcy8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmNsaWNrbnVwbG9hZC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypjbG91ZHl2aWRlb3MuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qY29vbHJvbS5jb20vKi8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmNsaXBjb252ZXJ0ZXIuY2MvZG93bmxvYWQvKgovLyBAaW5jbHVkZSBodHRwKjovLypkYWlseXVwbG9hZHMubmV0LyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGF0YWZpbGVob3N0LmNvbS9kLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGF2dmFzLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmQtaC5zdC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmRvd25sb2FkLmNuZXQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qdGVsZWNoYXJnZXIuY25ldC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypkZXNjYXJnYXIuY25ldC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypkZS5kb3dubG9hZC5jbmV0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmZpbGVmYWN0b3J5LmNvbS9maWxlLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZmlsZXNjZG4uY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZmlsZWhpcHBvLmNvbS8qZG93bmxvYWQqCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmZyZWV3YXJlZmlsZXMuY29tL2Rvd25sb2Fkc19jb3VudGVyLnBocCoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZ29vZ2xlLiovZWFydGgvZG93bmxvYWQvZ2UvYWdyZWUuaHRtbAovLyBAaW5jbHVkZSBodHRwKjovLypodWdlZmlsZXMubmV0LyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qaHVsa2xvYWQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qa2luZ2ZpbGVzLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmxldGl0Yml0Lm5ldC9kb3dubG9hZC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmxvdmVyb21zLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnVwLm1lZGlhMWZpcmUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qbWlnaHR5dXBsb2FkLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKm1wM2ZpbC4qL2dldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKm1wM2p1aWNlcy50by8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKm1wM29saW1wLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKm1wM29saW1wei5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypvcGVuc3VidGl0bGVzLm9yZy8qL3N1YnRpdGxlcy8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnJldmNsb3Vkcy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypyb21odXN0bGVyLm5ldC9kb3dubG9hZC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnJvbWh1c3RsZXIubmV0L3JvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNlY3VyZXVwbG9hZC5ldS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNlbmRzcGFjZS5jb20vZmlsZS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNoYXJlYmVhc3QuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qc2hhcmVkLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNvZnRtOC5jb20qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKi5zb2Z0b25pYy4qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNvdXJjZWZvcmdlLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnR1c2ZpbGVzLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnVubGltaXR6b25lLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnVwbG9hZGluZy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cGxvYWRvY2Vhbi5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cGxvZC53cy8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnVwbG9hZHMudG8vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cHRvYm94LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnVzZXJzY2RuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnppZGR1LmNvbS9kb3dubG9hZGZpbGUvKgoKLy8gV2UgZG9uJ3QgdXNlIHRoaXMgbWV0aG9kLCBob3dldmVyIGEgc2lkZSBlZmZlY3Qgb2YgaXQgaXMgdGhhdCBpdCByZXN0b3JlcyB0aGUgR3JlYXNlbW9ua2V5IHNhbmRib3gsIGF2b2lkaW5nIGpRdWVyeSBjb25mbGljdHMKLy8gQGdyYW50IEdNX2FkZFN0eWxlCgovLyBAZ3JhbnQgdW5zYWZlV2luZG93CgovLyBAaG9tZXBhZ2VVUkwgaHR0cHM6Ly9naXRodWIuY29tL0hhbmR5VXNlcnNjcmlwdHMvQW50aUFkd2FyZSNyZWFkbWUKLy8gQHN1cHBvcnRVUkwgaHR0cHM6Ly9naXRodWIuY29tL0hhbmR5VXNlcnNjcmlwdHMvQW50aUFkd2FyZS9pc3N1ZXMKCgovLyBAcnVuLWF0IGRvY3VtZW50LXN0YXJ0Ci8vID09L1VzZXJTY3JpcHQ9PQoKdm9pZApmdW5jdGlvbiAoKSB7CiAgICAvLyBJZiB0cnVlLCBkaXNwbGF5cyBsb2cgaW4gdGhlIGNvbnNvbGUKICAgIHZhciBvX2RlYnVnID0gZmFsc2UKCiAgICAvLyBSdWxlcyBpbmZvcm1pbmcgd2hhdCB0byBkbyBvbiBlYWNoIHN1cHBvcnRlZCB3ZWJzaXRlCiAgICB2YXIgYWR3YXJlUnVsZXMgPSB7CiAgICAgICAgYTE4MHVwbG9hZDogewogICAgICAgICAgICBob3N0OiBbJzE4MHVwbG9hZC5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjdXNlX2luc3RhbGxlciddLAogICAgICAgICAgICBoaWRlOiBbJyN1c2VfaW5zdGFsbGVyJywgJ2xhYmVsW2Zvcj11c2VfaW5zdGFsbGVyXSddCiAgICAgICAgfSwKICAgICAgICBhNHVwZmlsZXM6IHsKICAgICAgICAgICAgaG9zdDogWyc0dXBmaWxlcy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjdXNlX2Rvd25sb2FkZXInXSwKICAgICAgICAgICAgaGlkZTogWydsYWJlbFtmb3I9dXNlX2Rvd25sb2FkZXJdJ10KICAgICAgICB9LAogICAgICAgIEFkb2JlOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZ2V0XFxkPy5hZG9iZS5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjb2ZmZXJDaGVja2JveCcsJyNvZmZlckNoZWNrYm94MScsJyNvZmZlckNoZWNrYm94MicsJyNvZmZlckNoZWNrYm94MycsJyNvZmZlckNoZWNrYm94NCddLAogICAgICAgICAgICBoaWRlOiBbJy5Db250ZW50Q29sdW1uLkNvbnRlbnRDb2x1bW4tMiddCiAgICAgICAgfSwKICAgICAgICBBZnRlcmRhd246IHsKICAgICAgICAgICAgaG9zdDogWydhZnRlcmRhd24uY29tJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgcGFnZSBkaXJlY3RseSBhY2Nlc3NlZCBmcm9tIGFub3RoZXIgd2Vic2l0ZQogICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYuY29udGFpbnMoJ2luc3RhbGxlcj0xJykpIHsKICAgICAgICAgICAgICAgICAgICAvLyBSZWRpcmVjdCB0byB0aGUgcGFnZSB3aXRob3V0IHRoZSBkb3dubG9hZCBtYW5hZ2VyCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZShkb2N1bWVudC5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoJ2luc3RhbGxlcj0xJywgJ2luc3RhbGxlcj0wJykpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU29mdHdhcmUgcGFnZQogICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1pbnN0YWxsZXJdJykucHJvcCgndmFsdWUnLCAnMCcpCiAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRCdXR0b24gPSAkKCcjZG93bmxvYWQtbWFpbi1idXR0b24nKQogICAgICAgICAgICAgICAgdmFyIGFkd2FyZUxpbmsgPSBkb3dubG9hZEJ1dHRvbi5wcm9wKCdocmVmJykKICAgICAgICAgICAgICAgIGFkd2FyZUxpbmsgPSBhZHdhcmVMaW5rLnJlcGxhY2UoJ2luc3RhbGxlcj0xJywgJ2luc3RhbGxlcj0wJykKICAgICAgICAgICAgICAgIGRvd25sb2FkQnV0dG9uLnByb3AoJ2hyZWYnLCBhZHdhcmVMaW5rKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBBa2FmaWxlOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnYWthZmlsZS5jb20nXSwKICAgICAgICAgICAgLy8gRmluZCB0aGUgcmVhbCBkb3dubG9hZCBsaW5rIGluIHRoZSBjb21tZW50cyBzZWN0aW9uIGFuZCByZXBsYWNlIHRoZSBmYWtlIG9uZSB3aXRoIHRoaXMgKGlmIHRoZSBmYWtlIGlzIG5vdCBhIHZhbGlkIGxpbmspCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIElmIHRoZSBsaW5rIGlzIGFscmVhZHkgYSB2YWxpZCBvbmUgd2UgZG9uJ3QgcmVwbGFjZSBpdAogICAgICAgICAgICAgICAgdmFyIHRlc3RIb3N0ID0gbmV3IFJlZ0V4cCgiYWlrLndvbGZ1cC5uZXQiLCAnaScpCiAgICAgICAgICAgICAgICBpZiAodGVzdEhvc3QudGVzdCgkKCIjZG93bmxvYWQxIikuYXR0cigiaHJlZiIpKSkgcmV0dXJuCiAgICAgICAgICAgICAgICAvLyBHZXQgY29tbWVudCBzZWN0aW9uIGFuZCBlbnVtZXJhdGUgZWFjaCBlbGVtZW50IGhhdmluZyB0aGUgcmlnaHQgaWQsIGNoZWNrIGlmIGl0J3MgYSBwcm9wZXIgZG93bmxvYWQgbGluawogICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRzID0gJCgnI2NvbnRpbnVlJykuY29tbWVudHMoKS5jaGlsZHJlbignI2Rvd25sb2FkMScpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0SG9zdC50ZXN0KCQodGhpcykuYXR0cigiaHJlZiIpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCIjZG93bmxvYWQxIikuYXR0cigiaHJlZiIsICQodGhpcykuYXR0cigiaHJlZiIpKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgQ2hpcDogewogICAgICAgICAgICBob3N0OiBbJ2NoaXAuZGUnXSwKICAgICAgICAgICAgaGlkZTogWycuZG93bmxvYWRfYnV0dG9uJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGRsID0gJCgnLk1hbnVhbEluc3RhbGxMaW5rJykucHJvcCgnaHJlZicpCiAgICAgICAgICAgICAgICB2YXIgYnRuID0gJCgnLmRsLWJ0bi1kZWZhdWx0IC5Eb3dubG9hZC1CdXR0b24nKQoKICAgICAgICAgICAgICAgIGJ0bi5wcm9wKCdocmVmJywgZGwpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIENsaWNrbnVwbG9hZDogewogICAgICAgICAgICBob3N0OiBbJ2NsaWNrbnVwbG9hZC5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZF9hY2NfY2hlY2tib3gnXSwKICAgICAgICAgICAgaGlkZTogWycjd19kb3dubG9hZCcsICcjZF9hY2MnXQogICAgICAgIH0sCiAgICAgICAgQ2xpcENvbnZlcnRlcjogewogICAgICAgIAlob3N0OiBbJ2NsaXBjb252ZXJ0ZXIuY2MnXSwKICAgICAgICAJdW5jaGVjazogWycjZGxjcCddLAogICAgICAgIAloaWRlOiBbJ2RpdltzdHlsZT0id2lkdGg6IDM0MHB4O21hcmdpbi1sZWZ0OiAyNXB4O21hcmdpbi10b3A6IDdweDsiXSddCiAgICAgICAgfSwKICAgICAgICBDbG91ZHlWaWRlb3M6IHsKICAgICAgICAgICAgaG9zdDogWydjbG91ZHl2aWRlb3MuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZS1tYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI2Rvd25sb2FkLWJveCA+IGxhYmVsJ10KICAgICAgICB9LAogICAgICAgIENvb2xyb206IHsKICAgICAgICAgICAgaG9zdDogWydjb29scm9tLmNvbSddLAogICAgICAgICAgICBoaWRlOiBbJ3RhYmxlW2FsaWduPSJjZW50ZXIiXVt3aWR0aD0iMzAwIl0nXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkQnV0dG9uID0gJCgnaW1nW3NyYyo9ImRvd25sb2FkX2xhcmdlLnBuZyJdJykucGFyZW50KCdhJykKICAgICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkSWQgPSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpWzNdCgogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRvd25sb2FkQnV0dG9uICE9ICd1bmRlZmluZWQnICYmIGRvd25sb2FkSWQubWF0Y2goL15cZCskLykpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCByaWQgb2YgYWxsIGV2ZW50cyBvbiB0aGUgYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3QnV0dG9uID0gZG93bmxvYWRCdXR0b24uY2xvbmUoKQogICAgICAgICAgICAgICAgICAgICAgbmV3QnV0dG9uLnByb3AoJ2hyZWYnLCAnL2RscG9wLnBocD9pZD0nICsgZG93bmxvYWRJZCkKICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkQnV0dG9uLnJlcGxhY2VXaXRoKG5ld0J1dHRvbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIERhaWx5VXBsb2FkczogewogICAgICAgICAgICBob3N0OiBbJ2RhaWx5dXBsb2Fkcy5uZXQnXSwKICAgICAgICAgICAgaGlkZTogWydsYWJlbFtzdHlsZT0iZm9udC1zaXplOngtc21hbGwiXSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjaGtJc0FkZCddCiAgICAgICAgfSwKICAgICAgICBEYXRhZmlsZWhvc3Q6IHsKICAgICAgICAgICAgaG9zdDogWydkYXRhZmlsZWhvc3QuY29tJ10sCiAgICAgICAgICAgIGhpZGU6IFsnZm9ybVtuYW1lPWNiZl0nXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgaWQgPSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvXlwvZFwvKFx3KykkLylbMV0KICAgICAgICAgICAgICAgIC8vIERhdGFGaWxlSG9zdCBkb2Vzbid0IGFsbG93IHRvIGRvd25sb2FkIHVzaW5nIEhUVFBTCiAgICAgICAgICAgICAgICB2YXIgYWR3YXJlbGVzc0xpbmsgPSAnaHR0cDonICsgJy8vJyArIGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lICsgJy9nZXQucGhwP2ZpbGU9JyArIGlkCgogICAgICAgICAgICAgICAgdmFyIG4gPSAkKCcjZGwgPiBhJykuY2xvbmUoKQoKICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGFkd2FyZSBsaW5rCiAgICAgICAgICAgICAgICBuLnByb3AoJ2hyZWYnLCBhZHdhcmVsZXNzTGluaykKCiAgICAgICAgICAgICAgICAvLyBBdm9pZCByZWRpcmVjdGlvbiB0byBhZHdhcmUKICAgICAgICAgICAgICAgICQoJyNkbCcpLnJlcGxhY2VXaXRoKG4pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBEYXZ2YXM6IHsKICAgICAgICAgICAgaG9zdDogWydkYXZ2YXMuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2NobGluayddLAogICAgICAgICAgICBoaWRlOiBbJ2xhYmVsW2Zvcj1jaGxpbmtdJywgJyNjaGxpbmsnXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgYnRuID0gJCgnI2J0bl9kb3dubG9hZCcpCiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0cyhidG4pKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBidG4ucmVtb3ZlQXR0cignb25jbGljaycpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIERldkhvc3Q6IHsKICAgICAgICAgICAgaG9zdDogWydkLWguc3QnXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZG0tY2hlY2snXSwKICAgICAgICAgICAgaGlkZTogWycjZG93bmxvYWRtYW5hZ2VyJywnYTpoYXMoPmltZ1tzcmMqPSIvYXNzZXRzL2ltZy9kb3dubG9hZDEucG5nIl0pJywgJyNkb3dubG9hZGZpbGUyJ10sCiAgICAgICAgfSwKICAgICAgICBEb3dubG9hZDogewogICAgICAgICAgICBob3N0OiBbJ2Rvd25sb2FkLmNuZXQuY29tJywndGVsZWNoYXJnZXIuY25ldC5jb20nLCdkZXNjYXJnYXIuY25ldC5jb20nXSwKICAgICAgICAgICAgaGlkZTogWycuZGxuLXN1Yi1tZXNzYWdlJywnI3RpdGxlLWRldGFpbC1kb3dubG9hZC1ub3ctYnV0dG9uLWRsbS1ub3RpY2UtaWNvbicsJy5kb3dubG9hZC1ub3cuZGlyZWN0LWRvd25sb2FkLWJ1dHRvbi1kbG4nXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyAtLT4gVGhpcyBpcyBmb3IgcHJvZ3JhbSBwYWdlcwogICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgcmVhbCBkb3dubG9hZCBsaW5rCiAgICAgICAgICAgICAgICB2YXIgYWR3YXJlbGVzc0xpbmsgPSAkKCcuZG93bmxvYWQtbm93JykuYXR0cignZGF0YS1ub2RsbS11cmwnKQogICAgICAgICAgICAgICAgLy8gSWYgd2Ugc3VjY2Vzc2Z1bGx5IGZvdW5kIGl0CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFkd2FyZWxlc3NMaW5rICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmVwbGFjZSB0aGUgYWR3YXJlLWVuYWJsZWQgbGluayB3aXRoIHRoZSBhZHdhcmVsZXNzIGxpbmsKICAgICAgICAgICAgICAgICAgICB2YXIgYnRuID0gJCgiYS5kbG4tYTpoYXMoJy5kbG4tY3RhJykiKQogICAgICAgICAgICAgICAgICAgIGJ0bi5wcm9wKCdocmVmJywgYWR3YXJlbGVzc0xpbmspCiAgICAgICAgICAgICAgICAgICAgYnRuLmF0dHIoJ2RhdGEtaHJlZicsIGFkd2FyZWxlc3NMaW5rKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIC0tPiBUaGlzIGlzIGZvciBzZWFyY2ggbGlzdHMKICAgICAgICAgICAgICAgIC8vIENoZWNrIGVhY2ggZG93bmxvYWQgYnV0dG9uIGZyb20gdGhlIGxpc3QKICAgICAgICAgICAgICAgICQoJy5kb3dubG9hZC1ub3cubGlzdGluZy1idXR0b24tZGxuJykuZWFjaCgKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihjdXJySW5kZXgsIGN1cnJET01FbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyRWxlbWVudCA9ICQoY3VyckRPTUVsZW1lbnQpCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGRpcmVjdCBkb3dubG9hZCBsaW5rCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyRGlyZWN0RGxMaW5rID0gY3VyckVsZW1lbnQuYXR0cignZGF0YS1ub2RsbS11cmwnKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgY291bGRuJ3QgZmluZCB0aGUgZGlyZWN0IGRvd25sb2FkIGxpbmssIHdlIGFiYW5kb24KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyRGlyZWN0RGxMaW5rID09ICd1bmRlZmluZWQnKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgZG93bmxvYWQgbGluayB3aXRoIHRoZSBkaXJlY3QsIGRvd25sb2FkIG1hbmFnZXItbGVzcyBsaW5rCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJFbGVtZW50LmNoaWxkcmVuKCcuZGxuLWEnKS5wcm9wKCdocmVmJywgY3VyckRpcmVjdERsTGluaykKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvbWVob3cgdGhpcyBjbGFzcyBwcmV2ZW50cyB0aGUgZG93bmxvYWQgZnJvbSBsYXVuY2hpbmcgcHJvcGVybHkgKGF0IGxlYXN0IG9uIEZpcmVmb3gpCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJFbGVtZW50LnJlbW92ZUNsYXNzKCdkb3dubG9hZC1ub3cnKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIEZpbGVmYWN0b3J5OiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZmlsZWZhY3RvcnkuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Rvd25sb2FkX21hbmFnZXIgPiBpbnB1dDpjaGVja2JveCddLAogICAgICAgICAgICBoaWRlOiBbJyNkb3dubG9hZF9tYW5hZ2VyJ10KICAgICAgICB9LAogICAgICAgIEZpbGVzQ0ROOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZmlsZXNjZG4uY29tJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgJCgnI2J0bl9kb3dubG9hZCcpLnByb3AoJ29uY2xpY2snLCBudWxsKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBGcmVld2FyZWZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZnJlZXdhcmVmaWxlcy5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydzcGFuLnNtYWxsbGlua3M6Y29udGFpbnMoImRvd25sb2FkIG1hbmFnZXIiKSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RMaW5rID0gJCgnYS5kd25sb2NhdGlvbnMnKS5wcm9wKCdocmVmJykKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGlyZWN0TGluayA9PSAndW5kZWZpbmVkJykge3JldHVybn0KCiAgICAgICAgICAgICAgICAkKCd0ZFt3aWR0aD0zMzBdW2FsaWduPWxlZnRdID4gYScpLnByb3AoJ2hyZWYnLCBkaXJlY3RMaW5rKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBHb29nbGVFYXJ0aDogewogICAgICAgIAlob3N0OiBbJ2dvb2dsZS4nXSwKICAgICAgICAJdW5jaGVjazogWycjZGwtYWdyZWUtY2hyb21lJywnI2RsLWFncmVlLWNocm9tZS1kZWZhdWx0J10sCiAgICAgICAgCWhpZGU6IFsnI2RsLWNocm9tZS1wcm9tbyddCiAgICAgICAgfSwKICAgICAgICBIdWdlZmlsZXM6IHsKICAgICAgICAgICAgaG9zdDogWydodWdlZmlsZXMubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RhcCcsJyN1c2VfZG93bmxvYWRlciddLAogICAgICAgICAgICBoaWRlOiBbInNwYW46Y29udGFpbnMoJ3VzaW5nIGRvd25sb2FkIGFjY2VsZXJhdG9yJykiLCAnI2RhcCcsICcjdXNlX2Rvd25sb2FkZXInLCAnaW1nW3NyYz0iaHR0cDovL2h1Z2VmaWxlcy5uZXQvYnV0dG9uLnBuZyJdJ10KICAgICAgICB9LAogICAgICAgIEh1bGtsb2FkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnaHVsa2xvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3NwbnNyZGxkJywgJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbCiAgICAgICAgICAgIAkiZm9ybTpjb250YWlucygnZG93bmxvYWQgVGhlIEZSRUUgZG93bmxvYWQgYWNjZWxlcmF0b3InKSIsJyNzcG5zcmRsZCcsJyNkb3dubG9hZC10aWNrJywKICAgICAgICAgICAgCSdpbWdbc3JjXj0iaHR0cDovL2h1bGtsb2FkLmNvbS9pbWFnZXMvZGxkIl0nLCAvLyBGYWtlIGRvd25sb2FkIGJ1dHRvbgogICAgICAgICAgICAJJ2Rpdi5hbGVydFtvbmNsaWNrPSJnb3RvKCkiXScsIC8vIEZha2Ugc3BvbnNvcmVkIGxpbmtzCiAgICAgICAgICAgIAknZGl2W3N0eWxlKj0iaGVpZ2h0OiA5MHB4OyBib3JkZXI6IDNweCBzb2xpZCByZ2IoMjA1LCAyNDAsIDI0NikiXScgLy8gRmFrZSBkb3dubG9hZCBiYW5uZXIgKGxpdmVyc2VseSkKICAgICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgS2luZ2ZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsna2luZ2ZpbGVzLm5ldCddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjbWxpX2Rvd25sb2FkZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdGVzdDEnXSwKICAgICAgICAgICAgLy8gQXZvaWRzIGEgcG9wdXAgd2hlbiB1bmNoZWNraW5nIHRoZSBjaGVja2JveAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICQoJyNjbWxpX2Rvd25sb2FkZXInKS5wcm9wKCdvbmNsaWNrJywgbnVsbCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgTGV0aXRiaXQ6IHsKICAgICAgICAgICAgaG9zdDogWydsZXRpdGJpdC5uZXQnXSwKICAgICAgICAgICAgdW5jaGVjazogWycjc2t5bW9ua19jaGVja2JveCddLAogICAgICAgICAgICBoaWRlOiBbJyNza3ltb25rX2NoZWNrYm94JywgJ2xhYmVsW2Zvcj1za3ltb25rX2NoZWNrYm94XSddCiAgICAgICAgfSwKICAgICAgICBMb3ZlUm9tczogewogICAgICAgICAgICBob3N0OiBbJ2xvdmVyb21zLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNkb3dubG9hZFdpdGhNYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRvd25sb2FkLWxhYmVsJ10KICAgICAgICB9LAogICAgICAgIFVwTWVkaWExZmlyZTogewogICAgICAgICAgICBob3N0OiBbJ3VwLm1lZGlhMWZpcmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZS1tYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI2Rvd25sb2FkLWJveCcsICcjc3BvbnNvcjInLCAnZGl2LmNvbnRlbnRvciA+IGNlbnRlcicsICcuYWxlcnQyJywgJ2ltZ1tzcmNePSJodHRwOi8vdXAubWVkaWExZmlyZS5jb20vbmIvUmVjX2IiXSddCiAgICAgICAgfSwKICAgICAgICBNaWdodHl1cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWydtaWdodHl1cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9pbnN0YWxsZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdXNlX2luc3RhbGxlcicsICdsYWJlbFtmb3I9dXNlX2luc3RhbGxlcl0nLCcjbG5rX2Rvd25sb2FkIH4gYnInXQogICAgICAgIH0sCiAgICAgICAgTXAzZmlsOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnbXAzZmlsXC4nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjY2hlY2sgPiBpbnB1dDpjaGVja2JveFtuYW1lPWNoZWNrXSddLAogICAgICAgICAgICBoaWRlOiBbJyNjaGVjayddCiAgICAgICAgfSwKICAgICAgICBNcDNqdWljZXM6IHsKICAgICAgICAgICAgaG9zdDogWydtcDNqdWljZXMudG8nXSwKICAgICAgICAgICAgdW5jaGVjazogWydpbnB1dDpjaGVja2JveFtuYW1lPWRsX21hbmFnZXJdJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRsX21hbmFnZXIsLmNbc3R5bGU9ImhlaWdodDo4MHB4Il0nXQogICAgICAgIH0sCiAgICAgICAgTXAzb2xpbXA6IHsKICAgICAgICAJaG9zdDogWydtcDNvbGltcC5uZXR8bXAzb2xpbXB6LmNvbSddLAogICAgICAgIAl1bmNoZWNrOiBbJyNkb3dubG9hZC1tYW5hZ2VyLWNoZWNrYm94J10sCiAgICAgICAgCWhpZGU6IFsnI2Rvd25sb2FkLW1hbmFnZXInXQogICAgICAgIH0sCiAgICAgICAgT3BlbnN1YnRpdGxlczogewogICAgICAgICAgICBob3N0OiBbJ29wZW5zdWJ0aXRsZXMub3JnJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2NiRG93bmxvYWRlciddLAogICAgICAgICAgICBvcHR1bmNoZWNrOiB7CiAgICAgICAgICAgICAgICAvLyBOZXZlciBzdG9wIHRvIHRyeSB1bmNoZWNraW5nIHRoZSBjaGVja2JveAogICAgICAgICAgICAgICAgY29uc3RhbnRjaGVjazogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBoaWRlOiBbJyNjYkRvd25sb2FkZXInLCcjbGItZHdsJ10sCiAgICAgICAgICAgIG9wdGhpZGU6IHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIHN0b3AgdG8gdHJ5IGhpZGluZyB0aGUgb2JqZWN0CiAgICAgICAgICAgICAgICBjb25zdGFudGNoZWNrOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIEZpbGVoaXBwbzogewogICAgICAgICAgICBob3N0OiBbJ2ZpbGVoaXBwby5jb20nXSwKICAgICAgICAgICAgLy8gV2lsbCBkbyBub3RoaW5nIG9uIHBhZ2VzIHdpdGhvdXQgYSBkb3dubG9hZCBtYW5hZ2VyCiAgICAgICAgICAgIGhpZGU6IFsnI3Byb2dyYW0taGVhZGVyLWRvd25sb2FkLWxpbmstZG0tdGV4dCcsICcjZGlyZWN0LWRvd25sb2FkLWxpbmstY29udGFpbmVyJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGFkd09iaiA9ICQoJy5wcm9ncmFtLWhlYWRlci1kb3dubG9hZC1saW5rLmRvd25sb2FkLW1hbmFnZXItZW5hYmxlZCcpCiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgP2RpcmVjdCBhdCB0aGUgZW5kIG9mIHRoZSBVUkwgc28gdGhhdCBpdCBkb2Vzbid0IHByb3ZpZGUgdGhlIGRvd25sb2FkIG1hbmFnZXIKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RVcmwgPSBhZHdPYmouYXR0cignaHJlZicpICsgJz9kaXJlY3QnCgogICAgICAgICAgICAgICAgYWR3T2JqLmF0dHIoJ2hyZWYnLCBkaXJlY3RVcmwpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFJldkNsb3VkczogewogICAgICAgICAgICBob3N0OiBbJ3JldmNsb3Vkcy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjdGljay1kd24nXSwKICAgICAgICAgICAgaGlkZTogWycudGljay1ib3gnXQogICAgICAgIH0sCiAgICAgICAgUm9taHVzdGxlcjogewogICAgICAgICAgICBob3N0OiBbJ3JvbWh1c3RsZXIubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9hY2NlbGVyYXRvciddLAogICAgICAgICAgICBoaWRlOiBbJy5hY2NlbGVyYXRvciddCiAgICAgICAgfSwKICAgICAgICBTZWN1cmV1cGxvYWQ6IHsKICAgICAgICAJaG9zdDogWydzZWN1cmV1cGxvYWQuZXUnXSwKICAgICAgICAJdW5jaGVjazogWydmb3JtW25hbWU9ZGxtYW5hZ2VyXSA+IGlucHV0OmNoZWNrYm94J10sCiAgICAgICAgCW9wdHVuY2hlY2s6IHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIHN0b3AgdG8gdHJ5IHVuY2hlY2tpbmcgdGhlIGNoZWNrYm94CiAgICAgICAgICAgICAgICBjb25zdGFudGNoZWNrOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgCWhpZGU6IFsnZm9ybVtuYW1lPWRsbWFuYWdlcl0nLCAnaW1nW3NyYz0iaHR0cHM6Ly93d3cuc2VjdXJldXBsb2FkLmV1L2dmeC9kbGJ0bi5wbmciXScsICdpbWdbc3JjPSJodHRwczovL3d3dy5zZWN1cmV1cGxvYWQuZXUvZ2Z4L2ZyZWVkbC5wbmciXSddLAogICAgICAgIAlvcHRoaWRlOiB7CiAgICAgICAgICAgICAgICAvLyBOZXZlciBzdG9wIHRvIHRyeSBoaWRpbmcgdGhlIG9iamVjdAogICAgICAgICAgICAgICAgY29uc3RhbnRjaGVjazogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTZW5kc3BhY2U6IHsKICAgICAgICAgICAgaG9zdDogWydzZW5kc3BhY2UuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3F1aWNrY2hrJ10sCiAgICAgICAgICAgIGhpZGU6IFsiZm9ybSA+IGRpdjpjb250YWlucygnd2l0aCBzZW5kc3BhY2UgYWNjZWxlcmF0b3InKSIsJyNxdWlja2NoayddCiAgICAgICAgfSwKICAgICAgICBTaGFyZWJlYXN0OiB7CiAgICAgICAgICAgIGhvc3Q6IFsnc2hhcmViZWFzdC5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjc2hhcmViZWFzdF9kb3dubG9hZGVyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI3NoYXJlYmVhc3RfZG93bmxvYWRlcl9jb250YWluZXInXQogICAgICAgIH0sCiAgICAgICAgU2hhcmVkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnc2hhcmVkLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbJyN3ZWJwaWNrLW9wdGlvbiddCiAgICAgICAgfSwKICAgICAgICBTb2Z0TTg6IHsKICAgICAgICAgICAgaG9zdDogWycuc29mdG04LmNvbSddLAogICAgICAgICAgICBoaWRlOiBbJyNkaW5mbzJbc3R5bGU9ImNsZWFyOmJvdGg7Il0nXSwgLy8gQmxhaCBibGFoIGFib3V0IEFkd2FyZQogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBidXRNYXRjaCA9ICcuYnV0dG9uRG93bmxvYWQuZGJ0bmRsJwogICAgICAgICAgICAgICAgdmFyIGRsQnV0ID0gJChidXRNYXRjaCkKCiAgICAgICAgICAgICAgICAvLyBUYWtlIHRoZSBsYXN0IHBhcnQgb2YgdGhlIHBhdGggb2YgdGhlIFVSTAogICAgICAgICAgICAgICAgdmFyIGV4ZU5hbWUgPSBkbEJ1dC5wcm9wKCdocmVmJykuc3BsaXQoJy8nKS5wb3AoKQoKICAgICAgICAgICAgICAgIC8vIEZvdW5kIGluIHRoZSBhZHdhcmUgaW5zdGFsbGF0aW9uIGV4ZWN1dGFibGUKICAgICAgICAgICAgICAgIHZhciBub0FkTG5rID0gJ2h0dHA6Ly9oLnNvZnRtOC5jb20vJyArIGV4ZU5hbWUKCiAgICAgICAgICAgICAgICAvLyBDYW4gYmUgbXVsdGlwbGUgYnV0dG9ucwogICAgICAgICAgICAgICAgZGxCdXQucHJvcCgnaHJlZicsIG5vQWRMbmspCiAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuJChidXRNYXRjaCkub2ZmKCdjbGljaycpIC8vIFByZXZlbnRzIHRoZSBkb3dubG9hZCBmcm9tIGxhdW5jaGluZyBwcm9wZXJseQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTb2Z0b25pYzogewogICAgICAgICAgICBob3N0OiBbJy5zb2Z0b25pYy4nXSwKICAgICAgICAgICAgaGlkZTogWydoMjpjb250YWlucygiU29mdG9uaWMgRG93bmxvYWRlciIpIH4gdWwnLCdoMjpjb250YWlucygiU29mdG9uaWMgRG93bmxvYWRlciIpLCAuYm94LWRvd25sb2FkLWZvb3RlciddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBsaW5rRm9sbG93ID0gJCgnI2Rvd25sb2FkX2FsdGVybmF0aXZlID4gcCA+IGFbcmVsPW5vZm9sbG93XScpCiAgICAgICAgICAgICAgICBpZiAoZXhpc3RzKGxpbmtGb2xsb3cpKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZShsaW5rRm9sbG93LnByb3AoJ2hyZWYnKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgbWFuYWdlckJ1dHRvbiA9ICQoJyNkb3dubG9hZC1idXR0b24tc2QsICNkb3dubG9hZC1idXR0b24nKQogICAgICAgICAgICAgICAgdmFyIGRpcmVjdEJ1dHRvbiA9ICQoJyNkb3dubG9hZC1idXR0b24tYWx0ZXJuYXRpdmUnKQogICAgICAgICAgICAgICAgaWYgKCFleGlzdHMobWFuYWdlckJ1dHRvbikgfHwgIWV4aXN0cyhkaXJlY3RCdXR0b24pKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RMaW5rID0gZGlyZWN0QnV0dG9uLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIGpRdWVyeSBjbGljayByZWRpcmVjdGlvbiBzZXQgb24gdGhlIGRvd25sb2FkIGJ1dHRvbgogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7dW5zYWZlV2luZG93LiQoJyNkb3dubG9hZC1idXR0b24tc2QsICNkb3dubG9hZC1idXR0b24nKS5vZmYoJ2NsaWNrJyl9LCAxMDApCgogICAgICAgICAgICAgICAgbWFuYWdlckJ1dHRvbi5wcm9wKCdocmVmJywgZGlyZWN0TGluaykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgU291cmNlZm9yZ2U6IHsKICAgICAgICAgICAgaG9zdDogWydzb3VyY2Vmb3JnZS5uZXQnXSwKICAgICAgICAgICAgaGlkZTogWycuZGlyZWN0LWRsJywgJy5pbmZvLWNpcmNsZScsICcuYnRuLWRkbC10b2dnbGUnXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIAkvLyBIb3RmaXg6IGlmIHRoZSB1c2VyIGlzIG9uIGFuIGFkd2FyZS1idW5kbGVkIGRvd25sb2FkIHBhZ2UKICAgICAgICAgICAgCWlmIChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5jb250YWlucygnL2Rvd25sb2FkJykgJiYgIWRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5jb250YWlucygnbm93cmFwJykpIHsKICAgICAgICAgICAgCQkvLyBBZGQgdGhlIGFyZ3VtZW50IGFzIGZpcnN0IGFyZ3VtZW50ICg/KSBvciBzZWNvbmRhcnkgYXJndW1lbnQgKCYpCiAgICAgICAgICAgIAkJdmFyIHByZWZpeCA9IGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5jb250YWlucygnPycpPyAnJicgOiAnPyc7CiAgICAgICAgICAgIAkJZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID0gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoICsgcHJlZml4ICsgJ25vd3JhcCc7CiAgICAgICAgICAgIAl9CgogICAgICAgICAgICAJdHJ5IHsKCSAgICAgICAgICAgIAkvLyBTZWVuIGluIGJyb3dzaW5nIGZpbGVzIHBhZ2VzCgkgICAgICAgICAgICAJdmFyIHRvZ2dsZUJ0biA9ICQoJ2EuYnRuLWRkbC10b2dnbGUnKTsKCSAgICAgICAgICAgIAkvLyBJbiBjYXNlIHRoZSB0ZXh0IGNvbnRhaW5zIHRoZSBwYXR0ZXJuIHRlbGxpbmcgdG8gdGhlIHVzZXIgdGhhdCBhZHdhcmUgaXMgZW5hYmxlZAoJICAgICAgICAgICAgCWlmIChleGlzdHModG9nZ2xlQnRuKSAmJiB0b2dnbGVCdG4uaHRtbCgpLmNvbnRhaW5zKHRvZ2dsZUJ0bi5hdHRyKCdkYXRhLWNvbnRlbnQtbm93cmFwJykpKSB7CgkgICAgICAgICAgICAJCS8vIFdlIGRpc2FibGUgaXQKCSAgICAgICAgICAgIAkJdW5zYWZlV2luZG93LiQoJ2EuYnRuLWRkbC10b2dnbGUnKS5jbGljaygpOwoJICAgICAgICAgICAgCX0KCSAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICAgICAgICAJLy8gLS0+IFRoaXMgaXMgZm9yIHByb2dyYW0gcGFnZXMKICAgICAgICAgICAgCS8vIFRyeSB0byBnZXQgdGhlIHJlYWwgbGluawogICAgICAgICAgICAJdmFyIHJlYWxMaW5rID0gJCgnLmRpcmVjdC1kbCcpLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgCS8vIElmIHdlIGZvdW5kIHRoZSBkaXJlY3QgZG93bmxvYWQgbGluaywgdGhlbiBpdCBtZWFucyB0aGlzIGRvd25sb2FkIGlzIGJ1bmRsZWQgd2l0aCBhIHBpZWNlIG9mIGFkd2FyZQogICAgICAgICAgICAJaWYgKHR5cGVvZiByZWFsTGluayAhPSAndW5kZWZpbmVkJykgewoJICAgICAgICAgICAgCS8vIFJlcGxhY2UgdGhlIGRvd25sb2FkIGxpbmsgd2l0aCB0aGUgcmVhbCBvbmUKCSAgICAgICAgICAgIAkkKCcjZG93bmxvYWRfYnV0dG9uID4gLnNmZGwnKS5wcm9wKCdocmVmJywgcmVhbExpbmspCgoJICAgICAgICAgICAgCS8vIE5vdyB3ZSdyZSB0cnlpbmcgdG8gY2hhbmdlIHRoZSAiSW5zdGFsbGVyIEVuYWJsZWQiIHRleHQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZmlsZQoJICAgICAgICAgICAgCXZhciBjb250YWluc0ZpbGVOYW1lID0gJCgnLnNmZGwnKS5hdHRyKCdvbGR0aXRsZScpCgkgICAgICAgICAgICAJdmFyIGV4dHJhY3RGaWxlTmFtZSA9IC9cLyg/IS4qXC8pKFteIF0rKS8KCgkgICAgICAgICAgICAJdmFyIGZpbGVOYW1lID0gZXh0cmFjdEZpbGVOYW1lLmV4ZWMoY29udGFpbnNGaWxlTmFtZSkKCgkgICAgICAgICAgICAJJCgic21hbGw6Y29udGFpbnMoJ0luc3RhbGxlciBFbmFibGVkJykiKS5odG1sKGZpbGVOYW1lWzFdKQoJICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIC0tPiBUaGlzIGlzIGZvciB0aGUgbWFpbiBwYWdlIGFuZCBzZWFyY2hlcwogICAgICAgICAgICAgICAgLy8gVE9ETzogdXNlIGEgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIHNlYXJjaCBwYWdlcyAobm90IG5lZWRlZCBmb3IgbWFpbiBwYWdlKQogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiLnNmZGwuc2ZkbC1saXRlIikuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2UgZG93bmxvYWRpbmcgdGhlIGFkd2FyZS1mcmVlIHByb2dyYW0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEhyZWYgPSAkKHRoaXMpLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBhcHBlbmRlZCBvdXIgbm8tYWR3YXJlIGFyZ3VtZW50LCBsZWF2ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkSHJlZi5zdWJzdHJpbmcob2xkSHJlZi5sZW5ndGgtNykgPT0gJyZub3dyYXAnKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFwcGVuZCBpdAogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2hyZWYnLCAkKHRoaXMpLnByb3AoJ2hyZWYnKSArICcmbm93cmFwJykKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgNTApCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFR1c2ZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndHVzZmlsZXMubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnaW5wdXQ6Y2hlY2tib3hbbmFtZT1xdWlja10nXSwKICAgICAgICAgICAgaGlkZTogWydpbnB1dDpjaGVja2JveFtuYW1lPXF1aWNrXSB+IGxhYmVsJywgJ2lucHV0OmNoZWNrYm94W25hbWU9cXVpY2tdJywnYVt0YXJnZXQ9X2JsYW5rXVtocmVmKj0iaHR0cDovL3NoYXJlc3VwZXIuaW5mby8iXSxpbWdbc3JjPSJodHRwczovL3oudHVzZmlsZXMubmV0L2kvZGxsLnBuZyJdJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZGluZzogewogICAgICAgICAgICBob3N0OiBbJ3VwbG9hZGluZy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZm9yY2VfZXhlJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLnVzZV9kb3dubG9hZF9tYW5hZ2VyJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZE9jZWFuOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndXBsb2Fkb2NlYW4uY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3RpY2stZHduJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLnRpY2stYm94J10KICAgICAgICB9LAogICAgICAgIFVwbG9kd3M6ewogICAgICAgICAgICBob3N0OiBbJ3VwbG9kLndzJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWw6Y29udGFpbnMoIm9mZmVyIiknLCdpbWdbc3JjPSJodHRwOi8vZ29vLmdsL0NHSFZWbyJdJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZHM6IHsKICAgICAgICAgICAgaG9zdDogWyd1cGxvYWRzLnRvJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10sCiAgICAgICAgICAgIGhpZGU6IFsnYTpjb250YWlucygiTUFOQUdFUiIpJywnY2VudGVyOmNvbnRhaW5zKCJPZmZlciIpJ10sCiAgICAgICAgfSwKICAgICAgICBVcHRvYm94OiB7CiAgICAgICAgICAgIGhvc3Q6IFsndXB0b2JveC5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydkaXYucmVzZWxsZXIgPiB0YWJsZVthbGlnbj1jZW50ZXJdJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJ2Rpdi5yZXNlbGxlciA+IHRhYmxlW2FsaWduPWNlbnRlcl0gZGl2W2FsaWduPWNlbnRlcl0gPiBhJykKICAgICAgICAgICAgICAgIHZhciBhZHdhcmUgPSBidXR0b24ucHJvcCgnaHJlZicpCgogICAgICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIHJlYWwgZG93bmxvYWQgbGluayBhbmQgY2hhbmdlIHRoZSBidXR0b24gd2l0aCB0aGlzIGxpbmsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZCA9IGFkd2FyZS5tYXRjaCgvJnByb2R1Y3RfZG93bmxvYWRfdXJsPShbXiQmXSspJC8pWzFdCiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgnaHJlZicsIGRvd25sb2FkKQoKICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgYnV0dG9uIGluIGEgdmlzaWJsZSBsb2NhdGlvbgogICAgICAgICAgICAgICAgJCgnZGl2LnJlc2VsbGVyID4gdGFibGVbYWxpZ249Y2VudGVyXScpLmJlZm9yZShidXR0b24pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFVubGltaXR6b25lOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndW5saW1pdHpvbmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RsbSddLAogICAgICAgICAgICBoaWRlOiBbJyNkbG0gfiBiJywnI2RsbSddCiAgICAgICAgfSwKICAgICAgICBVc2Vyc0NETjogewogICAgICAgICAgICBob3N0OiBbJ3VzZXJzY2RuLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjaGtJc0FkZCddLAogICAgICAgICAgICBoaWRlOiBbJ2xhYmVsOmNvbnRhaW5zKCJEb3dubG9hZCBtYW5hZ2VyIiknXQogICAgICAgIH0sCiAgICAgICAgWmlkZHU6IHsKICAgICAgICAgICAgaG9zdDogWydkb3dubG9hZHMuemlkZHUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2FjY2VsZXJhdG9yJ10sCiAgICAgICAgICAgIGhpZGU6IFsndGQudGV4dDEyOmNvbnRhaW5zKCJ6aWRkdSBhY2NlbGVyYXRvciIpJ10KICAgICAgICB9CiAgICB9CgogICAgLy8gSWYgdGhlIHJlcXVpcmUgd2Fzbid0IGV4ZWN1dGVkIChHb29nbGUgQ2hyb21lIGluc3RhbGxhdGlvbiB3aXRob3V0IFRhbXBlcm1vbmtleSksIGpRdWVyeSAyLjAzbWluCiAgICBpZiAodHlwZW9mICQgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAoZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scj10eXBlb2YgdW5kZWZpbmVkLGk9ZS5sb2NhdGlvbixvPWUuZG9jdW1lbnQscz1vLmRvY3VtZW50RWxlbWVudCxhPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxwPSIyLjAuMyIsZj1jLmNvbmNhdCxoPWMucHVzaCxkPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PXAudHJpbSx4PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB4LmZuLmluaXQoZSxuLHQpfSxiPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHc9L1xTKy9nLFQ9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8saz0vXi1tcy0vLE49Ly0oW1xkYS16XSkvZ2ksRT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LFM9ZnVuY3Rpb24oKXtvLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkseC5yZWFkeSgpfTt4LmZuPXgucHJvdG90eXBlPXtqcXVlcnk6cCxjb25zdHJ1Y3Rvcjp4LGluaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihyPSI8Ij09PWUuY2hhckF0KDApJiYiPiI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpULmV4ZWMoZSksIXJ8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgeD90WzBdOnQseC5tZXJnZSh0aGlzLHgucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6bywhMCkpLEMudGVzdChyWzFdKSYmeC5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpeC5pc0Z1bmN0aW9uKHRoaXNbcl0pP3RoaXNbcl0odFtyXSk6dGhpcy5hdHRyKHIsdFtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9by5nZXRFbGVtZW50QnlJZChyWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTp4LmlzRnVuY3Rpb24oZSk/bi5yZWFkeShlKTooZS5zZWxlY3RvciE9PXVuZGVmaW5lZCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihsPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09YSYmKHM9dGhpcywtLWEpO3U+YTthKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2FdKSlmb3IodCBpbiBlKW49c1t0XSxyPWVbdF0scyE9PXImJihsJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwoaT14LmlzQXJyYXkocikpKT8oaT8oaT0hMSxvPW4mJnguaXNBcnJheShuKT9uOltdKTpvPW4mJnguaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbdF09eC5leHRlbmQobCxvLHIpKTpyIT09dW5kZWZpbmVkJiYoc1t0XT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhwK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9YSkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0teC5yZWFkeVdhaXQ6eC5pc1JlYWR5KXx8KHguaXNSZWFkeT0hMCxlIT09ITAmJi0teC5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbeF0pLHguZm4udHJpZ2dlciYmeChvKS50cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSkpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT14LnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZigib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fG87dmFyIHI9Qy5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpKU09OLnBhcnNlLHBhcnNlWE1MOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChyKXt0PXVuZGVmaW5lZH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmeC5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWV2YWw7ZT14LnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLG8uaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaywibXMtIikucmVwbGFjZShOLEUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLHM9aihlKTtpZihuKXtpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoaihPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpnLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLHI9ZS5sZW5ndGgsaT0wO2lmKCJudW1iZXIiPT10eXBlb2Ygbilmb3IoO24+aTtpKyspZVtyKytdPXRbaV07ZWxzZSB3aGlsZSh0W2ldIT09dW5kZWZpbmVkKWVbcisrXT10W2krK107cmV0dXJuIGUubGVuZ3RoPXIsZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAscz1lLmxlbmd0aDtmb3Iobj0hIW47cz5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgscz1qKGUpLGE9W107aWYocylmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoYVthLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKGFbYS5sZW5ndGhdPXIpO3JldHVybiBmLmFwcGx5KFtdLGEpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLHguaXNGdW5jdGlvbihlKT8ocj1kLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp1bmRlZmluZWR9LGFjY2VzczpmdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgYT0wLHU9ZS5sZW5ndGgsbD1udWxsPT1uO2lmKCJvYmplY3QiPT09eC50eXBlKG4pKXtpPSEwO2ZvcihhIGluIG4peC5hY2Nlc3MoZSx0LGEsblthXSwhMCxvLHMpfWVsc2UgaWYociE9PXVuZGVmaW5lZCYmKGk9ITAseC5pc0Z1bmN0aW9uKHIpfHwocz0hMCksbCYmKHM/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGw9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jYWxsKHgoZSksbil9KSksdCkpZm9yKDt1PmE7YSsrKXQoZVthXSxuLHM/cjpyLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiBpP2U6bD90LmNhbGwoZSk6dT90KGVbMF0sbik6b30sbm93OkRhdGUubm93LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzPXt9O2ZvcihvIGluIHQpc1tvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPXNbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBufHwobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHgucmVhZHkpOihvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkpKSxuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2xbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX10PXgobyksZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scixpLG8scyxhLHUsbCxjLHAsZixoLGQsZyxtLHksdj0ic2l6emxlIistbmV3IERhdGUsYj1lLmRvY3VtZW50LHc9MCxUPTAsQz1zdCgpLGs9c3QoKSxOPXN0KCksRT0hMSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhFPSEwLDApOjB9LGo9dHlwZW9mIHVuZGVmaW5lZCxEPTE8PDMxLEE9e30uaGFzT3duUHJvcGVydHksTD1bXSxxPUwucG9wLEg9TC5wdXNoLE89TC5wdXNoLEY9TC5zbGljZSxQPUwuaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7bj50O3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sUj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE09IltcXHgyMFxcdFxcclxcblxcZl0iLFc9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIiwkPVcucmVwbGFjZSgidyIsIncjIiksQj0iXFxbIitNKyIqKCIrVysiKSIrTSsiKig/OihbKl4kfCF+XT89KSIrTSsiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrJCsiKXwpfCkiK00rIipcXF0iLEk9IjooIitXKyIpKD86XFwoKChbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitCLnJlcGxhY2UoMyw4KSsiKSopfC4qKVxcKXwpIix6PVJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxfPVJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSxYPVJlZ0V4cCgiXiIrTSsiKihbPit+XXwiK00rIikiK00rIioiKSxVPVJlZ0V4cChNKyIqWyt+XSIpLFk9UmVnRXhwKCI9IitNKyIqKFteXFxdJ1wiXSopIitNKyIqXFxdIiwiZyIpLFY9UmVnRXhwKEkpLEc9UmVnRXhwKCJeIiskKyIkIiksSj17SUQ6UmVnRXhwKCJeIygiK1crIikiKSxDTEFTUzpSZWdFeHAoIl5cXC4oIitXKyIpIiksVEFHOlJlZ0V4cCgiXigiK1cucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOlJlZ0V4cCgiXiIrQiksUFNFVURPOlJlZ0V4cCgiXiIrSSksQ0hJTEQ6UmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00rIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00rIiooPzooWystXXwpIitNKyIqKFxcZCspfCkpIitNKyIqXFwpfCkiLCJpIiksYm9vbDpSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK00rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTSsiKigoPzotXFxkKT9cXGQqKSIrTSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sUT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sSz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxldD0vXmhcZCQvaSx0dD0vJ3xcXC9nLG50PVJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNKyI/fCgiK00rIil8LikiLCJpZyIpLHJ0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0iMHgiK3QtNjU1MzY7cmV0dXJuIHIhPT1yfHxuP3Q6MD5yP1N0cmluZy5mcm9tQ2hhckNvZGUocis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxyPj4xMCw1NjMyMHwxMDIzJnIpfTt0cnl7Ty5hcHBseShMPUYuY2FsbChiLmNoaWxkTm9kZXMpLGIuY2hpbGROb2RlcyksTFtiLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChpdCl7Tz17YXBwbHk6TC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtILmFwcGx5KGUsRi5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb3QoZSx0LHIsaSl7dmFyIG8scyxhLHUsbCxmLGcsbSx4LHc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OmIpIT09cCYmYyh0KSx0PXR8fHAscj1yfHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiByO2lmKDEhPT0odT10Lm5vZGVUeXBlKSYmOSE9PXUpcmV0dXJuW107aWYoaCYmIWkpe2lmKG89Sy5leGVjKGUpKWlmKGE9b1sxXSl7aWYoOT09PXUpe2lmKHM9dC5nZXRFbGVtZW50QnlJZChhKSwhc3x8IXMucGFyZW50Tm9kZSlyZXR1cm4gcjtpZihzLmlkPT09YSlyZXR1cm4gci5wdXNoKHMpLHJ9ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihzPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkmJnkodCxzKSYmcy5pZD09PWEpcmV0dXJuIHIucHVzaChzKSxyfWVsc2V7aWYob1syXSlyZXR1cm4gTy5hcHBseShyLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLHI7aWYoKGE9b1szXSkmJm4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBPLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpKSxyfWlmKG4ucXNhJiYoIWR8fCFkLnRlc3QoZSkpKXtpZihtPWc9dix4PXQsdz05PT09dSYmZSwxPT09dSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Y9Z3QoZSksKGc9dC5nZXRBdHRyaWJ1dGUoImlkIikpP209Zy5yZXBsYWNlKHR0LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixtKSxtPSJbaWQ9JyIrbSsiJ10gIixsPWYubGVuZ3RoO3doaWxlKGwtLSlmW2xdPW0rbXQoZltsXSk7eD1VLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx3PWYuam9pbigiLCIpfWlmKHcpdHJ5e3JldHVybiBPLmFwcGx5KHIseC5xdWVyeVNlbGVjdG9yQWxsKHcpKSxyfWNhdGNoKFQpe31maW5hbGx5e2d8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZSh6LCIkMSIpLHQscixpKX1mdW5jdGlvbiBzdCgpe3ZhciBlPVtdO2Z1bmN0aW9uIHQobixyKXtyZXR1cm4gZS5wdXNoKG4rPSIgIik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIHRbZS5zaGlmdCgpXSx0W25dPXJ9cmV0dXJuIHR9ZnVuY3Rpb24gYXQoZSl7cmV0dXJuIGVbdl09ITAsZX1mdW5jdGlvbiB1dChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2gobil7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGx0KGUsdCl7dmFyIG49ZS5zcGxpdCgifCIpLHI9ZS5sZW5ndGg7d2hpbGUoci0tKWkuYXR0ckhhbmRsZVtuW3JdXT10fWZ1bmN0aW9uIGN0KGUsdCl7dmFyIG49dCYmZSxyPW4mJjE9PT1lLm5vZGVUeXBlJiYxPT09dC5ub2RlVHlwZSYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBwdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09bnx8ImJ1dHRvbiI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuIGF0KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGF0KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKW5baT1vW3NdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9cz1vdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sbj1vdC5zdXBwb3J0PXt9LGM9b3Quc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9lLm93bmVyRG9jdW1lbnR8fGU6YixyPXQuZGVmYXVsdFZpZXc7cmV0dXJuIHQhPT1wJiY5PT09dC5ub2RlVHlwZSYmdC5kb2N1bWVudEVsZW1lbnQ/KHA9dCxmPXQuZG9jdW1lbnRFbGVtZW50LGg9IXModCksciYmci5hdHRhY2hFdmVudCYmciE9PXIudG9wJiZyLmF0dGFjaEV2ZW50KCJvbmJlZm9yZXVubG9hZCIsZnVuY3Rpb24oKXtjKCl9KSxuLmF0dHJpYnV0ZXM9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksbi5nZXRFbGVtZW50c0J5VGFnTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IixlLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RofSksbi5nZXRCeUlkPXV0KGZ1bmN0aW9uKGUpe3JldHVybiBmLmFwcGVuZENoaWxkKGUpLmlkPXYsIXQuZ2V0RWxlbWVudHNCeU5hbWV8fCF0LmdldEVsZW1lbnRzQnlOYW1lKHYpLmxlbmd0aH0pLG4uZ2V0QnlJZD8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1qJiZoKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKG50LHJ0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIGkuZmluZC5JRCxpLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxpLmZpbmQuVEFHPW4uZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dW5kZWZpbmVkfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZigiKiI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxpLmZpbmQuQ0xBU1M9bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe3JldHVybiB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09aiYmaD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dW5kZWZpbmVkfSxnPVtdLGQ9W10sKG4ucXNhPVEudGVzdCh0LnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKHV0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fGQucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitSKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8ZC5wdXNoKCI6Y2hlY2tlZCIpfSksdXQoZnVuY3Rpb24oZSl7dmFyIG49dC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO24uc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZChuKS5zZXRBdHRyaWJ1dGUoInQiLCIiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0Xj0nJ10iKS5sZW5ndGgmJmQucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxkLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksZC5wdXNoKCIsLio6Iil9KSksKG4ubWF0Y2hlc1NlbGVjdG9yPVEudGVzdChtPWYud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxmLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJnV0KGZ1bmN0aW9uKGUpe24uZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsImRpdiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSxnLnB1c2goIiE9IixJKX0pLGQ9ZC5sZW5ndGgmJlJlZ0V4cChkLmpvaW4oInwiKSksZz1nLmxlbmd0aCYmUmVnRXhwKGcuam9pbigifCIpKSx5PVEudGVzdChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFM9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHIpe2lmKGU9PT1yKXJldHVybiBFPSEwLDA7dmFyIGk9ci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKTtyZXR1cm4gaT8xJml8fCFuLnNvcnREZXRhY2hlZCYmci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PWk/ZT09PXR8fHkoYixlKT8tMTpyPT09dHx8eShiLHIpPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxyKTowOjQmaT8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUscz1uLnBhcmVudE5vZGUsYT1bZV0sdT1bbl07aWYoZT09PW4pcmV0dXJuIEU9ITAsMDtpZighb3x8IXMpcmV0dXJuIGU9PT10Py0xOm49PT10PzE6bz8tMTpzPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxuKTowO2lmKG89PT1zKXJldHVybiBjdChlLG4pO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlhLnVuc2hpZnQocik7cj1uO3doaWxlKHI9ci5wYXJlbnROb2RlKXUudW5zaGlmdChyKTt3aGlsZShhW2ldPT09dVtpXSlpKys7cmV0dXJuIGk/Y3QoYVtpXSx1W2ldKTphW2ldPT09Yj8tMTp1W2ldPT09Yj8xOjB9LHQpOnB9LG90Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QoZSxudWxsLG51bGwsdCl9LG90Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx0PXQucmVwbGFjZShZLCI9JyQxJ10iKSwhKCFuLm1hdGNoZXNTZWxlY3Rvcnx8IWh8fGcmJmcudGVzdCh0KXx8ZCYmZC50ZXN0KHQpKSl0cnl7dmFyIHI9bS5jYWxsKGUsdCk7aWYocnx8bi5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiByfWNhdGNoKGkpe31yZXR1cm4gb3QodCxwLG51bGwsW2VdKS5sZW5ndGg+MH0sb3QuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSkseShlLHQpfSxvdC5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1wJiZjKGUpO3ZhciByPWkuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLG89ciYmQS5jYWxsKGkuYXR0ckhhbmRsZSx0LnRvTG93ZXJDYXNlKCkpP3IoZSx0LCFoKTp1bmRlZmluZWQ7cmV0dXJuIG89PT11bmRlZmluZWQ/bi5hdHRyaWJ1dGVzfHwhaD9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGw6b30sb3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LG90LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1bXSxpPTAsbz0wO2lmKEU9IW4uZGV0ZWN0RHVwbGljYXRlcyxsPSFuLnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KFMpLEUpe3doaWxlKHQ9ZVtvKytdKXQ9PT1lW29dJiYoaT1yLnB1c2gobykpO3doaWxlKGktLSllLnNwbGljZShyW2ldLDEpfXJldHVybiBlfSxvPW90LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPW8odCk7cmV0dXJuIG59LGk9b3Quc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86YXQsbWF0Y2g6SixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKG50LHJ0KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZShudCxydCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fG90LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJm90LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBKLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXSYmZVs0XSE9PXVuZGVmaW5lZD9lWzJdPWVbNF06biYmVi50ZXN0KG4pJiYodD1ndChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUNbZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrTSsiKSIrZSsiKCIrTSsifCQpIikpJiZDKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9b3QuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLHM9Imxhc3QiIT09ZS5zbGljZSgtNCksYT0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLHAsZixoLGQsZz1vIT09cz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHk9YSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHg9IXUmJiFhO2lmKG0pe2lmKG8pe3doaWxlKGcpe3A9dDt3aGlsZShwPXBbZ10paWYoYT9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBlKXJldHVybiExO2Q9Zz0ib25seSI9PT1lJiYhZCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihkPVtzP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0scyYmeCl7Yz1tW3ZdfHwobVt2XT17fSksbD1jW2VdfHxbXSxoPWxbMF09PT13JiZsWzFdLGY9bFswXT09PXcmJmxbMl0scD1oJiZtLmNoaWxkTm9kZXNbaF07d2hpbGUocD0rK2gmJnAmJnBbZ118fChmPWg9MCl8fGQucG9wKCkpaWYoMT09PXAubm9kZVR5cGUmJisrZiYmcD09PXQpe2NbZV09W3csaCxmXTticmVha319ZWxzZSBpZih4JiYobD0odFt2XXx8KHRbdl09e30pKVtlXSkmJmxbMF09PT13KWY9bFsxXTtlbHNlIHdoaWxlKHA9KytoJiZwJiZwW2ddfHwoZj1oPTApfHxkLnBvcCgpKWlmKChhP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpJiYrK2YmJih4JiYoKHBbdl18fChwW3ZdPXt9KSlbZV09W3csZl0pLHA9PT10KSlicmVhaztyZXR1cm4gZi09aSxmPT09cnx8MD09PWYlciYmZi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gclt2XT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9hdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKWk9UC5jYWxsKGUsb1tzXSksZVtpXT0hKG5baV09b1tzXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90OmF0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1hKGUucmVwbGFjZSh6LCIkMSIpKTtyZXR1cm4gclt2XT9hdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShvPXNbYV0pJiYoZVthXT0hKHRbYV09bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvdChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmF0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fG8odCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzphdChmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGV8fCIiKXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1oP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09cC5hY3RpdmVFbGVtZW50JiYoIXAuaGFzRm9jdXN8fHAuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZXQudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFoudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6aHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Omh0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpodChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOmh0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpodChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0saS5wc2V1ZG9zLm50aD1pLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5wc2V1ZG9zW3RdPXB0KHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW3RdPWZ0KHQpO2Z1bmN0aW9uIGR0KCl7fWR0LnByb3RvdHlwZT1pLmZpbHRlcnM9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgZHQ7ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixyLG8scyxhLHUsbCxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO2E9ZSx1PVtdLGw9aS5wcmVGaWx0ZXI7d2hpbGUoYSl7KCFufHwocj1fLmV4ZWMoYSkpKSYmKHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSx1LnB1c2gobz1bXSkpLG49ITEsKHI9WC5leGVjKGEpKSYmKG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZSh6LCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtmb3IocyBpbiBpLmZpbHRlcikhKHI9SltzXS5leGVjKGEpKXx8bFtzXSYmIShyPWxbc10ocikpfHwobj1yLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6cyxtYXRjaGVzOnJ9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP290LmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX1mdW5jdGlvbiBtdChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB5dChlLHQsbil7dmFyIGk9dC5kaXIsbz1uJiYicGFyZW50Tm9kZSI9PT1pLHM9VCsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LG4sYSl7dmFyIHUsbCxjLHA9dysiICIrcztpZihhKXt3aGlsZSh0PXRbaV0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LG4sYSkpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W3ZdfHwodFt2XT17fSksKGw9Y1tpXSkmJmxbMF09PT1wKXtpZigodT1sWzFdKT09PSEwfHx1PT09cilyZXR1cm4gdT09PSEwfWVsc2UgaWYobD1jW2ldPVtwXSxsWzFdPWUodCxuLGEpfHxyLGxbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxzPVtdLGE9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtmb3IoO3U+YTthKyspKG89ZVthXSkmJighbnx8bihvLHIsaSkpJiYocy5wdXNoKG8pLGwmJnQucHVzaChhKSk7cmV0dXJuIHN9ZnVuY3Rpb24gYnQoZSx0LG4scixpLG8pe3JldHVybiByJiYhclt2XSYmKHI9YnQocikpLGkmJiFpW3ZdJiYoaT1idChpLG8pKSxhdChmdW5jdGlvbihvLHMsYSx1KXt2YXIgbCxjLHAsZj1bXSxoPVtdLGQ9cy5sZW5ndGgsZz1vfHxDdCh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLGYsZSxhLHUpLHk9bj9pfHwobz9lOmR8fHIpP1tdOnM6bTtpZihuJiZuKG0seSxhLHUpLHIpe2w9eHQoeSxoKSxyKGwsW10sYSx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkocD1sW2NdKSYmKHlbaFtjXV09IShtW2hbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZsLnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYobD1pP1AuY2FsbChvLHApOmZbY10pPi0xJiYob1tsXT0hKHNbbF09cCkpfX1lbHNlIHk9eHQoeT09PXM/eS5zcGxpY2UoZCx5Lmxlbmd0aCk6eSksaT9pKG51bGwscyx5LHUpOk8uYXBwbHkocyx5KX0pfWZ1bmN0aW9uIHd0KGUpe3ZhciB0LG4scixvPWUubGVuZ3RoLHM9aS5yZWxhdGl2ZVtlWzBdLnR5cGVdLGE9c3x8aS5yZWxhdGl2ZVsiICJdLGw9cz8xOjAsYz15dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LGEsITApLHA9eXQoZnVuY3Rpb24oZSl7cmV0dXJuIFAuY2FsbCh0LGUpPi0xfSxhLCEwKSxmPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIXMmJihyfHxuIT09dSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpwKGUsbixyKSl9XTtmb3IoO28+bDtsKyspaWYobj1pLnJlbGF0aXZlW2VbbF0udHlwZV0pZj1beXQodnQoZiksbildO2Vsc2V7aWYobj1pLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW3ZdKXtmb3Iocj0rK2w7bz5yO3IrKylpZihpLnJlbGF0aXZlW2Vbcl0udHlwZV0pYnJlYWs7cmV0dXJuIGJ0KGw+MSYmdnQoZiksbD4xJiZtdChlLnNsaWNlKDAsbC0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWVbbC0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKHosIiQxIiksbixyPmwmJnd0KGUuc2xpY2UobCxyKSksbz5yJiZ3dChlPWUuc2xpY2UocikpLG8+ciYmbXQoZSkpfWYucHVzaChuKX1yZXR1cm4gdnQoZil9ZnVuY3Rpb24gVHQoZSx0KXt2YXIgbj0wLG89dC5sZW5ndGg+MCxzPWUubGVuZ3RoPjAsYT1mdW5jdGlvbihhLGwsYyxmLGgpe3ZhciBkLGcsbSx5PVtdLHY9MCx4PSIwIixiPWEmJltdLFQ9bnVsbCE9aCxDPXUsaz1hfHxzJiZpLmZpbmQuVEFHKCIqIixoJiZsLnBhcmVudE5vZGV8fGwpLE49dys9bnVsbD09Qz8xOk1hdGgucmFuZG9tKCl8fC4xO2ZvcihUJiYodT1sIT09cCYmbCxyPW4pO251bGwhPShkPWtbeF0pO3grKyl7aWYocyYmZCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oZCxsLGMpKXtmLnB1c2goZCk7YnJlYWt9VCYmKHc9TixyPSsrbil9byYmKChkPSFtJiZkKSYmdi0tLGEmJmIucHVzaChkKSl9aWYodis9eCxvJiZ4IT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oYix5LGwsYyk7aWYoYSl7aWYodj4wKXdoaWxlKHgtLSliW3hdfHx5W3hdfHwoeVt4XT1xLmNhbGwoZikpO3k9eHQoeSl9Ty5hcHBseShmLHkpLFQmJiFhJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJm90LnVuaXF1ZVNvcnQoZil9cmV0dXJuIFQmJih3PU4sdT1DKSxifTtyZXR1cm4gbz9hdChhKTphfWE9b3QuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPU5bZSsiICJdO2lmKCFvKXt0fHwodD1ndChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pbz13dCh0W25dKSxvW3ZdP3IucHVzaChvKTppLnB1c2gobyk7bz1OKGUsVHQoaSxyKSl9cmV0dXJuIG99O2Z1bmN0aW9uIEN0KGUsdCxuKXt2YXIgcj0wLGk9dC5sZW5ndGg7Zm9yKDtpPnI7cisrKW90KGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiBrdChlLHQscixvKXt2YXIgcyx1LGwsYyxwLGY9Z3QoZSk7aWYoIW8mJjE9PT1mLmxlbmd0aCl7aWYodT1mWzBdPWZbMF0uc2xpY2UoMCksdS5sZW5ndGg+MiYmIklEIj09PShsPXVbMF0pLnR5cGUmJm4uZ2V0QnlJZCYmOT09PXQubm9kZVR5cGUmJmgmJmkucmVsYXRpdmVbdVsxXS50eXBlXSl7aWYodD0oaS5maW5kLklEKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSx0KXx8W10pWzBdLCF0KXJldHVybiByO2U9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1zPUoubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShzLS0pe2lmKGw9dVtzXSxpLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigocD1pLmZpbmRbY10pJiYobz1wKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSxVLnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKHUuc3BsaWNlKHMsMSksZT1vLmxlbmd0aCYmbXQodSksIWUpcmV0dXJuIE8uYXBwbHkocixvKSxyO2JyZWFrfX19cmV0dXJuIGEoZSxmKShvLHQsIWgscixVLnRlc3QoZSkpLHJ9bi5zb3J0U3RhYmxlPXYuc3BsaXQoIiIpLnNvcnQoUykuam9pbigiIik9PT12LG4uZGV0ZWN0RHVwbGljYXRlcz1FLGMoKSxuLnNvcnREZXRhY2hlZD11dChmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHAuY3JlYXRlRWxlbWVudCgiZGl2IikpfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8bHQoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbj91bmRlZmluZWQ6ZS5nZXRBdHRyaWJ1dGUodCwidHlwZSI9PT10LnRvTG93ZXJDYXNlKCk/MToyKX0pLG4uYXR0cmlidXRlcyYmdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8aW5wdXQvPiIsZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8bHQoInZhbHVlIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIG58fCJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dW5kZWZpbmVkOmUuZGVmYXVsdFZhbHVlfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGx0KFIsZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiBuP3VuZGVmaW5lZDoocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOmVbdF09PT0hMD90LnRvTG93ZXJDYXNlKCk6bnVsbH0pLHguZmluZD1vdCx4LmV4cHI9b3Quc2VsZWN0b3JzLHguZXhwclsiOiJdPXguZXhwci5wc2V1ZG9zLHgudW5pcXVlPW90LnVuaXF1ZVNvcnQseC50ZXh0PW90LmdldFRleHQseC5pc1hNTERvYz1vdC5pc1hNTCx4LmNvbnRhaW5zPW90LmNvbnRhaW5zfShlKTt2YXIgRD17fTtmdW5jdGlvbiBBKGUpe3ZhciB0PURbZV09e307cmV0dXJuIHguZWFjaChlLm1hdGNoKHcpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fXguQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9InN0cmluZyI9PXR5cGVvZiBlP0RbZV18fEEoZSk6eC5leHRlbmQoe30sZSk7dmFyIHQsbixyLGksbyxzLGE9W10sdT0hZS5vbmNlJiZbXSxsPWZ1bmN0aW9uKHApe2Zvcih0PWUubWVtb3J5JiZwLG49ITAscz1pfHwwLGk9MCxvPWEubGVuZ3RoLHI9ITA7YSYmbz5zO3MrKylpZihhW3NdLmFwcGx5KHBbMF0scFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7dD0hMTticmVha31yPSExLGEmJih1P3UubGVuZ3RoJiZsKHUuc2hpZnQoKSk6dD9hPVtdOmMuZGlzYWJsZSgpKX0sYz17YWRkOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIG49YS5sZW5ndGg7KGZ1bmN0aW9uIHModCl7eC5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj14LnR5cGUobik7ImZ1bmN0aW9uIj09PXI/ZS51bmlxdWUmJmMuaGFzKG4pfHxhLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09ciYmcyhuKX0pfSkoYXJndW1lbnRzKSxyP289YS5sZW5ndGg6dCYmKGk9bixsKHQpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGEmJnguZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgbjt3aGlsZSgobj14LmluQXJyYXkodCxhLG4pKT4tMSlhLnNwbGljZShuLDEpLHImJihvPj1uJiZvLS0scz49biYmcy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT94LmluQXJyYXkoZSxhKT4tMTohKCFhfHwhYS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBhPVtdLG89MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT10PXVuZGVmaW5lZCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFhfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIHU9dW5kZWZpbmVkLHR8fGMuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiF1fSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiFhfHxuJiYhdXx8KHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxyP3UucHVzaCh0KTpsKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGN9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgcz1vWzBdLGE9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1hJiZhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMsYT9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgcz1vWzJdLGE9b1szXTtyW29bMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1kLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6cixuPT09YT9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LGEsdSxsO2lmKHI+MSlmb3IoYT1BcnJheShyKSx1PUFycmF5KHIpLGw9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKHModCxsLG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhzKHQsdSxhKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKGwsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuPW8uY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxyPW8uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW8uY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYT1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO3JldHVybiBuLnR5cGU/KG4udHlwZT0iY2hlY2tib3giLHQuY2hlY2tPbj0iIiE9PW4udmFsdWUsdC5vcHRTZWxlY3RlZD1hLnNlbGVjdGVkLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLHQucGl4ZWxQb3NpdGlvbj0hMSxuLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1uLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWEuZGlzYWJsZWQsbj1vLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksbi52YWx1ZT0idCIsbi50eXBlPSJyYWRpbyIsdC5yYWRpb1ZhbHVlPSJ0Ij09PW4udmFsdWUsbi5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0Iiksbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0Iiksci5hcHBlbmRDaGlsZChuKSx0LmNoZWNrQ2xvbmU9ci5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGUsaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix0LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx4KGZ1bmN0aW9uKCl7dmFyIG4scixzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3giLGE9by5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2EmJihuPW8uY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweCIsYS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChpKSxpLmlubmVySFRNTD0iIixpLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElIix4LnN3YXAoYSxudWxsIT1hLnN0eWxlLnpvb20/e3pvb206MX06e30sZnVuY3Rpb24oKXt0LmJveFNpemluZz00PT09aS5vZmZzZXRXaWR0aH0pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9aS5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0PXMsci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixpLnN0eWxlLndpZHRoPSIxcHgiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGEucmVtb3ZlQ2hpbGQobikpfSksdCk6dH0oe30pO3ZhciBMLHEsSD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIEYoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89eC5leHBhbmRvK01hdGgucmFuZG9tKCl9Ri51aWQ9MSxGLmFjY2VwdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZVR5cGU/MT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlOiEwfSxGLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGUpe2lmKCFGLmFjY2VwdHMoZSkpcmV0dXJuIDA7dmFyIHQ9e30sbj1lW3RoaXMuZXhwYW5kb107aWYoIW4pe249Ri51aWQrKzt0cnl7dFt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpfWNhdGNoKHIpe3RbdGhpcy5leHBhbmRvXT1uLHguZXh0ZW5kKGUsdCl9fXJldHVybiB0aGlzLmNhY2hlW25dfHwodGhpcy5jYWNoZVtuXT17fSksbn0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtpXTtpZigic3RyaW5nIj09dHlwZW9mIHQpb1t0XT1uO2Vsc2UgaWYoeC5pc0VtcHR5T2JqZWN0KG8pKXguZXh0ZW5kKHRoaXMuY2FjaGVbaV0sdCk7ZWxzZSBmb3IociBpbiB0KW9bcl09dFtyXTtyZXR1cm4gb30sZ2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jYWNoZVt0aGlzLmtleShlKV07cmV0dXJuIHQ9PT11bmRlZmluZWQ/bjpuW3RdfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09dW5kZWZpbmVkfHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJm49PT11bmRlZmluZWQ/KHI9dGhpcy5nZXQoZSx0KSxyIT09dW5kZWZpbmVkP3I6dGhpcy5nZXQoZSx4LmNhbWVsQ2FzZSh0KSkpOih0aGlzLnNldChlLHQsbiksbiE9PXVuZGVmaW5lZD9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzLmtleShlKSxzPXRoaXMuY2FjaGVbb107aWYodD09PXVuZGVmaW5lZCl0aGlzLmNhY2hlW29dPXt9O2Vsc2V7eC5pc0FycmF5KHQpP3I9dC5jb25jYXQodC5tYXAoeC5jYW1lbENhc2UpKTooaT14LmNhbWVsQ2FzZSh0KSx0IGluIHM/cj1bdCxpXToocj1pLHI9ciBpbiBzP1tyXTpyLm1hdGNoKHcpfHxbXSkpLG49ci5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSBzW3Jbbl1dfX0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4heC5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGUpe2VbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXX19LEw9bmV3IEYscT1uZXcgRix4LmV4dGVuZCh7YWNjZXB0RGF0YTpGLmFjY2VwdHMsaGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gTC5oYXNEYXRhKGUpfHxxLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBMLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtMLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHEuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtxLnJlbW92ZShlLHQpfX0pLHguZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXRoaXNbMF0sbz0wLHM9bnVsbDtpZihlPT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCYmKHM9TC5nZXQoaSksMT09PWkubm9kZVR5cGUmJiFxLmdldChpLCJoYXNEYXRhQXR0cnMiKSkpe2ZvcihuPWkuYXR0cmlidXRlcztuLmxlbmd0aD5vO28rKylyPW5bb10ubmFtZSwwPT09ci5pbmRleE9mKCJkYXRhLSIpJiYocj14LmNhbWVsQ2FzZShyLnNsaWNlKDUpKSxQKGkscixzW3JdKSk7cS5zZXQoaSwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0wuc2V0KHRoaXMsZSl9KTp4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuLHI9eC5jYW1lbENhc2UoZSk7aWYoaSYmdD09PXVuZGVmaW5lZCl7aWYobj1MLmdldChpLGUpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1MLmdldChpLHIpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1QKGkscix1bmRlZmluZWQpLG4hPT11bmRlZmluZWQpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1MLmdldCh0aGlzLHIpO0wuc2V0KHRoaXMscix0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZuIT09dW5kZWZpbmVkJiZMLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TC5yZW1vdmUodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFAoZSx0LG4pe3ZhciByO2lmKG49PT11bmRlZmluZWQmJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoTywiLSQxIikudG9Mb3dlckNhc2UoKSxuPWUuZ2V0QXR0cmlidXRlKHIpLCJzdHJpbmciPT10eXBlb2Ygbil7dHJ5e249InRydWUiPT09bj8hMDoiZmFsc2UiPT09bj8hMToibnVsbCI9PT1uP251bGw6K24rIiI9PT1uPytuOkgudGVzdChuKT9KU09OLnBhcnNlKG4pOm59Y2F0Y2goaSl7fUwuc2V0KGUsdCxuKX1lbHNlIG49dW5kZWZpbmVkO3JldHVybiBufXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGU/KHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1xLmdldChlLHQpLG4mJighcnx8eC5pc0FycmF5KG4pP3I9cS5hY2Nlc3MoZSx0LHgubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdKTp1bmRlZmluZWR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49eC5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz14Ll9xdWV1ZUhvb2tzKGUsdCkscz1mdW5jdGlvbigpe3guZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUscyxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBxLmdldChlLG4pfHxxLmFjY2VzcyhlLG4se2VtcHR5OnguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe3EucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLHguZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9ImZ4IixuLS0pLG4+YXJndW1lbnRzLmxlbmd0aD94LnF1ZXVlKHRoaXNbMF0sZSk6dD09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXgucXVldWUodGhpcyxlLHQpO3guX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09blswXSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT14LmZ4P3guZnguc3BlZWRzW2VdfHxlOmUsdD10fHwiZngiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT14LkRlZmVycmVkKCksbz10aGlzLHM9dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXVuZGVmaW5lZCksZT1lfHwiZngiO3doaWxlKHMtLSluPXEuZ2V0KG9bc10sZSsicXVldWVIb29rcyIpLG4mJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCksaS5wcm9taXNlKHQpfX0pO3ZhciBSLE0sVz0vW1x0XHJcblxmXS9nLCQ9L1xyL2csQj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO3guZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1t4LnByb3BGaXhbZV18fGVdfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scz0wLGE9dGhpcy5sZW5ndGgsdT0ic3RyaW5nIj09dHlwZW9mIGUmJmU7aWYoeC5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS5hZGRDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHwiIikubWF0Y2godyl8fFtdO2E+cztzKyspaWYobj10aGlzW3NdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIik6IiAiKSl7bz0wO3doaWxlKGk9dFtvKytdKTA+ci5pbmRleE9mKCIgIitpKyIgIikmJihyKz1pKyIgIik7bi5jbGFzc05hbWU9eC50cmltKHIpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM9MCxhPXRoaXMubGVuZ3RoLHU9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgZSYmZTtpZih4LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKHUpZm9yKHQ9KGV8fCIiKS5tYXRjaCh3KXx8W107YT5zO3MrKylpZihuPXRoaXNbc10scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFcsIiAiKToiIikpe289MDt3aGlsZShpPXRbbysrXSl3aGlsZShyLmluZGV4T2YoIiAiK2krIiAiKT49MClyPXIucmVwbGFjZSgiICIraSsiICIsIiAiKTtuLmNsYXNzTmFtZT1lP3gudHJpbShyKToiIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiYic3RyaW5nIj09PW4/dD90aGlzLmFkZENsYXNzKGUpOnRoaXMucmVtb3ZlQ2xhc3MoZSk6eC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt4KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PW4pe3ZhciB0LGk9MCxvPXgodGhpcykscz1lLm1hdGNoKHcpfHxbXTt3aGlsZSh0PXNbaSsrXSlvLmhhc0NsYXNzKHQpP28ucmVtb3ZlQ2xhc3ModCk6by5hZGRDbGFzcyh0KX1lbHNlKG49PT1yfHwiYm9vbGVhbiI9PT1uKSYmKHRoaXMuY2xhc3NOYW1lJiZxLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjpxLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdD0iICIrZSsiICIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI9eC5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaTsxPT09dGhpcy5ub2RlVHlwZSYmKGk9cj9lLmNhbGwodGhpcyxuLHgodGhpcykudmFsKCkpOmUsbnVsbD09aT9pPSIiOiJudW1iZXIiPT10eXBlb2YgaT9pKz0iIjp4LmlzQXJyYXkoaSkmJihpPXgubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSx0PXgudmFsSG9va3NbdGhpcy50eXBlXXx8eC52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJzZXQiaW4gdCYmdC5zZXQodGhpcyxpLCJ2YWx1ZSIpIT09dW5kZWZpbmVkfHwodGhpcy52YWx1ZT1pKSl9KTtpZihpKXJldHVybiB0PXgudmFsSG9va3NbaS50eXBlXXx8eC52YWxIb29rc1tpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJnZXQiaW4gdCYmKG49dC5nZXQoaSwidmFsdWUiKSkhPT11bmRlZmluZWQ/bjoobj1pLnZhbHVlLCJzdHJpbmciPT10eXBlb2Ygbj9uLnJlcGxhY2UoJCwiIik6bnVsbD09bj8iIjpuKX19fSkseC5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIXR8fHQuc3BlY2lmaWVkP2UudmFsdWU6ZS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPWUub3B0aW9ucyxpPWUuc2VsZWN0ZWRJbmRleCxvPSJzZWxlY3Qtb25lIj09PWUudHlwZXx8MD5pLHM9bz9udWxsOltdLGE9bz9pKzE6ci5sZW5ndGgsdT0wPmk/YTpvP2k6MDtmb3IoO2E+dTt1KyspaWYobj1yW3VdLCEoIW4uc2VsZWN0ZWQmJnUhPT1pfHwoeC5zdXBwb3J0Lm9wdERpc2FibGVkP24uZGlzYWJsZWQ6bnVsbCE9PW4uZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKXx8bi5wYXJlbnROb2RlLmRpc2FibGVkJiZ4Lm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9eChuKS52YWwoKSxvKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPXgubWFrZUFycmF5KHQpLHM9aS5sZW5ndGg7d2hpbGUocy0tKXI9aVtzXSwoci5zZWxlY3RlZD14LmluQXJyYXkoeChyKS52YWwoKSxvKT49MCkmJihuPSEwKTtyZXR1cm4gbnx8KGUuc2VsZWN0ZWRJbmRleD0tMSksb319fSxhdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxvLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiB0eXBlb2YgZS5nZXRBdHRyaWJ1dGU9PT1yP3gucHJvcChlLHQsbik6KDE9PT1zJiZ4LmlzWE1MRG9jKGUpfHwodD10LnRvTG93ZXJDYXNlKCksaT14LmF0dHJIb29rc1t0XXx8KHguZXhwci5tYXRjaC5ib29sLnRlc3QodCk/TTpSKSksbj09PXVuZGVmaW5lZD9pJiYiZ2V0ImluIGkmJm51bGwhPT0obz1pLmdldChlLHQpKT9vOihvPXguZmluZC5hdHRyKGUsdCksbnVsbD09bz91bmRlZmluZWQ6byk6bnVsbCE9PW4/aSYmInNldCJpbiBpJiYobz1pLnNldChlLG4sdCkpIT09dW5kZWZpbmVkP286KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6KHgucmVtb3ZlQXR0cihlLHQpLHVuZGVmaW5lZCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKHcpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9eC5wcm9wRml4W25dfHxuLHguZXhwci5tYXRjaC5ib29sLnRlc3QobikmJihlW3JdPSExKSxlLnJlbW92ZUF0dHJpYnV0ZShuKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZigheC5zdXBwb3J0LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZ4Lm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiBvPTEhPT1zfHwheC5pc1hNTERvYyhlKSxvJiYodD14LnByb3BGaXhbdF18fHQsaT14LnByb3BIb29rc1t0XSksbiE9PXVuZGVmaW5lZD9pJiYic2V0ImluIGkmJihyPWkuc2V0KGUsbix0KSkhPT11bmRlZmluZWQ/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxCLnRlc3QoZS5ub2RlTmFtZSl8fGUuaHJlZj9lLnRhYkluZGV4Oi0xfX19fSksTT17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PSExP3gucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LHguZWFjaCh4LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZXhwci5hdHRySGFuZGxlW3RdfHx4LmZpbmQuYXR0cjt4LmV4cHIuYXR0ckhhbmRsZVt0XT1mdW5jdGlvbihlLHQscil7dmFyIGk9eC5leHByLmF0dHJIYW5kbGVbdF0sbz1yP3VuZGVmaW5lZDooeC5leHByLmF0dHJIYW5kbGVbdF09dW5kZWZpbmVkKSE9bihlLHQscik/dC50b0xvd2VyQ2FzZSgpOm51bGw7cmV0dXJuIHguZXhwci5hdHRySGFuZGxlW3RdPWksb319KSx4LnN1cHBvcnQub3B0U2VsZWN0ZWR8fCh4LnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLHguZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7eC5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLHguZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe3gudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmlzQXJyYXkodCk/ZS5jaGVja2VkPXguaW5BcnJheSh4KGUpLnZhbCgpLHQpPj0wOnVuZGVmaW5lZH19LHguc3VwcG9ydC5jaGVja09ufHwoeC52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pO3ZhciBJPS9ea2V5Lyx6PS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxfPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxYPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gVSgpe3JldHVybiEwfWZ1bmN0aW9uIFkoKXtyZXR1cm4hMX1mdW5jdGlvbiBWKCl7dHJ5e3JldHVybiBvLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX14LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsdCxuLGksbyl7dmFyIHMsYSx1LGwsYyxwLGYsaCxkLGcsbSx5PXEuZ2V0KGUpO2lmKHkpe24uaGFuZGxlciYmKHM9bixuPXMuaGFuZGxlcixvPXMuc2VsZWN0b3IpLG4uZ3VpZHx8KG4uZ3VpZD14Lmd1aWQrKyksKGw9eS5ldmVudHMpfHwobD15LmV2ZW50cz17fSksKGE9eS5oYW5kbGUpfHwoYT15LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHg9PT1yfHxlJiZ4LmV2ZW50LnRyaWdnZXJlZD09PWUudHlwZT91bmRlZmluZWQ6eC5ldmVudC5kaXNwYXRjaC5hcHBseShhLmVsZW0sYXJndW1lbnRzKX0sYS5lbGVtPWUpLHQ9KHR8fCIiKS5tYXRjaCh3KXx8WyIiXSxjPXQubGVuZ3RoO3doaWxlKGMtLSl1PVguZXhlYyh0W2NdKXx8W10sZD1tPXVbMV0sZz0odVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQmJihmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30sZD0obz9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZCxmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30scD14LmV4dGVuZCh7dHlwZTpkLG9yaWdUeXBlOm0sZGF0YTppLGhhbmRsZXI6bixndWlkOm4uZ3VpZCxzZWxlY3RvcjpvLG5lZWRzQ29udGV4dDpvJiZ4LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QobyksbmFtZXNwYWNlOmcuam9pbigiLiIpfSxzKSwoaD1sW2RdKXx8KGg9bFtkXT1bXSxoLmRlbGVnYXRlQ291bnQ9MCxmLnNldHVwJiZmLnNldHVwLmNhbGwoZSxpLGcsYSkhPT0hMXx8ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoZCxhLCExKSksZi5hZGQmJihmLmFkZC5jYWxsKGUscCkscC5oYW5kbGVyLmd1aWR8fChwLmhhbmRsZXIuZ3VpZD1uLmd1aWQpKSxvP2guc3BsaWNlKGguZGVsZWdhdGVDb3VudCsrLDAscCk6aC5wdXNoKHApLHguZXZlbnQuZ2xvYmFsW2RdPSEwKTtlPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxzLGEsdSxsLGMscCxmLGgsZCxnLG09cS5oYXNEYXRhKGUpJiZxLmdldChlKTtpZihtJiYodT1tLmV2ZW50cykpe3Q9KHR8fCIiKS5tYXRjaCh3KXx8WyIiXSxsPXQubGVuZ3RoO3doaWxlKGwtLSlpZihhPVguZXhlYyh0W2xdKXx8W10saD1nPWFbMV0sZD0oYVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGgpe3A9eC5ldmVudC5zcGVjaWFsW2hdfHx7fSxoPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxoLGY9dVtoXXx8W10sYT1hWzJdJiZSZWdFeHAoIihefFxcLikiK2Quam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIikscz1vPWYubGVuZ3RoO3doaWxlKG8tLSljPWZbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fGEmJiFhLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChmLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJmYuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsYykpO3MmJiFmLmxlbmd0aCYmKHAudGVhcmRvd24mJnAudGVhcmRvd24uY2FsbChlLGQsbS5oYW5kbGUpIT09ITF8fHgucmVtb3ZlRXZlbnQoZSxoLG0uaGFuZGxlKSxkZWxldGUgdVtoXSl9ZWxzZSBmb3IoaCBpbiB1KXguZXZlbnQucmVtb3ZlKGUsaCt0W2xdLG4sciwhMCk7eC5pc0VtcHR5T2JqZWN0KHUpJiYoZGVsZXRlIG0uaGFuZGxlLHEucmVtb3ZlKGUsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24odCxuLHIsaSl7dmFyIHMsYSx1LGwsYyxwLGYsaD1bcnx8b10sZD15LmNhbGwodCwidHlwZSIpP3QudHlwZTp0LGc9eS5jYWxsKHQsIm5hbWVzcGFjZSIpP3QubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoYT11PXI9cnx8bywzIT09ci5ub2RlVHlwZSYmOCE9PXIubm9kZVR5cGUmJiFfLnRlc3QoZCt4LmV2ZW50LnRyaWdnZXJlZCkmJihkLmluZGV4T2YoIi4iKT49MCYmKGc9ZC5zcGxpdCgiLiIpLGQ9Zy5zaGlmdCgpLGcuc29ydCgpKSxjPTA+ZC5pbmRleE9mKCI6IikmJiJvbiIrZCx0PXRbeC5leHBhbmRvXT90Om5ldyB4LkV2ZW50KGQsIm9iamVjdCI9PXR5cGVvZiB0JiZ0KSx0LmlzVHJpZ2dlcj1pPzI6Myx0Lm5hbWVzcGFjZT1nLmpvaW4oIi4iKSx0Lm5hbWVzcGFjZV9yZT10Lm5hbWVzcGFjZT9SZWdFeHAoIihefFxcLikiK2cuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCx0LnJlc3VsdD11bmRlZmluZWQsdC50YXJnZXR8fCh0LnRhcmdldD1yKSxuPW51bGw9PW4/W3RdOngubWFrZUFycmF5KG4sW3RdKSxmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30saXx8IWYudHJpZ2dlcnx8Zi50cmlnZ2VyLmFwcGx5KHIsbikhPT0hMSkpe2lmKCFpJiYhZi5ub0J1YmJsZSYmIXguaXNXaW5kb3cocikpe2ZvcihsPWYuZGVsZWdhdGVUeXBlfHxkLF8udGVzdChsK2QpfHwoYT1hLnBhcmVudE5vZGUpO2E7YT1hLnBhcmVudE5vZGUpaC5wdXNoKGEpLHU9YTt1PT09KHIub3duZXJEb2N1bWVudHx8bykmJmgucHVzaCh1LmRlZmF1bHRWaWV3fHx1LnBhcmVudFdpbmRvd3x8ZSl9cz0wO3doaWxlKChhPWhbcysrXSkmJiF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpdC50eXBlPXM+MT9sOmYuYmluZFR5cGV8fGQscD0ocS5nZXQoYSwiZXZlbnRzIil8fHt9KVt0LnR5cGVdJiZxLmdldChhLCJoYW5kbGUiKSxwJiZwLmFwcGx5KGEsbikscD1jJiZhW2NdLHAmJnguYWNjZXB0RGF0YShhKSYmcC5hcHBseSYmcC5hcHBseShhLG4pPT09ITEmJnQucHJldmVudERlZmF1bHQoKTtyZXR1cm4gdC50eXBlPWQsaXx8dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Zi5fZGVmYXVsdCYmZi5fZGVmYXVsdC5hcHBseShoLnBvcCgpLG4pIT09ITF8fCF4LmFjY2VwdERhdGEocil8fGMmJnguaXNGdW5jdGlvbihyW2RdKSYmIXguaXNXaW5kb3cocikmJih1PXJbY10sdSYmKHJbY109bnVsbCkseC5ldmVudC50cmlnZ2VyZWQ9ZCxyW2RdKCkseC5ldmVudC50cmlnZ2VyZWQ9dW5kZWZpbmVkLHUmJihyW2NdPXUpKSx0LnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe2U9eC5ldmVudC5maXgoZSk7dmFyIHQsbixyLGksbyxzPVtdLGE9ZC5jYWxsKGFyZ3VtZW50cyksdT0ocS5nZXQodGhpcywiZXZlbnRzIil8fHt9KVtlLnR5cGVdfHxbXSxsPXguZXZlbnQuc3BlY2lhbFtlLnR5cGVdfHx7fTtpZihhWzBdPWUsZS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFsLnByZURpc3BhdGNofHxsLnByZURpc3BhdGNoLmNhbGwodGhpcyxlKSE9PSExKXtzPXguZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGUsdSksdD0wO3doaWxlKChpPXNbdCsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2UuY3VycmVudFRhcmdldD1pLmVsZW0sbj0wO3doaWxlKChvPWkuaGFuZGxlcnNbbisrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFlLm5hbWVzcGFjZV9yZXx8ZS5uYW1lc3BhY2VfcmUudGVzdChvLm5hbWVzcGFjZSkpJiYoZS5oYW5kbGVPYmo9byxlLmRhdGE9by5kYXRhLHI9KCh4LmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLGEpLHIhPT11bmRlZmluZWQmJihlLnJlc3VsdD1yKT09PSExJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gbC5wb3N0RGlzcGF0Y2gmJmwucG9zdERpc3BhdGNoLmNhbGwodGhpcyxlKSxlLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8scz1bXSxhPXQuZGVsZWdhdGVDb3VudCx1PWUudGFyZ2V0O2lmKGEmJnUubm9kZVR5cGUmJighZS5idXR0b258fCJjbGljayIhPT1lLnR5cGUpKWZvcig7dSE9PXRoaXM7dT11LnBhcmVudE5vZGV8fHRoaXMpaWYodS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09ZS50eXBlKXtmb3Iocj1bXSxuPTA7YT5uO24rKylvPXRbbl0saT1vLnNlbGVjdG9yKyIgIixyW2ldPT09dW5kZWZpbmVkJiYocltpXT1vLm5lZWRzQ29udGV4dD94KGksdGhpcykuaW5kZXgodSk+PTA6eC5maW5kKGksdGhpcyxudWxsLFt1XSkubGVuZ3RoKSxyW2ldJiZyLnB1c2gobyk7ci5sZW5ndGgmJnMucHVzaCh7ZWxlbTp1LGhhbmRsZXJzOnJ9KX1yZXR1cm4gdC5sZW5ndGg+YSYmcy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6dC5zbGljZShhKX0pLHN9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscz10LmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS5wYWdlWCYmbnVsbCE9dC5jbGllbnRYJiYobj1lLnRhcmdldC5vd25lckRvY3VtZW50fHxvLHI9bi5kb2N1bWVudEVsZW1lbnQsaT1uLmJvZHksZS5wYWdlWD10LmNsaWVudFgrKHImJnIuc2Nyb2xsTGVmdHx8aSYmaS5zY3JvbGxMZWZ0fHwwKS0ociYmci5jbGllbnRMZWZ0fHxpJiZpLmNsaWVudExlZnR8fDApLGUucGFnZVk9dC5jbGllbnRZKyhyJiZyLnNjcm9sbFRvcHx8aSYmaS5zY3JvbGxUb3B8fDApLShyJiZyLmNsaWVudFRvcHx8aSYmaS5jbGllbnRUb3B8fDApKSxlLndoaWNofHxzPT09dW5kZWZpbmVkfHwoZS53aGljaD0xJnM/MToyJnM/Mzo0JnM/MjowKSxlfX0sZml4OmZ1bmN0aW9uKGUpe2lmKGVbeC5leHBhbmRvXSlyZXR1cm4gZTt2YXIgdCxuLHIsaT1lLnR5cGUscz1lLGE9dGhpcy5maXhIb29rc1tpXTthfHwodGhpcy5maXhIb29rc1tpXT1hPXoudGVzdChpKT90aGlzLm1vdXNlSG9va3M6SS50ZXN0KGkpP3RoaXMua2V5SG9va3M6e30pLHI9YS5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChhLnByb3BzKTp0aGlzLnByb3BzLGU9bmV3IHguRXZlbnQocyksdD1yLmxlbmd0aDt3aGlsZSh0LS0pbj1yW3RdLGVbbl09c1tuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1vKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxhLmZpbHRlcj9hLmZpbHRlcihlLHMpOmV9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09VigpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnVuZGVmaW5lZH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09VigpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp1bmRlZmluZWR9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJngubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp1bmRlZmluZWR9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLnJlc3VsdCE9PXVuZGVmaW5lZCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5leHRlbmQobmV3IHguRXZlbnQsbix7dHlwZTplLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtyP3guZXZlbnQudHJpZ2dlcihpLG51bGwsdCk6eC5ldmVudC5kaXNwYXRjaC5jYWxsKHQsaSksaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmbi5wcmV2ZW50RGVmYXVsdCgpfX0seC5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX0seC5FdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgeC5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP1U6WSk6dGhpcy50eXBlPWUsdCYmeC5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8eC5ub3coKSx0aGlzW3guZXhwYW5kb109ITAsdW5kZWZpbmVkKTpuZXcgeC5FdmVudChlLHQpfSx4LkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOlksaXNQcm9wYWdhdGlvblN0b3BwZWQ6WSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpZLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVUsZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1VLGUmJmUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVUsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LHguZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9LGZ1bmN0aW9uKGUsdCl7eC5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtyZXR1cm4oIWl8fGkhPT1yJiYheC5jb250YWlucyhyLGkpKSYmKGUudHlwZT1vLm9yaWdUeXBlLG49by5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9dCksbn19fSkseC5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHx4LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe3guZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCx4LmV2ZW50LmZpeChlKSwhMCl9O3guZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSkseC5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8scztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgdCYmKG49bnx8dCx0PXVuZGVmaW5lZCk7Zm9yKHMgaW4gZSl0aGlzLm9uKHMsdCxuLGVbc10saSk7cmV0dXJuIHRoaXN9aWYobnVsbD09biYmbnVsbD09cj8ocj10LG49dD11bmRlZmluZWQpOm51bGw9PXImJigic3RyaW5nIj09dHlwZW9mIHQ/KHI9bixuPXVuZGVmaW5lZCk6KHI9bixuPXQsdD11bmRlZmluZWQpKSxyPT09ITEpcj1ZO2Vsc2UgaWYoIXIpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1pJiYobz1yLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHgoKS5vZmYoZSksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHIuZ3VpZD1vLmd1aWR8fChvLmd1aWQ9eC5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LmFkZCh0aGlzLGUscixuLHQpfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmoseChlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybih0PT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiB0KSYmKG49dCx0PXVuZGVmaW5lZCksbj09PSExJiYobj1ZKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnJlbW92ZSh0aGlzLGUsbix0KX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO3JldHVybiBuP3guZXZlbnQudHJpZ2dlcihlLHQsbiwhMCk6dW5kZWZpbmVkfX0pO3ZhciBHPS9eLlteOiNcW1wuLF0qJC8sSj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxRPXguZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsSz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt4LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9dGhpcyxpPXIubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soeChlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO2k+dDt0KyspaWYoeC5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2Zvcih0PTA7aT50O3QrKyl4LmZpbmQoZSxyW3RdLG4pO3JldHVybiBuPXRoaXMucHVzaFN0YWNrKGk+MT94LnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrZTplLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdD14KGUsdGhpcyksbj10Lmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT0wO2Zvcig7bj5lO2UrKylpZih4LmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhldCh0aGlzLGV8fFtdLCEwKSl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZXQodGhpcyxlfHxbXSwhMSkpfSxpczpmdW5jdGlvbihlKXtyZXR1cm4hIWV0KHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZRLnRlc3QoZSk/eChlKTplfHxbXSwhMSkubGVuZ3RofSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgsbz1bXSxzPVEudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP3goZSx0fHx0aGlzLmNvbnRleHQpOjA7Zm9yKDtpPnI7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYoMTE+bi5ub2RlVHlwZSYmKHM/cy5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmeC5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7bj1vLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubGVuZ3RoPjE/eC51bmlxdWUobyk6byl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlPyJzdHJpbmciPT10eXBlb2YgZT9nLmNhbGwoeChlKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7dmFyIG49InN0cmluZyI9PXR5cGVvZiBlP3goZSx0KTp4Lm1ha2VBcnJheShlJiZlLm5vZGVUeXBlP1tlXTplKSxyPXgubWVyZ2UodGhpcy5nZXQoKSxuKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeC51bmlxdWUocikpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KTtmdW5jdGlvbiBaKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX14LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFooZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gWihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50RG9jdW1lbnR8fHgubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihuLHIpe3ZhciBpPXgubWFwKHRoaXMsdCxuKTtyZXR1cm4iVW50aWwiIT09ZS5zbGljZSgtNSkmJihyPW4pLHImJiJzdHJpbmciPT10eXBlb2YgciYmKGk9eC5maWx0ZXIocixpKSksdGhpcy5sZW5ndGg+MSYmKEtbZV18fHgudW5pcXVlKGkpLEoudGVzdChlKSYmaS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pLHguZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07cmV0dXJuIG4mJihlPSI6bm90KCIrZSsiKSIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/eC5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTp4LmZpbmQubWF0Y2hlcyhlLHguZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sZGlyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxpPW4hPT11bmRlZmluZWQ7d2hpbGUoKGU9ZVt0XSkmJjkhPT1lLm5vZGVUeXBlKWlmKDE9PT1lLm5vZGVUeXBlKXtpZihpJiZ4KGUpLmlzKG4pKWJyZWFrO3IucHVzaChlKX1yZXR1cm4gcn0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gZXQoZSx0LG4pe2lmKHguaXNGdW5jdGlvbih0KSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4hIXQuY2FsbChlLHIsZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoRy50ZXN0KHQpKXJldHVybiB4LmZpbHRlcih0LGUsbik7dD14LmZpbHRlcih0LGUpfXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZy5jYWxsKHQsZSk+PTAhPT1ufSl9dmFyIHR0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksbnQ9LzwoW1x3Ol0rKS8scnQ9Lzx8JiM/XHcrOy8saXQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxvdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxzdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxhdD0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksdXQ9L150cnVlXC8oLiopLyxsdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csY3Q9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtjdC5vcHRncm91cD1jdC5vcHRpb24sY3QudGJvZHk9Y3QudGZvb3Q9Y3QuY29sZ3JvdXA9Y3QuY2FwdGlvbj1jdC50aGVhZCxjdC50aD1jdC50ZCx4LmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihlKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXVuZGVmaW5lZD94LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxvKS5jcmVhdGVUZXh0Tm9kZShlKSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1wdCh0aGlzLGUpO3QuYXBwZW5kQ2hpbGQoZSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PXB0KHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lP3guZmlsdGVyKGUsdGhpcyk6dGhpcyxpPTA7Zm9yKDtudWxsIT0obj1yW2ldKTtpKyspdHx8MSE9PW4ubm9kZVR5cGV8fHguY2xlYW5EYXRhKG10KG4pKSxuLnBhcmVudE5vZGUmJih0JiZ4LmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKSYmZHQobXQobiwic2NyaXB0IikpLG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoeC5jbGVhbkRhdGEobXQoZSwhMSkpLGUudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHguY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYoZT09PXVuZGVmaW5lZCYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmIWl0LnRlc3QoZSkmJiFjdFsobnQuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9ZS5yZXBsYWNlKHR0LCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtyPm47bisrKXQ9dGhpc1tuXXx8e30sMT09PXQubm9kZVR5cGUmJih4LmNsZWFuRGF0YShtdCh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKGkpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPXgubWFwKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuW2UubmV4dFNpYmxpbmcsZS5wYXJlbnROb2RlXX0pLHQ9MDtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24obil7dmFyIHI9ZVt0KytdLGk9ZVt0KytdO2kmJihyJiZyLnBhcmVudE5vZGUhPT1pJiYocj10aGlzLm5leHRTaWJsaW5nKSx4KHRoaXMpLnJlbW92ZSgpLGkuaW5zZXJ0QmVmb3JlKG4scikpfSwhMCksdD90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsdCxuKXtlPWYuYXBwbHkoW10sZSk7dmFyIHIsaSxvLHMsYSx1LGw9MCxjPXRoaXMubGVuZ3RoLHA9dGhpcyxoPWMtMSxkPWVbMF0sZz14LmlzRnVuY3Rpb24oZCk7aWYoZ3x8ISgxPj1jfHwic3RyaW5nIiE9dHlwZW9mIGR8fHguc3VwcG9ydC5jaGVja0Nsb25lKSYmc3QudGVzdChkKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBpPXAuZXEocik7ZyYmKGVbMF09ZC5jYWxsKHRoaXMscixpLmh0bWwoKSkpLGkuZG9tTWFuaXAoZSx0LG4pfSk7aWYoYyYmKHI9eC5idWlsZEZyYWdtZW50KGUsdGhpc1swXS5vd25lckRvY3VtZW50LCExLCFuJiZ0aGlzKSxpPXIuZmlyc3RDaGlsZCwxPT09ci5jaGlsZE5vZGVzLmxlbmd0aCYmKHI9aSksaSkpe2ZvcihvPXgubWFwKG10KHIsInNjcmlwdCIpLGZ0KSxzPW8ubGVuZ3RoO2M+bDtsKyspYT1yLGwhPT1oJiYoYT14LmNsb25lKGEsITAsITApLHMmJngubWVyZ2UobyxtdChhLCJzY3JpcHQiKSkpLHQuY2FsbCh0aGlzW2xdLGEsbCk7aWYocylmb3IodT1vW28ubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQseC5tYXAobyxodCksbD0wO3M+bDtsKyspYT1vW2xdLGF0LnRlc3QoYS50eXBlfHwiIikmJiFxLmFjY2VzcyhhLCJnbG9iYWxFdmFsIikmJnguY29udGFpbnModSxhKSYmKGEuc3JjP3guX2V2YWxVcmwoYS5zcmMpOnguZ2xvYmFsRXZhbChhLnRleHRDb250ZW50LnJlcGxhY2UobHQsIiIpKSl9cmV0dXJuIHRoaXN9fSkseC5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9W10saT14KGUpLG89aS5sZW5ndGgtMSxzPTA7Zm9yKDtvPj1zO3MrKyluPXM9PT1vP3RoaXM6dGhpcy5jbG9uZSghMCkseChpW3NdKVt0XShuKSxoLmFwcGx5KHIsbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pLHguZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYT1lLmNsb25lTm9kZSghMCksdT14LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKTtpZighKHguc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8eC5pc1hNTERvYyhlKSkpZm9yKHM9bXQoYSksbz1tdChlKSxyPTAsaT1vLmxlbmd0aDtpPnI7cisrKXl0KG9bcl0sc1tyXSk7aWYodClpZihuKWZvcihvPW98fG10KGUpLHM9c3x8bXQoYSkscj0wLGk9by5sZW5ndGg7aT5yO3IrKylndChvW3JdLHNbcl0pO2Vsc2UgZ3QoZSxhKTtyZXR1cm4gcz1tdChhLCJzY3JpcHQiKSxzLmxlbmd0aD4wJiZkdChzLCF1JiZtdChlLCJzY3JpcHQiKSksYX0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLHMsYSx1LGwsYz0wLHA9ZS5sZW5ndGgsZj10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxoPVtdO2Zvcig7cD5jO2MrKylpZihpPWVbY10saXx8MD09PWkpaWYoIm9iamVjdCI9PT14LnR5cGUoaSkpeC5tZXJnZShoLGkubm9kZVR5cGU/W2ldOmkpO2Vsc2UgaWYocnQudGVzdChpKSl7bz1vfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiZGl2IikpLHM9KG50LmV4ZWMoaSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksYT1jdFtzXXx8Y3QuX2RlZmF1bHQsby5pbm5lckhUTUw9YVsxXStpLnJlcGxhY2UodHQsIjwkMT48LyQyPiIpK2FbMl0sbD1hWzBdO3doaWxlKGwtLSlvPW8ubGFzdENoaWxkO3gubWVyZ2UoaCxvLmNoaWxkTm9kZXMpLG89Zi5maXJzdENoaWxkLG8udGV4dENvbnRlbnQ9IiJ9ZWxzZSBoLnB1c2godC5jcmVhdGVUZXh0Tm9kZShpKSk7Zi50ZXh0Q29udGVudD0iIixjPTA7d2hpbGUoaT1oW2MrK10paWYoKCFyfHwtMT09PXguaW5BcnJheShpLHIpKSYmKHU9eC5jb250YWlucyhpLm93bmVyRG9jdW1lbnQsaSksbz1tdChmLmFwcGVuZENoaWxkKGkpLCJzY3JpcHQiKSx1JiZkdChvKSxuKSl7bD0wO3doaWxlKGk9b1tsKytdKWF0LnRlc3QoaS50eXBlfHwiIikmJm4ucHVzaChpKX1yZXR1cm4gZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scyxhPXguZXZlbnQuc3BlY2lhbCx1PTA7Zm9yKDsobj1lW3VdKSE9PXVuZGVmaW5lZDt1Kyspe2lmKEYuYWNjZXB0cyhuKSYmKG89bltxLmV4cGFuZG9dLG8mJih0PXEuY2FjaGVbb10pKSl7aWYocj1PYmplY3Qua2V5cyh0LmV2ZW50c3x8e30pLHIubGVuZ3RoKWZvcihzPTA7KGk9cltzXSkhPT11bmRlZmluZWQ7cysrKWFbaV0/eC5ldmVudC5yZW1vdmUobixpKTp4LnJlbW92ZUV2ZW50KG4saSx0LmhhbmRsZSk7cS5jYWNoZVtvXSYmZGVsZXRlIHEuY2FjaGVbb119ZGVsZXRlIEwuY2FjaGVbbltMLmV4cGFuZG9dXX19LF9ldmFsVXJsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9fSk7ZnVuY3Rpb24gcHQoZSx0KXtyZXR1cm4geC5ub2RlTmFtZShlLCJ0YWJsZSIpJiZ4Lm5vZGVOYW1lKDE9PT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fGUuYXBwZW5kQ2hpbGQoZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOmV9ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBodChlKXt2YXIgdD11dC5leGVjKGUudHlwZSk7cmV0dXJuIHQ/ZS50eXBlPXRbMV06ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIGR0KGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO2Zvcig7bj5yO3IrKylxLnNldChlW3JdLCJnbG9iYWxFdmFsIiwhdHx8cS5nZXQodFtyXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBndChlLHQpe3ZhciBuLHIsaSxvLHMsYSx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKHEuaGFzRGF0YShlKSYmKG89cS5hY2Nlc3MoZSkscz1xLnNldCh0LG8pLGw9by5ldmVudHMpKXtkZWxldGUgcy5oYW5kbGUscy5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7cj5uO24rKyl4LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9TC5oYXNEYXRhKGUpJiYoYT1MLmFjY2VzcyhlKSx1PXguZXh0ZW5kKHt9LGEpLEwuc2V0KHQsdSkpfX1mdW5jdGlvbiBtdChlLHQpe3ZhciBuPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOmUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXTtyZXR1cm4gdD09PXVuZGVmaW5lZHx8dCYmeC5ub2RlTmFtZShlLHQpP3gubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24geXQoZSx0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PW4mJm90LnRlc3QoZS50eXBlKT90LmNoZWNrZWQ9ZS5jaGVja2VkOigiaW5wdXQiPT09bnx8InRleHRhcmVhIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfXguZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KToodGhpc1swXSYmKHQ9eChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGUpe3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXgodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5pc0Z1bmN0aW9uKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7eCh0aGlzKS53cmFwQWxsKHQ/ZS5jYWxsKHRoaXMsbik6ZSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe3gubm9kZU5hbWUodGhpcywiYm9keSIpfHx4KHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTt2YXIgdnQseHQsYnQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLHd0PS9ebWFyZ2luLyxUdD1SZWdFeHAoIl4oIitiKyIpKC4qKSQiLCJpIiksQ3Q9UmVnRXhwKCJeKCIrYisiKSg/IXB4KVthLXolXSskIiwiaSIpLGt0PVJlZ0V4cCgiXihbKy1dKT0oIitiKyIpIiwiaSIpLE50PXtCT0RZOiJibG9jayJ9LEV0PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxTdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxqdD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLER0PVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gQXQoZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPUR0Lmxlbmd0aDt3aGlsZShpLS0paWYodD1EdFtpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBMdChlLHQpe3JldHVybiBlPXR8fGUsIm5vbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpfHwheC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gcXQodCl7cmV0dXJuIGUuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpfWZ1bmN0aW9uIEh0KGUsdCl7dmFyIG4scixpLG89W10scz0wLGE9ZS5sZW5ndGg7Zm9yKDthPnM7cysrKXI9ZVtzXSxyLnN0eWxlJiYob1tzXT1xLmdldChyLCJvbGRkaXNwbGF5Iiksbj1yLnN0eWxlLmRpc3BsYXksdD8ob1tzXXx8Im5vbmUiIT09bnx8KHIuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJkx0KHIpJiYob1tzXT1xLmFjY2VzcyhyLCJvbGRkaXNwbGF5IixSdChyLm5vZGVOYW1lKSkpKTpvW3NdfHwoaT1MdChyKSwobiYmIm5vbmUiIT09bnx8IWkpJiZxLnNldChyLCJvbGRkaXNwbGF5IixpP246eC5jc3MociwiZGlzcGxheSIpKSkpO2ZvcihzPTA7YT5zO3MrKylyPWVbc10sci5zdHlsZSYmKHQmJiJub25lIiE9PXIuc3R5bGUuZGlzcGxheSYmIiIhPT1yLnN0eWxlLmRpc3BsYXl8fChyLnN0eWxlLmRpc3BsYXk9dD9vW3NdfHwiIjoibm9uZSIpKTtyZXR1cm4gZX14LmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxzPTA7aWYoeC5pc0FycmF5KHQpKXtmb3Iocj1xdChlKSxpPXQubGVuZ3RoO2k+cztzKyspb1t0W3NdXT14LmNzcyhlLHRbc10sITEscik7cmV0dXJuIG99cmV0dXJuIG4hPT11bmRlZmluZWQ/eC5zdHlsZShlLHQsbik6eC5jc3MoZSx0KX0sZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSHQodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSHQodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7THQodGhpcyk/eCh0aGlzKS5zaG93KCk6eCh0aGlzKS5oaWRlKCl9KX19KSx4LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPXZ0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCksdT1lLnN0eWxlO3JldHVybiB0PXguY3NzUHJvcHNbYV18fCh4LmNzc1Byb3BzW2FdPUF0KHUsYSkpLHM9eC5jc3NIb29rc1t0XXx8eC5jc3NIb29rc1thXSxuPT09dW5kZWZpbmVkP3MmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMSxyKSkhPT11bmRlZmluZWQ/aTp1W3RdOihvPXR5cGVvZiBuLCJzdHJpbmciPT09byYmKGk9a3QuZXhlYyhuKSkmJihuPShpWzFdKzEpKmlbMl0rcGFyc2VGbG9hdCh4LmNzcyhlLHQpKSxvPSJudW1iZXIiKSxudWxsPT1ufHwibnVtYmVyIj09PW8mJmlzTmFOKG4pfHwoIm51bWJlciIhPT1vfHx4LmNzc051bWJlclthXXx8KG4rPSJweCIpLHguc3VwcG9ydC5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwodVt0XT0iaW5oZXJpdCIpLHMmJiJzZXQiaW4gcyYmKG49cy5zZXQoZSxuLHIpKT09PXVuZGVmaW5lZHx8KHVbdF09bikpLHVuZGVmaW5lZCl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCk7cmV0dXJuIHQ9eC5jc3NQcm9wc1thXXx8KHguY3NzUHJvcHNbYV09QXQoZS5zdHlsZSxhKSkscz14LmNzc0hvb2tzW3RdfHx4LmNzc0hvb2tzW2FdLHMmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMCxuKSksaT09PXVuZGVmaW5lZCYmKGk9dnQoZSx0LHIpKSwibm9ybWFsIj09PWkmJnQgaW4gU3QmJihpPVN0W3RdKSwiIj09PW58fG4/KG89cGFyc2VGbG9hdChpKSxuPT09ITB8fHguaXNOdW1lcmljKG8pP298fDA6aSk6aX19KSx2dD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9bnx8cXQoZSksYT1zP3MuZ2V0UHJvcGVydHlWYWx1ZSh0KXx8c1t0XTp1bmRlZmluZWQsdT1lLnN0eWxlO3JldHVybiBzJiYoIiIhPT1hfHx4LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KGE9eC5zdHlsZShlLHQpKSxDdC50ZXN0KGEpJiZ3dC50ZXN0KHQpJiYocj11LndpZHRoLGk9dS5taW5XaWR0aCxvPXUubWF4V2lkdGgsdS5taW5XaWR0aD11Lm1heFdpZHRoPXUud2lkdGg9YSxhPXMud2lkdGgsdS53aWR0aD1yLHUubWluV2lkdGg9aSx1Lm1heFdpZHRoPW8pKSxhfTtmdW5jdGlvbiBPdChlLHQsbil7dmFyIHI9VHQuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMV0tKG58fDApKSsoclsyXXx8InB4Iik6dH1mdW5jdGlvbiBGdChlLHQsbixyLGkpe3ZhciBvPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PXQ/MTowLHM9MDtmb3IoOzQ+bztvKz0yKSJtYXJnaW4iPT09biYmKHMrPXguY3NzKGUsbitqdFtvXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKHMtPXguY3NzKGUsInBhZGRpbmciK2p0W29dLCEwLGkpKSwibWFyZ2luIiE9PW4mJihzLT14LmNzcyhlLCJib3JkZXIiK2p0W29dKyJXaWR0aCIsITAsaSkpKToocys9eC5jc3MoZSwicGFkZGluZyIranRbb10sITAsaSksInBhZGRpbmciIT09biYmKHMrPXguY3NzKGUsImJvcmRlciIranRbb10rIldpZHRoIiwhMCxpKSkpO3JldHVybiBzfWZ1bmN0aW9uIFB0KGUsdCxuKXt2YXIgcj0hMCxpPSJ3aWR0aCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1xdChlKSxzPXguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsbyk7aWYoMD49aXx8bnVsbD09aSl7aWYoaT12dChlLHQsbyksKDA+aXx8bnVsbD09aSkmJihpPWUuc3R5bGVbdF0pLEN0LnRlc3QoaSkpcmV0dXJuIGk7cj1zJiYoeC5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxpPT09ZS5zdHlsZVt0XSksaT1wYXJzZUZsb2F0KGkpfHwwfXJldHVybiBpK0Z0KGUsdCxufHwocz8iYm9yZGVyIjoiY29udGVudCIpLHIsbykrInB4In1mdW5jdGlvbiBSdChlKXt2YXIgdD1vLG49TnRbZV07cmV0dXJuIG58fChuPU10KGUsdCksIm5vbmUiIT09biYmbnx8KHh0PSh4dHx8eCgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpLmNzcygiY3NzVGV4dCIsImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudCIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksdD0oeHRbMF0uY29udGVudFdpbmRvd3x8eHRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCx0LndyaXRlKCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT4iKSx0LmNsb3NlKCksbj1NdChlLHQpLHh0LmRldGFjaCgpKSxOdFtlXT1uKSxufWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49eCh0LmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKHQuYm9keSkscj14LmNzcyhuWzBdLCJkaXNwbGF5Iik7cmV0dXJuIG4ucmVtb3ZlKCkscn14LmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbj8wPT09ZS5vZmZzZXRXaWR0aCYmYnQudGVzdCh4LmNzcyhlLCJkaXNwbGF5IikpP3guc3dhcChlLEV0LGZ1bmN0aW9uKCl7cmV0dXJuIFB0KGUsdCxyKX0pOlB0KGUsdCxyKTp1bmRlZmluZWR9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ciYmcXQoZSk7cmV0dXJuIE90KGUsbixyP0Z0KGUsdCxyLHguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLHgoZnVuY3Rpb24oKXt4LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHguY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB0P3guc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSx2dCxbZSwibWFyZ2luUmlnaHQiXSk6dW5kZWZpbmVkfX0pLCF4LnN1cHBvcnQucGl4ZWxQb3NpdGlvbiYmeC5mbi5wb3NpdGlvbiYmeC5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49dnQoZSx0KSxDdC50ZXN0KG4pP3goZSkucG9zaXRpb24oKVt0XSsicHgiOm4pOnVuZGVmaW5lZH19fSl9KSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiAwPj1lLm9mZnNldFdpZHRoJiYwPj1lLm9mZnNldEhlaWdodH0seC5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4heC5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSkseC5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK2p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LHd0LnRlc3QoZSl8fCh4LmNzc0hvb2tzW2UrdF0uc2V0PU90KX0pO3ZhciBXdD0vJTIwL2csJHQ9L1xbXF0kLyxCdD0vXHI/XG4vZyxJdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksenQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO3guZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4geC5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXgucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP3gubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXgodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6dC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhSXQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IW90LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49eCh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOnguaXNBcnJheShuKT94Lm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoQnQsIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKEJ0LCJcclxuIil9fSkuZ2V0KCl9fSkseC5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3Q9eC5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQscltyLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKHQ9PT11bmRlZmluZWQmJih0PXguYWpheFNldHRpbmdzJiZ4LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCkseC5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIXguaXNQbGFpbk9iamVjdChlKSl4LmVhY2goZSxmdW5jdGlvbigpe2kodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKV90KG4sZVtuXSx0LGkpO3JldHVybiByLmpvaW4oIiYiKS5yZXBsYWNlKFd0LCIrIil9O2Z1bmN0aW9uIF90KGUsdCxuLHIpe3ZhciBpO2lmKHguaXNBcnJheSh0KSl4LmVhY2godCxmdW5jdGlvbih0LGkpe258fCR0LnRlc3QoZSk/cihlLGkpOl90KGUrIlsiKygib2JqZWN0Ij09dHlwZW9mIGk/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYobnx8Im9iamVjdCIhPT14LnR5cGUodCkpcihlLHQpO2Vsc2UgZm9yKGkgaW4gdClfdChlKyJbIitpKyJdIix0W2ldLG4scil9eC5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7eC5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSkseC5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfSxiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KTt2YXIgWHQsVXQsWXQ9eC5ub3coKSxWdD0vXD8vLEd0PS8jLiokLyxKdD0vKFs/Jl0pXz1bXiZdKi8sUXQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxLdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxadD0vXig/OkdFVHxIRUFEKSQvLGVuPS9eXC9cLy8sdG49L14oW1x3ListXSs6KSg/OlwvXC8oW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLG5uPXguZm4ubG9hZCxybj17fSxvbj17fSxzbj0iKi8iLmNvbmNhdCgiKiIpO3RyeXtVdD1pLmhyZWZ9Y2F0Y2goYW4pe1V0PW8uY3JlYXRlRWxlbWVudCgiYSIpLFV0LmhyZWY9IiIsVXQ9VXQuaHJlZn1YdD10bi5leGVjKFV0LnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiB1bihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPXQsdD0iKiIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W107aWYoeC5pc0Z1bmN0aW9uKG4pKXdoaWxlKHI9b1tpKytdKSIrIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8IioiLChlW3JdPWVbcl18fFtdKS51bnNoaWZ0KG4pKTooZVtyXT1lW3JdfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gbG4oZSx0LG4scil7dmFyIGk9e30sbz1lPT09b247ZnVuY3Rpb24gcyhhKXt2YXIgdTtyZXR1cm4gaVthXT0hMCx4LmVhY2goZVthXXx8W10sZnVuY3Rpb24oZSxhKXt2YXIgbD1hKHQsbixyKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGx8fG98fGlbbF0/bz8hKHU9bCk6dW5kZWZpbmVkOih0LmRhdGFUeXBlcy51bnNoaWZ0KGwpLHMobCksITEpfSksdX1yZXR1cm4gcyh0LmRhdGFUeXBlc1swXSl8fCFpWyIqIl0mJnMoIioiKX1mdW5jdGlvbiBjbihlLHQpe3ZhciBuLHIsaT14LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl0W25dIT09dW5kZWZpbmVkJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZ4LmV4dGVuZCghMCxlLHIpLGV9eC5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJm5uKXJldHVybiBubi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHIsaSxvLHM9dGhpcyxhPWUuaW5kZXhPZigiICIpO3JldHVybiBhPj0wJiYocj1lLnNsaWNlKGEpLGU9ZS5zbGljZSgwLGEpKSx4LmlzRnVuY3Rpb24odCk/KG49dCx0PXVuZGVmaW5lZCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLHMubGVuZ3RoPjAmJnguYWpheCh7dXJsOmUsdHlwZTppLGRhdGFUeXBlOiJodG1sIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHMuaHRtbChyP3goIjxkaXY+IikuYXBwZW5kKHgucGFyc2VIVE1MKGUpKS5maW5kKHIpOmUpfSkuY29tcGxldGUobiYmZnVuY3Rpb24oZSx0KXtzLmVhY2gobixvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KSx0aGlzfSx4LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSx4LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6VXQsdHlwZToiR0VUIixpc0xvY2FsOkt0LnRlc3QoWHRbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6c24sdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjp4LnBhcnNlSlNPTiwidGV4dCB4bWwiOngucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P2NuKGNuKGUseC5hamF4U2V0dGluZ3MpLHQpOmNuKHguYWpheFNldHRpbmdzLGUpfSxhamF4UHJlZmlsdGVyOnVuKHJuKSxhamF4VHJhbnNwb3J0OnVuKG9uKSxhamF4OmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBlJiYodD1lLGU9dW5kZWZpbmVkKSx0PXR8fHt9O3ZhciBuLHIsaSxvLHMsYSx1LGwsYz14LmFqYXhTZXR1cCh7fSx0KSxwPWMuY29udGV4dHx8YyxmPWMuY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT94KHApOnguZXZlbnQsaD14LkRlZmVycmVkKCksZD14LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxnPWMuc3RhdHVzQ29kZXx8e30sbT17fSx5PXt9LHY9MCxiPSJjYW5jZWxlZCIsVD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDI9PT12KXtpZighbyl7bz17fTt3aGlsZSh0PVF0LmV4ZWMoaSkpb1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1vW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/aTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoZT15W25dPXlbbl18fGUsbVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiB2fHwoYy5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoMj52KWZvcih0IGluIGUpZ1t0XT1bZ1t0XSxlW3RdXTtlbHNlIFQuYWx3YXlzKGVbVC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8YjtyZXR1cm4gbiYmbi5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKGgucHJvbWlzZShUKS5jb21wbGV0ZT1kLmFkZCxULnN1Y2Nlc3M9VC5kb25lLFQuZXJyb3I9VC5mYWlsLGMudXJsPSgoZXx8Yy51cmx8fFV0KSsiIikucmVwbGFjZShHdCwiIikucmVwbGFjZShlbixYdFsxXSsiLy8iKSxjLnR5cGU9dC5tZXRob2R8fHQudHlwZXx8Yy5tZXRob2R8fGMudHlwZSxjLmRhdGFUeXBlcz14LnRyaW0oYy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbIiJdLG51bGw9PWMuY3Jvc3NEb21haW4mJihhPXRuLmV4ZWMoYy51cmwudG9Mb3dlckNhc2UoKSksYy5jcm9zc0RvbWFpbj0hKCFhfHxhWzFdPT09WHRbMV0mJmFbMl09PT1YdFsyXSYmKGFbM118fCgiaHR0cDoiPT09YVsxXT8iODAiOiI0NDMiKSk9PT0oWHRbM118fCgiaHR0cDoiPT09WHRbMV0/IjgwIjoiNDQzIikpKSksYy5kYXRhJiZjLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGMuZGF0YSYmKGMuZGF0YT14LnBhcmFtKGMuZGF0YSxjLnRyYWRpdGlvbmFsKSksbG4ocm4sYyx0LFQpLDI9PT12KXJldHVybiBUO3U9Yy5nbG9iYWwsdSYmMD09PXguYWN0aXZlKysmJnguZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksYy50eXBlPWMudHlwZS50b1VwcGVyQ2FzZSgpLGMuaGFzQ29udGVudD0hWnQudGVzdChjLnR5cGUpLHI9Yy51cmwsYy5oYXNDb250ZW50fHwoYy5kYXRhJiYocj1jLnVybCs9KFZ0LnRlc3Qocik/IiYiOiI/IikrYy5kYXRhLGRlbGV0ZSBjLmRhdGEpLGMuY2FjaGU9PT0hMSYmKGMudXJsPUp0LnRlc3Qocik/ci5yZXBsYWNlKEp0LCIkMV89IitZdCsrKTpyKyhWdC50ZXN0KHIpPyImIjoiPyIpKyJfPSIrWXQrKykpLGMuaWZNb2RpZmllZCYmKHgubGFzdE1vZGlmaWVkW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIix4Lmxhc3RNb2RpZmllZFtyXSkseC5ldGFnW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLHguZXRhZ1tyXSkpLChjLmRhdGEmJmMuaGFzQ29udGVudCYmYy5jb250ZW50VHlwZSE9PSExfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGMuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixjLmRhdGFUeXBlc1swXSYmYy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXT9jLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dKygiKiIhPT1jLmRhdGFUeXBlc1swXT8iLCAiK3NuKyI7IHE9MC4wMSI6IiIpOmMuYWNjZXB0c1siKiJdKTtmb3IobCBpbiBjLmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGwsYy5oZWFkZXJzW2xdKTtpZihjLmJlZm9yZVNlbmQmJihjLmJlZm9yZVNlbmQuY2FsbChwLFQsYyk9PT0hMXx8Mj09PXYpKXJldHVybiBULmFib3J0KCk7Yj0iYWJvcnQiO2ZvcihsIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KVRbbF0oY1tsXSk7aWYobj1sbihvbixjLHQsVCkpe1QucmVhZHlTdGF0ZT0xLHUmJmYudHJpZ2dlcigiYWpheFNlbmQiLFtULGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHM9c2V0VGltZW91dChmdW5jdGlvbigpe1QuYWJvcnQoInRpbWVvdXQiKX0sYy50aW1lb3V0KSk7dHJ5e3Y9MSxuLnNlbmQobSxrKX1jYXRjaChDKXtpZighKDI+dikpdGhyb3cgQztrKC0xLEMpfX1lbHNlIGsoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGsoZSx0LG8sYSl7dmFyIGwsbSx5LGIsdyxDPXQ7MiE9PXYmJih2PTIscyYmY2xlYXJUaW1lb3V0KHMpLG49dW5kZWZpbmVkLGk9YXx8IiIsVC5yZWFkeVN0YXRlPWU+MD80OjAsbD1lPj0yMDAmJjMwMD5lfHwzMDQ9PT1lLG8mJihiPXBuKGMsVCxvKSksYj1mbihjLGIsVCxsKSxsPyhjLmlmTW9kaWZpZWQmJih3PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYoeC5sYXN0TW9kaWZpZWRbcl09dyksdz1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKHguZXRhZ1tyXT13KSksMjA0PT09ZXx8IkhFQUQiPT09Yy50eXBlP0M9Im5vY29udGVudCI6MzA0PT09ZT9DPSJub3Rtb2RpZmllZCI6KEM9Yi5zdGF0ZSxtPWIuZGF0YSx5PWIuZXJyb3IsbD0heSkpOih5PUMsKGV8fCFDKSYmKEM9ImVycm9yIiwwPmUmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fEMpKyIiLGw/aC5yZXNvbHZlV2l0aChwLFttLEMsVF0pOmgucmVqZWN0V2l0aChwLFtULEMseV0pLFQuc3RhdHVzQ29kZShnKSxnPXVuZGVmaW5lZCx1JiZmLnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULGMsbD9tOnldKSxkLmZpcmVXaXRoKHAsW1QsQ10pLHUmJihmLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1QsY10pLC0teC5hY3RpdmV8fHguZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguZ2V0KGUsdW5kZWZpbmVkLHQsInNjcmlwdCIpfX0pLHguZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe3hbdF09ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIHguaXNGdW5jdGlvbihuKSYmKGk9aXx8cixyPW4sbj11bmRlZmluZWQpLHguYWpheCh7dXJsOmUsdHlwZTp0LGRhdGFUeXBlOmksZGF0YTpuLHN1Y2Nlc3M6cn0pfX0pO2Z1bmN0aW9uIHBuKGUsdCxuKXt2YXIgcixpLG8scyxhPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSxyPT09dW5kZWZpbmVkJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBhKWlmKGFbaV0mJmFbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31zfHwocz1pKX1vPW98fHN9cmV0dXJuIG8/KG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXSk6dW5kZWZpbmVkfWZ1bmN0aW9uIGZuKGUsdCxuLHIpe3ZhciBpLG8scyxhLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IocyBpbiBlLmNvbnZlcnRlcnMpbFtzLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tzXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYocz1sW3UrIiAiK29dfHxsWyIqICIrb10sIXMpZm9yKGkgaW4gbClpZihhPWkuc3BsaXQoIiAiKSxhWzFdPT09byYmKHM9bFt1KyIgIithWzBdXXx8bFsiKiAiK2FbMF1dKSl7cz09PSEwP3M9bFtpXTpsW2ldIT09ITAmJihvPWFbMF0sYy51bnNoaWZ0KGFbMV0pKTticmVha31pZihzIT09ITApaWYocyYmZVsidGhyb3dzIl0pdD1zKHQpO2Vsc2UgdHJ5e3Q9cyh0KX1jYXRjaChwKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpzP3A6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19eC5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4geC5nbG9iYWxFdmFsKGUpLGV9fX0pLHguYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXtlLmNhY2hlPT09dW5kZWZpbmVkJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSx4LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIHQsbjtyZXR1cm57c2VuZDpmdW5jdGlvbihyLGkpe3Q9eCgiPHNjcmlwdD4iKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmUuc2NyaXB0Q2hhcnNldCxzcmM6ZS51cmx9KS5vbigibG9hZCBlcnJvciIsbj1mdW5jdGlvbihlKXt0LnJlbW92ZSgpLG49bnVsbCxlJiZpKCJlcnJvciI9PT1lLnR5cGU/NDA0OjIwMCxlLnR5cGUpfSksby5oZWFkLmFwcGVuZENoaWxkKHRbMF0pfSxhYm9ydDpmdW5jdGlvbigpe24mJm4oKX19fX0pO3ZhciBobj1bXSxkbj0vKD0pXD8oPz0mfCQpfFw/XD8vO3guYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1obi5wb3AoKXx8eC5leHBhbmRvKyJfIitZdCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSkseC5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbih0LG4scil7dmFyIGksbyxzLGE9dC5qc29ucCE9PSExJiYoZG4udGVzdCh0LnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiB0LmRhdGEmJiEodC5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZkbi50ZXN0KHQuZGF0YSkmJiJkYXRhIik7cmV0dXJuIGF8fCJqc29ucCI9PT10LmRhdGFUeXBlc1swXT8oaT10Lmpzb25wQ2FsbGJhY2s9eC5pc0Z1bmN0aW9uKHQuanNvbnBDYWxsYmFjayk/dC5qc29ucENhbGxiYWNrKCk6dC5qc29ucENhbGxiYWNrLGE/dFthXT10W2FdLnJlcGxhY2UoZG4sIiQxIitpKTp0Lmpzb25wIT09ITEmJih0LnVybCs9KFZ0LnRlc3QodC51cmwpPyImIjoiPyIpK3QuanNvbnArIj0iK2kpLHQuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHx4LmVycm9yKGkrIiB3YXMgbm90IGNhbGxlZCIpLHNbMF19LHQuZGF0YVR5cGVzWzBdPSJqc29uIixvPWVbaV0sZVtpXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxyLmFsd2F5cyhmdW5jdGlvbigpe2VbaV09byx0W2ldJiYodC5qc29ucENhbGxiYWNrPW4uanNvbnBDYWxsYmFjayxobi5wdXNoKGkpKSxzJiZ4LmlzRnVuY3Rpb24obykmJm8oc1swXSkscz1vPXVuZGVmaW5lZH0pLCJzY3JpcHQiKTp1bmRlZmluZWR9KSx4LmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgZ249eC5hamF4U2V0dGluZ3MueGhyKCksbW49ezA6MjAwLDEyMjM6MjA0fSx5bj0wLHZuPXt9O2UuQWN0aXZlWE9iamVjdCYmeChlKS5vbigidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB2bil2bltlXSgpO3ZuPXVuZGVmaW5lZH0pLHguc3VwcG9ydC5jb3JzPSEhZ24mJiJ3aXRoQ3JlZGVudGlhbHMiaW4gZ24seC5zdXBwb3J0LmFqYXg9Z249ISFnbix4LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHguc3VwcG9ydC5jb3JzfHxnbiYmIWUuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24obixyKXt2YXIgaSxvLHM9ZS54aHIoKTtpZihzLm9wZW4oZS50eXBlLGUudXJsLGUuYXN5bmMsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxlLnhockZpZWxkcylmb3IoaSBpbiBlLnhockZpZWxkcylzW2ldPWUueGhyRmllbGRzW2ldO2UubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKGUubWltZVR5cGUpLGUuY3Jvc3NEb21haW58fG5bIlgtUmVxdWVzdGVkLVdpdGgiXXx8KG5bIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoaSBpbiBuKXMuc2V0UmVxdWVzdEhlYWRlcihpLG5baV0pO3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dCYmKGRlbGV0ZSB2bltvXSx0PXMub25sb2FkPXMub25lcnJvcj1udWxsLCJhYm9ydCI9PT1lP3MuYWJvcnQoKToiZXJyb3IiPT09ZT9yKHMuc3RhdHVzfHw0MDQscy5zdGF0dXNUZXh0KTpyKG1uW3Muc3RhdHVzXXx8cy5zdGF0dXMscy5zdGF0dXNUZXh0LCJzdHJpbmciPT10eXBlb2Ygcy5yZXNwb25zZVRleHQ/e3RleHQ6cy5yZXNwb25zZVRleHR9OnVuZGVmaW5lZCxzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxzLm9ubG9hZD10KCkscy5vbmVycm9yPXQoImVycm9yIiksdD12bltvPXluKytdPXQoImFib3J0Iikscy5zZW5kKGUuaGFzQ29udGVudCYmZS5kYXRhfHxudWxsKX0sYWJvcnQ6ZnVuY3Rpb24oKXt0JiZ0KCl9fTp1bmRlZmluZWR9KTt2YXIgeG4sYm4sd249L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFRuPVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK2IrIikoW2EteiVdKikkIiwiaSIpLENuPS9xdWV1ZUhvb2tzJC8sa249W0FuXSxObj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxyPW4uY3VyKCksaT1Ubi5leGVjKHQpLG89aSYmaVszXXx8KHguY3NzTnVtYmVyW2VdPyIiOiJweCIpLHM9KHguY3NzTnVtYmVyW2VdfHwicHgiIT09byYmK3IpJiZUbi5leGVjKHguY3NzKG4uZWxlbSxlKSksYT0xLHU9MjA7aWYocyYmc1szXSE9PW8pe289b3x8c1szXSxpPWl8fFtdLHM9K3J8fDE7ZG8gYT1hfHwiLjUiLHMvPWEseC5zdHlsZShuLmVsZW0sZSxzK28pO3doaWxlKGEhPT0oYT1uLmN1cigpL3IpJiYxIT09YSYmLS11KX1yZXR1cm4gaSYmKHM9bi5zdGFydD0rc3x8K3J8fDAsbi51bml0PW8sbi5lbmQ9aVsxXT9zKyhpWzFdKzEpKmlbMl06K2lbMl0pLG59XX07ZnVuY3Rpb24gRW4oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3huPXVuZGVmaW5lZH0pLHhuPXgubm93KCl9ZnVuY3Rpb24gU24oZSx0LG4pe3ZhciByLGk9KE5uW3RdfHxbXSkuY29uY2F0KE5uWyIqIl0pLG89MCxzPWkubGVuZ3RoO2Zvcig7cz5vO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gam4oZSx0LG4pe3ZhciByLGksbz0wLHM9a24ubGVuZ3RoLGE9eC5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4hMTt2YXIgdD14bnx8RW4oKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPW4vbC5kdXJhdGlvbnx8MCxvPTEtcixzPTAsdT1sLnR3ZWVucy5sZW5ndGg7Zm9yKDt1PnM7cysrKWwudHdlZW5zW3NdLnJ1bihvKTtyZXR1cm4gYS5ub3RpZnlXaXRoKGUsW2wsbyxuXSksMT5vJiZ1P246KGEucmVzb2x2ZVdpdGgoZSxbbF0pLCExKX0sbD1hLnByb21pc2Uoe2VsZW06ZSxwcm9wczp4LmV4dGVuZCh7fSx0KSxvcHRzOnguZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6eG58fEVuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj14LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO3I+bjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P2EucmVzb2x2ZVdpdGgoZSxbbCx0XSk6YS5yZWplY3RXaXRoKGUsW2wsdF0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcihEbihjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtzPm87bysrKWlmKHI9a25bb10uY2FsbChsLGUsYyxsLm9wdHMpKXJldHVybiByO3JldHVybiB4Lm1hcChjLFNuLGwpLHguaXNGdW5jdGlvbihsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChlLGwpLHguZngudGltZXIoeC5leHRlbmQodSx7ZWxlbTplLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gRG4oZSx0KXt2YXIgbixyLGksbyxzO2ZvcihuIGluIGUpaWYocj14LmNhbWVsQ2FzZShuKSxpPXRbcl0sbz1lW25dLHguaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLHM9eC5jc3NIb29rc1tyXSxzJiYiZXhwYW5kImluIHMpe289cy5leHBhbmQobyksZGVsZXRlIGVbcl07Zm9yKG4gaW4gbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKX1lbHNlIHRbcl09aX14LkFuaW1hdGlvbj14LmV4dGVuZChqbix7dHdlZW5lcjpmdW5jdGlvbihlLHQpe3guaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5zcGxpdCgiICIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7aT5yO3IrKyluPWVbcl0sTm5bbl09Tm5bbl18fFtdLE5uW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/a24udW5zaGlmdChlKTprbi5wdXNoKGUpfX0pO2Z1bmN0aW9uIEFuKGUsdCxuKXt2YXIgcixpLG8scyxhLHUsbD10aGlzLGM9e30scD1lLnN0eWxlLGY9ZS5ub2RlVHlwZSYmTHQoZSksaD1xLmdldChlLCJmeHNob3ciKTtuLnF1ZXVlfHwoYT14Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09YS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCx1PWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHx1KCl9KSxhLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSx4LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxhLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSwiaW5saW5lIj09PXguY3NzKGUsImRpc3BsYXkiKSYmIm5vbmUiPT09eC5jc3MoZSwiZmxvYXQiKSYmKHAuZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihwLm92ZXJmbG93PSJoaWRkZW4iLGwuYWx3YXlzKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IociBpbiB0KWlmKGk9dFtyXSx3bi5leGVjKGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGY/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCFofHxoW3JdPT09dW5kZWZpbmVkKWNvbnRpbnVlO2Y9ITB9Y1tyXT1oJiZoW3JdfHx4LnN0eWxlKGUscil9aWYoIXguaXNFbXB0eU9iamVjdChjKSl7aD8iaGlkZGVuImluIGgmJihmPWguaGlkZGVuKTpoPXEuYWNjZXNzKGUsImZ4c2hvdyIse30pLG8mJihoLmhpZGRlbj0hZiksZj94KGUpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXt4KGUpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciB0O3EucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIGMpeC5zdHlsZShlLHQsY1t0XSl9KTtmb3IociBpbiBjKXM9U24oZj9oW3JdOjAscixsKSxyIGluIGh8fChoW3JdPXMuc3RhcnQsZiYmKHMuZW5kPXMuc3RhcnQscy5zdGFydD0id2lkdGgiPT09cnx8ImhlaWdodCI9PT1yPzE6MCkpfX1mdW5jdGlvbiBMbihlLHQsbixyLGkpe3JldHVybiBuZXcgTG4ucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX14LlR3ZWVuPUxuLExuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TG4saW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KHguY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1Mbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6TG4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49TG4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPXQ9dGhpcy5vcHRpb25zLmR1cmF0aW9uP3guZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6TG4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sTG4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUxuLnByb3RvdHlwZSxMbi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUuZWxlbVtlLnByb3BdfHxlLmVsZW0uc3R5bGUmJm51bGwhPWUuZWxlbS5zdHlsZVtlLnByb3BdPyh0PXguY3NzKGUuZWxlbSxlLnByb3AsIiIpLHQmJiJhdXRvIiE9PXQ/dDowKTplLmVsZW1bZS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGUpe3guZnguc3RlcFtlLnByb3BdP3guZnguc3RlcFtlLnByb3BdKGUpOmUuZWxlbS5zdHlsZSYmKG51bGwhPWUuZWxlbS5zdHlsZVt4LmNzc1Byb3BzW2UucHJvcF1dfHx4LmNzc0hvb2tzW2UucHJvcF0pP3guc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpOmUuZWxlbVtlLnByb3BdPWUubm93fX19LExuLnByb3BIb29rcy5zY3JvbGxUb3A9TG4ucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0seC5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZm5bdF07eC5mblt0XT1mdW5jdGlvbihlLHIsaSl7cmV0dXJuIG51bGw9PWV8fCJib29sZWFuIj09dHlwZW9mIGU/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKHFuKHQsITApLGUscixpKX19KSx4LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihMdCkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4scil9LGFuaW1hdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5pc0VtcHR5T2JqZWN0KGUpLG89eC5zcGVlZCh0LG4scikscz1mdW5jdGlvbigpe3ZhciB0PWpuKHRoaXMseC5leHRlbmQoe30sZSksbyk7KGl8fHEuZ2V0KHRoaXMsImZpbmlzaCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIHMuZmluaXNoPXMsaXx8by5xdWV1ZT09PSExP3RoaXMuZWFjaChzKTp0aGlzLnF1ZXVlKG8ucXVldWUscyl9LHN0b3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQobil9O3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKG49dCx0PWUsZT11bmRlZmluZWQpLHQmJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxpPW51bGwhPWUmJmUrInF1ZXVlSG9va3MiLG89eC50aW1lcnMscz1xLmdldCh0aGlzKTtpZihpKXNbaV0mJnNbaV0uc3RvcCYmcihzW2ldKTtlbHNlIGZvcihpIGluIHMpc1tpXSYmc1tpXS5zdG9wJiZDbi50ZXN0KGkpJiZyKHNbaV0pO2ZvcihpPW8ubGVuZ3RoO2ktLTspb1tpXS5lbGVtIT09dGhpc3x8bnVsbCE9ZSYmb1tpXS5xdWV1ZSE9PWV8fChvW2ldLmFuaW0uc3RvcChuKSx0PSExLG8uc3BsaWNlKGksMSkpOyh0fHwhbikmJnguZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPXEuZ2V0KHRoaXMpLHI9bltlKyJxdWV1ZSJdLGk9bltlKyJxdWV1ZUhvb2tzIl0sbz14LnRpbWVycyxzPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAseC5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuc3RvcCYmaS5zdG9wLmNhbGwodGhpcywhMCksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7cz50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBxbihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPWp0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9eC5lYWNoKHtzbGlkZURvd246cW4oInNob3ciKSxzbGlkZVVwOnFuKCJoaWRlIiksc2xpZGVUb2dnbGU6cW4oInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHguc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT94LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fHguaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYheC5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj14LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4geC5meC5zcGVlZHM/eC5meC5zcGVlZHNbci5kdXJhdGlvbl06eC5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3guaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmeC5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHguZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHgudGltZXJzPVtdLHguZng9TG4ucHJvdG90eXBlLmluaXQseC5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD14LnRpbWVycyxuPTA7Zm9yKHhuPXgubm93KCk7dC5sZW5ndGg+bjtuKyspZT10W25dLGUoKXx8dFtuXSE9PWV8fHQuc3BsaWNlKG4tLSwxKTt0Lmxlbmd0aHx8eC5meC5zdG9wKCkseG49dW5kZWZpbmVkfSx4LmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmeC50aW1lcnMucHVzaChlKSYmeC5meC5zdGFydCgpfSx4LmZ4LmludGVydmFsPTEzLHguZnguc3RhcnQ9ZnVuY3Rpb24oKXtibnx8KGJuPXNldEludGVydmFsKHguZngudGljayx4LmZ4LmludGVydmFsKSl9LHguZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoYm4pLGJuPW51bGx9LHguZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHguZnguc3RlcD17fSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHguZ3JlcCh4LnRpbWVycyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH0pLHguZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7eC5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciB0LG4saT10aGlzWzBdLG89e3RvcDowLGxlZnQ6MH0scz1pJiZpLm93bmVyRG9jdW1lbnQ7aWYocylyZXR1cm4gdD1zLmRvY3VtZW50RWxlbWVudCx4LmNvbnRhaW5zKHQsaSk/KHR5cGVvZiBpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PXImJihvPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLG49SG4ocykse3RvcDpvLnRvcCtuLnBhZ2VZT2Zmc2V0LXQuY2xpZW50VG9wLGxlZnQ6by5sZWZ0K24ucGFnZVhPZmZzZXQtdC5jbGllbnRMZWZ0fSk6b30seC5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYSx1LGwsYz14LmNzcyhlLCJwb3NpdGlvbiIpLHA9eChlKSxmPXt9OyJzdGF0aWMiPT09YyYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksYT1wLm9mZnNldCgpLG89eC5jc3MoZSwidG9wIiksdT14LmNzcyhlLCJsZWZ0IiksbD0oImFic29sdXRlIj09PWN8fCJmaXhlZCI9PT1jKSYmKG8rdSkuaW5kZXhPZigiYXV0byIpPi0xLGw/KHI9cC5wb3NpdGlvbigpLHM9ci50b3AsaT1yLmxlZnQpOihzPXBhcnNlRmxvYXQobyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSx4LmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4sYSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3AtYS50b3ArcyksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1hLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6cC5jc3MoZil9fSx4LmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG49dGhpc1swXSxyPXt0b3A6MCxsZWZ0OjB9O3JldHVybiJmaXhlZCI9PT14LmNzcyhuLCJwb3NpdGlvbiIpP3Q9bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooZT10aGlzLm9mZnNldFBhcmVudCgpLHQ9dGhpcy5vZmZzZXQoKSx4Lm5vZGVOYW1lKGVbMF0sImh0bWwiKXx8KHI9ZS5vZmZzZXQoKSksci50b3ArPXguY3NzKGVbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksci5sZWZ0Kz14LmNzcyhlWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDp0LnRvcC1yLnRvcC14LmNzcyhuLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1yLmxlZnQteC5jc3MobiwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxzO3doaWxlKGUmJiF4Lm5vZGVOYW1lKGUsImh0bWwiKSYmInN0YXRpYyI9PT14LmNzcyhlLCJwb3NpdGlvbiIpKWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fHN9KX19KSx4LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxuKXt2YXIgcj0icGFnZVlPZmZzZXQiPT09bjt4LmZuW3RdPWZ1bmN0aW9uKGkpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQsaSxvKXt2YXIgcz1Ibih0KTtyZXR1cm4gbz09PXVuZGVmaW5lZD9zP3Nbbl06dFtpXToocz9zLnNjcm9sbFRvKHI/ZS5wYWdlWE9mZnNldDpvLHI/bzplLnBhZ2VZT2Zmc2V0KTp0W2ldPW8sdW5kZWZpbmVkKX0sdCxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIHguaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld314LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe3guZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixyKXt4LmZuW3JdPWZ1bmN0aW9uKHIsaSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIHIpLHM9bnx8KHI9PT0hMHx8aT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbih0LG4scil7dmFyIGk7cmV0dXJuIHguaXNXaW5kb3codCk/dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PXQubm9kZVR5cGU/KGk9dC5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgodC5ib2R5WyJzY3JvbGwiK2VdLGlbInNjcm9sbCIrZV0sdC5ib2R5WyJvZmZzZXQiK2VdLGlbIm9mZnNldCIrZV0saVsiY2xpZW50IitlXSkpOnI9PT11bmRlZmluZWQ/eC5jc3ModCxuLHMpOnguc3R5bGUodCxuLHIscyl9LHQsbz9yOnVuZGVmaW5lZCxvLG51bGwpfX0pfSkseC5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx4LmZuLmFuZFNlbGY9eC5mbi5hZGRCYWNrLCJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9eDoiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4geH0pLCJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiBlLmRvY3VtZW50JiYoZS5qUXVlcnk9ZS4kPXgpfSkod2luZG93KTsKICAgICAgICBsb2coJ1VzaW5nIGlubGluZSBqUXVlcnknKQogICAgfSBlbHNlIHsKICAgICAgICBsb2coJ1VzaW5nIEByZXF1aXJlIGpRdWVyeScpCiAgICB9CgogICAgLy8gR2VuZXJpYyBmdW5jdGlvbnMKCiAgICAvLyBBdm9pZHMgY29uZmxpY3RzIHdoZW4gdGhlIG1haW4gcGFnZSBpcyBhbHNvIHVzaW5nIGpRdWVyeSBvciBhbm90aGVyIGxpYnJhcnkgdXNpbmcgJyQnCiAgICAvLyB0aGlzLiQgPSB0aGlzLmpRdWVyeSA9IGpRdWVyeS5ub0NvbmZsaWN0KHRydWUpOwogICAgLy8gLS0+IEluc3RlYWQgSSB1c2UgQGdyYW50IEdNX2FkZFN0eWxlIHdoaWNoIHJlc3RvcmVzIHRoZSBzYW5kYm94IGFuZCB0aHVzIGF2b2lkIHVzIHRoaXMgdHJpY2sKCiAgICAvLyBUaGlzIGpRdWVyeSBwbHVnaW4gd2lsbCBnYXRoZXIgdGhlIGNvbW1lbnRzIHdpdGhpbgogICAgLy8gdGhlIGN1cnJlbnQgalF1ZXJ5IGNvbGxlY3Rpb24sIHJldHVybmluZyBhbGwgdGhlCiAgICAvLyBjb21tZW50cyBpbiBhIG5ldyBqUXVlcnkgY29sbGVjdGlvbi4KICAgIC8vCiAgICAvLyBOT1RFOiBDb21tZW50cyBhcmUgd3JhcHBlZCBpbiBESVYgdGFncy4KCiAgICBqUXVlcnkuZm4uY29tbWVudHMgPSBmdW5jdGlvbiAoYmxuRGVlcCkgewogICAgICAgIHZhciBibG5EZWVwID0gKGJsbkRlZXAgfHwgZmFsc2UpOwogICAgICAgIHZhciBqQ29tbWVudHMgPSAkKFtdKTsKCiAgICAgICAgLy8gTG9vcCBvdmVyIGVhY2ggbm9kZSB0byBzZWFyY2ggaXRzIGNoaWxkcmVuIGZvcgogICAgICAgIC8vIGNvbW1lbnQgbm9kZXMgYW5kIGVsZW1lbnQgbm9kZXMgKGlmIGRlZXAgc2VhcmNoKS4KICAgICAgICB0aGlzLmVhY2goCiAgICAgICAgICAgIGZ1bmN0aW9uIChpbnRJLCBvYmpOb2RlKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JqQ2hpbGROb2RlID0gb2JqTm9kZS5maXJzdENoaWxkOwogICAgICAgICAgICAgICAgdmFyIHN0clBhcmVudElEID0gJCh0aGlzKS5hdHRyKCJpZCIpOwoKICAgICAgICAgICAgICAgIC8vIEtlZXAgbG9vcGluZyBvdmVyIHRoZSB0b3AtbGV2ZWwgY2hpbGRyZW4KICAgICAgICAgICAgICAgIC8vIHdoaWxlIHdlIGhhdmUgYSBub2RlIHRvIGV4YW1pbmUuCiAgICAgICAgICAgICAgICB3aGlsZSAob2JqQ2hpbGROb2RlKSB7CgogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIG5vZGUgaXMgYSBjb21tZW50LgogICAgICAgICAgICAgICAgICAgIGlmIChvYmpDaGlsZE5vZGUubm9kZVR5cGUgPT09IDgpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGZvdW5kIGEgY29tbWVudCBub2RlLiBBZGQgaXQgdG8KICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG5vZGVzIGNvbGxlY3Rpb24gd3JhcHBlZCBpbiBhCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERJViAoYXMgd2UgbWF5IGhhdmUgSFRNTCkuCiAgICAgICAgICAgICAgICAgICAgICAgIGpDb21tZW50cyA9IGpDb21tZW50cy5hZGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiPGRpdiByZWw9JyIgKyBzdHJQYXJlbnRJRCArICInPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqQ2hpbGROb2RlLm5vZGVWYWx1ZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiPC9kaXY+IgogICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICBibG5EZWVwICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChvYmpDaGlsZE5vZGUubm9kZVR5cGUgPT09IDEpCiAgICAgICAgICAgICAgICAgICAgKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmF2ZXJzZSB0aGlzIG5vZGUgZGVlcGx5LgogICAgICAgICAgICAgICAgICAgICAgICBqQ29tbWVudHMgPSBqQ29tbWVudHMuYWRkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJChvYmpDaGlsZE5vZGUpLmNvbW1lbnRzKHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgbmV4dCBzaWJsaW5nLgogICAgICAgICAgICAgICAgICAgIG9iakNoaWxkTm9kZSA9IG9iakNoaWxkTm9kZS5uZXh0U2libGluZzsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgKTsKCiAgICAgICAgLy8gUmV0dXJuIHRoZSBqUXVlcnkgY29tbWVudHMgY29sbGVjdGlvbi4KICAgICAgICByZXR1cm4gKGpDb21tZW50cyk7CiAgICB9CgogICAgLy8gVGVzdHMgaWYgYSBzdHJpbmcgaXMgcGFydCBvZiBhbm90aGVyIG9uZS4KICAgIFN0cmluZy5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodGVzdFN0cmluZykgewogICAgICAgIHJldHVybiB0aGlzLmluZGV4T2YodGVzdFN0cmluZykgIT0gLTEKICAgIH0KCiAgICAvLyBBbGxvd3MgdG8gcmVtb3ZlIGEgc3Vic3RyaW5nIGZyb20gYSBzdHJpbmcgZXZlbiB3aGVuIHByZXNlbnQgbXVsdGlwbGUgdGltZXMKICAgIFN0cmluZy5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKHRlc3RTdHJpbmcpIHsKICAgICAgICB2YXIgcmV0U3RyaW5nID0gdGhpczsKICAgICAgICB3aGlsZSAoKGN1cnJJbmRleCA9IHJldFN0cmluZy5pbmRleE9mKHRlc3RTdHJpbmcpKSAhPSAtMSkgewogICAgICAgICAgICByZXRTdHJpbmcgPSByZXRTdHJpbmcucmVtb3ZlT25jZSh0ZXN0U3RyaW5nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldFN0cmluZwogICAgfQoKICAgIC8vIEFsbG93cyB0byByZW1vdmUgYSBzdWJzdHJpbmcgZnJvbSBhIHN0cmluZyBvbmUgdGltZS4KICAgIFN0cmluZy5wcm90b3R5cGUucmVtb3ZlT25jZSA9IGZ1bmN0aW9uICh0ZXN0U3RyaW5nKSB7CiAgICAgICAgdmFyIGN1cnJJbmRleCA9IHRoaXMuaW5kZXhPZih0ZXN0U3RyaW5nKQogICAgICAgIGlmIChjdXJySW5kZXggIT0gLTEpIHJldHVybiB0aGlzLnN1YnN0cmluZygwLCBjdXJySW5kZXgpICsgdGhpcy5zdWJzdHJpbmcoY3VyckluZGV4ICsgdGVzdFN0cmluZy5sZW5ndGgpCiAgICAgICAgcmV0dXJuIHRoaXMKICAgIH0KCiAgICAvLyBHZW5lcmljIGxvZyBmdW5jdGlvbgogICAgZnVuY3Rpb24gbG9nKHN0cmluZykgewogICAgICAgIGlmIChvX2RlYnVnKSBjb25zb2xlLmxvZyhzdHJpbmcpCiAgICB9CgogICAgLy8gQ2hlY2sgaWYgYSBKUW9iamVjdCBpcyB2YWxpZAogICAgZnVuY3Rpb24gZXhpc3RzKEpRb2JqZWN0KSB7CiAgICAgICAgcmV0dXJuIChKUW9iamVjdC5sZW5ndGggIT0gMCkKICAgIH0KCiAgICAvLyBDaGVjayBpZiBhbiBpbnB1dCBjaGVja2JveCBpcyBjaGVja2VkCiAgICBmdW5jdGlvbiBpc0NoZWNrZWQoSlFvYmplY3QpIHsKICAgICAgICByZXR1cm4gSlFvYmplY3QucHJvcCgiY2hlY2tlZCIpCiAgICB9CgogICAgLy8gVW5jaGVjayBhbiBpbnB1dCBjaGVja2JveAogICAgZnVuY3Rpb24gdW5jaGVjayhKUW9iamVjdCkgewogICAgICAgIGlmICghZXhpc3RzKEpRb2JqZWN0KSkgcmV0dXJuIGZhbHNlCiAgICAgICAgaWYgKGlzQ2hlY2tlZChKUW9iamVjdCkpIEpRb2JqZWN0LmNsaWNrKCkKICAgICAgICAvLyBUaGUgb2JqZWN0IGV4aXN0cywgd2UgaGF2ZSB1bmNoZWNrZWQgaXQgaWYgaXQgd2FzIGNoZWNrZWQKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIC8vIEhpZGUgYW4gZWxlbWVudCAoZG9lc24ndCBkZWxldGUgaXQpCiAgICBmdW5jdGlvbiBoaWRlKEpRb2JqZWN0KSB7CiAgICAgICAgaWYgKCFleGlzdHMoSlFvYmplY3QpKSByZXR1cm4gZmFsc2UKICAgICAgICBKUW9iamVjdC5hdHRyKCJzdHlsZSIsICJkaXNwbGF5IDogbm9uZSAhaW1wb3J0YW50IikKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIC8vIEZvcmNlIGFuIGVsZW1lbnQgdG8gc2hvdwogICAgZnVuY3Rpb24gc2hvdyhKUW9iamVjdCkgewogICAgICAgIGlmICghZXhpc3RzKEpRb2JqZWN0KSkgcmV0dXJuIGZhbHNlCgogICAgICAgIC8vIEZJWE1FOiBhdm9pZCB0byBibGluZGx5IHNldCB0aGUgZGlzcGxheSB0byBibG9jayAoY2FuIGJlIGlubGluZSB0b28pCiAgICAgICAgSlFvYmplY3QuYXR0cigic3R5bGUiLCAiZGlzcGxheSA6IGJsb2NrICFpbXBvcnRhbnQiKQogICAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgZm9yICh2YXIgaSBpbiBhZHdhcmVSdWxlcykgewogICAgICAgIC8vIENyZWF0ZSBhIFJlZ0V4cCB0byB0ZXN0IGlmIHdlIGFyZSBvbiB0aGlzIGRvbWFpbgogICAgICAgIHZhciB0ZXN0SG9zdHMgPSBuZXcgUmVnRXhwKGFkd2FyZVJ1bGVzW2ldLmhvc3Quam9pbignfCcpLCAnaScpCiAgICAgICAgLy8gSWYgd2UgYXJlIG9uIG9uZSBvZiB0aGUgZG9tYWlucwogICAgICAgIGlmICh0ZXN0SG9zdHMudGVzdChkb2N1bWVudC5kb21haW4pKSB7CiAgICAgICAgICAgIHZhciBjdXJyUnVsZSA9IGFkd2FyZVJ1bGVzW2ldCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgfQoKICAgIGlmICh0eXBlb2YgY3VyclJ1bGUgPT0gInVuZGVmaW5lZCIpIHJldHVybgoKICAgIHZhciBhcHBseVJ1bGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxvZygnVHJ5aW5nIHRvIGV4ZWN1dGUgY3VzdG9tIGZ1bmN0aW9uOiAnICsgY3VyclJ1bGUuZXhlYykKICAgICAgICBpZiAoY3VyclJ1bGUuZXhlYyAhPSB1bmRlZmluZWQpIGN1cnJSdWxlLmV4ZWMoKTsKICAgICAgICBsb2coIkl0ZXJhdGluZyB0aHJvdWdoIHVuY2hlY2tzIikKCiAgICAgICAgLy8gSWYgdGhlcmUgaXMgc29tZXRoaW5nIHRvIHVuY2hlY2sKICAgICAgICBpZiAoY3VyclJ1bGUudW5jaGVjayAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgLy8gSXRlcmF0ZSBlYWNoIGNoZWNrYm94IHRvIHVuY2hlY2sgaXQKICAgICAgICAgICAgJC5lYWNoKGN1cnJSdWxlLnVuY2hlY2ssIGZ1bmN0aW9uIChrZXksIGN1cnJVbmNoZWNrKSB7CiAgICAgICAgICAgICAgICBsb2coIlRyeWluZyB0byB1bmNoZWNrIFsiICsga2V5ICsgJ10nICsgY3VyclVuY2hlY2spCiAgICAgICAgICAgICAgICAvLyBDb25zdGFudGx5IHRyeWluZyB0byB1bmNoZWNrIHRoZSBjaGVja2JveAogICAgICAgICAgICAgICAgaWYgKGN1cnJSdWxlLm9wdHVuY2hlY2sgIT0gdW5kZWZpbmVkICYmIGN1cnJSdWxlLm9wdHVuY2hlY2suY29uc3RhbnRjaGVjayA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgdW5jaGVjaygkKGN1cnJVbmNoZWNrKSkKICAgICAgICAgICAgICAgICAgICB2YXIgcGVyaW9kaWNIaWRlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmNoZWNrIGl0CiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2hlY2soJChjdXJyVW5jaGVjaykpCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdW5jaGVja2luZyBpdCBvbmNlCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjaGVja2JveCB3YXMgc3VjY2Vzc2Z1bGx5IHVuY2hlY2tlZAogICAgICAgICAgICAgICAgICAgIGlmICh1bmNoZWNrKCQoY3VyclVuY2hlY2spKSkgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgbG9nKCJDb3VsZG4ndCB1bmNoZWNrIHRoZSBjaGVja2JveCIpCiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHVuY2hlY2sgaXQgbGF0ZXIKICAgICAgICAgICAgICAgICAgICB2YXIgcGVyaW9kaWNVbmNoZWNrID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdW5jaGVjayBzdWNjZWVkZWQgdGhpcyB0aW1lLCB3ZSBzdG9wIHRoZSB1bmNoZWNraW5nCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmNoZWNrKCQoY3VyclVuY2hlY2spKSkgY2xlYXJJbnRlcnZhbChwZXJpb2RpY1VuY2hlY2spCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2UgY29udGludWUgdG8gY2hlY2sKICAgICAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgICAgICAvLyBJZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gaGlkZQogICAgICAgIGlmIChjdXJyUnVsZS5oaWRlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAvLyBJdGVyYXRlIGVhY2ggaGlkZSB0byBoaWRlIGl0CiAgICAgICAgICAgICQuZWFjaChjdXJyUnVsZS5oaWRlLCBmdW5jdGlvbiAoa2V5LCBjdXJySGlkZSkgewogICAgICAgICAgICAgICAgbG9nKCJUcnlpbmcgdG8gaGlkZSAiICsgY3VyckhpZGUpCiAgICAgICAgICAgICAgICAvLyBJZiB3ZSB0cnkgdG8gY29udGludWUgaGlkaW5nIGl0IGV2ZW4gaWYgdGhlIGhpZGluZyB3YXMgYWxyZWFkeSBzdWNjZXNzZnVsCiAgICAgICAgICAgICAgICBpZiAoY3VyclJ1bGUub3B0aGlkZSAhPSB1bmRlZmluZWQgJiYgY3VyclJ1bGUub3B0aGlkZS5jb25zdGFudGNoZWNrID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBoaWRlKCQoY3VyckhpZGUpKQogICAgICAgICAgICAgICAgICAgIHZhciBwZXJpb2RpY0hpZGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgaXQKICAgICAgICAgICAgICAgICAgICAgICAgaGlkZSgkKGN1cnJIaWRlKSkKICAgICAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgICAgICAgICAgLy8gSGlkZSBpdCBvbmNlLCB0aGVuIHN0b3AgdHJ5aW5nIHRvIGhpZGUgaXQgKHVzdWFsIGNhc2UsIGl0IHN0YXlzIGhpZGRlbikKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9iamVjdCB0byBoaWRlIHdhcyBoaWRkZW4KICAgICAgICAgICAgICAgICAgICBpZiAoaGlkZSgkKGN1cnJIaWRlKSkpIHJldHVybgogICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBoaWRlIGl0IGxhdGVyCiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmlvZGljSGlkZSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhpZGUgc3VjY2VlZGVkIHRoaXMgdGltZSwgd2Ugc3RvcCB0byB0cnkgaGlkaW5nIGl0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoaWRlKCQoY3VyckhpZGUpKSkgY2xlYXJJbnRlcnZhbChwZXJpb2RpY0hpZGUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2UgY29udGludWUgdG8gdHJ5IGhpZGluZyBpdAogICAgICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CgogICAgICAgIC8vIElmIHRoZXJlIGlzIHNvbWV0aGluZyB0byBzaG93CiAgICAgICAgaWYgKGN1cnJSdWxlLnNob3cgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8vIEl0ZXJhdGUgZWFjaCBzaG93IHRvIHNob3cgaXQKICAgICAgICAgICAgJC5lYWNoKGN1cnJSdWxlLnNob3csIGZ1bmN0aW9uIChrZXksIGN1cnJTaG93KSB7CiAgICAgICAgICAgICAgICBsb2coIlRyeWluZyB0byBzaG93ICIgKyBjdXJyU2hvdykKCiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgb2JqZWN0IHRvIHNob3cgd2FzIHN1Y2Nlc3NmdWxseSBzaG93bgogICAgICAgICAgICAgICAgaWYgKHNob3coJChjdXJyU2hvdykpKSByZXR1cm4KCiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gc2hvdyBpdCBsYXRlcgogICAgICAgICAgICAgICAgdmFyIHBlcmlvZGljU2hvdyA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzaG93KCQoY3VyclNob3cpKQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBzaG93IHN1Y2NlZWRlZCB0aGlzIHRpbWUsIHdlIHN0b3AgdG8gdHJ5IHNob3dpbmcgaXQKICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdygkKGN1cnJTaG93KSkpIGNsZWFySW50ZXJ2YWwocGVyaW9kaWNTaG93KQogICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2UgY29udGludWUgdG8gdHJ5IHNob3dpbmcgaXQKICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9CgogICAgLy8gR29vZ2xlIENocm9tZSB0cmljazogc29tZXRpbWVzIHRoZSBzY3JpcHQgaXMgZXhlY3V0ZWQgYWZ0ZXIgdGhhdCBET01Db250ZW50TG9hZGVkIHdhcyB0cmlnZ2VyZWQsIGluIHRoaXMgY2FzZSB3ZSBkaXJlY3RseSBydW4gb3VyIGNvZGUKICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICJjb21wbGV0ZSIpIHsKICAgICAgICBhcHBseVJ1bGVzKCkKICAgICAgICBsb2coIkRpcmVjdGx5IGFwcGx5aW5nIHJ1bGVzIikKICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhcHBseVJ1bGVzKQogICAgICAgIGxvZygiV2FpdGluZyBmb3IgRE9NQ29udGVudExvYWRlZCB0byBhcHBseSBydWxlcyIpCiAgICB9Cn0oKQo=","requires":[{"meta":{"name":"jquery-2.0.3.min.js","url":"http://code.jquery.com/jquery-2.0.3.min.js","ts":1566814351231,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4wLjMgfCAoYykgMjAwNSwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZQovL0Agc291cmNlTWFwcGluZ1VSTD1qcXVlcnktMi4wLjMubWluLm1hcAoqLwooZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scj10eXBlb2YgdW5kZWZpbmVkLGk9ZS5sb2NhdGlvbixvPWUuZG9jdW1lbnQscz1vLmRvY3VtZW50RWxlbWVudCxhPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxwPSIyLjAuMyIsZj1jLmNvbmNhdCxoPWMucHVzaCxkPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PXAudHJpbSx4PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB4LmZuLmluaXQoZSxuLHQpfSxiPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHc9L1xTKy9nLFQ9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8saz0vXi1tcy0vLE49Ly0oW1xkYS16XSkvZ2ksRT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LFM9ZnVuY3Rpb24oKXtvLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkseC5yZWFkeSgpfTt4LmZuPXgucHJvdG90eXBlPXtqcXVlcnk6cCxjb25zdHJ1Y3Rvcjp4LGluaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihyPSI8Ij09PWUuY2hhckF0KDApJiYiPiI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpULmV4ZWMoZSksIXJ8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgeD90WzBdOnQseC5tZXJnZSh0aGlzLHgucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6bywhMCkpLEMudGVzdChyWzFdKSYmeC5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpeC5pc0Z1bmN0aW9uKHRoaXNbcl0pP3RoaXNbcl0odFtyXSk6dGhpcy5hdHRyKHIsdFtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9by5nZXRFbGVtZW50QnlJZChyWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTp4LmlzRnVuY3Rpb24oZSk/bi5yZWFkeShlKTooZS5zZWxlY3RvciE9PXVuZGVmaW5lZCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihsPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09YSYmKHM9dGhpcywtLWEpO3U+YTthKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2FdKSlmb3IodCBpbiBlKW49c1t0XSxyPWVbdF0scyE9PXImJihsJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwoaT14LmlzQXJyYXkocikpKT8oaT8oaT0hMSxvPW4mJnguaXNBcnJheShuKT9uOltdKTpvPW4mJnguaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbdF09eC5leHRlbmQobCxvLHIpKTpyIT09dW5kZWZpbmVkJiYoc1t0XT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhwK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9YSkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0teC5yZWFkeVdhaXQ6eC5pc1JlYWR5KXx8KHguaXNSZWFkeT0hMCxlIT09ITAmJi0teC5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbeF0pLHguZm4udHJpZ2dlciYmeChvKS50cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSkpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT14LnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZigib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fG87dmFyIHI9Qy5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpKU09OLnBhcnNlLHBhcnNlWE1MOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChyKXt0PXVuZGVmaW5lZH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmeC5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWV2YWw7ZT14LnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLG8uaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaywibXMtIikucmVwbGFjZShOLEUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLHM9aihlKTtpZihuKXtpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoaihPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpnLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLHI9ZS5sZW5ndGgsaT0wO2lmKCJudW1iZXIiPT10eXBlb2Ygbilmb3IoO24+aTtpKyspZVtyKytdPXRbaV07ZWxzZSB3aGlsZSh0W2ldIT09dW5kZWZpbmVkKWVbcisrXT10W2krK107cmV0dXJuIGUubGVuZ3RoPXIsZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAscz1lLmxlbmd0aDtmb3Iobj0hIW47cz5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgscz1qKGUpLGE9W107aWYocylmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoYVthLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKGFbYS5sZW5ndGhdPXIpO3JldHVybiBmLmFwcGx5KFtdLGEpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLHguaXNGdW5jdGlvbihlKT8ocj1kLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp1bmRlZmluZWR9LGFjY2VzczpmdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgYT0wLHU9ZS5sZW5ndGgsbD1udWxsPT1uO2lmKCJvYmplY3QiPT09eC50eXBlKG4pKXtpPSEwO2ZvcihhIGluIG4peC5hY2Nlc3MoZSx0LGEsblthXSwhMCxvLHMpfWVsc2UgaWYociE9PXVuZGVmaW5lZCYmKGk9ITAseC5pc0Z1bmN0aW9uKHIpfHwocz0hMCksbCYmKHM/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGw9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jYWxsKHgoZSksbil9KSksdCkpZm9yKDt1PmE7YSsrKXQoZVthXSxuLHM/cjpyLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiBpP2U6bD90LmNhbGwoZSk6dT90KGVbMF0sbik6b30sbm93OkRhdGUubm93LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzPXt9O2ZvcihvIGluIHQpc1tvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPXNbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBufHwobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHgucmVhZHkpOihvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkpKSxuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2xbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX10PXgobyksZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scixpLG8scyxhLHUsbCxjLHAsZixoLGQsZyxtLHksdj0ic2l6emxlIistbmV3IERhdGUsYj1lLmRvY3VtZW50LHc9MCxUPTAsQz1zdCgpLGs9c3QoKSxOPXN0KCksRT0hMSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhFPSEwLDApOjB9LGo9dHlwZW9mIHVuZGVmaW5lZCxEPTE8PDMxLEE9e30uaGFzT3duUHJvcGVydHksTD1bXSxxPUwucG9wLEg9TC5wdXNoLE89TC5wdXNoLEY9TC5zbGljZSxQPUwuaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7bj50O3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sUj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE09IltcXHgyMFxcdFxcclxcblxcZl0iLFc9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIiwkPVcucmVwbGFjZSgidyIsIncjIiksQj0iXFxbIitNKyIqKCIrVysiKSIrTSsiKig/OihbKl4kfCF+XT89KSIrTSsiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrJCsiKXwpfCkiK00rIipcXF0iLEk9IjooIitXKyIpKD86XFwoKChbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitCLnJlcGxhY2UoMyw4KSsiKSopfC4qKVxcKXwpIix6PVJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxfPVJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSxYPVJlZ0V4cCgiXiIrTSsiKihbPit+XXwiK00rIikiK00rIioiKSxVPVJlZ0V4cChNKyIqWyt+XSIpLFk9UmVnRXhwKCI9IitNKyIqKFteXFxdJ1wiXSopIitNKyIqXFxdIiwiZyIpLFY9UmVnRXhwKEkpLEc9UmVnRXhwKCJeIiskKyIkIiksSj17SUQ6UmVnRXhwKCJeIygiK1crIikiKSxDTEFTUzpSZWdFeHAoIl5cXC4oIitXKyIpIiksVEFHOlJlZ0V4cCgiXigiK1cucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOlJlZ0V4cCgiXiIrQiksUFNFVURPOlJlZ0V4cCgiXiIrSSksQ0hJTEQ6UmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00rIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00rIiooPzooWystXXwpIitNKyIqKFxcZCspfCkpIitNKyIqXFwpfCkiLCJpIiksYm9vbDpSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK00rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTSsiKigoPzotXFxkKT9cXGQqKSIrTSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sUT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sSz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxldD0vXmhcZCQvaSx0dD0vJ3xcXC9nLG50PVJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNKyI/fCgiK00rIil8LikiLCJpZyIpLHJ0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0iMHgiK3QtNjU1MzY7cmV0dXJuIHIhPT1yfHxuP3Q6MD5yP1N0cmluZy5mcm9tQ2hhckNvZGUocis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxyPj4xMCw1NjMyMHwxMDIzJnIpfTt0cnl7Ty5hcHBseShMPUYuY2FsbChiLmNoaWxkTm9kZXMpLGIuY2hpbGROb2RlcyksTFtiLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChpdCl7Tz17YXBwbHk6TC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtILmFwcGx5KGUsRi5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb3QoZSx0LHIsaSl7dmFyIG8scyxhLHUsbCxmLGcsbSx4LHc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OmIpIT09cCYmYyh0KSx0PXR8fHAscj1yfHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiByO2lmKDEhPT0odT10Lm5vZGVUeXBlKSYmOSE9PXUpcmV0dXJuW107aWYoaCYmIWkpe2lmKG89Sy5leGVjKGUpKWlmKGE9b1sxXSl7aWYoOT09PXUpe2lmKHM9dC5nZXRFbGVtZW50QnlJZChhKSwhc3x8IXMucGFyZW50Tm9kZSlyZXR1cm4gcjtpZihzLmlkPT09YSlyZXR1cm4gci5wdXNoKHMpLHJ9ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihzPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkmJnkodCxzKSYmcy5pZD09PWEpcmV0dXJuIHIucHVzaChzKSxyfWVsc2V7aWYob1syXSlyZXR1cm4gTy5hcHBseShyLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLHI7aWYoKGE9b1szXSkmJm4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBPLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpKSxyfWlmKG4ucXNhJiYoIWR8fCFkLnRlc3QoZSkpKXtpZihtPWc9dix4PXQsdz05PT09dSYmZSwxPT09dSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Y9Z3QoZSksKGc9dC5nZXRBdHRyaWJ1dGUoImlkIikpP209Zy5yZXBsYWNlKHR0LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixtKSxtPSJbaWQ9JyIrbSsiJ10gIixsPWYubGVuZ3RoO3doaWxlKGwtLSlmW2xdPW0rbXQoZltsXSk7eD1VLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx3PWYuam9pbigiLCIpfWlmKHcpdHJ5e3JldHVybiBPLmFwcGx5KHIseC5xdWVyeVNlbGVjdG9yQWxsKHcpKSxyfWNhdGNoKFQpe31maW5hbGx5e2d8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZSh6LCIkMSIpLHQscixpKX1mdW5jdGlvbiBzdCgpe3ZhciBlPVtdO2Z1bmN0aW9uIHQobixyKXtyZXR1cm4gZS5wdXNoKG4rPSIgIik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIHRbZS5zaGlmdCgpXSx0W25dPXJ9cmV0dXJuIHR9ZnVuY3Rpb24gYXQoZSl7cmV0dXJuIGVbdl09ITAsZX1mdW5jdGlvbiB1dChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2gobil7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGx0KGUsdCl7dmFyIG49ZS5zcGxpdCgifCIpLHI9ZS5sZW5ndGg7d2hpbGUoci0tKWkuYXR0ckhhbmRsZVtuW3JdXT10fWZ1bmN0aW9uIGN0KGUsdCl7dmFyIG49dCYmZSxyPW4mJjE9PT1lLm5vZGVUeXBlJiYxPT09dC5ub2RlVHlwZSYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBwdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09bnx8ImJ1dHRvbiI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuIGF0KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGF0KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKW5baT1vW3NdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9cz1vdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sbj1vdC5zdXBwb3J0PXt9LGM9b3Quc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9lLm93bmVyRG9jdW1lbnR8fGU6YixyPXQuZGVmYXVsdFZpZXc7cmV0dXJuIHQhPT1wJiY5PT09dC5ub2RlVHlwZSYmdC5kb2N1bWVudEVsZW1lbnQ/KHA9dCxmPXQuZG9jdW1lbnRFbGVtZW50LGg9IXModCksciYmci5hdHRhY2hFdmVudCYmciE9PXIudG9wJiZyLmF0dGFjaEV2ZW50KCJvbmJlZm9yZXVubG9hZCIsZnVuY3Rpb24oKXtjKCl9KSxuLmF0dHJpYnV0ZXM9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksbi5nZXRFbGVtZW50c0J5VGFnTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IixlLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RofSksbi5nZXRCeUlkPXV0KGZ1bmN0aW9uKGUpe3JldHVybiBmLmFwcGVuZENoaWxkKGUpLmlkPXYsIXQuZ2V0RWxlbWVudHNCeU5hbWV8fCF0LmdldEVsZW1lbnRzQnlOYW1lKHYpLmxlbmd0aH0pLG4uZ2V0QnlJZD8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1qJiZoKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKG50LHJ0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIGkuZmluZC5JRCxpLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxpLmZpbmQuVEFHPW4uZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dW5kZWZpbmVkfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZigiKiI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxpLmZpbmQuQ0xBU1M9bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe3JldHVybiB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09aiYmaD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dW5kZWZpbmVkfSxnPVtdLGQ9W10sKG4ucXNhPVEudGVzdCh0LnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKHV0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fGQucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitSKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8ZC5wdXNoKCI6Y2hlY2tlZCIpfSksdXQoZnVuY3Rpb24oZSl7dmFyIG49dC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO24uc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZChuKS5zZXRBdHRyaWJ1dGUoInQiLCIiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0Xj0nJ10iKS5sZW5ndGgmJmQucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxkLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksZC5wdXNoKCIsLio6Iil9KSksKG4ubWF0Y2hlc1NlbGVjdG9yPVEudGVzdChtPWYud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxmLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJnV0KGZ1bmN0aW9uKGUpe24uZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsImRpdiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSxnLnB1c2goIiE9IixJKX0pLGQ9ZC5sZW5ndGgmJlJlZ0V4cChkLmpvaW4oInwiKSksZz1nLmxlbmd0aCYmUmVnRXhwKGcuam9pbigifCIpKSx5PVEudGVzdChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFM9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHIpe2lmKGU9PT1yKXJldHVybiBFPSEwLDA7dmFyIGk9ci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKTtyZXR1cm4gaT8xJml8fCFuLnNvcnREZXRhY2hlZCYmci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PWk/ZT09PXR8fHkoYixlKT8tMTpyPT09dHx8eShiLHIpPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxyKTowOjQmaT8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUscz1uLnBhcmVudE5vZGUsYT1bZV0sdT1bbl07aWYoZT09PW4pcmV0dXJuIEU9ITAsMDtpZighb3x8IXMpcmV0dXJuIGU9PT10Py0xOm49PT10PzE6bz8tMTpzPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxuKTowO2lmKG89PT1zKXJldHVybiBjdChlLG4pO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlhLnVuc2hpZnQocik7cj1uO3doaWxlKHI9ci5wYXJlbnROb2RlKXUudW5zaGlmdChyKTt3aGlsZShhW2ldPT09dVtpXSlpKys7cmV0dXJuIGk/Y3QoYVtpXSx1W2ldKTphW2ldPT09Yj8tMTp1W2ldPT09Yj8xOjB9LHQpOnB9LG90Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QoZSxudWxsLG51bGwsdCl9LG90Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx0PXQucmVwbGFjZShZLCI9JyQxJ10iKSwhKCFuLm1hdGNoZXNTZWxlY3Rvcnx8IWh8fGcmJmcudGVzdCh0KXx8ZCYmZC50ZXN0KHQpKSl0cnl7dmFyIHI9bS5jYWxsKGUsdCk7aWYocnx8bi5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiByfWNhdGNoKGkpe31yZXR1cm4gb3QodCxwLG51bGwsW2VdKS5sZW5ndGg+MH0sb3QuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSkseShlLHQpfSxvdC5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1wJiZjKGUpO3ZhciByPWkuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLG89ciYmQS5jYWxsKGkuYXR0ckhhbmRsZSx0LnRvTG93ZXJDYXNlKCkpP3IoZSx0LCFoKTp1bmRlZmluZWQ7cmV0dXJuIG89PT11bmRlZmluZWQ/bi5hdHRyaWJ1dGVzfHwhaD9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGw6b30sb3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LG90LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1bXSxpPTAsbz0wO2lmKEU9IW4uZGV0ZWN0RHVwbGljYXRlcyxsPSFuLnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KFMpLEUpe3doaWxlKHQ9ZVtvKytdKXQ9PT1lW29dJiYoaT1yLnB1c2gobykpO3doaWxlKGktLSllLnNwbGljZShyW2ldLDEpfXJldHVybiBlfSxvPW90LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPW8odCk7cmV0dXJuIG59LGk9b3Quc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86YXQsbWF0Y2g6SixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKG50LHJ0KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZShudCxydCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fG90LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJm90LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBKLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXSYmZVs0XSE9PXVuZGVmaW5lZD9lWzJdPWVbNF06biYmVi50ZXN0KG4pJiYodD1ndChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUNbZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrTSsiKSIrZSsiKCIrTSsifCQpIikpJiZDKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9b3QuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLHM9Imxhc3QiIT09ZS5zbGljZSgtNCksYT0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLHAsZixoLGQsZz1vIT09cz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHk9YSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHg9IXUmJiFhO2lmKG0pe2lmKG8pe3doaWxlKGcpe3A9dDt3aGlsZShwPXBbZ10paWYoYT9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBlKXJldHVybiExO2Q9Zz0ib25seSI9PT1lJiYhZCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihkPVtzP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0scyYmeCl7Yz1tW3ZdfHwobVt2XT17fSksbD1jW2VdfHxbXSxoPWxbMF09PT13JiZsWzFdLGY9bFswXT09PXcmJmxbMl0scD1oJiZtLmNoaWxkTm9kZXNbaF07d2hpbGUocD0rK2gmJnAmJnBbZ118fChmPWg9MCl8fGQucG9wKCkpaWYoMT09PXAubm9kZVR5cGUmJisrZiYmcD09PXQpe2NbZV09W3csaCxmXTticmVha319ZWxzZSBpZih4JiYobD0odFt2XXx8KHRbdl09e30pKVtlXSkmJmxbMF09PT13KWY9bFsxXTtlbHNlIHdoaWxlKHA9KytoJiZwJiZwW2ddfHwoZj1oPTApfHxkLnBvcCgpKWlmKChhP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpJiYrK2YmJih4JiYoKHBbdl18fChwW3ZdPXt9KSlbZV09W3csZl0pLHA9PT10KSlicmVhaztyZXR1cm4gZi09aSxmPT09cnx8MD09PWYlciYmZi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gclt2XT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9hdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKWk9UC5jYWxsKGUsb1tzXSksZVtpXT0hKG5baV09b1tzXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90OmF0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1hKGUucmVwbGFjZSh6LCIkMSIpKTtyZXR1cm4gclt2XT9hdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShvPXNbYV0pJiYoZVthXT0hKHRbYV09bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvdChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmF0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fG8odCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzphdChmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGV8fCIiKXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1oP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09cC5hY3RpdmVFbGVtZW50JiYoIXAuaGFzRm9jdXN8fHAuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZXQudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFoudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6aHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Omh0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpodChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOmh0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpodChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0saS5wc2V1ZG9zLm50aD1pLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5wc2V1ZG9zW3RdPXB0KHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW3RdPWZ0KHQpO2Z1bmN0aW9uIGR0KCl7fWR0LnByb3RvdHlwZT1pLmZpbHRlcnM9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgZHQ7ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixyLG8scyxhLHUsbCxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO2E9ZSx1PVtdLGw9aS5wcmVGaWx0ZXI7d2hpbGUoYSl7KCFufHwocj1fLmV4ZWMoYSkpKSYmKHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSx1LnB1c2gobz1bXSkpLG49ITEsKHI9WC5leGVjKGEpKSYmKG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZSh6LCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtmb3IocyBpbiBpLmZpbHRlcikhKHI9SltzXS5leGVjKGEpKXx8bFtzXSYmIShyPWxbc10ocikpfHwobj1yLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6cyxtYXRjaGVzOnJ9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP290LmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX1mdW5jdGlvbiBtdChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB5dChlLHQsbil7dmFyIGk9dC5kaXIsbz1uJiYicGFyZW50Tm9kZSI9PT1pLHM9VCsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LG4sYSl7dmFyIHUsbCxjLHA9dysiICIrcztpZihhKXt3aGlsZSh0PXRbaV0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LG4sYSkpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W3ZdfHwodFt2XT17fSksKGw9Y1tpXSkmJmxbMF09PT1wKXtpZigodT1sWzFdKT09PSEwfHx1PT09cilyZXR1cm4gdT09PSEwfWVsc2UgaWYobD1jW2ldPVtwXSxsWzFdPWUodCxuLGEpfHxyLGxbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxzPVtdLGE9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtmb3IoO3U+YTthKyspKG89ZVthXSkmJighbnx8bihvLHIsaSkpJiYocy5wdXNoKG8pLGwmJnQucHVzaChhKSk7cmV0dXJuIHN9ZnVuY3Rpb24gYnQoZSx0LG4scixpLG8pe3JldHVybiByJiYhclt2XSYmKHI9YnQocikpLGkmJiFpW3ZdJiYoaT1idChpLG8pKSxhdChmdW5jdGlvbihvLHMsYSx1KXt2YXIgbCxjLHAsZj1bXSxoPVtdLGQ9cy5sZW5ndGgsZz1vfHxDdCh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLGYsZSxhLHUpLHk9bj9pfHwobz9lOmR8fHIpP1tdOnM6bTtpZihuJiZuKG0seSxhLHUpLHIpe2w9eHQoeSxoKSxyKGwsW10sYSx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkocD1sW2NdKSYmKHlbaFtjXV09IShtW2hbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZsLnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYobD1pP1AuY2FsbChvLHApOmZbY10pPi0xJiYob1tsXT0hKHNbbF09cCkpfX1lbHNlIHk9eHQoeT09PXM/eS5zcGxpY2UoZCx5Lmxlbmd0aCk6eSksaT9pKG51bGwscyx5LHUpOk8uYXBwbHkocyx5KX0pfWZ1bmN0aW9uIHd0KGUpe3ZhciB0LG4scixvPWUubGVuZ3RoLHM9aS5yZWxhdGl2ZVtlWzBdLnR5cGVdLGE9c3x8aS5yZWxhdGl2ZVsiICJdLGw9cz8xOjAsYz15dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LGEsITApLHA9eXQoZnVuY3Rpb24oZSl7cmV0dXJuIFAuY2FsbCh0LGUpPi0xfSxhLCEwKSxmPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIXMmJihyfHxuIT09dSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpwKGUsbixyKSl9XTtmb3IoO28+bDtsKyspaWYobj1pLnJlbGF0aXZlW2VbbF0udHlwZV0pZj1beXQodnQoZiksbildO2Vsc2V7aWYobj1pLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW3ZdKXtmb3Iocj0rK2w7bz5yO3IrKylpZihpLnJlbGF0aXZlW2Vbcl0udHlwZV0pYnJlYWs7cmV0dXJuIGJ0KGw+MSYmdnQoZiksbD4xJiZtdChlLnNsaWNlKDAsbC0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWVbbC0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKHosIiQxIiksbixyPmwmJnd0KGUuc2xpY2UobCxyKSksbz5yJiZ3dChlPWUuc2xpY2UocikpLG8+ciYmbXQoZSkpfWYucHVzaChuKX1yZXR1cm4gdnQoZil9ZnVuY3Rpb24gVHQoZSx0KXt2YXIgbj0wLG89dC5sZW5ndGg+MCxzPWUubGVuZ3RoPjAsYT1mdW5jdGlvbihhLGwsYyxmLGgpe3ZhciBkLGcsbSx5PVtdLHY9MCx4PSIwIixiPWEmJltdLFQ9bnVsbCE9aCxDPXUsaz1hfHxzJiZpLmZpbmQuVEFHKCIqIixoJiZsLnBhcmVudE5vZGV8fGwpLE49dys9bnVsbD09Qz8xOk1hdGgucmFuZG9tKCl8fC4xO2ZvcihUJiYodT1sIT09cCYmbCxyPW4pO251bGwhPShkPWtbeF0pO3grKyl7aWYocyYmZCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oZCxsLGMpKXtmLnB1c2goZCk7YnJlYWt9VCYmKHc9TixyPSsrbil9byYmKChkPSFtJiZkKSYmdi0tLGEmJmIucHVzaChkKSl9aWYodis9eCxvJiZ4IT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oYix5LGwsYyk7aWYoYSl7aWYodj4wKXdoaWxlKHgtLSliW3hdfHx5W3hdfHwoeVt4XT1xLmNhbGwoZikpO3k9eHQoeSl9Ty5hcHBseShmLHkpLFQmJiFhJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJm90LnVuaXF1ZVNvcnQoZil9cmV0dXJuIFQmJih3PU4sdT1DKSxifTtyZXR1cm4gbz9hdChhKTphfWE9b3QuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPU5bZSsiICJdO2lmKCFvKXt0fHwodD1ndChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pbz13dCh0W25dKSxvW3ZdP3IucHVzaChvKTppLnB1c2gobyk7bz1OKGUsVHQoaSxyKSl9cmV0dXJuIG99O2Z1bmN0aW9uIEN0KGUsdCxuKXt2YXIgcj0wLGk9dC5sZW5ndGg7Zm9yKDtpPnI7cisrKW90KGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiBrdChlLHQscixvKXt2YXIgcyx1LGwsYyxwLGY9Z3QoZSk7aWYoIW8mJjE9PT1mLmxlbmd0aCl7aWYodT1mWzBdPWZbMF0uc2xpY2UoMCksdS5sZW5ndGg+MiYmIklEIj09PShsPXVbMF0pLnR5cGUmJm4uZ2V0QnlJZCYmOT09PXQubm9kZVR5cGUmJmgmJmkucmVsYXRpdmVbdVsxXS50eXBlXSl7aWYodD0oaS5maW5kLklEKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSx0KXx8W10pWzBdLCF0KXJldHVybiByO2U9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1zPUoubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShzLS0pe2lmKGw9dVtzXSxpLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigocD1pLmZpbmRbY10pJiYobz1wKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSxVLnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKHUuc3BsaWNlKHMsMSksZT1vLmxlbmd0aCYmbXQodSksIWUpcmV0dXJuIE8uYXBwbHkocixvKSxyO2JyZWFrfX19cmV0dXJuIGEoZSxmKShvLHQsIWgscixVLnRlc3QoZSkpLHJ9bi5zb3J0U3RhYmxlPXYuc3BsaXQoIiIpLnNvcnQoUykuam9pbigiIik9PT12LG4uZGV0ZWN0RHVwbGljYXRlcz1FLGMoKSxuLnNvcnREZXRhY2hlZD11dChmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHAuY3JlYXRlRWxlbWVudCgiZGl2IikpfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8bHQoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbj91bmRlZmluZWQ6ZS5nZXRBdHRyaWJ1dGUodCwidHlwZSI9PT10LnRvTG93ZXJDYXNlKCk/MToyKX0pLG4uYXR0cmlidXRlcyYmdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8aW5wdXQvPiIsZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8bHQoInZhbHVlIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIG58fCJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dW5kZWZpbmVkOmUuZGVmYXVsdFZhbHVlfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGx0KFIsZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiBuP3VuZGVmaW5lZDoocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOmVbdF09PT0hMD90LnRvTG93ZXJDYXNlKCk6bnVsbH0pLHguZmluZD1vdCx4LmV4cHI9b3Quc2VsZWN0b3JzLHguZXhwclsiOiJdPXguZXhwci5wc2V1ZG9zLHgudW5pcXVlPW90LnVuaXF1ZVNvcnQseC50ZXh0PW90LmdldFRleHQseC5pc1hNTERvYz1vdC5pc1hNTCx4LmNvbnRhaW5zPW90LmNvbnRhaW5zfShlKTt2YXIgRD17fTtmdW5jdGlvbiBBKGUpe3ZhciB0PURbZV09e307cmV0dXJuIHguZWFjaChlLm1hdGNoKHcpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fXguQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9InN0cmluZyI9PXR5cGVvZiBlP0RbZV18fEEoZSk6eC5leHRlbmQoe30sZSk7dmFyIHQsbixyLGksbyxzLGE9W10sdT0hZS5vbmNlJiZbXSxsPWZ1bmN0aW9uKHApe2Zvcih0PWUubWVtb3J5JiZwLG49ITAscz1pfHwwLGk9MCxvPWEubGVuZ3RoLHI9ITA7YSYmbz5zO3MrKylpZihhW3NdLmFwcGx5KHBbMF0scFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7dD0hMTticmVha31yPSExLGEmJih1P3UubGVuZ3RoJiZsKHUuc2hpZnQoKSk6dD9hPVtdOmMuZGlzYWJsZSgpKX0sYz17YWRkOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIG49YS5sZW5ndGg7KGZ1bmN0aW9uIHModCl7eC5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj14LnR5cGUobik7ImZ1bmN0aW9uIj09PXI/ZS51bmlxdWUmJmMuaGFzKG4pfHxhLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09ciYmcyhuKX0pfSkoYXJndW1lbnRzKSxyP289YS5sZW5ndGg6dCYmKGk9bixsKHQpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGEmJnguZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgbjt3aGlsZSgobj14LmluQXJyYXkodCxhLG4pKT4tMSlhLnNwbGljZShuLDEpLHImJihvPj1uJiZvLS0scz49biYmcy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT94LmluQXJyYXkoZSxhKT4tMTohKCFhfHwhYS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBhPVtdLG89MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT10PXVuZGVmaW5lZCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFhfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIHU9dW5kZWZpbmVkLHR8fGMuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiF1fSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiFhfHxuJiYhdXx8KHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxyP3UucHVzaCh0KTpsKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGN9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgcz1vWzBdLGE9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1hJiZhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMsYT9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgcz1vWzJdLGE9b1szXTtyW29bMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1kLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6cixuPT09YT9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LGEsdSxsO2lmKHI+MSlmb3IoYT1BcnJheShyKSx1PUFycmF5KHIpLGw9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKHModCxsLG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhzKHQsdSxhKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKGwsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuPW8uY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxyPW8uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW8uY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYT1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO3JldHVybiBuLnR5cGU/KG4udHlwZT0iY2hlY2tib3giLHQuY2hlY2tPbj0iIiE9PW4udmFsdWUsdC5vcHRTZWxlY3RlZD1hLnNlbGVjdGVkLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLHQucGl4ZWxQb3NpdGlvbj0hMSxuLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1uLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWEuZGlzYWJsZWQsbj1vLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksbi52YWx1ZT0idCIsbi50eXBlPSJyYWRpbyIsdC5yYWRpb1ZhbHVlPSJ0Ij09PW4udmFsdWUsbi5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0Iiksbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0Iiksci5hcHBlbmRDaGlsZChuKSx0LmNoZWNrQ2xvbmU9ci5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGUsaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix0LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx4KGZ1bmN0aW9uKCl7dmFyIG4scixzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3giLGE9by5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2EmJihuPW8uY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweCIsYS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChpKSxpLmlubmVySFRNTD0iIixpLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElIix4LnN3YXAoYSxudWxsIT1hLnN0eWxlLnpvb20/e3pvb206MX06e30sZnVuY3Rpb24oKXt0LmJveFNpemluZz00PT09aS5vZmZzZXRXaWR0aH0pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9aS5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0PXMsci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixpLnN0eWxlLndpZHRoPSIxcHgiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGEucmVtb3ZlQ2hpbGQobikpfSksdCk6dH0oe30pO3ZhciBMLHEsSD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIEYoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89eC5leHBhbmRvK01hdGgucmFuZG9tKCl9Ri51aWQ9MSxGLmFjY2VwdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZVR5cGU/MT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlOiEwfSxGLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGUpe2lmKCFGLmFjY2VwdHMoZSkpcmV0dXJuIDA7dmFyIHQ9e30sbj1lW3RoaXMuZXhwYW5kb107aWYoIW4pe249Ri51aWQrKzt0cnl7dFt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpfWNhdGNoKHIpe3RbdGhpcy5leHBhbmRvXT1uLHguZXh0ZW5kKGUsdCl9fXJldHVybiB0aGlzLmNhY2hlW25dfHwodGhpcy5jYWNoZVtuXT17fSksbn0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtpXTtpZigic3RyaW5nIj09dHlwZW9mIHQpb1t0XT1uO2Vsc2UgaWYoeC5pc0VtcHR5T2JqZWN0KG8pKXguZXh0ZW5kKHRoaXMuY2FjaGVbaV0sdCk7ZWxzZSBmb3IociBpbiB0KW9bcl09dFtyXTtyZXR1cm4gb30sZ2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jYWNoZVt0aGlzLmtleShlKV07cmV0dXJuIHQ9PT11bmRlZmluZWQ/bjpuW3RdfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09dW5kZWZpbmVkfHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJm49PT11bmRlZmluZWQ/KHI9dGhpcy5nZXQoZSx0KSxyIT09dW5kZWZpbmVkP3I6dGhpcy5nZXQoZSx4LmNhbWVsQ2FzZSh0KSkpOih0aGlzLnNldChlLHQsbiksbiE9PXVuZGVmaW5lZD9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzLmtleShlKSxzPXRoaXMuY2FjaGVbb107aWYodD09PXVuZGVmaW5lZCl0aGlzLmNhY2hlW29dPXt9O2Vsc2V7eC5pc0FycmF5KHQpP3I9dC5jb25jYXQodC5tYXAoeC5jYW1lbENhc2UpKTooaT14LmNhbWVsQ2FzZSh0KSx0IGluIHM/cj1bdCxpXToocj1pLHI9ciBpbiBzP1tyXTpyLm1hdGNoKHcpfHxbXSkpLG49ci5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSBzW3Jbbl1dfX0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4heC5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGUpe2VbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXX19LEw9bmV3IEYscT1uZXcgRix4LmV4dGVuZCh7YWNjZXB0RGF0YTpGLmFjY2VwdHMsaGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gTC5oYXNEYXRhKGUpfHxxLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBMLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtMLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHEuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtxLnJlbW92ZShlLHQpfX0pLHguZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXRoaXNbMF0sbz0wLHM9bnVsbDtpZihlPT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCYmKHM9TC5nZXQoaSksMT09PWkubm9kZVR5cGUmJiFxLmdldChpLCJoYXNEYXRhQXR0cnMiKSkpe2ZvcihuPWkuYXR0cmlidXRlcztuLmxlbmd0aD5vO28rKylyPW5bb10ubmFtZSwwPT09ci5pbmRleE9mKCJkYXRhLSIpJiYocj14LmNhbWVsQ2FzZShyLnNsaWNlKDUpKSxQKGkscixzW3JdKSk7cS5zZXQoaSwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0wuc2V0KHRoaXMsZSl9KTp4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuLHI9eC5jYW1lbENhc2UoZSk7aWYoaSYmdD09PXVuZGVmaW5lZCl7aWYobj1MLmdldChpLGUpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1MLmdldChpLHIpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1QKGkscix1bmRlZmluZWQpLG4hPT11bmRlZmluZWQpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1MLmdldCh0aGlzLHIpO0wuc2V0KHRoaXMscix0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZuIT09dW5kZWZpbmVkJiZMLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TC5yZW1vdmUodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFAoZSx0LG4pe3ZhciByO2lmKG49PT11bmRlZmluZWQmJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoTywiLSQxIikudG9Mb3dlckNhc2UoKSxuPWUuZ2V0QXR0cmlidXRlKHIpLCJzdHJpbmciPT10eXBlb2Ygbil7dHJ5e249InRydWUiPT09bj8hMDoiZmFsc2UiPT09bj8hMToibnVsbCI9PT1uP251bGw6K24rIiI9PT1uPytuOkgudGVzdChuKT9KU09OLnBhcnNlKG4pOm59Y2F0Y2goaSl7fUwuc2V0KGUsdCxuKX1lbHNlIG49dW5kZWZpbmVkO3JldHVybiBufXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGU/KHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1xLmdldChlLHQpLG4mJighcnx8eC5pc0FycmF5KG4pP3I9cS5hY2Nlc3MoZSx0LHgubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdKTp1bmRlZmluZWR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49eC5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz14Ll9xdWV1ZUhvb2tzKGUsdCkscz1mdW5jdGlvbigpe3guZGVxdWV1ZShlLHQpCn07ImlucHJvZ3Jlc3MiPT09aSYmKGk9bi5zaGlmdCgpLHItLSksaSYmKCJmeCI9PT10JiZuLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgby5zdG9wLGkuY2FsbChlLHMsbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4gcS5nZXQoZSxuKXx8cS5hY2Nlc3MoZSxuLHtlbXB0eTp4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtxLnJlbW92ZShlLFt0KyJxdWV1ZSIsbl0pfSl9KX19KSx4LmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSJmeCIsbi0tKSxuPmFyZ3VtZW50cy5sZW5ndGg/eC5xdWV1ZSh0aGlzWzBdLGUpOnQ9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj14LnF1ZXVlKHRoaXMsZSx0KTt4Ll9xdWV1ZUhvb2tzKHRoaXMsZSksImZ4Ij09PWUmJiJpbnByb2dyZXNzIiE9PW5bMF0mJnguZGVxdWV1ZSh0aGlzLGUpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZGVxdWV1ZSh0aGlzLGUpfSl9LGRlbGF5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9eC5meD94LmZ4LnNwZWVkc1tlXXx8ZTplLHQ9dHx8ImZ4Iix0aGlzLnF1ZXVlKHQsZnVuY3Rpb24odCxuKXt2YXIgcj1zZXRUaW1lb3V0KHQsZSk7bi5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpfX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9eC5EZWZlcnJlZCgpLG89dGhpcyxzPXRoaXMubGVuZ3RoLGE9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT11bmRlZmluZWQpLGU9ZXx8ImZ4Ijt3aGlsZShzLS0pbj1xLmdldChvW3NdLGUrInF1ZXVlSG9va3MiKSxuJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKGEpKTtyZXR1cm4gYSgpLGkucHJvbWlzZSh0KX19KTt2YXIgUixNLFc9L1tcdFxyXG5cZl0vZywkPS9cci9nLEI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTt4LmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiB4LmFjY2Vzcyh0aGlzLHguYXR0cixlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5yZW1vdmVBdHRyKHRoaXMsZSl9KX0scHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmFjY2Vzcyh0aGlzLHgucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbeC5wcm9wRml4W2VdfHxlXX0pfSxhZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM9MCxhPXRoaXMubGVuZ3RoLHU9InN0cmluZyI9PXR5cGVvZiBlJiZlO2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYodSlmb3IodD0oZXx8IiIpLm1hdGNoKHcpfHxbXTthPnM7cysrKWlmKG49dGhpc1tzXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVywiICIpOiIgIikpe289MDt3aGlsZShpPXRbbysrXSkwPnIuaW5kZXhPZigiICIraSsiICIpJiYocis9aSsiICIpO24uY2xhc3NOYW1lPXgudHJpbShyKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxzPTAsYT10aGlzLmxlbmd0aCx1PTA9PT1hcmd1bWVudHMubGVuZ3RofHwic3RyaW5nIj09dHlwZW9mIGUmJmU7aWYoeC5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHwiIikubWF0Y2godyl8fFtdO2E+cztzKyspaWYobj10aGlzW3NdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIik6IiIpKXtvPTA7d2hpbGUoaT10W28rK10pd2hpbGUoci5pbmRleE9mKCIgIitpKyIgIik+PTApcj1yLnJlcGxhY2UoIiAiK2krIiAiLCIgIik7bi5jbGFzc05hbWU9ZT94LnRyaW0ocik6IiJ9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGU7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdCYmInN0cmluZyI9PT1uP3Q/dGhpcy5hZGRDbGFzcyhlKTp0aGlzLnJlbW92ZUNsYXNzKGUpOnguaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24obil7eCh0aGlzKS50b2dnbGVDbGFzcyhlLmNhbGwodGhpcyxuLHRoaXMuY2xhc3NOYW1lLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoInN0cmluZyI9PT1uKXt2YXIgdCxpPTAsbz14KHRoaXMpLHM9ZS5tYXRjaCh3KXx8W107d2hpbGUodD1zW2krK10pby5oYXNDbGFzcyh0KT9vLnJlbW92ZUNsYXNzKHQpOm8uYWRkQ2xhc3ModCl9ZWxzZShuPT09cnx8ImJvb2xlYW4iPT09bikmJih0aGlzLmNsYXNzTmFtZSYmcS5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxlPT09ITE/IiI6cS5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9IiAiK2UrIiAiLG49MCxyPXRoaXMubGVuZ3RoO2Zvcig7cj5uO24rKylpZigxPT09dGhpc1tuXS5ub2RlVHlwZSYmKCIgIit0aGlzW25dLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVywiICIpLmluZGV4T2YodCk+PTApcmV0dXJuITA7cmV0dXJuITF9LHZhbDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiByPXguaXNGdW5jdGlvbihlKSx0aGlzLmVhY2goZnVuY3Rpb24obil7dmFyIGk7MT09PXRoaXMubm9kZVR5cGUmJihpPXI/ZS5jYWxsKHRoaXMsbix4KHRoaXMpLnZhbCgpKTplLG51bGw9PWk/aT0iIjoibnVtYmVyIj09dHlwZW9mIGk/aSs9IiI6eC5pc0FycmF5KGkpJiYoaT14Lm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksdD14LnZhbEhvb2tzW3RoaXMudHlwZV18fHgudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSx0JiYic2V0ImluIHQmJnQuc2V0KHRoaXMsaSwidmFsdWUiKSE9PXVuZGVmaW5lZHx8KHRoaXMudmFsdWU9aSkpfSk7aWYoaSlyZXR1cm4gdD14LnZhbEhvb2tzW2kudHlwZV18fHgudmFsSG9va3NbaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSx0JiYiZ2V0ImluIHQmJihuPXQuZ2V0KGksInZhbHVlIikpIT09dW5kZWZpbmVkP246KG49aS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIG4/bi5yZXBsYWNlKCQsIiIpOm51bGw9PW4/IiI6bil9fX0pLHguZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzLnZhbHVlO3JldHVybiF0fHx0LnNwZWNpZmllZD9lLnZhbHVlOmUudGV4dH19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLm9wdGlvbnMsaT1lLnNlbGVjdGVkSW5kZXgsbz0ic2VsZWN0LW9uZSI9PT1lLnR5cGV8fDA+aSxzPW8/bnVsbDpbXSxhPW8/aSsxOnIubGVuZ3RoLHU9MD5pP2E6bz9pOjA7Zm9yKDthPnU7dSsrKWlmKG49clt1XSwhKCFuLnNlbGVjdGVkJiZ1IT09aXx8KHguc3VwcG9ydC5vcHREaXNhYmxlZD9uLmRpc2FibGVkOm51bGwhPT1uLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSl8fG4ucGFyZW50Tm9kZS5kaXNhYmxlZCYmeC5ub2RlTmFtZShuLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZih0PXgobikudmFsKCksbylyZXR1cm4gdDtzLnB1c2godCl9cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLm9wdGlvbnMsbz14Lm1ha2VBcnJheSh0KSxzPWkubGVuZ3RoO3doaWxlKHMtLSlyPWlbc10sKHIuc2VsZWN0ZWQ9eC5pbkFycmF5KHgocikudmFsKCksbyk+PTApJiYobj0hMCk7cmV0dXJuIG58fChlLnNlbGVjdGVkSW5kZXg9LTEpLG99fX0sYXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIGksbyxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gdHlwZW9mIGUuZ2V0QXR0cmlidXRlPT09cj94LnByb3AoZSx0LG4pOigxPT09cyYmeC5pc1hNTERvYyhlKXx8KHQ9dC50b0xvd2VyQ2FzZSgpLGk9eC5hdHRySG9va3NbdF18fCh4LmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpP006UikpLG49PT11bmRlZmluZWQ/aSYmImdldCJpbiBpJiZudWxsIT09KG89aS5nZXQoZSx0KSk/bzoobz14LmZpbmQuYXR0cihlLHQpLG51bGw9PW8/dW5kZWZpbmVkOm8pOm51bGwhPT1uP2kmJiJzZXQiaW4gaSYmKG89aS5zZXQoZSxuLHQpKSE9PXVuZGVmaW5lZD9vOihlLnNldEF0dHJpYnV0ZSh0LG4rIiIpLG4pOih4LnJlbW92ZUF0dHIoZSx0KSx1bmRlZmluZWQpKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT0wLG89dCYmdC5tYXRjaCh3KTtpZihvJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPW9baSsrXSlyPXgucHJvcEZpeFtuXXx8bix4LmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pJiYoZVtyXT0hMSksZS5yZW1vdmVBdHRyaWJ1dGUobil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIXguc3VwcG9ydC5yYWRpb1ZhbHVlJiYicmFkaW8iPT09dCYmeC5ub2RlTmFtZShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gbz0xIT09c3x8IXguaXNYTUxEb2MoZSksbyYmKHQ9eC5wcm9wRml4W3RdfHx0LGk9eC5wcm9wSG9va3NbdF0pLG4hPT11bmRlZmluZWQ/aSYmInNldCJpbiBpJiYocj1pLnNldChlLG4sdCkpIT09dW5kZWZpbmVkP3I6ZVt0XT1uOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc0F0dHJpYnV0ZSgidGFiaW5kZXgiKXx8Qi50ZXN0KGUubm9kZU5hbWUpfHxlLmhyZWY/ZS50YWJJbmRleDotMX19fX0pLE09e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT0hMT94LnJlbW92ZUF0dHIoZSxuKTplLnNldEF0dHJpYnV0ZShuLG4pLG59fSx4LmVhY2goeC5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgbj14LmV4cHIuYXR0ckhhbmRsZVt0XXx8eC5maW5kLmF0dHI7eC5leHByLmF0dHJIYW5kbGVbdF09ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXguZXhwci5hdHRySGFuZGxlW3RdLG89cj91bmRlZmluZWQ6KHguZXhwci5hdHRySGFuZGxlW3RdPXVuZGVmaW5lZCkhPW4oZSx0LHIpP3QudG9Mb3dlckNhc2UoKTpudWxsO3JldHVybiB4LmV4cHIuYXR0ckhhbmRsZVt0XT1pLG99fSkseC5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwoeC5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSx4LmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe3gucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSx4LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXt4LnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5pc0FycmF5KHQpP2UuY2hlY2tlZD14LmluQXJyYXkoeChlKS52YWwoKSx0KT49MDp1bmRlZmluZWR9fSx4LnN1cHBvcnQuY2hlY2tPbnx8KHgudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjplLnZhbHVlfSl9KTt2YXIgST0vXmtleS8sej0vXig/Om1vdXNlfGNvbnRleHRtZW51KXxjbGljay8sXz0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWD0vXihbXi5dKikoPzpcLiguKyl8KSQvO2Z1bmN0aW9uIFUoKXtyZXR1cm4hMH1mdW5jdGlvbiBZKCl7cmV0dXJuITF9ZnVuY3Rpb24gVigpe3RyeXtyZXR1cm4gby5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe319eC5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLHQsbixpLG8pe3ZhciBzLGEsdSxsLGMscCxmLGgsZCxnLG0seT1xLmdldChlKTtpZih5KXtuLmhhbmRsZXImJihzPW4sbj1zLmhhbmRsZXIsbz1zLnNlbGVjdG9yKSxuLmd1aWR8fChuLmd1aWQ9eC5ndWlkKyspLChsPXkuZXZlbnRzKXx8KGw9eS5ldmVudHM9e30pLChhPXkuaGFuZGxlKXx8KGE9eS5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiB4PT09cnx8ZSYmeC5ldmVudC50cmlnZ2VyZWQ9PT1lLnR5cGU/dW5kZWZpbmVkOnguZXZlbnQuZGlzcGF0Y2guYXBwbHkoYS5lbGVtLGFyZ3VtZW50cyl9LGEuZWxlbT1lKSx0PSh0fHwiIikubWF0Y2godyl8fFsiIl0sYz10Lmxlbmd0aDt3aGlsZShjLS0pdT1YLmV4ZWModFtjXSl8fFtdLGQ9bT11WzFdLGc9KHVbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkJiYoZj14LmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KG8/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGQsZj14LmV2ZW50LnNwZWNpYWxbZF18fHt9LHA9eC5leHRlbmQoe3R5cGU6ZCxvcmlnVHlwZTptLGRhdGE6aSxoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6byxuZWVkc0NvbnRleHQ6byYmeC5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KG8pLG5hbWVzcGFjZTpnLmpvaW4oIi4iKX0scyksKGg9bFtkXSl8fChoPWxbZF09W10saC5kZWxlZ2F0ZUNvdW50PTAsZi5zZXR1cCYmZi5zZXR1cC5jYWxsKGUsaSxnLGEpIT09ITF8fGUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKGQsYSwhMSkpLGYuYWRkJiYoZi5hZGQuY2FsbChlLHApLHAuaGFuZGxlci5ndWlkfHwocC5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksbz9oLnNwbGljZShoLmRlbGVnYXRlQ291bnQrKywwLHApOmgucHVzaChwKSx4LmV2ZW50Lmdsb2JhbFtkXT0hMCk7ZT1udWxsfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8scyxhLHUsbCxjLHAsZixoLGQsZyxtPXEuaGFzRGF0YShlKSYmcS5nZXQoZSk7aWYobSYmKHU9bS5ldmVudHMpKXt0PSh0fHwiIikubWF0Y2godyl8fFsiIl0sbD10Lmxlbmd0aDt3aGlsZShsLS0paWYoYT1YLmV4ZWModFtsXSl8fFtdLGg9Zz1hWzFdLGQ9KGFbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxoKXtwPXguZXZlbnQuc3BlY2lhbFtoXXx8e30saD0ocj9wLmRlbGVnYXRlVHlwZTpwLmJpbmRUeXBlKXx8aCxmPXVbaF18fFtdLGE9YVsyXSYmUmVnRXhwKCIoXnxcXC4pIitkLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLHM9bz1mLmxlbmd0aDt3aGlsZShvLS0pYz1mW29dLCFpJiZnIT09Yy5vcmlnVHlwZXx8biYmbi5ndWlkIT09Yy5ndWlkfHxhJiYhYS50ZXN0KGMubmFtZXNwYWNlKXx8ciYmciE9PWMuc2VsZWN0b3ImJigiKioiIT09cnx8IWMuc2VsZWN0b3IpfHwoZi5zcGxpY2UobywxKSxjLnNlbGVjdG9yJiZmLmRlbGVnYXRlQ291bnQtLSxwLnJlbW92ZSYmcC5yZW1vdmUuY2FsbChlLGMpKTtzJiYhZi5sZW5ndGgmJihwLnRlYXJkb3duJiZwLnRlYXJkb3duLmNhbGwoZSxkLG0uaGFuZGxlKSE9PSExfHx4LnJlbW92ZUV2ZW50KGUsaCxtLmhhbmRsZSksZGVsZXRlIHVbaF0pfWVsc2UgZm9yKGggaW4gdSl4LmV2ZW50LnJlbW92ZShlLGgrdFtsXSxuLHIsITApO3guaXNFbXB0eU9iamVjdCh1KSYmKGRlbGV0ZSBtLmhhbmRsZSxxLnJlbW92ZShlLCJldmVudHMiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKHQsbixyLGkpe3ZhciBzLGEsdSxsLGMscCxmLGg9W3J8fG9dLGQ9eS5jYWxsKHQsInR5cGUiKT90LnR5cGU6dCxnPXkuY2FsbCh0LCJuYW1lc3BhY2UiKT90Lm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKGE9dT1yPXJ8fG8sMyE9PXIubm9kZVR5cGUmJjghPT1yLm5vZGVUeXBlJiYhXy50ZXN0KGQreC5ldmVudC50cmlnZ2VyZWQpJiYoZC5pbmRleE9mKCIuIik+PTAmJihnPWQuc3BsaXQoIi4iKSxkPWcuc2hpZnQoKSxnLnNvcnQoKSksYz0wPmQuaW5kZXhPZigiOiIpJiYib24iK2QsdD10W3guZXhwYW5kb10/dDpuZXcgeC5FdmVudChkLCJvYmplY3QiPT10eXBlb2YgdCYmdCksdC5pc1RyaWdnZXI9aT8yOjMsdC5uYW1lc3BhY2U9Zy5qb2luKCIuIiksdC5uYW1lc3BhY2VfcmU9dC5uYW1lc3BhY2U/UmVnRXhwKCIoXnxcXC4pIitnLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsdC5yZXN1bHQ9dW5kZWZpbmVkLHQudGFyZ2V0fHwodC50YXJnZXQ9ciksbj1udWxsPT1uP1t0XTp4Lm1ha2VBcnJheShuLFt0XSksZj14LmV2ZW50LnNwZWNpYWxbZF18fHt9LGl8fCFmLnRyaWdnZXJ8fGYudHJpZ2dlci5hcHBseShyLG4pIT09ITEpKXtpZighaSYmIWYubm9CdWJibGUmJiF4LmlzV2luZG93KHIpKXtmb3IobD1mLmRlbGVnYXRlVHlwZXx8ZCxfLnRlc3QobCtkKXx8KGE9YS5wYXJlbnROb2RlKTthO2E9YS5wYXJlbnROb2RlKWgucHVzaChhKSx1PWE7dT09PShyLm93bmVyRG9jdW1lbnR8fG8pJiZoLnB1c2godS5kZWZhdWx0Vmlld3x8dS5wYXJlbnRXaW5kb3d8fGUpfXM9MDt3aGlsZSgoYT1oW3MrK10pJiYhdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXQudHlwZT1zPjE/bDpmLmJpbmRUeXBlfHxkLHA9KHEuZ2V0KGEsImV2ZW50cyIpfHx7fSlbdC50eXBlXSYmcS5nZXQoYSwiaGFuZGxlIikscCYmcC5hcHBseShhLG4pLHA9YyYmYVtjXSxwJiZ4LmFjY2VwdERhdGEoYSkmJnAuYXBwbHkmJnAuYXBwbHkoYSxuKT09PSExJiZ0LnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIHQudHlwZT1kLGl8fHQuaXNEZWZhdWx0UHJldmVudGVkKCl8fGYuX2RlZmF1bHQmJmYuX2RlZmF1bHQuYXBwbHkoaC5wb3AoKSxuKSE9PSExfHwheC5hY2NlcHREYXRhKHIpfHxjJiZ4LmlzRnVuY3Rpb24ocltkXSkmJiF4LmlzV2luZG93KHIpJiYodT1yW2NdLHUmJihyW2NdPW51bGwpLHguZXZlbnQudHJpZ2dlcmVkPWQscltkXSgpLHguZXZlbnQudHJpZ2dlcmVkPXVuZGVmaW5lZCx1JiYocltjXT11KSksdC5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXtlPXguZXZlbnQuZml4KGUpO3ZhciB0LG4scixpLG8scz1bXSxhPWQuY2FsbChhcmd1bWVudHMpLHU9KHEuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbZS50eXBlXXx8W10sbD14LmV2ZW50LnNwZWNpYWxbZS50eXBlXXx8e307aWYoYVswXT1lLGUuZGVsZWdhdGVUYXJnZXQ9dGhpcywhbC5wcmVEaXNwYXRjaHx8bC5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZSkhPT0hMSl7cz14LmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxlLHUpLHQ9MDt3aGlsZSgoaT1zW3QrK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtlLmN1cnJlbnRUYXJnZXQ9aS5lbGVtLG49MDt3aGlsZSgobz1pLmhhbmRsZXJzW24rK10pJiYhZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghZS5uYW1lc3BhY2VfcmV8fGUubmFtZXNwYWNlX3JlLnRlc3Qoby5uYW1lc3BhY2UpKSYmKGUuaGFuZGxlT2JqPW8sZS5kYXRhPW8uZGF0YSxyPSgoeC5ldmVudC5zcGVjaWFsW28ub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxvLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSxhKSxyIT09dW5kZWZpbmVkJiYoZS5yZXN1bHQ9cik9PT0hMSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGwucG9zdERpc3BhdGNoJiZsLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLHM9W10sYT10LmRlbGVnYXRlQ291bnQsdT1lLnRhcmdldDtpZihhJiZ1Lm5vZGVUeXBlJiYoIWUuYnV0dG9ufHwiY2xpY2siIT09ZS50eXBlKSlmb3IoO3UhPT10aGlzO3U9dS5wYXJlbnROb2RlfHx0aGlzKWlmKHUuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWUudHlwZSl7Zm9yKHI9W10sbj0wO2E+bjtuKyspbz10W25dLGk9by5zZWxlY3RvcisiICIscltpXT09PXVuZGVmaW5lZCYmKHJbaV09by5uZWVkc0NvbnRleHQ/eChpLHRoaXMpLmluZGV4KHUpPj0wOnguZmluZChpLHRoaXMsbnVsbCxbdV0pLmxlbmd0aCkscltpXSYmci5wdXNoKG8pO3IubGVuZ3RoJiZzLnB1c2goe2VsZW06dSxoYW5kbGVyczpyfSl9cmV0dXJuIHQubGVuZ3RoPmEmJnMucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOnQuc2xpY2UoYSl9KSxzfSxwcm9wczoiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09ZS53aGljaCYmKGUud2hpY2g9bnVsbCE9dC5jaGFyQ29kZT90LmNoYXJDb2RlOnQua2V5Q29kZSksZX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHM9dC5idXR0b247cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPXQuY2xpZW50WCYmKG49ZS50YXJnZXQub3duZXJEb2N1bWVudHx8byxyPW4uZG9jdW1lbnRFbGVtZW50LGk9bi5ib2R5LGUucGFnZVg9dC5jbGllbnRYKyhyJiZyLnNjcm9sbExlZnR8fGkmJmkuc2Nyb2xsTGVmdHx8MCktKHImJnIuY2xpZW50TGVmdHx8aSYmaS5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPXQuY2xpZW50WSsociYmci5zY3JvbGxUb3B8fGkmJmkuc2Nyb2xsVG9wfHwwKS0ociYmci5jbGllbnRUb3B8fGkmJmkuY2xpZW50VG9wfHwwKSksZS53aGljaHx8cz09PXVuZGVmaW5lZHx8KGUud2hpY2g9MSZzPzE6MiZzPzM6NCZzPzI6MCksZX19LGZpeDpmdW5jdGlvbihlKXtpZihlW3guZXhwYW5kb10pcmV0dXJuIGU7dmFyIHQsbixyLGk9ZS50eXBlLHM9ZSxhPXRoaXMuZml4SG9va3NbaV07YXx8KHRoaXMuZml4SG9va3NbaV09YT16LnRlc3QoaSk/dGhpcy5tb3VzZUhvb2tzOkkudGVzdChpKT90aGlzLmtleUhvb2tzOnt9KSxyPWEucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoYS5wcm9wcyk6dGhpcy5wcm9wcyxlPW5ldyB4LkV2ZW50KHMpLHQ9ci5sZW5ndGg7d2hpbGUodC0tKW49clt0XSxlW25dPXNbbl07cmV0dXJuIGUudGFyZ2V0fHwoZS50YXJnZXQ9byksMz09PWUudGFyZ2V0Lm5vZGVUeXBlJiYoZS50YXJnZXQ9ZS50YXJnZXQucGFyZW50Tm9kZSksYS5maWx0ZXI/YS5maWx0ZXIoZSxzKTplfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PVYoKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp1bmRlZmluZWR9LGRlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PVYoKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dW5kZWZpbmVkfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4iY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZ4Lm5vZGVOYW1lKHRoaXMsImlucHV0Iik/KHRoaXMuY2xpY2soKSwhMSk6dW5kZWZpbmVkfSxfZGVmYXVsdDpmdW5jdGlvbihlKXtyZXR1cm4geC5ub2RlTmFtZShlLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZS5yZXN1bHQhPT11bmRlZmluZWQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXguZXh0ZW5kKG5ldyB4LkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7cj94LmV2ZW50LnRyaWdnZXIoaSxudWxsLHQpOnguZXZlbnQuZGlzcGF0Y2guY2FsbCh0LGkpLGkuaXNEZWZhdWx0UHJldmVudGVkKCkmJm4ucHJldmVudERlZmF1bHQoKX19LHgucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9LHguRXZlbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHguRXZlbnQ/KGUmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fGUuZ2V0UHJldmVudERlZmF1bHQmJmUuZ2V0UHJldmVudERlZmF1bHQoKT9VOlkpOnRoaXMudHlwZT1lLHQmJnguZXh0ZW5kKHRoaXMsdCksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fHgubm93KCksdGhpc1t4LmV4cGFuZG9dPSEwLHVuZGVmaW5lZCk6bmV3IHguRXZlbnQoZSx0KX0seC5FdmVudC5wcm90b3R5cGU9e2lzRGVmYXVsdFByZXZlbnRlZDpZLGlzUHJvcGFnYXRpb25TdG9wcGVkOlksaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6WSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1VLGUmJmUucHJldmVudERlZmF1bHQmJmUucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9VSxlJiZlLnN0b3BQcm9wYWdhdGlvbiYmZS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1VLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSx4LmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihlLHQpe3guZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOnQsYmluZFR5cGU6dCxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzLGk9ZS5yZWxhdGVkVGFyZ2V0LG89ZS5oYW5kbGVPYmo7cmV0dXJuKCFpfHxpIT09ciYmIXguY29udGFpbnMocixpKSkmJihlLnR5cGU9by5vcmlnVHlwZSxuPW8uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQpLG59fX0pLHguc3VwcG9ydC5mb2N1c2luQnViYmxlc3x8eC5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe3ZhciBuPTAscj1mdW5jdGlvbihlKXt4LmV2ZW50LnNpbXVsYXRlKHQsZS50YXJnZXQseC5ldmVudC5maXgoZSksITApfTt4LmV2ZW50LnNwZWNpYWxbdF09e3NldHVwOmZ1bmN0aW9uKCl7MD09PW4rKyYmby5hZGRFdmVudExpc3RlbmVyKGUsciwhMCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7MD09PS0tbiYmby5yZW1vdmVFdmVudExpc3RlbmVyKGUsciwhMCl9fX0pLHguZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLHM7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPW58fHQsdD11bmRlZmluZWQpO2ZvcihzIGluIGUpdGhpcy5vbihzLHQsbixlW3NdLGkpO3JldHVybiB0aGlzfWlmKG51bGw9PW4mJm51bGw9PXI/KHI9dCxuPXQ9dW5kZWZpbmVkKTpudWxsPT1yJiYoInN0cmluZyI9PXR5cGVvZiB0PyhyPW4sbj11bmRlZmluZWQpOihyPW4sbj10LHQ9dW5kZWZpbmVkKSkscj09PSExKXI9WTtlbHNlIGlmKCFyKXJldHVybiB0aGlzO3JldHVybiAxPT09aSYmKG89cixyPWZ1bmN0aW9uKGUpe3JldHVybiB4KCkub2ZmKGUpLG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyLmd1aWQ9by5ndWlkfHwoby5ndWlkPXguZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5ldmVudC5hZGQodGhpcyxlLHIsbix0KX0pfSxvbmU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24oZSx0LG4sciwxKX0sb2ZmOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKGUmJmUucHJldmVudERlZmF1bHQmJmUuaGFuZGxlT2JqKXJldHVybiByPWUuaGFuZGxlT2JqLHgoZS5kZWxlZ2F0ZVRhcmdldCkub2ZmKHIubmFtZXNwYWNlP3Iub3JpZ1R5cGUrIi4iK3IubmFtZXNwYWNlOnIub3JpZ1R5cGUsci5zZWxlY3RvcixyLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IoaSBpbiBlKXRoaXMub2ZmKGksdCxlW2ldKTtyZXR1cm4gdGhpc31yZXR1cm4odD09PSExfHwiZnVuY3Rpb24iPT10eXBlb2YgdCkmJihuPXQsdD11bmRlZmluZWQpLG49PT0hMSYmKG49WSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnRyaWdnZXIoZSx0LHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpc1swXTtyZXR1cm4gbj94LmV2ZW50LnRyaWdnZXIoZSx0LG4sITApOnVuZGVmaW5lZH19KTt2YXIgRz0vXi5bXjojXFtcLixdKiQvLEo9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sUT14LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LEs9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07eC5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPXRoaXMsaT1yLmxlbmd0aDtpZigic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIHRoaXMucHVzaFN0YWNrKHgoZSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MDtpPnQ7dCsrKWlmKHguY29udGFpbnMoclt0XSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IodD0wO2k+dDt0KyspeC5maW5kKGUsclt0XSxuKTtyZXR1cm4gbj10aGlzLnB1c2hTdGFjayhpPjE/eC51bmlxdWUobik6biksbi5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrIiAiK2U6ZSxufSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9eChlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9MDtmb3IoO24+ZTtlKyspaWYoeC5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZXQodGhpcyxlfHxbXSwhMCkpfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGV0KHRoaXMsZXx8W10sITEpKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFldCh0aGlzLCJzdHJpbmciPT10eXBlb2YgZSYmUS50ZXN0KGUpP3goZSk6ZXx8W10sITEpLmxlbmd0aH0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10scz1RLnRlc3QoZSl8fCJzdHJpbmciIT10eXBlb2YgZT94KGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7aT5yO3IrKylmb3Iobj10aGlzW3JdO24mJm4hPT10O249bi5wYXJlbnROb2RlKWlmKDExPm4ubm9kZVR5cGUmJihzP3MuaW5kZXgobik+LTE6MT09PW4ubm9kZVR5cGUmJnguZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSkpe249by5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aD4xP3gudW5pcXVlKG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/Zy5jYWxsKHgoZSksdGhpc1swXSk6Zy5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPSJzdHJpbmciPT10eXBlb2YgZT94KGUsdCk6eC5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj14Lm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSk7ZnVuY3Rpb24gWihlLHQpe3doaWxlKChlPWVbdF0pJiYxIT09ZS5ub2RlVHlwZSk7cmV0dXJuIGV9eC5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiB4LmRpcihlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsInBhcmVudE5vZGUiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBaKGUsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIFooZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmRpcihlLCJuZXh0U2libGluZyIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiB4LnNpYmxpbmcoKGUucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsZSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiB4LnNpYmxpbmcoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudERvY3VtZW50fHx4Lm1lcmdlKFtdLGUuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihlLHQpe3guZm5bZV09ZnVuY3Rpb24obixyKXt2YXIgaT14Lm1hcCh0aGlzLHQsbik7cmV0dXJuIlVudGlsIiE9PWUuc2xpY2UoLTUpJiYocj1uKSxyJiYic3RyaW5nIj09dHlwZW9mIHImJihpPXguZmlsdGVyKHIsaSkpLHRoaXMubGVuZ3RoPjEmJihLW2VdfHx4LnVuaXF1ZShpKSxKLnRlc3QoZSkmJmkucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhpKX19KSx4LmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP3guZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106eC5maW5kLm1hdGNoZXMoZSx4LmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LGRpcjpmdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT1uIT09dW5kZWZpbmVkO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmeChlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LHNpYmxpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtmb3IoO2U7ZT1lLm5leHRTaWJsaW5nKTE9PT1lLm5vZGVUeXBlJiZlIT09dCYmbi5wdXNoKGUpO3JldHVybiBufX0pO2Z1bmN0aW9uIGV0KGUsdCxuKXtpZih4LmlzRnVuY3Rpb24odCkpcmV0dXJuIHguZ3JlcChlLGZ1bmN0aW9uKGUscil7cmV0dXJuISF0LmNhbGwoZSxyLGUpIT09bn0pO2lmKHQubm9kZVR5cGUpcmV0dXJuIHguZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dCE9PW59KTtpZigic3RyaW5nIj09dHlwZW9mIHQpe2lmKEcudGVzdCh0KSlyZXR1cm4geC5maWx0ZXIodCxlLG4pO3Q9eC5maWx0ZXIodCxlKX1yZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGcuY2FsbCh0LGUpPj0wIT09bn0pfXZhciB0dD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLG50PS88KFtcdzpdKykvLHJ0PS88fCYjP1x3KzsvLGl0PS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksb3Q9L14oPzpjaGVja2JveHxyYWRpbykkL2ksc3Q9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksYXQ9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLHV0PS9edHJ1ZVwvKC4qKS8sbHQ9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLGN0PXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07Y3Qub3B0Z3JvdXA9Y3Qub3B0aW9uLGN0LnRib2R5PWN0LnRmb290PWN0LmNvbGdyb3VwPWN0LmNhcHRpb249Y3QudGhlYWQsY3QudGg9Y3QudGQseC5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT11bmRlZmluZWQ/eC50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8bykuY3JlYXRlVGV4dE5vZGUoZSkpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9cHQodGhpcyxlKTt0LmFwcGVuZENoaWxkKGUpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1wdCh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9ZT94LmZpbHRlcihlLHRoaXMpOnRoaXMsaT0wO2Zvcig7bnVsbCE9KG49cltpXSk7aSsrKXR8fDEhPT1uLm5vZGVUeXBlfHx4LmNsZWFuRGF0YShtdChuKSksbi5wYXJlbnROb2RlJiYodCYmeC5jb250YWlucyhuLm93bmVyRG9jdW1lbnQsbikmJmR0KG10KG4sInNjcmlwdCIpKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3ZhciBlLHQ9MDtmb3IoO251bGwhPShlPXRoaXNbdF0pO3QrKykxPT09ZS5ub2RlVHlwZSYmKHguY2xlYW5EYXRhKG10KGUsITEpKSxlLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsPT1lPyExOmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB4LmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbMF18fHt9LG49MCxyPXRoaXMubGVuZ3RoO2lmKGU9PT11bmRlZmluZWQmJjE9PT10Lm5vZGVUeXBlKXJldHVybiB0LmlubmVySFRNTDtpZigic3RyaW5nIj09dHlwZW9mIGUmJiFpdC50ZXN0KGUpJiYhY3RbKG50LmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXtlPWUucmVwbGFjZSh0dCwiPCQxPjwvJDI+Iik7dHJ5e2Zvcig7cj5uO24rKyl0PXRoaXNbbl18fHt9LDE9PT10Lm5vZGVUeXBlJiYoeC5jbGVhbkRhdGEobXQodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChpKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgZT14Lm1hcCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybltlLm5leHRTaWJsaW5nLGUucGFyZW50Tm9kZV19KSx0PTA7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKG4pe3ZhciByPWVbdCsrXSxpPWVbdCsrXTtpJiYociYmci5wYXJlbnROb2RlIT09aSYmKHI9dGhpcy5uZXh0U2libGluZykseCh0aGlzKS5yZW1vdmUoKSxpLmluc2VydEJlZm9yZShuLHIpKX0sITApLHQ/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlKGUsITApfSxkb21NYW5pcDpmdW5jdGlvbihlLHQsbil7ZT1mLmFwcGx5KFtdLGUpO3ZhciByLGksbyxzLGEsdSxsPTAsYz10aGlzLmxlbmd0aCxwPXRoaXMsaD1jLTEsZD1lWzBdLGc9eC5pc0Z1bmN0aW9uKGQpO2lmKGd8fCEoMT49Y3x8InN0cmluZyIhPXR5cGVvZiBkfHx4LnN1cHBvcnQuY2hlY2tDbG9uZSkmJnN0LnRlc3QoZCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihyKXt2YXIgaT1wLmVxKHIpO2cmJihlWzBdPWQuY2FsbCh0aGlzLHIsaS5odG1sKCkpKSxpLmRvbU1hbmlwKGUsdCxuKX0pO2lmKGMmJihyPXguYnVpbGRGcmFnbWVudChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSwhbiYmdGhpcyksaT1yLmZpcnN0Q2hpbGQsMT09PXIuY2hpbGROb2Rlcy5sZW5ndGgmJihyPWkpLGkpKXtmb3Iobz14Lm1hcChtdChyLCJzY3JpcHQiKSxmdCkscz1vLmxlbmd0aDtjPmw7bCsrKWE9cixsIT09aCYmKGE9eC5jbG9uZShhLCEwLCEwKSxzJiZ4Lm1lcmdlKG8sbXQoYSwic2NyaXB0IikpKSx0LmNhbGwodGhpc1tsXSxhLGwpO2lmKHMpZm9yKHU9b1tvLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LHgubWFwKG8saHQpLGw9MDtzPmw7bCsrKWE9b1tsXSxhdC50ZXN0KGEudHlwZXx8IiIpJiYhcS5hY2Nlc3MoYSwiZ2xvYmFsRXZhbCIpJiZ4LmNvbnRhaW5zKHUsYSkmJihhLnNyYz94Ll9ldmFsVXJsKGEuc3JjKTp4Lmdsb2JhbEV2YWwoYS50ZXh0Q29udGVudC5yZXBsYWNlKGx0LCIiKSkpfXJldHVybiB0aGlzfX0pLHguZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihlKXt2YXIgbixyPVtdLGk9eChlKSxvPWkubGVuZ3RoLTEscz0wO2Zvcig7bz49cztzKyspbj1zPT09bz90aGlzOnRoaXMuY2xvbmUoITApLHgoaVtzXSlbdF0obiksaC5hcHBseShyLG4uZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhyKX19KSx4LmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxzLGE9ZS5jbG9uZU5vZGUoITApLHU9eC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoISh4LnN1cHBvcnQubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fHguaXNYTUxEb2MoZSkpKWZvcihzPW10KGEpLG89bXQoZSkscj0wLGk9by5sZW5ndGg7aT5yO3IrKyl5dChvW3JdLHNbcl0pO2lmKHQpaWYobilmb3Iobz1vfHxtdChlKSxzPXN8fG10KGEpLHI9MCxpPW8ubGVuZ3RoO2k+cjtyKyspZ3Qob1tyXSxzW3JdKTtlbHNlIGd0KGUsYSk7cmV0dXJuIHM9bXQoYSwic2NyaXB0Iikscy5sZW5ndGg+MCYmZHQocywhdSYmbXQoZSwic2NyaXB0IikpLGF9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzLGEsdSxsLGM9MCxwPWUubGVuZ3RoLGY9dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksaD1bXTtmb3IoO3A+YztjKyspaWYoaT1lW2NdLGl8fDA9PT1pKWlmKCJvYmplY3QiPT09eC50eXBlKGkpKXgubWVyZ2UoaCxpLm5vZGVUeXBlP1tpXTppKTtlbHNlIGlmKHJ0LnRlc3QoaSkpe289b3x8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShudC5leGVjKGkpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGE9Y3Rbc118fGN0Ll9kZWZhdWx0LG8uaW5uZXJIVE1MPWFbMV0raS5yZXBsYWNlKHR0LCI8JDE+PC8kMj4iKSthWzJdLGw9YVswXTt3aGlsZShsLS0pbz1vLmxhc3RDaGlsZDt4Lm1lcmdlKGgsby5jaGlsZE5vZGVzKSxvPWYuZmlyc3RDaGlsZCxvLnRleHRDb250ZW50PSIifWVsc2UgaC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUoaSkpO2YudGV4dENvbnRlbnQ9IiIsYz0wO3doaWxlKGk9aFtjKytdKWlmKCghcnx8LTE9PT14LmluQXJyYXkoaSxyKSkmJih1PXguY29udGFpbnMoaS5vd25lckRvY3VtZW50LGkpLG89bXQoZi5hcHBlbmRDaGlsZChpKSwic2NyaXB0IiksdSYmZHQobyksbikpe2w9MDt3aGlsZShpPW9bbCsrXSlhdC50ZXN0KGkudHlwZXx8IiIpJiZuLnB1c2goaSl9cmV0dXJuIGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHMsYT14LmV2ZW50LnNwZWNpYWwsdT0wO2Zvcig7KG49ZVt1XSkhPT11bmRlZmluZWQ7dSsrKXtpZihGLmFjY2VwdHMobikmJihvPW5bcS5leHBhbmRvXSxvJiYodD1xLmNhY2hlW29dKSkpe2lmKHI9T2JqZWN0LmtleXModC5ldmVudHN8fHt9KSxyLmxlbmd0aClmb3Iocz0wOyhpPXJbc10pIT09dW5kZWZpbmVkO3MrKylhW2ldP3guZXZlbnQucmVtb3ZlKG4saSk6eC5yZW1vdmVFdmVudChuLGksdC5oYW5kbGUpO3EuY2FjaGVbb10mJmRlbGV0ZSBxLmNhY2hlW29dfWRlbGV0ZSBMLmNhY2hlW25bTC5leHBhbmRvXV19fSxfZXZhbFVybDpmdW5jdGlvbihlKXtyZXR1cm4geC5hamF4KHt1cmw6ZSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfX0pO2Z1bmN0aW9uIHB0KGUsdCl7cmV0dXJuIHgubm9kZU5hbWUoZSwidGFibGUiKSYmeC5ub2RlTmFtZSgxPT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCwidHIiKT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTplfWZ1bmN0aW9uIGZ0KGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrZS50eXBlLGV9ZnVuY3Rpb24gaHQoZSl7dmFyIHQ9dXQuZXhlYyhlLnR5cGUpO3JldHVybiB0P2UudHlwZT10WzFdOmUucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksZX1mdW5jdGlvbiBkdChlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDtmb3IoO24+cjtyKyspcS5zZXQoZVtyXSwiZ2xvYmFsRXZhbCIsIXR8fHEuZ2V0KHRbcl0sImdsb2JhbEV2YWwiKSl9ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixyLGksbyxzLGEsdSxsO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihxLmhhc0RhdGEoZSkmJihvPXEuYWNjZXNzKGUpLHM9cS5zZXQodCxvKSxsPW8uZXZlbnRzKSl7ZGVsZXRlIHMuaGFuZGxlLHMuZXZlbnRzPXt9O2ZvcihpIGluIGwpZm9yKG49MCxyPWxbaV0ubGVuZ3RoO3I+bjtuKyspeC5ldmVudC5hZGQodCxpLGxbaV1bbl0pfUwuaGFzRGF0YShlKSYmKGE9TC5hY2Nlc3MoZSksdT14LmV4dGVuZCh7fSxhKSxMLnNldCh0LHUpKX19ZnVuY3Rpb24gbXQoZSx0KXt2YXIgbj1lLmdldEVsZW1lbnRzQnlUYWdOYW1lP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUodHx8IioiKTplLnF1ZXJ5U2VsZWN0b3JBbGw/ZS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6W107cmV0dXJuIHQ9PT11bmRlZmluZWR8fHQmJngubm9kZU5hbWUoZSx0KT94Lm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIHl0KGUsdCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyJpbnB1dCI9PT1uJiZvdC50ZXN0KGUudHlwZSk/dC5jaGVja2VkPWUuY2hlY2tlZDooImlucHV0Ij09PW58fCJ0ZXh0YXJlYSI9PT1uKSYmKHQuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlKX14LmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4geC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLndyYXBBbGwoZS5jYWxsKHRoaXMsdCkpfSk6KHRoaXNbMF0mJih0PXgoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0RWxlbWVudENoaWxkKWU9ZS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihlKXtyZXR1cm4geC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLndyYXBJbm5lcihlLmNhbGwodGhpcyx0KSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD14KHRoaXMpLG49dC5jb250ZW50cygpO24ubGVuZ3RoP24ud3JhcEFsbChlKTp0LmFwcGVuZChlKX0pfSx3cmFwOmZ1bmN0aW9uKGUpe3ZhciB0PXguaXNGdW5jdGlvbihlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3godGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXt4Lm5vZGVOYW1lKHRoaXMsImJvZHkiKXx8eCh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSk7dmFyIHZ0LHh0LGJ0PS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyx3dD0vXm1hcmdpbi8sVHQ9UmVnRXhwKCJeKCIrYisiKSguKikkIiwiaSIpLEN0PVJlZ0V4cCgiXigiK2IrIikoPyFweClbYS16JV0rJCIsImkiKSxrdD1SZWdFeHAoIl4oWystXSk9KCIrYisiKSIsImkiKSxOdD17Qk9EWToiYmxvY2sifSxFdD17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sU3Q9e2xldHRlclNwYWNpbmc6MCxmb250V2VpZ2h0OjQwMH0sanQ9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxEdD1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO2Z1bmN0aW9uIEF0KGUsdCl7aWYodCBpbiBlKXJldHVybiB0O3ZhciBuPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxyPXQsaT1EdC5sZW5ndGg7d2hpbGUoaS0tKWlmKHQ9RHRbaV0rbix0IGluIGUpcmV0dXJuIHQ7cmV0dXJuIHJ9ZnVuY3Rpb24gTHQoZSx0KXtyZXR1cm4gZT10fHxlLCJub25lIj09PXguY3NzKGUsImRpc3BsYXkiKXx8IXguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIHF0KHQpe3JldHVybiBlLmdldENvbXB1dGVkU3R5bGUodCxudWxsKX1mdW5jdGlvbiBIdChlLHQpe3ZhciBuLHIsaSxvPVtdLHM9MCxhPWUubGVuZ3RoO2Zvcig7YT5zO3MrKylyPWVbc10sci5zdHlsZSYmKG9bc109cS5nZXQociwib2xkZGlzcGxheSIpLG49ci5zdHlsZS5kaXNwbGF5LHQ/KG9bc118fCJub25lIiE9PW58fChyLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZMdChyKSYmKG9bc109cS5hY2Nlc3Mociwib2xkZGlzcGxheSIsUnQoci5ub2RlTmFtZSkpKSk6b1tzXXx8KGk9THQociksKG4mJiJub25lIiE9PW58fCFpKSYmcS5zZXQociwib2xkZGlzcGxheSIsaT9uOnguY3NzKHIsImRpc3BsYXkiKSkpKTtmb3Iocz0wO2E+cztzKyspcj1lW3NdLHIuc3R5bGUmJih0JiYibm9uZSIhPT1yLnN0eWxlLmRpc3BsYXkmJiIiIT09ci5zdHlsZS5kaXNwbGF5fHwoci5zdHlsZS5kaXNwbGF5PXQ/b1tzXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGV9eC5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30scz0wO2lmKHguaXNBcnJheSh0KSl7Zm9yKHI9cXQoZSksaT10Lmxlbmd0aDtpPnM7cysrKW9bdFtzXV09eC5jc3MoZSx0W3NdLCExLHIpO3JldHVybiBvfXJldHVybiBuIT09dW5kZWZpbmVkP3guc3R5bGUoZSx0LG4pOnguY3NzKGUsdCl9LGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEh0KHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEh0KHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgZT9lP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe0x0KHRoaXMpP3godGhpcykuc2hvdygpOngodGhpcykuaGlkZSgpfSl9fSkseC5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj12dChlLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1uPyIxIjpufX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjoiY3NzRmxvYXQifSxzdHlsZTpmdW5jdGlvbihlLHQsbixyKXtpZihlJiYzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJmUuc3R5bGUpe3ZhciBpLG8scyxhPXguY2FtZWxDYXNlKHQpLHU9ZS5zdHlsZTtyZXR1cm4gdD14LmNzc1Byb3BzW2FdfHwoeC5jc3NQcm9wc1thXT1BdCh1LGEpKSxzPXguY3NzSG9va3NbdF18fHguY3NzSG9va3NbYV0sbj09PXVuZGVmaW5lZD9zJiYiZ2V0ImluIHMmJihpPXMuZ2V0KGUsITEscikpIT09dW5kZWZpbmVkP2k6dVt0XToobz10eXBlb2Ygbiwic3RyaW5nIj09PW8mJihpPWt0LmV4ZWMobikpJiYobj0oaVsxXSsxKSppWzJdK3BhcnNlRmxvYXQoeC5jc3MoZSx0KSksbz0ibnVtYmVyIiksbnVsbD09bnx8Im51bWJlciI9PT1vJiZpc05hTihuKXx8KCJudW1iZXIiIT09b3x8eC5jc3NOdW1iZXJbYV18fChuKz0icHgiKSx4LnN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlfHwiIiE9PW58fDAhPT10LmluZGV4T2YoImJhY2tncm91bmQiKXx8KHVbdF09ImluaGVyaXQiKSxzJiYic2V0ImluIHMmJihuPXMuc2V0KGUsbixyKSk9PT11bmRlZmluZWR8fCh1W3RdPW4pKSx1bmRlZmluZWQpfX0sY3NzOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8scyxhPXguY2FtZWxDYXNlKHQpO3JldHVybiB0PXguY3NzUHJvcHNbYV18fCh4LmNzc1Byb3BzW2FdPUF0KGUuc3R5bGUsYSkpLHM9eC5jc3NIb29rc1t0XXx8eC5jc3NIb29rc1thXSxzJiYiZ2V0ImluIHMmJihpPXMuZ2V0KGUsITAsbikpLGk9PT11bmRlZmluZWQmJihpPXZ0KGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIFN0JiYoaT1TdFt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksbj09PSEwfHx4LmlzTnVtZXJpYyhvKT9vfHwwOmkpOml9fSksdnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxzPW58fHF0KGUpLGE9cz9zLmdldFByb3BlcnR5VmFsdWUodCl8fHNbdF06dW5kZWZpbmVkLHU9ZS5zdHlsZTtyZXR1cm4gcyYmKCIiIT09YXx8eC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl8fChhPXguc3R5bGUoZSx0KSksQ3QudGVzdChhKSYmd3QudGVzdCh0KSYmKHI9dS53aWR0aCxpPXUubWluV2lkdGgsbz11Lm1heFdpZHRoLHUubWluV2lkdGg9dS5tYXhXaWR0aD11LndpZHRoPWEsYT1zLndpZHRoLHUud2lkdGg9cix1Lm1pbldpZHRoPWksdS5tYXhXaWR0aD1vKSksYX07ZnVuY3Rpb24gT3QoZSx0LG4pe3ZhciByPVR0LmV4ZWModCk7cmV0dXJuIHI/TWF0aC5tYXgoMCxyWzFdLShufHwwKSkrKHJbMl18fCJweCIpOnR9ZnVuY3Rpb24gRnQoZSx0LG4scixpKXt2YXIgbz1uPT09KHI/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT10PzE6MCxzPTA7Zm9yKDs0Pm87bys9MikibWFyZ2luIj09PW4mJihzKz14LmNzcyhlLG4ranRbb10sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJihzLT14LmNzcyhlLCJwYWRkaW5nIitqdFtvXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYocy09eC5jc3MoZSwiYm9yZGVyIitqdFtvXSsiV2lkdGgiLCEwLGkpKSk6KHMrPXguY3NzKGUsInBhZGRpbmciK2p0W29dLCEwLGkpLCJwYWRkaW5nIiE9PW4mJihzKz14LmNzcyhlLCJib3JkZXIiK2p0W29dKyJXaWR0aCIsITAsaSkpKTtyZXR1cm4gc31mdW5jdGlvbiBQdChlLHQsbil7dmFyIHI9ITAsaT0id2lkdGgiPT09dD9lLm9mZnNldFdpZHRoOmUub2Zmc2V0SGVpZ2h0LG89cXQoZSkscz14LnN1cHBvcnQuYm94U2l6aW5nJiYiYm9yZGVyLWJveCI9PT14LmNzcyhlLCJib3hTaXppbmciLCExLG8pO2lmKDA+PWl8fG51bGw9PWkpe2lmKGk9dnQoZSx0LG8pLCgwPml8fG51bGw9PWkpJiYoaT1lLnN0eWxlW3RdKSxDdC50ZXN0KGkpKXJldHVybiBpO3I9cyYmKHguc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZXx8aT09PWUuc3R5bGVbdF0pLGk9cGFyc2VGbG9hdChpKXx8MH1yZXR1cm4gaStGdChlLHQsbnx8KHM/ImJvcmRlciI6ImNvbnRlbnQiKSxyLG8pKyJweCJ9ZnVuY3Rpb24gUnQoZSl7dmFyIHQ9byxuPU50W2VdO3JldHVybiBufHwobj1NdChlLHQpLCJub25lIiE9PW4mJm58fCh4dD0oeHR8fHgoIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iKS5jc3MoImNzc1RleHQiLCJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQiKSkuYXBwZW5kVG8odC5kb2N1bWVudEVsZW1lbnQpLHQ9KHh0WzBdLmNvbnRlbnRXaW5kb3d8fHh0WzBdLmNvbnRlbnREb2N1bWVudCkuZG9jdW1lbnQsdC53cml0ZSgiPCFkb2N0eXBlIGh0bWw+PGh0bWw+PGJvZHk+IiksdC5jbG9zZSgpLG49TXQoZSx0KSx4dC5kZXRhY2goKSksTnRbZV09biksbn1mdW5jdGlvbiBNdChlLHQpe3ZhciBuPXgodC5jcmVhdGVFbGVtZW50KGUpKS5hcHBlbmRUbyh0LmJvZHkpLHI9eC5jc3MoblswXSwiZGlzcGxheSIpO3JldHVybiBuLnJlbW92ZSgpLHJ9eC5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHQpe3guY3NzSG9va3NbdF09e2dldDpmdW5jdGlvbihlLG4scil7cmV0dXJuIG4/MD09PWUub2Zmc2V0V2lkdGgmJmJ0LnRlc3QoeC5jc3MoZSwiZGlzcGxheSIpKT94LnN3YXAoZSxFdCxmdW5jdGlvbigpe3JldHVybiBQdChlLHQscil9KTpQdChlLHQscik6dW5kZWZpbmVkfSxzZXQ6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXImJnF0KGUpO3JldHVybiBPdChlLG4scj9GdChlLHQscix4LnN1cHBvcnQuYm94U2l6aW5nJiYiYm9yZGVyLWJveCI9PT14LmNzcyhlLCJib3hTaXppbmciLCExLGkpLGkpOjApfX19KSx4KGZ1bmN0aW9uKCl7eC5zdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHR8fCh4LmNzc0hvb2tzLm1hcmdpblJpZ2h0PXtnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD94LnN3YXAoZSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sdnQsW2UsIm1hcmdpblJpZ2h0Il0pOnVuZGVmaW5lZH19KSwheC5zdXBwb3J0LnBpeGVsUG9zaXRpb24mJnguZm4ucG9zaXRpb24mJnguZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLHQpe3guY3NzSG9va3NbdF09e2dldDpmdW5jdGlvbihlLG4pe3JldHVybiBuPyhuPXZ0KGUsdCksQ3QudGVzdChuKT94KGUpLnBvc2l0aW9uKClbdF0rInB4IjpuKTp1bmRlZmluZWR9fX0pfSkseC5leHByJiZ4LmV4cHIuZmlsdGVycyYmKHguZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4gMD49ZS5vZmZzZXRXaWR0aCYmMD49ZS5vZmZzZXRIZWlnaHR9LHguZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuIXguZXhwci5maWx0ZXJzLmhpZGRlbihlKX0pLHguZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1tlK3RdPXtleHBhbmQ6ZnVuY3Rpb24obil7dmFyIHI9MCxpPXt9LG89InN0cmluZyI9PXR5cGVvZiBuP24uc3BsaXQoIiAiKTpbbl07Zm9yKDs0PnI7cisrKWlbZStqdFtyXSt0XT1vW3JdfHxvW3ItMl18fG9bMF07cmV0dXJuIGl9fSx3dC50ZXN0KGUpfHwoeC5jc3NIb29rc1tlK3RdLnNldD1PdCl9KTt2YXIgV3Q9LyUyMC9nLCR0PS9cW1xdJC8sQnQ9L1xyP1xuL2csSXQ9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHp0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTt4LmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHgucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT14LnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT94Lm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiF4KHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmenQudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUl0LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFvdC50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPXgodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDp4LmlzQXJyYXkobik/eC5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKEJ0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShCdCwiXHJcbiIpfX0pLmdldCgpfX0pLHgucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt0PXguaXNGdW5jdGlvbih0KT90KCk6bnVsbD09dD8iIjp0LHJbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHQpfTtpZih0PT09dW5kZWZpbmVkJiYodD14LmFqYXhTZXR0aW5ncyYmeC5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLHguaXNBcnJheShlKXx8ZS5qcXVlcnkmJiF4LmlzUGxhaW5PYmplY3QoZSkpeC5lYWNoKGUsZnVuY3Rpb24oKXtpKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKG4gaW4gZSlfdChuLGVbbl0sdCxpKTtyZXR1cm4gci5qb2luKCImIikucmVwbGFjZShXdCwiKyIpfTtmdW5jdGlvbiBfdChlLHQsbixyKXt2YXIgaTtpZih4LmlzQXJyYXkodCkpeC5lYWNoKHQsZnVuY3Rpb24odCxpKXtufHwkdC50ZXN0KGUpP3IoZSxpKTpfdChlKyJbIisoIm9iamVjdCI9PXR5cGVvZiBpP3Q6IiIpKyJdIixpLG4scil9KTtlbHNlIGlmKG58fCJvYmplY3QiIT09eC50eXBlKHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpX3QoZSsiWyIraSsiXSIsdFtpXSxuLHIpfXguZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24odCxudWxsLGUsbik6dGhpcy50cmlnZ2VyKHQpfX0pLHguZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCkKfSxkZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbih0LGUsbixyKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGUsIioqIik6dGhpcy5vZmYodCxlfHwiKioiLG4pfX0pO3ZhciBYdCxVdCxZdD14Lm5vdygpLFZ0PS9cPy8sR3Q9LyMuKiQvLEp0PS8oWz8mXSlfPVteJl0qLyxRdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLEt0PS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFp0PS9eKD86R0VUfEhFQUQpJC8sZW49L15cL1wvLyx0bj0vXihbXHcuKy1dKzopKD86XC9cLyhbXlwvPyM6XSopKD86OihcZCspfCl8KS8sbm49eC5mbi5sb2FkLHJuPXt9LG9uPXt9LHNuPSIqLyIuY29uY2F0KCIqIik7dHJ5e1V0PWkuaHJlZn1jYXRjaChhbil7VXQ9by5jcmVhdGVFbGVtZW50KCJhIiksVXQuaHJlZj0iIixVdD1VdC5ocmVmfVh0PXRuLmV4ZWMoVXQudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHVuKGUpe3JldHVybiBmdW5jdGlvbih0LG4peyJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSIqIik7dmFyIHIsaT0wLG89dC50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbXTtpZih4LmlzRnVuY3Rpb24obikpd2hpbGUocj1vW2krK10pIisiPT09clswXT8ocj1yLnNsaWNlKDEpfHwiKiIsKGVbcl09ZVtyXXx8W10pLnVuc2hpZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiBsbihlLHQsbixyKXt2YXIgaT17fSxvPWU9PT1vbjtmdW5jdGlvbiBzKGEpe3ZhciB1O3JldHVybiBpW2FdPSEwLHguZWFjaChlW2FdfHxbXSxmdW5jdGlvbihlLGEpe3ZhciBsPWEodCxuLHIpO3JldHVybiJzdHJpbmciIT10eXBlb2YgbHx8b3x8aVtsXT9vPyEodT1sKTp1bmRlZmluZWQ6KHQuZGF0YVR5cGVzLnVuc2hpZnQobCkscyhsKSwhMSl9KSx1fXJldHVybiBzKHQuZGF0YVR5cGVzWzBdKXx8IWlbIioiXSYmcygiKiIpfWZ1bmN0aW9uIGNuKGUsdCl7dmFyIG4scixpPXguYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IobiBpbiB0KXRbbl0hPT11bmRlZmluZWQmJigoaVtuXT9lOnJ8fChyPXt9KSlbbl09dFtuXSk7cmV0dXJuIHImJnguZXh0ZW5kKCEwLGUsciksZX14LmZuLmxvYWQ9ZnVuY3Rpb24oZSx0LG4pe2lmKCJzdHJpbmciIT10eXBlb2YgZSYmbm4pcmV0dXJuIG5uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgcixpLG8scz10aGlzLGE9ZS5pbmRleE9mKCIgIik7cmV0dXJuIGE+PTAmJihyPWUuc2xpY2UoYSksZT1lLnNsaWNlKDAsYSkpLHguaXNGdW5jdGlvbih0KT8obj10LHQ9dW5kZWZpbmVkKTp0JiYib2JqZWN0Ij09dHlwZW9mIHQmJihpPSJQT1NUIikscy5sZW5ndGg+MCYmeC5hamF4KHt1cmw6ZSx0eXBlOmksZGF0YVR5cGU6Imh0bWwiLGRhdGE6dH0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMscy5odG1sKHI/eCgiPGRpdj4iKS5hcHBlbmQoeC5wYXJzZUhUTUwoZSkpLmZpbmQocik6ZSl9KS5jb21wbGV0ZShuJiZmdW5jdGlvbihlLHQpe3MuZWFjaChuLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX0pLHRoaXN9LHguZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7eC5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLHguZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpVdCx0eXBlOiJHRVQiLGlzTG9jYWw6S3QudGVzdChYdFsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpzbix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOngucGFyc2VKU09OLCJ0ZXh0IHhtbCI6eC5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/Y24oY24oZSx4LmFqYXhTZXR0aW5ncyksdCk6Y24oeC5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6dW4ocm4pLGFqYXhUcmFuc3BvcnQ6dW4ob24pLGFqYXg6ZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGUmJih0PWUsZT11bmRlZmluZWQpLHQ9dHx8e307dmFyIG4scixpLG8scyxhLHUsbCxjPXguYWpheFNldHVwKHt9LHQpLHA9Yy5jb250ZXh0fHxjLGY9Yy5jb250ZXh0JiYocC5ub2RlVHlwZXx8cC5qcXVlcnkpP3gocCk6eC5ldmVudCxoPXguRGVmZXJyZWQoKSxkPXguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGc9Yy5zdGF0dXNDb2RlfHx7fSxtPXt9LHk9e30sdj0wLGI9ImNhbmNlbGVkIixUPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMj09PXYpe2lmKCFvKXtvPXt9O3doaWxlKHQ9UXQuZXhlYyhpKSlvW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXX10PW9bZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dj9pOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHZ8fChlPXlbbl09eVtuXXx8ZSxtW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHZ8fChjLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPnYpZm9yKHQgaW4gZSlnW3RdPVtnW3RdLGVbdF1dO2Vsc2UgVC5hbHdheXMoZVtULnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHxiO3JldHVybiBuJiZuLmFib3J0KHQpLGsoMCx0KSx0aGlzfX07aWYoaC5wcm9taXNlKFQpLmNvbXBsZXRlPWQuYWRkLFQuc3VjY2Vzcz1ULmRvbmUsVC5lcnJvcj1ULmZhaWwsYy51cmw9KChlfHxjLnVybHx8VXQpKyIiKS5yZXBsYWNlKEd0LCIiKS5yZXBsYWNlKGVuLFh0WzFdKyIvLyIpLGMudHlwZT10Lm1ldGhvZHx8dC50eXBlfHxjLm1ldGhvZHx8Yy50eXBlLGMuZGF0YVR5cGVzPXgudHJpbShjLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2godyl8fFsiIl0sbnVsbD09Yy5jcm9zc0RvbWFpbiYmKGE9dG4uZXhlYyhjLnVybC50b0xvd2VyQ2FzZSgpKSxjLmNyb3NzRG9tYWluPSEoIWF8fGFbMV09PT1YdFsxXSYmYVsyXT09PVh0WzJdJiYoYVszXXx8KCJodHRwOiI9PT1hWzFdPyI4MCI6IjQ0MyIpKT09PShYdFszXXx8KCJodHRwOiI9PT1YdFsxXT8iODAiOiI0NDMiKSkpKSxjLmRhdGEmJmMucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2YgYy5kYXRhJiYoYy5kYXRhPXgucGFyYW0oYy5kYXRhLGMudHJhZGl0aW9uYWwpKSxsbihybixjLHQsVCksMj09PXYpcmV0dXJuIFQ7dT1jLmdsb2JhbCx1JiYwPT09eC5hY3RpdmUrKyYmeC5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxjLnR5cGU9Yy50eXBlLnRvVXBwZXJDYXNlKCksYy5oYXNDb250ZW50PSFadC50ZXN0KGMudHlwZSkscj1jLnVybCxjLmhhc0NvbnRlbnR8fChjLmRhdGEmJihyPWMudXJsKz0oVnQudGVzdChyKT8iJiI6Ij8iKStjLmRhdGEsZGVsZXRlIGMuZGF0YSksYy5jYWNoZT09PSExJiYoYy51cmw9SnQudGVzdChyKT9yLnJlcGxhY2UoSnQsIiQxXz0iK1l0KyspOnIrKFZ0LnRlc3Qocik/IiYiOiI/IikrIl89IitZdCsrKSksYy5pZk1vZGlmaWVkJiYoeC5sYXN0TW9kaWZpZWRbcl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHgubGFzdE1vZGlmaWVkW3JdKSx4LmV0YWdbcl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIseC5ldGFnW3JdKSksKGMuZGF0YSYmYy5oYXNDb250ZW50JiZjLmNvbnRlbnRUeXBlIT09ITF8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsYy5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGMuZGF0YVR5cGVzWzBdJiZjLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dP2MuYWNjZXB0c1tjLmRhdGFUeXBlc1swXV0rKCIqIiE9PWMuZGF0YVR5cGVzWzBdPyIsICIrc24rIjsgcT0wLjAxIjoiIik6Yy5hY2NlcHRzWyIqIl0pO2ZvcihsIGluIGMuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIobCxjLmhlYWRlcnNbbF0pO2lmKGMuYmVmb3JlU2VuZCYmKGMuYmVmb3JlU2VuZC5jYWxsKHAsVCxjKT09PSExfHwyPT09dikpcmV0dXJuIFQuYWJvcnQoKTtiPSJhYm9ydCI7Zm9yKGwgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pVFtsXShjW2xdKTtpZihuPWxuKG9uLGMsdCxUKSl7VC5yZWFkeVN0YXRlPTEsdSYmZi50cmlnZ2VyKCJhamF4U2VuZCIsW1QsY10pLGMuYXN5bmMmJmMudGltZW91dD4wJiYocz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VC5hYm9ydCgidGltZW91dCIpfSxjLnRpbWVvdXQpKTt0cnl7dj0xLG4uc2VuZChtLGspfWNhdGNoKEMpe2lmKCEoMj52KSl0aHJvdyBDO2soLTEsQyl9fWVsc2UgaygtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24gayhlLHQsbyxhKXt2YXIgbCxtLHksYix3LEM9dDsyIT09diYmKHY9MixzJiZjbGVhclRpbWVvdXQocyksbj11bmRlZmluZWQsaT1hfHwiIixULnJlYWR5U3RhdGU9ZT4wPzQ6MCxsPWU+PTIwMCYmMzAwPmV8fDMwND09PWUsbyYmKGI9cG4oYyxULG8pKSxiPWZuKGMsYixULGwpLGw/KGMuaWZNb2RpZmllZCYmKHc9VC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJih4Lmxhc3RNb2RpZmllZFtyXT13KSx3PVQuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYoeC5ldGFnW3JdPXcpKSwyMDQ9PT1lfHwiSEVBRCI9PT1jLnR5cGU/Qz0ibm9jb250ZW50IjozMDQ9PT1lP0M9Im5vdG1vZGlmaWVkIjooQz1iLnN0YXRlLG09Yi5kYXRhLHk9Yi5lcnJvcixsPSF5KSk6KHk9QywoZXx8IUMpJiYoQz0iZXJyb3IiLDA+ZSYmKGU9MCkpKSxULnN0YXR1cz1lLFQuc3RhdHVzVGV4dD0odHx8QykrIiIsbD9oLnJlc29sdmVXaXRoKHAsW20sQyxUXSk6aC5yZWplY3RXaXRoKHAsW1QsQyx5XSksVC5zdGF0dXNDb2RlKGcpLGc9dW5kZWZpbmVkLHUmJmYudHJpZ2dlcihsPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW1QsYyxsP206eV0pLGQuZmlyZVdpdGgocCxbVCxDXSksdSYmKGYudHJpZ2dlcigiYWpheENvbXBsZXRlIixbVCxjXSksLS14LmFjdGl2ZXx8eC5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIFR9LGdldEpTT046ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmdldChlLHQsbiwianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5nZXQoZSx1bmRlZmluZWQsdCwic2NyaXB0Iil9fSkseC5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGUsdCl7eFt0XT1mdW5jdGlvbihlLG4scixpKXtyZXR1cm4geC5pc0Z1bmN0aW9uKG4pJiYoaT1pfHxyLHI9bixuPXVuZGVmaW5lZCkseC5hamF4KHt1cmw6ZSx0eXBlOnQsZGF0YVR5cGU6aSxkYXRhOm4sc3VjY2VzczpyfSl9fSk7ZnVuY3Rpb24gcG4oZSx0LG4pe3ZhciByLGksbyxzLGE9ZS5jb250ZW50cyx1PWUuZGF0YVR5cGVzO3doaWxlKCIqIj09PXVbMF0pdS5zaGlmdCgpLHI9PT11bmRlZmluZWQmJihyPWUubWltZVR5cGV8fHQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihyKWZvcihpIGluIGEpaWYoYVtpXSYmYVtpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpKyIgIit1WzBdXSl7bz1pO2JyZWFrfXN8fChzPWkpfW89b3x8c31yZXR1cm4gbz8obyE9PXVbMF0mJnUudW5zaGlmdChvKSxuW29dKTp1bmRlZmluZWR9ZnVuY3Rpb24gZm4oZSx0LG4scil7dmFyIGksbyxzLGEsdSxsPXt9LGM9ZS5kYXRhVHlwZXMuc2xpY2UoKTtpZihjWzFdKWZvcihzIGluIGUuY29udmVydGVycylsW3MudG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW3NdO289Yy5zaGlmdCgpO3doaWxlKG8paWYoZS5yZXNwb25zZUZpZWxkc1tvXSYmKG5bZS5yZXNwb25zZUZpZWxkc1tvXV09dCksIXUmJnImJmUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLHU9byxvPWMuc2hpZnQoKSlpZigiKiI9PT1vKW89dTtlbHNlIGlmKCIqIiE9PXUmJnUhPT1vKXtpZihzPWxbdSsiICIrb118fGxbIiogIitvXSwhcylmb3IoaSBpbiBsKWlmKGE9aS5zcGxpdCgiICIpLGFbMV09PT1vJiYocz1sW3UrIiAiK2FbMF1dfHxsWyIqICIrYVswXV0pKXtzPT09ITA/cz1sW2ldOmxbaV0hPT0hMCYmKG89YVswXSxjLnVuc2hpZnQoYVsxXSkpO2JyZWFrfWlmKHMhPT0hMClpZihzJiZlWyJ0aHJvd3MiXSl0PXModCk7ZWxzZSB0cnl7dD1zKHQpfWNhdGNoKHApe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOnM/cDoiTm8gY29udmVyc2lvbiBmcm9tICIrdSsiIHRvICIrb319fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX14LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiB4Lmdsb2JhbEV2YWwoZSksZX19fSkseC5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2UuY2FjaGU9PT11bmRlZmluZWQmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLHguYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgdCxuO3JldHVybntzZW5kOmZ1bmN0aW9uKHIsaSl7dD14KCI8c2NyaXB0PiIpLnByb3Aoe2FzeW5jOiEwLGNoYXJzZXQ6ZS5zY3JpcHRDaGFyc2V0LHNyYzplLnVybH0pLm9uKCJsb2FkIGVycm9yIixuPWZ1bmN0aW9uKGUpe3QucmVtb3ZlKCksbj1udWxsLGUmJmkoImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxvLmhlYWQuYXBwZW5kQ2hpbGQodFswXSl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19fSk7dmFyIGhuPVtdLGRuPS8oPSlcPyg/PSZ8JCl8XD9cPy87eC5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPWhuLnBvcCgpfHx4LmV4cGFuZG8rIl8iK1l0Kys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSx4LmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHQsbixyKXt2YXIgaSxvLHMsYT10Lmpzb25wIT09ITEmJihkbi50ZXN0KHQudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIHQuZGF0YSYmISh0LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJmRuLnRlc3QodC5kYXRhKSYmImRhdGEiKTtyZXR1cm4gYXx8Impzb25wIj09PXQuZGF0YVR5cGVzWzBdPyhpPXQuanNvbnBDYWxsYmFjaz14LmlzRnVuY3Rpb24odC5qc29ucENhbGxiYWNrKT90Lmpzb25wQ2FsbGJhY2soKTp0Lmpzb25wQ2FsbGJhY2ssYT90W2FdPXRbYV0ucmVwbGFjZShkbiwiJDEiK2kpOnQuanNvbnAhPT0hMSYmKHQudXJsKz0oVnQudGVzdCh0LnVybCk/IiYiOiI/IikrdC5qc29ucCsiPSIraSksdC5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIHN8fHguZXJyb3IoaSsiIHdhcyBub3QgY2FsbGVkIiksc1swXX0sdC5kYXRhVHlwZXNbMF09Impzb24iLG89ZVtpXSxlW2ldPWZ1bmN0aW9uKCl7cz1hcmd1bWVudHN9LHIuYWx3YXlzKGZ1bmN0aW9uKCl7ZVtpXT1vLHRbaV0mJih0Lmpzb25wQ2FsbGJhY2s9bi5qc29ucENhbGxiYWNrLGhuLnB1c2goaSkpLHMmJnguaXNGdW5jdGlvbihvKSYmbyhzWzBdKSxzPW89dW5kZWZpbmVkfSksInNjcmlwdCIpOnVuZGVmaW5lZH0pLHguYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGUpe319O3ZhciBnbj14LmFqYXhTZXR0aW5ncy54aHIoKSxtbj17MDoyMDAsMTIyMzoyMDR9LHluPTAsdm49e307ZS5BY3RpdmVYT2JqZWN0JiZ4KGUpLm9uKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHZuKXZuW2VdKCk7dm49dW5kZWZpbmVkfSkseC5zdXBwb3J0LmNvcnM9ISFnbiYmIndpdGhDcmVkZW50aWFscyJpbiBnbix4LnN1cHBvcnQuYWpheD1nbj0hIWduLHguYWpheFRyYW5zcG9ydChmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4geC5zdXBwb3J0LmNvcnN8fGduJiYhZS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihuLHIpe3ZhciBpLG8scz1lLnhocigpO2lmKHMub3BlbihlLnR5cGUsZS51cmwsZS5hc3luYyxlLnVzZXJuYW1lLGUucGFzc3dvcmQpLGUueGhyRmllbGRzKWZvcihpIGluIGUueGhyRmllbGRzKXNbaV09ZS54aHJGaWVsZHNbaV07ZS5taW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlJiZzLm92ZXJyaWRlTWltZVR5cGUoZS5taW1lVHlwZSksZS5jcm9zc0RvbWFpbnx8blsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoblsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO2ZvcihpIGluIG4pcy5zZXRSZXF1ZXN0SGVhZGVyKGksbltpXSk7dD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXt0JiYoZGVsZXRlIHZuW29dLHQ9cy5vbmxvYWQ9cy5vbmVycm9yPW51bGwsImFib3J0Ij09PWU/cy5hYm9ydCgpOiJlcnJvciI9PT1lP3Iocy5zdGF0dXN8fDQwNCxzLnN0YXR1c1RleHQpOnIobW5bcy5zdGF0dXNdfHxzLnN0YXR1cyxzLnN0YXR1c1RleHQsInN0cmluZyI9PXR5cGVvZiBzLnJlc3BvbnNlVGV4dD97dGV4dDpzLnJlc3BvbnNlVGV4dH06dW5kZWZpbmVkLHMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LHMub25sb2FkPXQoKSxzLm9uZXJyb3I9dCgiZXJyb3IiKSx0PXZuW289eW4rK109dCgiYWJvcnQiKSxzLnNlbmQoZS5oYXNDb250ZW50JiZlLmRhdGF8fG51bGwpfSxhYm9ydDpmdW5jdGlvbigpe3QmJnQoKX19OnVuZGVmaW5lZH0pO3ZhciB4bixibix3bj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sVG49UmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrYisiKShbYS16JV0qKSQiLCJpIiksQ249L3F1ZXVlSG9va3MkLyxrbj1bQW5dLE5uPXsiKiI6W2Z1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVUd2VlbihlLHQpLHI9bi5jdXIoKSxpPVRuLmV4ZWModCksbz1pJiZpWzNdfHwoeC5jc3NOdW1iZXJbZV0/IiI6InB4Iikscz0oeC5jc3NOdW1iZXJbZV18fCJweCIhPT1vJiYrcikmJlRuLmV4ZWMoeC5jc3Mobi5lbGVtLGUpKSxhPTEsdT0yMDtpZihzJiZzWzNdIT09byl7bz1vfHxzWzNdLGk9aXx8W10scz0rcnx8MTtkbyBhPWF8fCIuNSIscy89YSx4LnN0eWxlKG4uZWxlbSxlLHMrbyk7d2hpbGUoYSE9PShhPW4uY3VyKCkvcikmJjEhPT1hJiYtLXUpfXJldHVybiBpJiYocz1uLnN0YXJ0PStzfHwrcnx8MCxuLnVuaXQ9byxuLmVuZD1pWzFdP3MrKGlbMV0rMSkqaVsyXToraVsyXSksbn1dfTtmdW5jdGlvbiBFbigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eG49dW5kZWZpbmVkfSkseG49eC5ub3coKX1mdW5jdGlvbiBTbihlLHQsbil7dmFyIHIsaT0oTm5bdF18fFtdKS5jb25jYXQoTm5bIioiXSksbz0wLHM9aS5sZW5ndGg7Zm9yKDtzPm87bysrKWlmKHI9aVtvXS5jYWxsKG4sdCxlKSlyZXR1cm4gcn1mdW5jdGlvbiBqbihlLHQsbil7dmFyIHIsaSxvPTAscz1rbi5sZW5ndGgsYT14LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihpKXJldHVybiExO3ZhciB0PXhufHxFbigpLG49TWF0aC5tYXgoMCxsLnN0YXJ0VGltZStsLmR1cmF0aW9uLXQpLHI9bi9sLmR1cmF0aW9ufHwwLG89MS1yLHM9MCx1PWwudHdlZW5zLmxlbmd0aDtmb3IoO3U+cztzKyspbC50d2VlbnNbc10ucnVuKG8pO3JldHVybiBhLm5vdGlmeVdpdGgoZSxbbCxvLG5dKSwxPm8mJnU/bjooYS5yZXNvbHZlV2l0aChlLFtsXSksITEpfSxsPWEucHJvbWlzZSh7ZWxlbTplLHByb3BzOnguZXh0ZW5kKHt9LHQpLG9wdHM6eC5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LG4pLG9yaWdpbmFsUHJvcGVydGllczp0LG9yaWdpbmFsT3B0aW9uczpuLHN0YXJ0VGltZTp4bnx8RW4oKSxkdXJhdGlvbjpuLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbih0LG4pe3ZhciByPXguVHdlZW4oZSxsLm9wdHMsdCxuLGwub3B0cy5zcGVjaWFsRWFzaW5nW3RdfHxsLm9wdHMuZWFzaW5nKTtyZXR1cm4gbC50d2VlbnMucHVzaChyKSxyfSxzdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPTAscj10P2wudHdlZW5zLmxlbmd0aDowO2lmKGkpcmV0dXJuIHRoaXM7Zm9yKGk9ITA7cj5uO24rKylsLnR3ZWVuc1tuXS5ydW4oMSk7cmV0dXJuIHQ/YS5yZXNvbHZlV2l0aChlLFtsLHRdKTphLnJlamVjdFdpdGgoZSxbbCx0XSksdGhpc319KSxjPWwucHJvcHM7Zm9yKERuKGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO3M+bztvKyspaWYocj1rbltvXS5jYWxsKGwsZSxjLGwub3B0cykpcmV0dXJuIHI7cmV0dXJuIHgubWFwKGMsU24sbCkseC5pc0Z1bmN0aW9uKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKGUsbCkseC5meC50aW1lcih4LmV4dGVuZCh1LHtlbGVtOmUsYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKX1mdW5jdGlvbiBEbihlLHQpe3ZhciBuLHIsaSxvLHM7Zm9yKG4gaW4gZSlpZihyPXguY2FtZWxDYXNlKG4pLGk9dFtyXSxvPWVbbl0seC5pc0FycmF5KG8pJiYoaT1vWzFdLG89ZVtuXT1vWzBdKSxuIT09ciYmKGVbcl09byxkZWxldGUgZVtuXSkscz14LmNzc0hvb2tzW3JdLHMmJiJleHBhbmQiaW4gcyl7bz1zLmV4cGFuZChvKSxkZWxldGUgZVtyXTtmb3IobiBpbiBvKW4gaW4gZXx8KGVbbl09b1tuXSx0W25dPWkpfWVsc2UgdFtyXT1pfXguQW5pbWF0aW9uPXguZXh0ZW5kKGpuLHt0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7eC5pc0Z1bmN0aW9uKGUpPyh0PWUsZT1bIioiXSk6ZT1lLnNwbGl0KCIgIik7dmFyIG4scj0wLGk9ZS5sZW5ndGg7Zm9yKDtpPnI7cisrKW49ZVtyXSxObltuXT1ObltuXXx8W10sTm5bbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9rbi51bnNoaWZ0KGUpOmtuLnB1c2goZSl9fSk7ZnVuY3Rpb24gQW4oZSx0LG4pe3ZhciByLGksbyxzLGEsdSxsPXRoaXMsYz17fSxwPWUuc3R5bGUsZj1lLm5vZGVUeXBlJiZMdChlKSxoPXEuZ2V0KGUsImZ4c2hvdyIpO24ucXVldWV8fChhPXguX3F1ZXVlSG9va3MoZSwiZngiKSxudWxsPT1hLnVucXVldWVkJiYoYS51bnF1ZXVlZD0wLHU9YS5lbXB0eS5maXJlLGEuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2EudW5xdWV1ZWR8fHUoKX0pLGEudW5xdWV1ZWQrKyxsLmFsd2F5cyhmdW5jdGlvbigpe2wuYWx3YXlzKGZ1bmN0aW9uKCl7YS51bnF1ZXVlZC0tLHgucXVldWUoZSwiZngiKS5sZW5ndGh8fGEuZW1wdHkuZmlyZSgpfSl9KSksMT09PWUubm9kZVR5cGUmJigiaGVpZ2h0ImluIHR8fCJ3aWR0aCJpbiB0KSYmKG4ub3ZlcmZsb3c9W3Aub3ZlcmZsb3cscC5vdmVyZmxvd1gscC5vdmVyZmxvd1ldLCJpbmxpbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpJiYibm9uZSI9PT14LmNzcyhlLCJmbG9hdCIpJiYocC5kaXNwbGF5PSJpbmxpbmUtYmxvY2siKSksbi5vdmVyZmxvdyYmKHAub3ZlcmZsb3c9ImhpZGRlbiIsbC5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PW4ub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9bi5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1uLm92ZXJmbG93WzJdfSkpO2ZvcihyIGluIHQpaWYoaT10W3JdLHduLmV4ZWMoaSkpe2lmKGRlbGV0ZSB0W3JdLG89b3x8InRvZ2dsZSI9PT1pLGk9PT0oZj8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09aXx8IWh8fGhbcl09PT11bmRlZmluZWQpY29udGludWU7Zj0hMH1jW3JdPWgmJmhbcl18fHguc3R5bGUoZSxyKX1pZigheC5pc0VtcHR5T2JqZWN0KGMpKXtoPyJoaWRkZW4iaW4gaCYmKGY9aC5oaWRkZW4pOmg9cS5hY2Nlc3MoZSwiZnhzaG93Iix7fSksbyYmKGguaGlkZGVuPSFmKSxmP3goZSkuc2hvdygpOmwuZG9uZShmdW5jdGlvbigpe3goZSkuaGlkZSgpfSksbC5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7cS5yZW1vdmUoZSwiZnhzaG93Iik7Zm9yKHQgaW4gYyl4LnN0eWxlKGUsdCxjW3RdKX0pO2ZvcihyIGluIGMpcz1TbihmP2hbcl06MCxyLGwpLHIgaW4gaHx8KGhbcl09cy5zdGFydCxmJiYocy5lbmQ9cy5zdGFydCxzLnN0YXJ0PSJ3aWR0aCI9PT1yfHwiaGVpZ2h0Ij09PXI/MTowKSl9fWZ1bmN0aW9uIExuKGUsdCxuLHIsaSl7cmV0dXJuIG5ldyBMbi5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfXguVHdlZW49TG4sTG4ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpMbixpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHwic3dpbmciLHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1yLHRoaXMudW5pdD1vfHwoeC5jc3NOdW1iZXJbbl0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPUxuLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpMbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj1Mbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9dD10aGlzLm9wdGlvbnMuZHVyYXRpb24/eC5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpMbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxMbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9TG4ucHJvdG90eXBlLExuLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbnVsbD09ZS5lbGVtW2UucHJvcF18fGUuZWxlbS5zdHlsZSYmbnVsbCE9ZS5lbGVtLnN0eWxlW2UucHJvcF0/KHQ9eC5jc3MoZS5lbGVtLGUucHJvcCwiIiksdCYmImF1dG8iIT09dD90OjApOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7eC5meC5zdGVwW2UucHJvcF0/eC5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYobnVsbCE9ZS5lbGVtLnN0eWxlW3guY3NzUHJvcHNbZS5wcm9wXV18fHguY3NzSG9va3NbZS5wcm9wXSk/eC5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0sTG4ucHJvcEhvb2tzLnNjcm9sbFRvcD1Mbi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx4LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49eC5mblt0XTt4LmZuW3RdPWZ1bmN0aW9uKGUscixpKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUocW4odCwhMCksZSxyLGkpfX0pLHguZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKEx0KS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT14LmlzRW1wdHlPYmplY3QoZSksbz14LnNwZWVkKHQsbixyKSxzPWZ1bmN0aW9uKCl7dmFyIHQ9am4odGhpcyx4LmV4dGVuZCh7fSxlKSxvKTsoaXx8cS5nZXQodGhpcywiZmluaXNoIikpJiZ0LnN0b3AoITApfTtyZXR1cm4gcy5maW5pc2g9cyxpfHxvLnF1ZXVlPT09ITE/dGhpcy5lYWNoKHMpOnRoaXMucXVldWUoby5xdWV1ZSxzKX0sc3RvcDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChuKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYobj10LHQ9ZSxlPXVuZGVmaW5lZCksdCYmZSE9PSExJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLGk9bnVsbCE9ZSYmZSsicXVldWVIb29rcyIsbz14LnRpbWVycyxzPXEuZ2V0KHRoaXMpO2lmKGkpc1tpXSYmc1tpXS5zdG9wJiZyKHNbaV0pO2Vsc2UgZm9yKGkgaW4gcylzW2ldJiZzW2ldLnN0b3AmJkNuLnRlc3QoaSkmJnIoc1tpXSk7Zm9yKGk9by5sZW5ndGg7aS0tOylvW2ldLmVsZW0hPT10aGlzfHxudWxsIT1lJiZvW2ldLnF1ZXVlIT09ZXx8KG9baV0uYW5pbS5zdG9wKG4pLHQ9ITEsby5zcGxpY2UoaSwxKSk7KHR8fCFuKSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZmluaXNoOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09ITEmJihlPWV8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49cS5nZXQodGhpcykscj1uW2UrInF1ZXVlIl0saT1uW2UrInF1ZXVlSG9va3MiXSxvPXgudGltZXJzLHM9cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCx4LnF1ZXVlKHRoaXMsZSxbXSksaSYmaS5zdG9wJiZpLnN0b3AuY2FsbCh0aGlzLCEwKSx0PW8ubGVuZ3RoO3QtLTspb1t0XS5lbGVtPT09dGhpcyYmb1t0XS5xdWV1ZT09PWUmJihvW3RdLmFuaW0uc3RvcCghMCksby5zcGxpY2UodCwxKSk7Zm9yKHQ9MDtzPnQ7dCsrKXJbdF0mJnJbdF0uZmluaXNoJiZyW3RdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBuLmZpbmlzaH0pfX0pO2Z1bmN0aW9uIHFuKGUsdCl7dmFyIG4scj17aGVpZ2h0OmV9LGk9MDtmb3IodD10PzE6MDs0Pmk7aSs9Mi10KW49anRbaV0sclsibWFyZ2luIituXT1yWyJwYWRkaW5nIituXT1lO3JldHVybiB0JiYoci5vcGFjaXR5PXIud2lkdGg9ZSkscn14LmVhY2goe3NsaWRlRG93bjpxbigic2hvdyIpLHNsaWRlVXA6cW4oImhpZGUiKSxzbGlkZVRvZ2dsZTpxbigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihlLHQpe3guZm5bZV09ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4scil9fSkseC5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP3guZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8eC5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiF4LmlzRnVuY3Rpb24odCkmJnR9O3JldHVybiByLmR1cmF0aW9uPXguZngub2ZmPzA6Im51bWJlciI9PXR5cGVvZiByLmR1cmF0aW9uP3IuZHVyYXRpb246ci5kdXJhdGlvbiBpbiB4LmZ4LnNwZWVkcz94LmZ4LnNwZWVkc1tyLmR1cmF0aW9uXTp4LmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ci5xdWV1ZXx8ci5xdWV1ZT09PSEwKSYmKHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7eC5pc0Z1bmN0aW9uKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZ4LmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0seC5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfX0seC50aW1lcnM9W10seC5meD1Mbi5wcm90b3R5cGUuaW5pdCx4LmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgZSx0PXgudGltZXJzLG49MDtmb3IoeG49eC5ub3coKTt0Lmxlbmd0aD5uO24rKyllPXRbbl0sZSgpfHx0W25dIT09ZXx8dC5zcGxpY2Uobi0tLDEpO3QubGVuZ3RofHx4LmZ4LnN0b3AoKSx4bj11bmRlZmluZWR9LHguZngudGltZXI9ZnVuY3Rpb24oZSl7ZSgpJiZ4LnRpbWVycy5wdXNoKGUpJiZ4LmZ4LnN0YXJ0KCl9LHguZnguaW50ZXJ2YWw9MTMseC5meC5zdGFydD1mdW5jdGlvbigpe2JufHwoYm49c2V0SW50ZXJ2YWwoeC5meC50aWNrLHguZnguaW50ZXJ2YWwpKX0seC5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChibiksYm49bnVsbH0seC5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0seC5meC5zdGVwPXt9LHguZXhwciYmeC5leHByLmZpbHRlcnMmJih4LmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihlKXtyZXR1cm4geC5ncmVwKHgudGltZXJzLGZ1bmN0aW9uKHQpe3JldHVybiBlPT09dC5lbGVtfSkubGVuZ3RofSkseC5mbi5vZmZzZXQ9ZnVuY3Rpb24oZSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZT09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXt4Lm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIHQsbixpPXRoaXNbMF0sbz17dG9wOjAsbGVmdDowfSxzPWkmJmkub3duZXJEb2N1bWVudDtpZihzKXJldHVybiB0PXMuZG9jdW1lbnRFbGVtZW50LHguY29udGFpbnModCxpKT8odHlwZW9mIGkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09ciYmKG89aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksbj1IbihzKSx7dG9wOm8udG9wK24ucGFnZVlPZmZzZXQtdC5jbGllbnRUb3AsbGVmdDpvLmxlZnQrbi5wYWdlWE9mZnNldC10LmNsaWVudExlZnR9KTpvfSx4Lm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8scyxhLHUsbCxjPXguY3NzKGUsInBvc2l0aW9uIikscD14KGUpLGY9e307InN0YXRpYyI9PT1jJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxhPXAub2Zmc2V0KCksbz14LmNzcyhlLCJ0b3AiKSx1PXguY3NzKGUsImxlZnQiKSxsPSgiYWJzb2x1dGUiPT09Y3x8ImZpeGVkIj09PWMpJiYobyt1KS5pbmRleE9mKCJhdXRvIik+LTEsbD8ocj1wLnBvc2l0aW9uKCkscz1yLnRvcCxpPXIubGVmdCk6KHM9cGFyc2VGbG9hdChvKXx8MCxpPXBhcnNlRmxvYXQodSl8fDApLHguaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixhKSksbnVsbCE9dC50b3AmJihmLnRvcD10LnRvcC1hLnRvcCtzKSxudWxsIT10LmxlZnQmJihmLmxlZnQ9dC5sZWZ0LWEubGVmdCtpKSwidXNpbmciaW4gdD90LnVzaW5nLmNhbGwoZSxmKTpwLmNzcyhmKX19LHguZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbj10aGlzWzBdLHI9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PXguY3NzKG4sInBvc2l0aW9uIik/dD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihlPXRoaXMub2Zmc2V0UGFyZW50KCksdD10aGlzLm9mZnNldCgpLHgubm9kZU5hbWUoZVswXSwiaHRtbCIpfHwocj1lLm9mZnNldCgpKSxyLnRvcCs9eC5jc3MoZVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxyLmxlZnQrPXguY3NzKGVbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOnQudG9wLXIudG9wLXguY3NzKG4sIm1hcmdpblRvcCIsITApLGxlZnQ6dC5sZWZ0LXIubGVmdC14LmNzcyhuLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fHM7d2hpbGUoZSYmIXgubm9kZU5hbWUoZSwiaHRtbCIpJiYic3RhdGljIj09PXguY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8c30pfX0pLHguZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbih0LG4pe3ZhciByPSJwYWdlWU9mZnNldCI9PT1uO3guZm5bdF09ZnVuY3Rpb24oaSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24odCxpLG8pe3ZhciBzPUhuKHQpO3JldHVybiBvPT09dW5kZWZpbmVkP3M/c1tuXTp0W2ldOihzP3Muc2Nyb2xsVG8ocj9lLnBhZ2VYT2Zmc2V0Om8scj9vOmUucGFnZVlPZmZzZXQpOnRbaV09byx1bmRlZmluZWQpfSx0LGksYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KTtmdW5jdGlvbiBIbihlKXtyZXR1cm4geC5pc1dpbmRvdyhlKT9lOjk9PT1lLm5vZGVUeXBlJiZlLmRlZmF1bHRWaWV3fXguZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKGUsdCl7eC5lYWNoKHtwYWRkaW5nOiJpbm5lciIrZSxjb250ZW50OnQsIiI6Im91dGVyIitlfSxmdW5jdGlvbihuLHIpe3guZm5bcl09ZnVuY3Rpb24ocixpKXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoJiYobnx8ImJvb2xlYW4iIT10eXBlb2Ygcikscz1ufHwocj09PSEwfHxpPT09ITA/Im1hcmdpbiI6ImJvcmRlciIpO3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQsbixyKXt2YXIgaTtyZXR1cm4geC5pc1dpbmRvdyh0KT90LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitlXTo5PT09dC5ub2RlVHlwZT8oaT10LmRvY3VtZW50RWxlbWVudCxNYXRoLm1heCh0LmJvZHlbInNjcm9sbCIrZV0saVsic2Nyb2xsIitlXSx0LmJvZHlbIm9mZnNldCIrZV0saVsib2Zmc2V0IitlXSxpWyJjbGllbnQiK2VdKSk6cj09PXVuZGVmaW5lZD94LmNzcyh0LG4scyk6eC5zdHlsZSh0LG4scixzKX0sdCxvP3I6dW5kZWZpbmVkLG8sbnVsbCl9fSl9KSx4LmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHguZm4uYW5kU2VsZj14LmZuLmFkZEJhY2ssIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz14OiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiB4fSksIm9iamVjdCI9PXR5cGVvZiBlJiYib2JqZWN0Ij09dHlwZW9mIGUuZG9jdW1lbnQmJihlLmpRdWVyeT1lLiQ9eCl9KSh3aW5kb3cpOwo="}]},{"name":"Manga Loader","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://bato.to/reader*","*://mangafox.me/manga/*/*/*","*://mangafox.la/manga/*/*/*","*://fanfox.net/manga/*/*/*","*://readms.net/r/*/*","*://readms.net/read/*/*","*://mangastream.com/r/*/*/*/*","*://mangastream.com/read/*/*/*/*","*://www.mangareader.net/*/*","*://*.mangahere.co/manga/*/*","*://*.mangahere.cc/manga/*/*","*://www.mangapanda.com/*/*","*://mangapark.me/manga/*/*/*","*://mngcow.co/*/*","*://centraldemangas.org/online/*/*","*://*.com.br/leitura/online/capitulo/*","*://www.mangatown.com/manga/*/*","*://manga-joy.com/*/*","*://*.dm5.com/m*","*://*.senmanga.com/*/*","*://www.japscan.com/lecture-en-ligne/*","*://www.pecintakomik.com/manga/*/*","*://mangawall.com/manga/*/*","*://manga.animea.net/*","*://kissmanga.com/Manga/*/*","*://view.thespectrum.net/series/*","*://manhua.dmzj.com/*/*","*://hqbr.com.br/hqs/*/capitulo/*/leitor/0","*://www.dmzj.com/view/*/*","*://mangaindo.id/*/*","*://mangadoom.co/*/*","*://*.mangago.me/read-manga/*/*","*://mangalator.ch/show.php?gallery=*","*://eatmanga.com/Manga-Scan/*/*","*://www.mangacat.me/*/*/*","*://www.mangahen.com/*/*","*://www.readmng.com/*/*","*://mangatraders.biz/read-online/*","*://www.mangainn.net/manga/chapter/*","*://*.kukudm.com/comiclist/*/*","*://www.mangamap.com/*/*","*://www.mangachapter.me/*/*/*.html","*://kawaii.ca/reader/*","*://lonemanga.com/manga/*/*","*://read.egscans.com/om/manga/*/*","*://manga.madokami.al/reader/*","*://read.egscans.com/*","*://imperialscans.com/read/*","*://www.chuixue.com/manhua/*/*","*://www.sh-arab.com/manga/*","*://spinybackmanga.com/*","*://br.mangahost.com/manga/*/*","*://www.manga.ae/*/*/*","*://mangaforall.com/manga/*/*/*","*://hellocomic.com/*/*/*","*://www.3asq.info/*/*","*://*.readcomiconline.to/Comic/*","*://*.moonbunnycafe.com/*","*://*.mangaeden.com/*","*://*.comicastle.org/read-*","*://*.mymh8.com/chapter/*","*://*.unionmangas.net/leitor/*","*://*.otakusmash.com/*/*","*://*.mangahome.com/manga/*/*","*://*.readcomics.tv/*/chapter*","*://*.cartoonmad.com/comic/*","*://*.comicnad.com/comic/*","*://*.ikanman.com/comic/*/*","*://*.manhuagui.com/comic/*/*","*://*.mangasail.com/*","*://*.mangatail.com/*","*://*.titaniascans.com/reader/*/*","*://*.komikstation.com/*/*/*","*://*.gmanga.me/mangas/*/*/*","*://mangadex.org/chapter/*","*://merakiscans.com/*/*","*://biamamscans.com/read/*","*://read.lhtranslation.com/*.html","*://www.930mh.com/manhua/*/*.html*","*://www.mangabox.me/reader/*/episodes/*/","*://twocomic.com/view/comic_*.html?ch=*","*://manga.redhawkscans.com/reader/read/*","*://reader.s2smanga.com/read/*","*://casanovascans.com/read/*","*://reader.vortex-scans.com/read/*","*://reader.roseliascans.com/read/*","*://mangatopia.net/slide/read/*","*://www.twistedhelscans.com/read/*","*://sensescans.com/reader/read/*","*://reader.kireicake.com/read/*","*://substitutescans.com/reader/read/*","*://mangaichiscans.mokkori.fr/fs/read/*","*://reader.shoujosense.com/read/*","*://www.friendshipscans.com/slide/read/*","*://manga.famatg.com/read/*","*://www.demonicscans.com/FoOlSlide/read/*","*://reader.psscans.info/read/*","*://otscans.com/foolslide/read/*","*://necron99scans.com/reader/read/*","*://manga.inpowerz.com/read/*","*://reader.evilflowers.com/read/*","*://reader.cafeconirst.com/read/*","*://kobato.hologfx.com/reader/read/*","*://abandonedkittenscans.mokkori.fr/reader/read/*","*://jaiminisbox.com/reader/read/*","*://*.gomanga.co/reader/read/*","*://reader.manga-download.org/read/*/*","*://*.manga-ar.net/manga/*/*/*","*://*.helveticascans.com/r/read/*","*://reader.thecatscans.com/read/*","*://yonkouprod.com/reader/read/*","*://reader.championscans.com/read/*","*://reader.whiteoutscans.com/read/*","*://hatigarmscans.eu/hs/read/*","*://lector.kirishimafansub.com/lector/read/*","*://hotchocolatescans.com/fs/read/*","*://*.slide.world-three.org/read/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":true,"orig_connects":[]}},"storage":{"ts":1555249534075,"data":{}},"enabled":true,"position":11,"file_url":"https://greasyfork.org/scripts/692-manga-loader/code/Manga%20Loader.user.js","uuid":"0570812b-6aba-4190-a887-cf1221b7a468","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgTWFuZ2EgTG9hZGVyCi8vIEBuYW1lc3BhY2UgIGh0dHA6Ly93d3cuZnV6ZXRzdS5jb20vTWFuZ2FMb2FkZXIKLy8gQHZlcnNpb24gICAgMS4xMS4yNQovLyBAZGVzY3JpcHRpb24gIFN1cHBvcnQgZm9yIG92ZXIgNzAgc2l0ZXMhIExvYWRzIG1hbmdhIGNoYXB0ZXIgaW50byBvbmUgcGFnZSBpbiBhIGxvbmcgc3RyaXAgZm9ybWF0LCBzdXBwb3J0cyBzd2l0Y2hpbmcgY2hhcHRlcnMsIG1pbmltYWwgc2NyaXB0IHdpdGggbm8gZGVwZW5kZW5jaWVzLCBlYXN5IHRvIGltcGxlbWVudCBuZXcgc2l0ZXMsIGxvYWRzIHF1aWNrbHkgYW5kIHdvcmtzIG9uIG1vYmlsZSBkZXZpY2VzIHRocm91Z2ggYm9va21hcmtsZXQKLy8gQGNvcHlyaWdodCAgMjAxNissIGZ1emV0c3UKLy8gQG5vZnJhbWVzCi8vIEBncmFudCBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgR01fc2V0VmFsdWUKLy8gQGdyYW50IEdNX2RlbGV0ZVZhbHVlCi8vIEBtYXRjaCAqOi8vYmF0by50by9yZWFkZXIqCi8vIEBtYXRjaCAqOi8vbWFuZ2Fmb3gubWUvbWFuZ2EvKi8qLyoKLy8gQG1hdGNoICo6Ly9tYW5nYWZveC5sYS9tYW5nYS8qLyovKgovLyBAbWF0Y2ggKjovL2ZhbmZveC5uZXQvbWFuZ2EvKi8qLyoKLy8gQG1hdGNoICo6Ly9yZWFkbXMubmV0L3IvKi8qCi8vIEBtYXRjaCAqOi8vcmVhZG1zLm5ldC9yZWFkLyovKgovLyBAbWF0Y2ggKjovL21hbmdhc3RyZWFtLmNvbS9yLyovKi8qLyoKLy8gQG1hdGNoICo6Ly9tYW5nYXN0cmVhbS5jb20vcmVhZC8qLyovKi8qCi8vIEBtYXRjaCAqOi8vd3d3Lm1hbmdhcmVhZGVyLm5ldC8qLyoKLy8gQG1hdGNoICo6Ly8qLm1hbmdhaGVyZS5jby9tYW5nYS8qLyoKLy8gQG1hdGNoICo6Ly8qLm1hbmdhaGVyZS5jYy9tYW5nYS8qLyoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2FwYW5kYS5jb20vKi8qCi8vIEBtYXRjaCAqOi8vbWFuZ2FwYXJrLm1lL21hbmdhLyovKi8qCi8vIEBtYXRjaCAqOi8vbW5nY293LmNvLyovKgovLyBAbWF0Y2ggKjovL2NlbnRyYWxkZW1hbmdhcy5vcmcvb25saW5lLyovKgovLyBAbWF0Y2ggKjovLyouY29tLmJyL2xlaXR1cmEvb25saW5lL2NhcGl0dWxvLyoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2F0b3duLmNvbS9tYW5nYS8qLyoKLy8gQG1hdGNoICo6Ly9tYW5nYS1qb3kuY29tLyovKgovLyBAbWF0Y2ggKjovLyouZG01LmNvbS9tKgovLyBAbWF0Y2ggKjovLyouc2VubWFuZ2EuY29tLyovKgovLyBAbWF0Y2ggKjovL3d3dy5qYXBzY2FuLmNvbS9sZWN0dXJlLWVuLWxpZ25lLyoKLy8gQG1hdGNoICo6Ly93d3cucGVjaW50YWtvbWlrLmNvbS9tYW5nYS8qLyoKLy8gQG1hdGNoICo6Ly9tYW5nYXdhbGwuY29tL21hbmdhLyovKgovLyBAbWF0Y2ggKjovL21hbmdhLmFuaW1lYS5uZXQvKgovLyBAbWF0Y2ggKjovL2tpc3NtYW5nYS5jb20vTWFuZ2EvKi8qCi8vIEBtYXRjaCAqOi8vdmlldy50aGVzcGVjdHJ1bS5uZXQvc2VyaWVzLyoKLy8gQG1hdGNoICo6Ly9tYW5odWEuZG16ai5jb20vKi8qCi8vIEBtYXRjaCAqOi8vaHFici5jb20uYnIvaHFzLyovY2FwaXR1bG8vKi9sZWl0b3IvMAovLyBAbWF0Y2ggKjovL3d3dy5kbXpqLmNvbS92aWV3LyovKgovLyBAbWF0Y2ggKjovL21hbmdhaW5kby5pZC8qLyoKLy8gQG1hdGNoICo6Ly9tYW5nYWRvb20uY28vKi8qCi8vIEBtYXRjaCAqOi8vKi5tYW5nYWdvLm1lL3JlYWQtbWFuZ2EvKi8qCi8vIEBtYXRjaCAqOi8vbWFuZ2FsYXRvci5jaC9zaG93LnBocD9nYWxsZXJ5PSoKLy8gQG1hdGNoICo6Ly9lYXRtYW5nYS5jb20vTWFuZ2EtU2Nhbi8qLyoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2FjYXQubWUvKi8qLyoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2FoZW4uY29tLyovKgovLyBAbWF0Y2ggKjovL3d3dy5yZWFkbW5nLmNvbS8qLyoKLy8gQG1hdGNoICo6Ly9tYW5nYXRyYWRlcnMuYml6L3JlYWQtb25saW5lLyoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2Fpbm4ubmV0L21hbmdhL2NoYXB0ZXIvKgovLyBAbWF0Y2ggKjovLyoua3VrdWRtLmNvbS9jb21pY2xpc3QvKi8qCi8vIEBtYXRjaCAqOi8vd3d3Lm1hbmdhbWFwLmNvbS8qLyoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2FjaGFwdGVyLm1lLyovKi8qLmh0bWwKLy8gQG1hdGNoICo6Ly9rYXdhaWkuY2EvcmVhZGVyLyoKLy8gQG1hdGNoICo6Ly9sb25lbWFuZ2EuY29tL21hbmdhLyovKgovLyBAbWF0Y2ggKjovL3JlYWQuZWdzY2Fucy5jb20vb20vbWFuZ2EvKi8qCi8vIEBtYXRjaCAqOi8vbWFuZ2EubWFkb2thbWkuYWwvcmVhZGVyLyoKLy8gQG1hdGNoICo6Ly9yZWFkLmVnc2NhbnMuY29tLyoKLy8gQG1hdGNoICo6Ly9pbXBlcmlhbHNjYW5zLmNvbS9yZWFkLyoKLy8gQG1hdGNoICo6Ly93d3cuY2h1aXh1ZS5jb20vbWFuaHVhLyovKgovLyBAbWF0Y2ggKjovL3d3dy5zaC1hcmFiLmNvbS9tYW5nYS8qCi8vIEBtYXRjaCAqOi8vc3BpbnliYWNrbWFuZ2EuY29tLyoKLy8gQG1hdGNoICo6Ly9ici5tYW5nYWhvc3QuY29tL21hbmdhLyovKgovLyBAbWF0Y2ggKjovL3d3dy5tYW5nYS5hZS8qLyovKgovLyBAbWF0Y2ggKjovL21hbmdhZm9yYWxsLmNvbS9tYW5nYS8qLyovKgovLyBAbWF0Y2ggKjovL2hlbGxvY29taWMuY29tLyovKi8qCi8vIEBtYXRjaCAqOi8vd3d3LjNhc3EuaW5mby8qLyoKLy8gQG1hdGNoICo6Ly8qLnJlYWRjb21pY29ubGluZS50by9Db21pYy8qCi8vIEBtYXRjaCAqOi8vKi5tb29uYnVubnljYWZlLmNvbS8qCi8vIEBtYXRjaCAqOi8vKi5tYW5nYWVkZW4uY29tLyoKLy8gQG1hdGNoICo6Ly8qLmNvbWljYXN0bGUub3JnL3JlYWQtKgovLyBAbWF0Y2ggKjovLyoubXltaDguY29tL2NoYXB0ZXIvKgovLyBAbWF0Y2ggKjovLyoudW5pb25tYW5nYXMubmV0L2xlaXRvci8qCi8vIEBtYXRjaCAqOi8vKi5vdGFrdXNtYXNoLmNvbS8qLyoKLy8gQG1hdGNoICo6Ly8qLm1hbmdhaG9tZS5jb20vbWFuZ2EvKi8qCi8vIEBtYXRjaCAqOi8vKi5yZWFkY29taWNzLnR2LyovY2hhcHRlcioKLy8gQG1hdGNoICo6Ly8qLmNhcnRvb25tYWQuY29tL2NvbWljLyoKLy8gQG1hdGNoICo6Ly8qLmNvbWljbmFkLmNvbS9jb21pYy8qCi8vIEBtYXRjaCAqOi8vKi5pa2FubWFuLmNvbS9jb21pYy8qLyoKLy8gQG1hdGNoICo6Ly8qLm1hbmh1YWd1aS5jb20vY29taWMvKi8qCi8vIEBtYXRjaCAqOi8vKi5tYW5nYXNhaWwuY29tLyoKLy8gQG1hdGNoICo6Ly8qLm1hbmdhdGFpbC5jb20vKgovLyBAbWF0Y2ggKjovLyoudGl0YW5pYXNjYW5zLmNvbS9yZWFkZXIvKi8qCi8vIEBtYXRjaCAqOi8vKi5rb21pa3N0YXRpb24uY29tLyovKi8qCi8vIEBtYXRjaCAqOi8vKi5nbWFuZ2EubWUvbWFuZ2FzLyovKi8qCi8vIEBtYXRjaCAqOi8vbWFuZ2FkZXgub3JnL2NoYXB0ZXIvKgovLyBAbWF0Y2ggKjovL21lcmFraXNjYW5zLmNvbS8qLyoKLy8gQG1hdGNoICo6Ly9iaWFtYW1zY2Fucy5jb20vcmVhZC8qCi8vIEBtYXRjaCAqOi8vcmVhZC5saHRyYW5zbGF0aW9uLmNvbS8qLmh0bWwKLy8gQG1hdGNoICo6Ly93d3cuOTMwbWguY29tL21hbmh1YS8qLyouaHRtbCoKLy8gQG1hdGNoICo6Ly93d3cubWFuZ2Fib3gubWUvcmVhZGVyLyovZXBpc29kZXMvKi8KLy8gQG1hdGNoICo6Ly90d29jb21pYy5jb20vdmlldy9jb21pY18qLmh0bWw/Y2g9KgovLyAtLSBGT09MU0xJREUgU1RBUlQKLy8gQG1hdGNoICo6Ly9tYW5nYS5yZWRoYXdrc2NhbnMuY29tL3JlYWRlci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9yZWFkZXIuczJzbWFuZ2EuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL2Nhc2Fub3Zhc2NhbnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL3JlYWRlci52b3J0ZXgtc2NhbnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL3JlYWRlci5yb3NlbGlhc2NhbnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL21hbmdhdG9waWEubmV0L3NsaWRlL3JlYWQvKgovLyBAbWF0Y2ggKjovL3d3dy50d2lzdGVkaGVsc2NhbnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL3NlbnNlc2NhbnMuY29tL3JlYWRlci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9yZWFkZXIua2lyZWljYWtlLmNvbS9yZWFkLyoKLy8gQG1hdGNoICo6Ly9zdWJzdGl0dXRlc2NhbnMuY29tL3JlYWRlci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9tYW5nYWljaGlzY2Fucy5tb2trb3JpLmZyL2ZzL3JlYWQvKgovLyBAbWF0Y2ggKjovL3JlYWRlci5zaG91am9zZW5zZS5jb20vcmVhZC8qCi8vIEBtYXRjaCAqOi8vd3d3LmZyaWVuZHNoaXBzY2Fucy5jb20vc2xpZGUvcmVhZC8qCi8vIEBtYXRjaCAqOi8vbWFuZ2EuZmFtYXRnLmNvbS9yZWFkLyoKLy8gQG1hdGNoICo6Ly93d3cuZGVtb25pY3NjYW5zLmNvbS9Gb09sU2xpZGUvcmVhZC8qCi8vIEBtYXRjaCAqOi8vcmVhZGVyLnBzc2NhbnMuaW5mby9yZWFkLyoKLy8gQG1hdGNoICo6Ly9vdHNjYW5zLmNvbS9mb29sc2xpZGUvcmVhZC8qCi8vIEBtYXRjaCAqOi8vbmVjcm9uOTlzY2Fucy5jb20vcmVhZGVyL3JlYWQvKgovLyBAbWF0Y2ggKjovL21hbmdhLmlucG93ZXJ6LmNvbS9yZWFkLyoKLy8gQG1hdGNoICo6Ly9yZWFkZXIuZXZpbGZsb3dlcnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL3JlYWRlci5jYWZlY29uaXJzdC5jb20vcmVhZC8qCi8vIEBtYXRjaCAqOi8va29iYXRvLmhvbG9nZnguY29tL3JlYWRlci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9hYmFuZG9uZWRraXR0ZW5zY2Fucy5tb2trb3JpLmZyL3JlYWRlci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9qYWltaW5pc2JveC5jb20vcmVhZGVyL3JlYWQvKgovLyBAbWF0Y2ggKjovLyouZ29tYW5nYS5jby9yZWFkZXIvcmVhZC8qCi8vIEBtYXRjaCAqOi8vcmVhZGVyLm1hbmdhLWRvd25sb2FkLm9yZy9yZWFkLyovKgovLyBAbWF0Y2ggKjovLyoubWFuZ2EtYXIubmV0L21hbmdhLyovKi8qCi8vIEBtYXRjaCAqOi8vKi5oZWx2ZXRpY2FzY2Fucy5jb20vci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9yZWFkZXIudGhlY2F0c2NhbnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL3lvbmtvdXByb2QuY29tL3JlYWRlci9yZWFkLyoKLy8gQG1hdGNoICo6Ly9yZWFkZXIuY2hhbXBpb25zY2Fucy5jb20vcmVhZC8qCi8vIEBtYXRjaCAqOi8vcmVhZGVyLndoaXRlb3V0c2NhbnMuY29tL3JlYWQvKgovLyBAbWF0Y2ggKjovL2hhdGlnYXJtc2NhbnMuZXUvaHMvcmVhZC8qCi8vIEBtYXRjaCAqOi8vbGVjdG9yLmtpcmlzaGltYWZhbnN1Yi5jb20vbGVjdG9yL3JlYWQvKgovLyBAbWF0Y2ggKjovL2hvdGNob2NvbGF0ZXNjYW5zLmNvbS9mcy9yZWFkLyoKLy8gQG1hdGNoICo6Ly8qLnNsaWRlLndvcmxkLXRocmVlLm9yZy9yZWFkLyoKLy8gLS0gRk9PTFNMSURFIEVORAovLyA9PS9Vc2VyU2NyaXB0PT0KCi8vIHNob3J0IHJlZmVyZW5jZSB0byB1bnNhZmVXaW5kb3cgKG9yIHdpbmRvdyBpZiB1bnNhZmVXaW5kb3cgaXMgdW5hdmFpbGFibGUgZS5nLiBib29rbWFya2xldCkKdmFyIFcgPSAodHlwZW9mIHVuc2FmZVdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDogdW5zYWZlV2luZG93OwoKdmFyIHNjcmlwdE5hbWUgPSAnTWFuZ2EgTG9hZGVyJzsKdmFyIHBhZ2VUaXRsZSA9IGRvY3VtZW50LnRpdGxlOwoKdmFyIElNQUdFUyA9IHsKICByZWZyZXNoX2xhcmdlOiAnZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsPHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xNjM5IDEwNTZxMCA1LTEgNy02NCAyNjgtMjY4IDQzNC41dC00NzggMTY2LjVxLTE0NiAwLTI4Mi41LTU1dC0yNDMuNS0xNTdsLTEyOSAxMjlxLTE5IDE5LTQ1IDE5dC00NS0xOS0xOS00NXYtNDQ4cTAtMjYgMTktNDV0NDUtMTloNDQ4cTI2IDAgNDUgMTl0MTkgNDUtMTkgNDVsLTEzNyAxMzdxNzEgNjYgMTYxIDEwMnQxODcgMzZxMTM0IDAgMjUwLTY1dDE4Ni0xNzlxMTEtMTcgNTMtMTE3IDgtMjMgMzAtMjNoMTkycTEzIDAgMjIuNSA5LjV0OS41IDIyLjV6bTI1LTgwMHY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtMjYgMC00NS0xOXQtMTktNDUgMTktNDVsMTM4LTEzOHEtMTQ4LTEzNy0zNDktMTM3LTEzNCAwLTI1MCA2NXQtMTg2IDE3OXEtMTEgMTctNTMgMTE3LTggMjMtMzAgMjNoLTE5OXEtMTMgMC0yMi41LTkuNXQtOS41LTIyLjV2LTdxNjUtMjY4IDI3MC00MzQuNXQ0ODAtMTY2LjVxMTQ2IDAgMjg0IDU1LjV0MjQ1IDE1Ni41bDEzMC0xMjlxMTktMTkgNDUtMTl0NDUgMTkgMTkgNDV6IiBmaWxsPSIjZmZmIi8+PC9zdmc+Jwp9OwoKLy8gcmV1c2FibGUgZnVuY3Rpb25zIHRvIGluc2VydCBpbiBpbXBsZW1lbnRhdGlvbnMKdmFyIHJldXNlID0gewogIGVuY29kZUNoaW5lc2U6IGZ1bmN0aW9uKHhocikgewogICAgeGhyLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvaHRtbDtjaGFyc2V0PWdiaycpOwogIH0sCiAgbmE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICdOL0EnOwogIH0KfTsKCi8qKgpTYW1wbGUgSW1wbGVtZW50YXRpb246CnsKICAgIG5hbWU6ICdzb21ldGhpbmcnIC8vIG5hbWUgb2YgdGhlIGltcGxlbWVudGF0aW9uCiAgLCBtYXRjaDogIl5odHRwcz86Ly9kb21haW4uY29tLy4qIiAvLyB0aGUgdXJsIHRvIHJlYWN0IHRvIGZvciBtYW5nYSBsb2FkaW5nCiAgLCBpbWc6ICcjaW1hZ2UnIC8vIGNzcyBzZWxlY3RvciB0byBnZXQgdGhlIHBhZ2UncyBtYW5nYSBpbWFnZQogICwgbmV4dDogJyNuZXh0X3BhZ2UnIC8vIGNzcyBzZWxlY3RvciB0byBnZXQgdGhlIGxpbmsgdG8gdGhlIG5leHQgcGFnZQogICwgbnVtcGFnZXM6ICcjcGFnZV9zZWxlY3QnIC8vIGNzcyBzZWxlY3RvciB0byBnZXQgdGhlIG51bWJlciBvZiBwYWdlcy4gZWxlbWVudHMgbGlrZSAoc2VsZWN0LCBzcGFuLCBldGMpCiAgLCBjdXJwYWdlOiAnI3BhZ2Vfc2VsZWN0JyAvLyBjc3Mgc2VsZWN0b3IgdG8gZ2V0IHRoZSBjdXJyZW50IHBhZ2UuIHVzdWFsbHkgdGhlIHNhbWUgYXMgbnVtUGFnZXMgaWYgaXQncyBhIHNlbGVjdCBlbGVtZW50CiAgLCBudW1jaGFwczogJyNjaGFwdGVycycgLy8gY3NzIHNlbGVjdG9yIHRvIGdldCB0aGUgbnVtYmVyIG9mIGNoYXB0ZXJzIGluIG1hbmdhCiAgLCBjdXJjaGFwOiAnI2NoYXB0ZXJzJyAvLyBjc3Mgc2VsZWN0b3IgdG8gZ2V0IHRoZSBudW1iZXIgb2YgdGhlIGN1cnJlbnQgY2hhcHRlcgogICwgbmV4dGNoYXA6ICcjbmV4dF9jaGFwJyAvLyBjc3Mgc2VsZWN0b3IgdG8gZ2V0IHRoZSBsaW5rIHRvIHRoZSBuZXh0IGNoYXB0ZXIKICAsIHByZXZjaGFwOiAnI3ByZXZfY2hhcCcgLy8gc2FtZSBhcyBhYm92ZSBleGNlcHQgZm9yIHByZXZpb3VzCiAgLCB3YWl0OiAzMDAwIC8vIGhvdyBtYW55IG1zIHRvIHdhaXQgYmVmb3JlIGF1dG8gbG9hZGluZyAodG8gd2FpdCBmb3IgZWxlbWVudHMgdG8gbG9hZCksIG9yIGEgY3NzIHNlbGVjdG9yIHRvIGtlZXAgdHJ5aW5nIHVudGlsIGl0IHJldHVybnMgYW4gZWxlbQogICwgcGFnZXM6IGZ1bmN0aW9uKG5leHRfdXJsLCBjdXJyZW50X3BhZ2VfbnVtYmVyLCBjYWxsYmFjaywgZXh0cmFjdF9mdW5jdGlvbikgewogICAgLy8gZ2V0cyBjYWxsZWQgcmVxdWVzdGluZyBhIGNlcnRhaW4gcGFnZSBudW1iZXIgKGN1cnJlbnRfcGFnZV9udW1iZXIpCiAgICAvLyB0byBjb250aW51ZSBsb2FkaW5nIGV4ZWN1dGUgY2FsbGJhY2sgd2l0aCBpbWcgdG8gYXBwZW5kIGFzIGZpcnN0IHBhcmFtZXRlciBhbmQgbmV4dCB1cmwgYXMgc2Vjb25kIHBhcmFtZXRlcgogICAgLy8gb25seSByZWFsbHkgbmVlZHMgdG8gYmUgdXNlZCBvbiBzaXRlcyB0aGF0IGhhdmUgcmVhbGx5IHVudXN1YWwgd2F5cyBvZiBsb2FkaW5nIGltYWdlcyBvciBkZXBlbmQgb24gamF2YXNjcmlwdAogIH0KCiAgQW55IG9mIHRoZSBDU1Mgc2VsZWN0b3JzIGNhbiBiZSBmdW5jdGlvbnMgaW5zdGVhZCB0aGF0IHJldHVybiB0aGUgZGVzaXJlZCB2YWx1ZS4KfQoqLwoKdmFyIGltcGxlbWVudGF0aW9ucyA9IFt7CiAgbmFtZTogJ2JhdG90bycsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vYmF0by50by9yZWFkZXIuKiIsCiAgaW1nOiBmdW5jdGlvbihjdHgpIHsKICAgIHZhciBpbWcgPSBnZXRFbCgnI2NvbWljX3BhZ2UnLCBjdHgpOwogICAgaWYoaW1nKSB7CiAgICAgIHJldHVybiBpbWcuc3JjOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGltZ3MgPSBnZXRFbHMoJyNjb250ZW50ID4gZGl2Om50aC1jaGlsZCg4KSA+IGltZycsIGN0eCkubWFwKGZ1bmN0aW9uKHBhZ2UpIHsKICAgICAgICByZXR1cm4gcGFnZS5zcmM7CiAgICAgIH0pOwogICAgICBpZihpbWdzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLm5leHQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGltZ3NbMF07IH07CiAgICAgICAgdGhpcy5udW1wYWdlcyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gaW1ncy5sZW5ndGg7IH07CiAgICAgICAgdGhpcy5wYWdlcyA9IGZ1bmN0aW9uKHVybCwgbnVtLCBjYiwgZXgpIHsKICAgICAgICAgIGNiKGltZ3NbbnVtIC0gMV0sIG51bSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaW1nc1swXTsKICAgICAgfQogICAgfQogIH0sCiAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICBpZighdGhpcy5fbnVtcGFnZSkgewogICAgICB0aGlzLl9udW1wYWdlID0gZXh0cmFjdEluZm8odGhpcy5jdXJwYWdlLCB7dHlwZTogJ2luZGV4J30pOwogICAgICB0aGlzLl9pZCA9IGxvY2F0aW9uLmhhc2guc3BsaXQoJ18nKVswXS5zbGljZSgxKTsKICAgIH0KICAgIHJldHVybiAnL2FyZWFkZXI/aWQ9JyArIHRoaXMuX2lkICsgJyZwPScgKyAoKyt0aGlzLl9udW1wYWdlKTsKICB9LAogIG51bXBhZ2VzOiAnI3BhZ2Vfc2VsZWN0JywKICBjdXJwYWdlOiAnI3BhZ2Vfc2VsZWN0JywKICBjdXJjaGFwOiAnc2VsZWN0W25hbWU9Y2hhcHRlcl9zZWxlY3RdJywKICBudW1jaGFwczogJ3NlbGVjdFtuYW1lPWNoYXB0ZXJfc2VsZWN0XScsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIC8vdmFyIGxpbmsgPSBleHRyYWN0SW5mbygnc2VsZWN0W25hbWU9Y2hhcHRlcl9zZWxlY3RdJywge3R5cGU6ICd2YWx1ZScsIHZhbDogcHJldiA/IDEgOiAtMX0pOwogICAgLy9yZXR1cm4gbGluayAmJiBsaW5rLnJlcGxhY2UoL2h0dHBzPy8sIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYuc3BsaXQoJzonKVswXSk7IC8vIGZpeCBmb3IgYmF0b3RvcyBicm9rZW4gaHR0cHMgcGFnZXMKICAgIHZhciBtZW51ID0gZ2V0RWxzKCdkaXYubW9kZXJhdGlvbl9iYXIgPiB1bCA+IGxpJywgZ2V0RWwoJyNyZWFkZXInKSk7CiAgICBmb3IgKHZhciBpID0gMDsgaSAhPSBtZW51Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIHZhciBpbWcgPSBnZXRFbCgnaW1nJywgbWVudVtpXSk7CiAgICAgIGlmIChpbWcgJiYgaW1nLnRpdGxlID09IChwcmV2ID8gIlByZXZpb3VzIENoYXB0ZXIiIDogIk5leHQgQ2hhcHRlciIpKSB7CiAgICAgICAgcmV0dXJuIGltZy5wYXJlbnROb2RlLmhyZWYucmVwbGFjZSgvaHR0cHM/LywgZG9jdW1lbnQubG9jYXRpb24uaHJlZi5zcGxpdCgnOicpWzBdKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHdhaXQ6ICcjY29taWNfcGFnZScKfSwgewogIG5hbWU6ICdtYW5nYS1wYW5kYScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vd3d3Lm1hbmdhcGFuZGEuY29tLy4qL1swLTldKiIsCiAgaW1nOiAnI2ltZycsCiAgbmV4dDogJy5uZXh0IGEnLAogIG51bXBhZ2VzOiAnI3BhZ2VNZW51JywKICBjdXJwYWdlOiAnI3BhZ2VNZW51JywKICBuZXh0Y2hhcDogJyNtYW5nYWluZm9mb290ZXIgPiAjbWFuZ2FpbmZvX2JhcyB0YWJsZSB0cjpmaXJzdC1jaGlsZCBhJywKICBwcmV2Y2hhcDogJyNtYW5nYWluZm9mb290ZXIgPiAjbWFuZ2FpbmZvX2JhcyB0YWJsZSB0cjpsYXN0LWNoaWxkIGEnCn0sIHsKICBuYW1lOiAnbWFuZ2Fmb3gnLAogIG1hdGNoOiAiXmh0dHBzPzovLyhmYW58bWFuZ2EpZm94LihtZXxsYXxuZXQpL21hbmdhL1teL10qL1teL10qL1teL10qIiwKICBpbWc6ICcucmVhZGVyLW1haW4gaW1nJywKICBuZXh0OiAnLnBhZ2VyLWxpc3QtbGVmdCA+IHNwYW4gPiBhOmxhc3QtY2hpbGQnLAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsgcmV0dXJuIFcuaW1hZ2Vjb3VudDsgfSwKICBjdXJwYWdlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBXLmltYWdlcGFnZTsgfSwKICBuZXh0Y2hhcDogJy5wYWdlci1saXN0LWxlZnQgPiBhOmxhc3QtY2hpbGQnLAogIHByZXZjaGFwOiAnLnBhZ2VyLWxpc3QtbGVmdCA+IGE6Zmlyc3QtY2hpbGQnLAogIGltZ1VSTHM6IFtdLAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICB2YXIgaW1wID0gdGhpczsgICAgCiAgICBpZiAodGhpcy5pbWdVUkxzW251bV0pCiAgICAgIGNiKHRoaXMuaW1nVVJMc1tudW1dLCBudW0pOwogICAgZWxzZQogICAgICBhamF4KHsKICAgICAgICB1cmw6ICdjaGFwdGVyZnVuLmFzaHg/Y2lkPScgKyBXLmNoYXB0ZXJpZCArICcmcGFnZT0nICsgbnVtLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24oZSkgewogICAgICAgICAgZXZhbChlLnRhcmdldC5yZXNwb25zZVRleHQpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGltcC5pbWdVUkxzW251bSArIGldID0gZFtpXTsKICAgICAgICAgIH0KICAgICAgICAgIGNiKGRbMF0sIG51bSk7CiAgICAgICAgfQogICAgICB9KTsKICB9LAogIHdhaXQ6IGZ1bmN0aW9uICgpIHsKICAgIGVsID0gZ2V0RWwoJy5yZWFkZXItbWFpbiBpbWcnKTsKICAgIAogICAgcmV0dXJuIGVsICYmIGVsLmdldEF0dHJpYnV0ZSgnc3JjJykgIT0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWxvYWRpbmctaW1nJyk7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhLXN0cmVhbScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vKHJlYWRtc3xtYW5nYXN0cmVhbSkuKG5ldHxjb20pLyhyfHJlYWQpL1teL10qL1teL10qIiwKICBpbWc6ICcjbWFuZ2EtcGFnZScsCiAgbmV4dDogJy5uZXh0IGEnLAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHZhciBsYXN0UGFnZSA9IGdldEVsKCcuc3VibmF2LXdyYXBwZXIgLmNvbnRyb2xzIC5idG4tZ3JvdXA6bGFzdC1jaGlsZCB1bCBsaTpsYXN0LWNoaWxkJyk7CiAgICByZXR1cm4gcGFyc2VJbnQobGFzdFBhZ2UudGV4dENvbnRlbnQubWF0Y2goL1swLTldL2cpLmpvaW4oJycpLCAxMCk7CiAgfSwKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIGZvdW5kOwogICAgdmFyIGNoYXB0ZXJzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29udHJvbHMgPiBkaXY6Zmlyc3QtY2hpbGQgPiAuZHJvcGRvd24tbWVudSA+IGxpIGEnKSk7CiAgICBjaGFwdGVycy5wb3AoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcHRlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoY2hhcHRlcnNbaV0uaHJlZikgIT09IC0xKSB7CiAgICAgICAgZm91bmQgPSBjaGFwdGVyc1tpICsgKHByZXYgPyAxIDogLTEpXTsKICAgICAgICBpZiAoZm91bmQpIHJldHVybiBmb3VuZC5ocmVmOwogICAgICB9CiAgICB9CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9Cn0sIHsKICBuYW1lOiAnbWFuZ2EtcmVhZGVyJywKICBtYXRjaDogIl5odHRwcz86Ly93d3cubWFuZ2FyZWFkZXIubmV0Ly4qLy4qIiwKICBpbWc6ICcjaW1nJywKICBuZXh0OiAnLm5leHQgYScsCiAgbnVtcGFnZXM6ICcjcGFnZU1lbnUnLAogIGN1cnBhZ2U6ICcjcGFnZU1lbnUnLAogIG5leHRjaGFwOiAnI2NoYXB0ZXJNZW51JywKICBwcmV2Y2hhcDogJyNjaGFwdGVyTWVudScsCiAgd2FpdDogJyNjaGFwdGVyTWVudSBvcHRpb24nCn0sIHsKICBuYW1lOiAnbWFuZ2EtdG93bicsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vd3d3Lm1hbmdhdG93bi5jb20vbWFuZ2EvW14vXSsvW14vXSsiLAogIGltZzogJyNpbWFnZScsCiAgbmV4dDogJyN2aWV3ZXIgYScsCiAgbnVtcGFnZXM6ICcucGFnZV9zZWxlY3Qgc2VsZWN0JywKICBjdXJwYWdlOiAnLnBhZ2Vfc2VsZWN0IHNlbGVjdCcsCiAgbmV4dGNoYXA6ICcjdG9wX2NoYXB0ZXJfbGlzdCcsCiAgcHJldmNoYXA6ICcjdG9wX2NoYXB0ZXJfbGlzdCcsCiAgd2FpdDogMTAwMAp9LCB7CiAgbmFtZTogJ21hbmdhLWNvdywgbWFuZ2EtZG9vbSwgbWFuZ2EtaW5kbywgM2FzcS5pbmZvLCBtb29uYnVubm55Y2FmZScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vKG1uZ2Nvd3xtYW5nYWRvb218bWFuZ2FpbmRvfG1lcmFraXNjYW5zfHd3d1xcLjNhc3F8bW9vbmJ1bm55Y2FmZSlcXC4oY298aWR8aW5mb3xjb20pL1teL10rL1swLTkuXSsiLAogIGltZzogJy5wcncgYSA+IGltZycsCiAgbmV4dDogJy5wcncgYScsCiAgbnVtcGFnZXM6ICdzZWxlY3QuY2JvX3dwbV9wYWcnLAogIGN1cnBhZ2U6ICdzZWxlY3QuY2JvX3dwbV9wYWcnLAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgbmV4dCA9IGV4dHJhY3RJbmZvKCdzZWxlY3QuY2JvX3dwbV9jaHAnLCB7dHlwZTogJ3ZhbHVlJywgdmFsOiAocHJldiA/IDEgOiAtMSl9KTsKICAgIGlmKG5leHQpIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cL1swLTkuXStcLz8oWzAtOV0rXC8/KT9bXi9dKiQvLCAnLycgKyBuZXh0KTsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0KfSwgewogIG5hbWU6ICdtYW5nYS1oZXJlJywKICBtYXRjaDogIl5odHRwcz86Ly93d3cubWFuZ2FoZXJlLmNbb2NdL21hbmdhL1teL10rL1teL10rIiwKICBpbWc6ICcjdmlld2VyIGltZzpsYXN0LWNoaWxkJywKICBuZXh0OiAnI3ZpZXdlciBhJywKICBudW1wYWdlczogJ3NlbGVjdC53aWQ2MCcsCiAgY3VycGFnZTogJ3NlbGVjdC53aWQ2MCcsCiAgbnVtY2hhcHM6ICcjdG9wX2NoYXB0ZXJfbGlzdCcsCiAgY3VyY2hhcDogJyN0b3BfY2hhcHRlcl9saXN0JywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIGNoYXB0ZXIgPSBXLmNoYXB0ZXJfbGlzdFtXLmN1cnJlbnRfY2hhcHRlcl9pbmRleCArIChwcmV2ID8gLTEgOiAxKV07CiAgICByZXR1cm4gY2hhcHRlciAmJiBjaGFwdGVyWzFdOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfSwKICB3YWl0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBhcmVEZWZpbmVkKFcuY3VycmVudF9jaGFwdGVyX2luZGV4LCBXLmNoYXB0ZXJfbGlzdCwgZ2V0RWwoJyN0b3BfY2hhcHRlcl9saXN0JykpOwogIH0KfSwgewogIG5hbWU6ICdtYW5nYS1oZXJlIG1vYmlsZScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbS5tYW5nYWhlcmUuY1tvY10vbWFuZ2EvW14vXSsvW14vXSsiLAogIGltZzogJyNpbWFnZScsCiAgbmV4dDogJyN2aWV3ZXIgYScsCiAgbnVtcGFnZXM6ICcubWFuZ2FyZWFkLXBhZ2UnLAogIGN1cnBhZ2U6ICcubWFuZ2FyZWFkLXBhZ2UnCn0sIHsKICBuYW1lOiAnbWFuZ2EtcGFyaycsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbWFuZ2FwYXJrXFwubWUvbWFuZ2EvW14vXSsvW14vXSsvW14vXSsiLAogIGltZzogJy5pbWctbGluayA+IGltZycsCiAgbmV4dDogJy5wYWdlID4gc3BhbjpsYXN0LWNoaWxkID4gYScsCiAgbnVtcGFnZXM6IGZ1bmN0aW9uKCkgewogICAgaWYoVy5zZWxfbG9hZCAmJiBXLnNlbF9sb2FkLm9wdGlvbnNbVy5zZWxfbG9hZC5zZWxlY3RlZEluZGV4XS52YWx1ZSkgewogICAgICByZXR1cm4gZXh0cmFjdEluZm8oJyNzZWxfcGFnZV8xJyk7CiAgICB9IGVsc2UgewogICAgICB2YXIgbGlua3MgPSBnZXRFbHMoJy5pbWctbGluayA+IGltZycpLm1hcChmdW5jdGlvbihpbWcpIHsgcmV0dXJuIGltZy5zcmM7IH0pOwogICAgICB0aGlzLnBhZ2VzID0gZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgICAgIGNiKGxpbmtzW251bSAtIDFdLCBudW0pOwogICAgICB9OwogICAgICByZXR1cm4gbGlua3MubGVuZ3RoOwogICAgfQogIH0sCiAgY3VycGFnZTogJyNzZWxfcGFnZV8xJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIG5leHQgPSBleHRyYWN0SW5mbygnI3NlbF9ib29rXzEnLCB7dHlwZTogJ3ZhbHVlJywgdmFsOiAocHJldiA/IC0xIDogMSl9KTsKICAgIGlmKG5leHQpIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oXC9tYW5nYVwvW15cL10rKS4rJC8sICckMScgKyBuZXh0ICsgJy8xJyk7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHdhaXQ6ICcjc2VsX2Jvb2tfMSBvcHRpb24nCn0sIHsKICBuYW1lOiAnY2VudHJhbC1kZS1tYW5nYXMnLAogIG1hdGNoOiAiXmh0dHBzPzovLyhjZW50cmFsZGVtYW5nYXNcXC5vcmd8W15cXC5dK1xcLmNvbVxcLmJyL2xlaXR1cmEpL29ubGluZS9bXi9dKi9bMC05XSoiLAogIGltZzogJyNtYW5nYS1wYWdlJywKICBuZXh0OiAnI21hbmdhLXBhZ2UnLAogIG51bXBhZ2VzOiAnI21hbmdhX3BhZ2VzJywKICBjdXJwYWdlOiAnI21hbmdhX3BhZ2VzJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIG5leHQgPSBleHRyYWN0SW5mbygnI21hbmdhX2NhcHMnLCB7dHlwZTogJ3ZhbHVlJywgdmFsOiAocHJldiA/IC0xIDogMSl9KTsKICAgIGlmKG5leHQpIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9bXlwvXSskLywgbmV4dCk7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICB1cmwgPSB1cmwuc2xpY2UoMCwgdXJsLmxhc3RJbmRleE9mKCctJykgKyAxKSArICgiMCIgKyBudW0pLnNsaWNlKC0yKSArIHVybC5zbGljZSh1cmwubGFzdEluZGV4T2YoJy4nKSk7CiAgICBjYih1cmwsIHVybCk7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhLWpveScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbWFuZ2Etam95LmNvbS9bXi9dKi9bMC05XSoiLAogIGltZzogJy5wcncgaW1nJywKICBuZXh0OiAnLm54dCcsCiAgbnVtcGFnZXM6ICcud3BtX25hdl9yZHIgbGk6bnRoLWNoaWxkKDMpID4gc2VsZWN0JywKICBjdXJwYWdlOiAnLndwbV9uYXZfcmRyIGxpOm50aC1jaGlsZCgzKSA+IHNlbGVjdCcsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBuZXh0ID0gZXh0cmFjdEluZm8oJy53cG1fbmF2X3JkciBsaTpudGgtY2hpbGQoMikgPiBzZWxlY3QnLCB7dHlwZTogJ3ZhbHVlJywgdmFsOiBwcmV2ID8gMSA6IC0xfSk7CiAgICBpZihuZXh0KSByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgvXC9bMC05Ll0rXC8/KFswLTldKyhcLy4qKT8pPyQvLCAnLycgKyBuZXh0KTsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0KfSwgewogIG5hbWU6ICdkbTUnLAogIG1hdGNoOiAiXmh0dHBzPzovL1teXFwuXSpcXC5kbTVcXC5jb20vbVswLTldKiIsCiAgaW1nOiBmdW5jdGlvbiAoKXsKICAgIHJldHVybiBnZXRFbCgnaW1nLmxvYWQtc3JjJykuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpOwogIH0sCiAgbmV4dDogZnVuY3Rpb24oKXsKICAgIHJldHVybiAnIyc7CiAgfSwKICBudW1wYWdlczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFcucGFnZXMubGVuZ3RoOwogIH0sCiAgcGFnZXM6IGZ1bmN0aW9uKHVybCwgbnVtLCBjYiwgZXgpIHsKICAgIGNiKFcucGFnZXNbbnVtIC0gMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpLCBudW0gLSAxKTsKICB9LAogIG5leHRjaGFwOiAnYS5sb2dvXzInLAogIHByZXZjaGFwOiAnYS5sb2dvXzEnLAogIHdhaXQ6IGZ1bmN0aW9uICgpewogICAgVy5wYWdlcyA9IGdldEVscygnaW1nLmxvYWQtc3JjJyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0sIHsKICBuYW1lOiAnc2VubWFuZ2EnLAogIG1hdGNoOiAiXmh0dHBzPzovL1teXFwuXStcXC5zZW5tYW5nYVxcLmNvbS9bXi9dKi8uKyIsCiAgaW1nOiAnI3BpY3R1cmUnLAogIG5leHQ6ICcjcmVhZGVyID4gYScsCiAgbnVtcGFnZXM6ICdzZWxlY3RbbmFtZT1wYWdlXScsCiAgY3VycGFnZTogJ3NlbGVjdFtuYW1lPXBhZ2VdJywKICBudW1jaGFwczogJ3NlbGVjdFtuYW1lPWNoYXB0ZXJdJywKICBjdXJjaGFwOiAnc2VsZWN0W25hbWU9Y2hhcHRlcl0nLAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgbmV4dCA9IGV4dHJhY3RJbmZvKCdzZWxlY3RbbmFtZT1jaGFwdGVyXScsIHt0eXBlOiAndmFsdWUnLCB2YWw6IChwcmV2ID8gMSA6IC0xKX0pOwogICAgaWYobmV4dCkgewogICAgICB2YXIgbWFuZ2EgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc2xpY2UoMSkuc3BsaXQoJy8nKVswXTsKICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnLycgKyBtYW5nYSArICcvJyArIG5leHQgKyAnLzEnOwogICAgfQogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfQp9LCB7CiAgbmFtZTogJ2phcHNjYW4nLAogIG1hdGNoOiAiXmh0dHBzPzovL3d3d1xcLmphcHNjYW5cXC5jb20vbGVjdHVyZS1lbi1saWduZS9bXi9dKi9bMC05XSoiLAogIGltZzogJyNpbWFnZScsCiAgbmV4dDogJyNpbWdfbGluaycsCiAgbnVtcGFnZXM6ICcjcGFnZXMnLAogIGN1cnBhZ2U6ICcjcGFnZXMnLAogIG5leHRjaGFwOiAnI25leHRfY2hhcHRlcicsCiAgcHJldmNoYXA6ICcjYmFja19jaGFwdGVyJwp9LCB7CiAgbmFtZTogJ3BlY2ludGFrb21paycsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vd3d3XFwucGVjaW50YWtvbWlrXFwuY29tL21hbmdhL1teL10qL1teL10qIiwKICBpbWc6ICcucGljdHVyZScsCiAgbmV4dDogJy5wYWdlciBhOm50aC1jaGlsZCgzKScsCiAgbnVtcGFnZXM6ICdzZWxlY3RbbmFtZT1wYWdlXScsCiAgY3VycGFnZTogJ3NlbGVjdFtuYW1lPXBhZ2VdJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIG5leHQgPSBleHRyYWN0SW5mbygnc2VsZWN0W25hbWU9Y2hhcHRlcl0nLCB7dHlwZTogJ3ZhbHVlJywgdmFsOiAocHJldiA/IDEgOiAtMSl9KTsKICAgIGlmKG5leHQpIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cLyhbXlwvXSspXC9bMC05XStcLz8kLywgJy8kMS8nICsgbmV4dCk7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9Cn0sIHsKICBuYW1lOiAnbWFuZ2Eta2FrYScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vd3d3XFwuKG1hbmdhaGVufG1hbmdhbWFwKVxcLmNvbS9bXi9dKy9bMC05XSsiLAogIGltZzogJ2ltZy5tYW5nYS1wYWdlJywKICBuZXh0OiAnLm5hdl9wYWcgPiBsaTpudGgtY2hpbGQoMSkgPiBhJywKICBudW1wYWdlczogJ3NlbGVjdC5jYm9fd3BtX3BhZycsCiAgY3VycGFnZTogJ3NlbGVjdC5jYm9fd3BtX3BhZycsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBjaGFwdGVyID0gZXh0cmFjdEluZm8oJ3NlbGVjdC5jYm9fd3BtX2NocCcsIHsgdHlwZTogJ3ZhbHVlJywgdmFsOiAocHJldiA/IDEgOiAtMSkgfSk7CiAgICBpZihjaGFwdGVyKSByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgvXC9bMC05XC5dK1wvPyhbMC05XStcLz8pPyQvLCAnLycgKyBjaGFwdGVyKTsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0KfSwgewogIG5hbWU6ICdtYW5nYS13YWxsJywKICBfcGFnZTogbnVsbCwKICBtYXRjaDogIl5odHRwcz86Ly9tYW5nYXdhbGxcXC5jb20vbWFuZ2EvW14vXSovWzAtOV0qIiwKICBpbWc6ICdpbWcuc2NhbicsCiAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICBpZih0aGlzLl9wYWdlID09PSBudWxsKSB0aGlzLl9wYWdlID0gVy5wYWdlOwogICAgcmV0dXJuIFcuc2VyaWVzX3VybCArICcvJyArIFcuY2hhcHRlciArICcvJyArICh0aGlzLl9wYWdlICs9IDEpOwogIH0sCiAgbnVtcGFnZXM6ICcucGFnZXNlbGVjdCcsCiAgY3VycGFnZTogJy5wYWdlc2VsZWN0JywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgcmV0dXJuIFcuc2VyaWVzX3VybCArICcvJyArIChwYXJzZUludChXLmNoYXB0ZXIuc2xpY2UoMSkpICsgKHByZXYgPyAtMSA6IDEpKSArICcvMSc7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9Cn0sIHsKICBuYW1lOiAnYW5pbWUtYScsCiAgX3BhZ2U6IG51bGwsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbWFuZ2FcXC5hbmltZWEubmV0Ly4rY2hhcHRlci1bMC05XSsoLXBhZ2UtWzAtOV0rKT8uaHRtbCIsCiAgaW1nOiAnI3NjYW5tcicsCiAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICBpZih0aGlzLl9wYWdlID09PSBudWxsKSB0aGlzLl9wYWdlID0gVy5wYWdlOwogICAgcmV0dXJuIFcuc2VyaWVzX3VybCArIFcuY2hhcHRlciArICctcGFnZS0nICsgKHRoaXMuX3BhZ2UgKz0gMSkgKyAnLmh0bWwnOwogIH0sCiAgbnVtcGFnZXM6ICcucGFnZXNlbGVjdCcsCiAgY3VycGFnZTogJy5wYWdlc2VsZWN0JywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgcmV0dXJuIFcuc2VyaWVzX3VybCArICdjaGFwdGVyLScgKyAocGFyc2VJbnQoVy5jaGFwdGVyLm1hdGNoKC9bMC05XSsvKVswXSkgKyAocHJldiA/IC0xIDogMSkpICsgJy1wYWdlLTEuaHRtbCc7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9Cn0sIHsKICBuYW1lOiAna2lzcy1tYW5nYScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8va2lzc21hbmdhXFwuY29tL01hbmdhL1teL10rLy4rIiwKICBpbWc6ICcjZGl2SW1hZ2UgaW1nJywKICBuZXh0OiAnI2RpdkltYWdlIGltZycsCiAgbnVtcGFnZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFcubHN0SW1hZ2VzLmxlbmd0aDsKICB9LAogIGN1cnBhZ2U6IGZ1bmN0aW9uKCkgewogICAgaWYoZ2V0RWxzKCcjZGl2SW1hZ2UgaW1nJykubGVuZ3RoID4gMSkgewogICAgICByZXR1cm4gMTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBXLmN1cnJJbWFnZSArIDE7CiAgICB9CiAgfSwKICBuZXh0Y2hhcDogJyNzZWxlY3RDaGFwdGVyLCAuc2VsZWN0Q2hhcHRlcicsCiAgcHJldmNoYXA6ICcjc2VsZWN0Q2hhcHRlciwgLnNlbGVjdENoYXB0ZXInLAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYihXLmxzdEltYWdlc1tudW0gLSAxXSwgbnVtKTsKICB9Cn0sIHsKICBuYW1lOiAndGhlLXNwZWN0cnVtLXNjYW5zJywKICBtYXRjaDogIl5odHRwcz86Ly92aWV3XFwudGhlc3BlY3RydW1cXC5uZXQvc2VyaWVzL1teXFwuXStcXC5odG1sIiwKICBpbWc6ICcjbWFpbmltYWdlJywKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIGlmICgrK3RoaXMuX3BhZ2UgPCB0aGlzLl9wYWdlcy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VzW3RoaXMuX3BhZ2VdOwogICAgfQogIH0sCiAgbnVtcGFnZXM6ICcuc2VsZWN0cGFnZScsCiAgY3VycGFnZTogJy5zZWxlY3RwYWdlJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIHBzID0gZG9jdW1lbnQucGFnZVNlbGVjdG9yMTsKICAgIHZhciBjaG51bSA9IHBzLmNoLnNlbGVjdGVkSW5kZXggKyAocHJldiA/IC0xIDogMSk7CiAgICBpZiAoY2hudW0gPCBwcy5jaC5sZW5ndGggJiYgY2hudW0gPiAtMSkgewogICAgICByZXR1cm4gcHMuYWN0aW9uLnNwbGl0KCc/JylbMF0gKyAnP2NoPScgKyBwcy5jaFtjaG51bV0udmFsdWUgKyAnJnBhZ2U9MSc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHdhaXQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBzID0gZG9jdW1lbnQucGFnZVNlbGVjdG9yMTsKICAgIHRoaXMuX3BhZ2VzID0gW107CiAgICB2YXIgYmFzZSA9IHBzLmFjdGlvbi5zcGxpdCgnPycpWzBdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcy5wYWdlLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMuX3BhZ2VzLnB1c2goYmFzZSArICc/Y2g9JyArIHBzLmNoLnZhbHVlICsgJyZwYWdlPScgKyBwcy5wYWdlW2ldLnZhbHVlKTsKICAgIH0KICAgIHRoaXMuX3BhZ2UgPSBwcy5wYWdlW3BzLnBhZ2Uuc2VsZWN0ZWRJbmRleF0udmFsdWUgLSAxOwogICAgcmV0dXJuIHRydWU7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmh1YS1kbXpqJywKICBtYXRjaDogIl5odHRwcz86Ly9tYW5odWEuZG16ai5jb20vW14vXSovWzAtOV0rKC1bMC05XSspP1xcLnNodG1sIiwKICBpbWc6ICcjY2VudGVyX2JveCA+IGltZycsCiAgbmV4dDogJyNjZW50ZXJfYm94ID4gaW1nJywKICBudW1wYWdlczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5hcnJfcGFnZXMubGVuZ3RoOwogIH0sCiAgY3VycGFnZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWF0Y2ggPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9wYWdlPShbMC05XSspLyk7CiAgICByZXR1cm4gbWF0Y2ggPyBwYXJzZUludChtYXRjaFsxXSkgOiAxOwogIH0sCiAgbmV4dGNoYXA6ICcjbmV4dF9jaGFwdGVyJywKICBwcmV2Y2hhcDogJyNwcmV2X2NoYXB0ZXInLAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYihXLmltZ19wcmVmaXggKyBXLmFycl9wYWdlc1tudW0gLSAxXSwgbnVtKTsKICB9LAogIHdhaXQ6ICcjY2VudGVyX2JveCA+IGltZycKfSwgewogIG5hbWU6ICdocWJyJywKICBtYXRjaDogIl5odHRwcz86Ly9ocWJyLmNvbS5ici9ocXMvW14vXSsvY2FwaXR1bG8vWzAtOV0rL2xlaXRvci8wIiwKICBpbWc6ICcjaHEtcGFnZScsCiAgbmV4dDogJyNocS1wYWdlJywKICBudW1wYWdlczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5wYWdlcy5sZW5ndGg7CiAgfSwKICBjdXJwYWdlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLnBhZ2luYUF0dWFsICsgMTsKICB9LAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgY2hhcHRlcnMgPSBnZXRFbHMoJyNjaGFwdGVyLWRyb3Bkb3duIGEnKSwKICAgICAgICBjdXJyZW50ID0gcGFyc2VJbnQoVy5jYXBpdHVsb0luZGV4KSwKICAgICAgICBjaGFwdGVyID0gY2hhcHRlcnNbY3VycmVudCArIChwcmV2ID8gLTEgOiAxKV07CiAgICByZXR1cm4gY2hhcHRlciAmJiBjaGFwdGVyLmhyZWY7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYihXLnBhZ2VzW251bSAtIDFdLCBudW0pOwogIH0KfSwgewogIG5hbWU6ICdkbXpqJywKICBtYXRjaDogIl5odHRwcz86Ly93d3cuZG16ai5jb20vdmlldy9bXi9dKy8uK1xcLmh0bWwiLAogIGltZzogJy5jb21pY193cmFDb24gPiBpbWcnLAogIG5leHQ6ICcuY29taWNfd3JhQ29uID4gaW1nJywKICBudW1wYWdlczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gcGFyc2VJbnQoVy5waWNfdG90YWwpOwogIH0sCiAgY3VycGFnZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWF0Y2ggPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9wYWdlPShbMC05XSkvKTsKICAgIHJldHVybiBtYXRjaCA/IHBhcnNlSW50KG1hdGNoWzFdKSA6IDE7CiAgfSwKICBuZXh0Y2hhcDogJy5uZXh0ID4gYScsCiAgcHJldmNoYXA6ICcucHJlID4gYScsCiAgcGFnZXM6IGZ1bmN0aW9uKHVybCwgbnVtLCBjYiwgZXgpIHsKICAgIGNiKFcuaW1nX3ByZWZpeCArIFcucGljQXJyeVtudW0gLSAxXSwgbnVtKTsKICB9LAogIHdhaXQ6ICcuY29taWNfd3JhQ29uID4gaW1nJwp9LCB7CiAgbmFtZTogJ21hbmdhZ28nLAogIG1hdGNoOiAiXmh0dHBzPzovLyh3d3cuKT9tYW5nYWdvLm1lL3JlYWQtbWFuZ2EvW14vXSsvW14vXSsvW14vXSsiLAogIGltZzogJyNwYWdlMScsCiAgbmV4dDogJyNwaWNfY29udGFpbmVyJywKICBudW1wYWdlczogJyNkcm9wZG93bi1tZW51LXBhZ2UnLAogIGN1cnBhZ2U6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHBhcnNlSW50KGdldEVscygnI3BhZ2UtbWFpbmVyIGEuYnRuLmRyb3Bkb3duLXRvZ2dsZScpWzFdLnRleHRDb250ZW50Lm1hdGNoKC9bMC05XSsvKVswXSk7CiAgfSwKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIGNoYXB0ZXJzID0gZ2V0RWxzKCd1bC5kcm9wZG93bi1tZW51LmNoYXB0ZXIgYScpLAogICAgICAgIGN1ck5hbWUgPSBnZXRFbHMoJyNwYWdlLW1haW5lciBhLmJ0bi5kcm9wZG93bi10b2dnbGUnKVswXS50ZXh0Q29udGVudCwKICAgICAgICBjdXJJZHg7CiAgICBjaGFwdGVycy5zb21lKGZ1bmN0aW9uKGNoYXAsIGlkeCkgewogICAgICBpZihjaGFwLnRleHRDb250ZW50LmluZGV4T2YoY3VyTmFtZSkgPT09IDApIHsKICAgICAgICBjdXJJZHggPSBpZHg7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIGNoYXB0ZXIgPSBjaGFwdGVyc1tjdXJJZHggKyAocHJldiA/IDEgOiAtMSldOwogICAgcmV0dXJuIGNoYXB0ZXIgJiYgY2hhcHRlci5ocmVmOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhbGF0b3InLAogIG1hdGNoOiAiXmh0dHBzPzovL21hbmdhbGF0b3IuY2gvc2hvdy5waHBcXD9nYWxsZXJ5PVswLTldKyIsCiAgaW1nOiAnLmltYWdlIGltZycsCiAgbmV4dDogJyNuZXh0JywKICBudW1wYWdlczogJ3NlbGVjdFtuYW1lPWltYWdlXScsCiAgY3VycGFnZTogJ3NlbGVjdFtuYW1lPWltYWdlXScsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBuZXh0ID0gZXh0cmFjdEluZm8oJ3NlbGVjdFtuYW1lPWdhbGxlcnldJywge3R5cGU6ICd2YWx1ZScsIHZhbDogKHByZXYgPyAxIDogLTEpfSk7CiAgICBpZihuZXh0KSByZXR1cm4gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cP2dhbGxlcnk9WzAtOV0rLywgJz9nYWxsZXJ5PScgKyBuZXh0KTsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0KfSwgewogIG5hbWU6ICdlYXRtYW5nYScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vZWF0bWFuZ2EuY29tL01hbmdhLVNjYW4vW14vXSsvLisiLAogIGltZzogJyNlYXRtYW5nYV9pbWFnZSwgI2VhdG1hbmdhX2ltYWdlX2JpZycsCiAgbmV4dDogJyNwYWdlX25leHQnLAogIG51bXBhZ2VzOiAnI3BhZ2VzJywKICBjdXJwYWdlOiAnI3BhZ2VzJywKICBuZXh0Y2hhcDogJyNib3R0b21fY2hhcHRlcl9saXN0JywKICBwcmV2Y2hhcDogJyNib3R0b21fY2hhcHRlcl9saXN0JywKICBpbnZjaGFwOiB0cnVlCn0sIHsKICBuYW1lOiAnbWFuZ2EtY2F0JywKICBtYXRjaDogIl5odHRwcz86Ly93d3cubWFuZ2FjYXQubWUvW14vXSsvW14vXSsvW15cXC5dKy5odG1sIiwKICBpbWc6ICcuaW1nJywKICBuZXh0OiAnLmltZy1saW5rJywKICBudW1wYWdlczogJyNwYWdlJywKICBjdXJwYWdlOiAnI3BhZ2UnLAogIG5leHRjaGFwOiAnI2NoYXB0ZXInLAogIHByZXZjaGFwOiAnI2NoYXB0ZXInLAogIGludmNoYXA6IHRydWUsCiAgd2FpdDogJyNjaGFwdGVyIG9wdGlvbicKfSwgewogIG5hbWU6ICdyZWFkbW5nLmNvbScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vd3d3XFwucmVhZG1uZ1xcLmNvbS9bXi9dKy8uKyIsCiAgaW1nOiAnLnBhZ2VfY2hhcHRlci0yIGltZycsCiAgbmV4dDogJy5saXN0LXN3aXRjaGVyLTIgPiBsaTpudGgtY2hpbGQoMykgPiBhLCAubGlzdC1zd2l0Y2hlci0yID4gbGk6bnRoLWNoaWxkKDIpID4gYScsCiAgbnVtcGFnZXM6ICcubGlzdC1zd2l0Y2hlci0yIHNlbGVjdFtuYW1lPWNhdGVnb3J5X3R5cGVdJywKICBjdXJwYWdlOiAnLmxpc3Qtc3dpdGNoZXItMiBzZWxlY3RbbmFtZT1jYXRlZ29yeV90eXBlXScsCiAgbmV4dGNoYXA6ICcuanVtcC1tZW51W25hbWU9Y2hhcHRlcl9saXN0XScsCiAgcHJldmNoYXA6ICcuanVtcC1tZW51W25hbWU9Y2hhcHRlcl9saXN0XScsCiAgaW52Y2hhcDogdHJ1ZQp9LCB7CiAgbmFtZTogJ21hbmdhZGV4Lm9yZycsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbWFuZ2FkZXhcXC5vcmcvY2hhcHRlci9bMC05XSsvWzAtOV0rIiwKICBpbWc6ICcjY3VycmVudF9wYWdlJywKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl9iYXNlICsgKyt0aGlzLl9wYWdlOwogIH0sCiAgbnVtcGFnZXM6ICcjanVtcF9wYWdlJywKICBjdXJwYWdlOiAnI2p1bXBfcGFnZScsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoYXB0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjanVtcF9jaGFwdGVyJykuc2VsZWN0ZWRPcHRpb25zWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7CiAgICAgcmV0dXJuIChjaGFwdGVyID09PSBudWxsKSA/IGZhbHNlIDogKHRoaXMuX2Jhc2UucmVwbGFjZSgvWzAtOV0rXC8kLywgY2hhcHRlci52YWx1ZSkpOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoYXB0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjanVtcF9jaGFwdGVyJykuc2VsZWN0ZWRPcHRpb25zWzBdLm5leHRFbGVtZW50U2libGluZzsKICAgICByZXR1cm4gKGNoYXB0ZXIgPT09IG51bGwpID8gZmFsc2UgOiAodGhpcy5fYmFzZS5yZXBsYWNlKC9bMC05XStcLyQvLCBjaGFwdGVyLnZhbHVlKSk7CiAgfSwKCiAgd2FpdDogZnVuY3Rpb24oKSB7CiAgICB2YXIgbG9jID0gZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKTsKICAgIHZhciBudW0gPSBsb2MubWF0Y2goL1swLTldKyQvKTsKICAgIHRoaXMuX2Jhc2UgPSBsb2Muc2xpY2UoMCwgLW51bS5sZW5ndGgpOwogICAgdGhpcy5fcGFnZSA9IHBhcnNlSW50KG51bSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0sIHsKICBuYW1lOiAnYmlhbWFtc2NhbnMuY29tJywKICBtYXRjaDogIl5odHRwcz86Ly9iaWFtYW1zY2Fuc1xcLmNvbS9yZWFkLy4rIiwgLy9uZXh0Y2hhcCBhbmQgcHJldmNoYXAgYnJva2VuCiAgaW1nOiAnLm1hbmdhLWltYWdlJywKICBuZXh0OiAnc3Bhbi5mbG9hdC1yaWdodDpudGgtY2hpbGQoMikgPiBkaXY6bnRoLWNoaWxkKDIpID4gYTpudGgtY2hpbGQoMSknLAogIG51bXBhZ2VzOiAnI3BhZ2Utc2VsZWN0JywKICBjdXJwYWdlOiAnI3BhZ2Utc2VsZWN0JywKICBuZXh0Y2hhcDogJyNjaGFwdGVyLXNlbGVjdCcsCiAgcHJldmNoYXA6ICcjY2hhcHRlci1zZWxlY3QnCn0sIHsKICBuYW1lOiAnbGh0cmFuc2xhdGlvbicsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vcmVhZC5saHRyYW5zbGF0aW9uXFwuY29tL3JlYWQtLisiLAogIGltZzogJ2ltZy5jaGFwdGVyLWltZycsCiAgbmV4dDogJy5jaGFwdGVyLWNvbnRlbnQgPiBzZWxlY3QgKyBhLmxhYmVsJywKICBudW1wYWdlczogJy5jaGFwdGVyLWNvbnRlbnQgPiBzZWxlY3QnLAogIGN1cnBhZ2U6ICcuY2hhcHRlci1jb250ZW50ID4gc2VsZWN0JywKICBudW1jaGFwczogJy5mb3JtLWNvbnRyb2wnLAogIGN1cmNoYXA6ICcuZm9ybS1jb250cm9sJywKICBuZXh0Y2hhcDogJy5mb3JtLWNvbnRyb2wnLAogIHByZXZjaGFwOiAnLmZvcm0tY29udHJvbCcsCiAgaW52Y2hhcDogdHJ1ZQp9LCB7CiAgbmFtZTogJ2Zvb2xzbGlkZScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vKCIgKyBbCiAgICAibWFuZ2EucmVkaGF3a3NjYW5zLmNvbS9yZWFkZXIvcmVhZC8uKyIsCiAgICAicmVhZGVyLnMyc21hbmdhLmNvbS9yZWFkLy4rIiwKICAgICJjYXNhbm92YXNjYW5zLmNvbS9yZWFkLy4rIiwKICAgICJyZWFkZXIudm9ydGV4LXNjYW5zLmNvbS9yZWFkLy4rIiwKICAgICJyZWFkZXIucm9zZWxpYXNjYW5zLmNvbS9yZWFkLy4rIiwKICAgICJtYW5nYXRvcGlhLm5ldC9zbGlkZS9yZWFkLy4rIiwKICAgICJ3d3cudHdpc3RlZGhlbHNjYW5zLmNvbS9yZWFkLy4rIiwKICAgICJzZW5zZXNjYW5zLmNvbS9yZWFkZXIvcmVhZC8uKyIsCiAgICAicmVhZGVyLmtpcmVpY2FrZS5jb20vcmVhZC8uKyIsCiAgICAic3Vic3RpdHV0ZXNjYW5zLmNvbS9yZWFkZXIvcmVhZC8uKyIsCiAgICAibWFuZ2FpY2hpc2NhbnMubW9ra29yaS5mci9mcy9yZWFkLy4rIiwKICAgICJyZWFkZXIuc2hvdWpvc2Vuc2UuY29tL3JlYWQvLisiLAogICAgInd3dy5mcmllbmRzaGlwc2NhbnMuY29tL3NsaWRlL3JlYWQvLisiLAogICAgIm1hbmdhLmZhbWF0Zy5jb20vcmVhZC8uKyIsCiAgICAid3d3LmRlbW9uaWNzY2Fucy5jb20vRm9PbFNsaWRlL3JlYWQvLisiLAogICAgIm5lY3Jvbjk5c2NhbnMuY29tL3JlYWRlci9yZWFkLy4rIiwKICAgICJ3d3cuZGVtb25pY3NjYW5zLmNvbS9Gb09sU2xpZGUvcmVhZC8uKyIsCiAgICAicmVhZGVyLnBzc2NhbnMuaW5mby9yZWFkLy4rIiwKICAgICJvdHNjYW5zLmNvbS9mb29sc2xpZGUvcmVhZC8uKyIsCiAgICAibmVjcm9uOTlzY2Fucy5jb20vcmVhZGVyL3JlYWQvLisiLAogICAgIm1hbmdhLmlucG93ZXJ6LmNvbS9yZWFkLy4rIiwKICAgICJyZWFkZXIuZXZpbGZsb3dlcnMuY29tL3JlYWQvLisiLAogICAgInJlYWRlci5jYWZlY29uaXJzdC5jb20vcmVhZC8uKyIsCiAgICAia29iYXRvLmhvbG9nZnguY29tL3JlYWRlci9yZWFkLy4rIiwKICAgICJqYWltaW5pc2JveC5jb20vcmVhZGVyL3JlYWQvLisiLAogICAgImFiYW5kb25lZGtpdHRlbnNjYW5zLm1va2tvcmkuZnIvcmVhZGVyL3JlYWQvLisiLAogICAgImdvbWFuZ2EuY28vcmVhZGVyL3JlYWQvLisiLAogICAgInJlYWRlclwubWFuZ2EtZG93bmxvYWRcLm9yZy9yZWFkLy4rIiwKICAgICIod3d3XC4pP21hbmdhLWFyXC5uZXQvbWFuZ2EvLisvLisvLisiLAogICAgImhlbHZldGljYXNjYW5zLmNvbS9yL3JlYWQvLisiLAogICAgInJlYWRlci50aGVjYXRzY2Fucy5jb20vcmVhZC8uKyIsCiAgICAieW9ua291cHJvZC5jb20vcmVhZGVyL3JlYWQvLisiLAogICAgInJlYWRlci5jaGFtcGlvbnNjYW5zLmNvbS9yZWFkLy4rIiwKICAgICJyZWFkZXIud2hpdGVvdXRzY2Fucy5jb20vcmVhZC8uKyIsCiAgICAiaGF0aWdhcm1zY2Fucy5ldS9ocy9yZWFkLy4rIiwKICAgICJsZWN0b3Iua2lyaXNoaW1hZmFuc3ViLmNvbS9sZWN0b3IvcmVhZC8uKyIsCiAgICAiaG90Y2hvY29sYXRlc2NhbnMuY29tL2ZzL3JlYWQvLisiLAogICAgInd3dy5zbGlkZS53b3JsZC10aHJlZS5vcmcvcmVhZC8uKyIsCiAgXS5qb2luKCd8JykgKyAiKSIsCiAgaW1nOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLnBhZ2VzW1cuY3VycmVudF9wYWdlXS51cmw7CiAgfSwKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiAnTi9BJzsKICB9LAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLnBhZ2VzLmxlbmd0aDsKICB9LAogIGN1cnBhZ2U6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFcuY3VycmVudF9wYWdlICsgMTsKICB9LAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgZGVzaXJlZDsKICAgIHZhciBkcm9wZG93biA9IGdldEVscygndWwuZHJvcGRvd24nKVsxXSB8fCBnZXRFbHMoJ3VsLnVrLW5hdicpWzFdIHx8IGdldEVscygndWwuZHJvcGRvd24tbWVudScpWzNdOwogICAgaWYoIWRyb3Bkb3duKSByZXR1cm47CiAgICBnZXRFbHMoJ2EnLCBkcm9wZG93bikuZm9yRWFjaChmdW5jdGlvbihjaGFwLCBpZHgsIGFycikgewogICAgICBpZihsb2NhdGlvbi5ocmVmLmluZGV4T2YoY2hhcC5ocmVmKSA9PT0gMCkgZGVzaXJlZCA9IGFycltpZHggKyAocHJldiA/IDEgOiAtMSldOwogICAgfSk7CiAgICByZXR1cm4gZGVzaXJlZCAmJiBkZXNpcmVkLmhyZWY7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYihXLnBhZ2VzW251bSAtIDFdLnVybCwgbnVtKTsKICB9LAogIHdhaXQ6IGZ1bmN0aW9uKCkgewogICAgaWYoVy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ2dvbWFuZ2EuY28nKSAhPT0gLTEpIHsKICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuYm9keS5pbm5lckhUTUwubWF0Y2goLyhcdyspXFtpZFxdXC51cmwvKTsKICAgICAgVy5wYWdlcyA9IG1hdGNoICYmIG1hdGNoWzFdICYmIFdbbWF0Y2hbMV1dOwogICAgfQogICAgcmV0dXJuIFcucGFnZXM7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhdHJhZGVycycsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbWFuZ2F0cmFkZXJzXFwuYml6L3JlYWQtb25saW5lLy4rIiwKICBpbWc6ICdpbWcuQ3VySW1hZ2UnLAogIG5leHQ6ICcuaW1hZ2UtY29udGFpbmVyIGEnLAogIG51bXBhZ2VzOiAnLlBhZ2VTZWxlY3QnLAogIGN1cnBhZ2U6ICcuUGFnZVNlbGVjdCcsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBuZXh0ID0gZXh0cmFjdEluZm8oJy5DaGFwdGVyU2VsZWN0Jywge3R5cGU6J3RleHQnLCB2YWw6IChwcmV2ID8gLTEgOiAxKX0pOwogICAgaWYobmV4dCkgewogICAgICB2YXIgY2hhcHRlciA9IG5leHQubWF0Y2goL1swLTkuXSsvKVswXTsKICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvY2hhcHRlci1bMC05Ll0rLywgJ2NoYXB0ZXItJyArIGNoYXB0ZXIpLnJlcGxhY2UoL3BhZ2UtWzAtOV0rLywgJ3BhZ2UtMScpOwogICAgfQogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhaW5uJywKICBtYXRjaDogIl5odHRwcz86Ly93d3cubWFuZ2Fpbm4ubmV0L21hbmdhL2NoYXB0ZXIvLisiLAogIGltZzogJyNpbWdQYWdlJywKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIGlmKCF0aGlzLl9jb3VudCkgdGhpcy5fY291bnQgPSBleHRyYWN0SW5mbyh0aGlzLmN1cnBhZ2UsIHt0eXBlOiAndmFsdWUnfSk7CiAgICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjsKICAgIGlmKCEvcGFnZV9bMC05XSsvLnRlc3QodXJsKSkgdXJsICs9ICcvcGFnZV8xJzsKICAgIHJldHVybiB1cmwucmVwbGFjZSgvcGFnZV9bMC05XSsvLCAncGFnZV8nICsgKCsrdGhpcy5fY291bnQpKTsKICB9LAogIG51bXBhZ2VzOiAnI2NtYnBhZ2VzJywKICBjdXJwYWdlOiAnI2NtYnBhZ2VzJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIG5leHQgPSBleHRyYWN0SW5mbygnI2NoYXB0ZXJzJywge3R5cGU6J3ZhbHVlJywgdmFsOiAocHJldiA/IC0xIDogMSl9KTsKICAgIGlmKG5leHQpIHJldHVybiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1wvY2hhcHRlclwvLiskLywgJy9jaGFwdGVyLycgKyBuZXh0ICsgJy9wYWdlXzEnKTsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0KfSwgewogIG5hbWU6ICdrdWt1ZG0nLAogIG1hdGNoOiAiXmh0dHBzPzovLyh3d3d8Y29taWN8Y29taWMyfGNvbWljMykua3VrdWRtLmNvbS9jb21pY2xpc3QvWzAtOV0rL1swLTldKy9bMC05XSsuaHRtIiwKICBpbWc6IGZ1bmN0aW9uKGN0eCkgewogICAgdmFyIHNjcmlwdCA9IGdldEVsKCd0ZCA+IHNjcmlwdFtsYW5ndWFnZT1qYXZhc2NyaXB0XScsIGN0eCk7CiAgICBpZihzY3JpcHQpIHsKICAgICAgcmV0dXJuICdodHRwOi8vbi5rdWt1ZG0uY29tLycgKyBzY3JpcHQudGV4dENvbnRlbnQubWF0Y2goL1wrIihbXiddKykvKVsxXTsKICAgIH0KICB9LAogIG5leHQ6IGZ1bmN0aW9uKGN0eCkgewogICAgdmFyIGxpbmtzID0gZ2V0RWxzKCd0ZCA+IGEnLCBjdHgpOwogICAgcmV0dXJuIGxpbmtzW2xpbmtzLmxlbmd0aCAtIDFdLmdldEF0dHJpYnV0ZSgnaHJlZicpOwogIH0sCiAgbnVtcGFnZXM6IGZ1bmN0aW9uKGN1cikgewogICAgcmV0dXJuIHBhcnNlSW50KGRvY3VtZW50LmJvZHkudGV4dENvbnRlbnQubWF0Y2goL+WFsShbMC05XSsp6aG1LylbMV0pOwogIH0sCiAgY3VycGFnZTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gcGFyc2VJbnQoZG9jdW1lbnQuYm9keS50ZXh0Q29udGVudC5tYXRjaCgv56ysKFswLTldKynpobUvKVsxXSk7CiAgfSwKICBiZWZvcmV4aHI6IHJldXNlLmVuY29kZUNoaW5lc2UKfSwgewogIG5hbWU6ICdtYW5nYWNoYXB0ZXInLAogIG1hdGNoOiAiXmh0dHBzPzovL3d3d1xcLm1hbmdhY2hhcHRlclxcLm1lL1teL10rL1teL10rL1teL10rLmh0bWwiLAogIGltZzogJyNtYW5nYUltZywgI3ZpZXdlciA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkOm50aC1jaGlsZCgxKSA+IGE6bnRoLWNoaWxkKDIpID4gaW1nJywKICBuZXh0OiAnLnBhZ2Utc2VsZWN0ICsgYS5idXR0b24tcGFnZScsCiAgbnVtcGFnZXM6ICcucGFnZS1zZWxlY3Qgc2VsZWN0JywKICBjdXJwYWdlOiAnLnBhZ2Utc2VsZWN0IHNlbGVjdCcsCiAgaW52Y2hhcDogdHJ1ZSwKICBuZXh0Y2hhcDogJyN0b3BfY2hhcHRlcl9saXN0JywKICBwcmV2Y2hhcDogJyN0b3BfY2hhcHRlcl9saXN0JywKICB3YWl0OiAnI3RvcF9jaGFwdGVyX2xpc3QnCn0sIHsKICBuYW1lOiAna2F3YWlpJywKICBtYXRjaDogIl5odHRwczovL2thd2FpaS5jYS9yZWFkZXIvLisiLAogIGltZzogJy5waWN0dXJlJywKICBuZXh0OiAnc2VsZWN0W25hbWU9cGFnZV0gKyBhJywKICBudW1wYWdlczogJ3NlbGVjdFtuYW1lPXBhZ2VdJywKICBjdXJwYWdlOiAnc2VsZWN0W25hbWU9cGFnZV0nLAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgbmV4dCA9IGV4dHJhY3RJbmZvKCdzZWxlY3RbbmFtZT1jaGFwdGVyXScsIHt0eXBlOid2YWx1ZScsIHZhbDogKHByZXYgPyAtMSA6IDEpfSk7CiAgICBpZihuZXh0KSByZXR1cm4gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cL3JlYWRlclwvKFteL10rKShcLy4rKT8kLywgJy9yZWFkZXIvJDEvJyArIG5leHQpOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfQp9LCB7CiAgbmFtZTogJ2xvbmVtYW5nYScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vbG9uZW1hbmdhLmNvbS9tYW5nYS9bXi9dKy9bXi9dKyIsCiAgaW1nOiAnI2ltYWdlV3JhcHBlciBpbWcnLAogIG5leHQ6ICcjaW1hZ2VXcmFwcGVyIGEnLAogIG51bXBhZ2VzOiAnLnZpZXdlclBhZ2UnLAogIGN1cnBhZ2U6ICcudmlld2VyUGFnZScsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBuZXh0ID0gZXh0cmFjdEluZm8oJy52aWV3ZXJDaGFwdGVyJywge3R5cGU6J3ZhbHVlJywgdmFsOiAocHJldiA/IDEgOiAtMSl9KTsKICAgIGlmKG5leHQpIHJldHVybiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1wvbWFuZ2FcLyhbXi9dKylcLy4rJC8sICcvbWFuZ2EvJDEvJyArIG5leHQpOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfQp9LCB7CiAgbmFtZTogJ21hZG9rYW1pJywKICBtYXRjaDogIl5odHRwcz86Ly9tYW5nYVxcLm1hZG9rYW1pXFwuYWwvcmVhZGVyLy4rIiwKICBpbWc6ICdpbWcnLAogIG5leHQ6ICdpbWcnLAogIGN1cnBhZ2U6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHBhcnNlSW50KHF1ZXJ5KCkuaW5kZXgpICsgMTsKICB9LAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIGlmKCF0aGlzLl9wYWdlcykgewogICAgICB0aGlzLl9wYWdlcyA9IEpTT04ucGFyc2UoZ2V0RWwoJyNyZWFkZXInKS5kYXRhc2V0LmZpbGVzKTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9wYWdlcy5sZW5ndGg7CiAgfSwKICBwYWdlczogZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgdXJsID0gdXJsLnJlcGxhY2UoL2ZpbGU9LiskLywgJ2ZpbGU9JyArIHRoaXMuX3BhZ2VzW251bSAtIDFdKTsKICAgIGNiKHVybCwgdXJsKTsKICB9LAogIHdhaXQ6ICcjcmVhZGVyJwp9LCB7CiAgbmFtZTogJ2Vnc2NhbnMnLAogIG1hdGNoOiAnXmh0dHBzPzovL3JlYWQuZWdzY2Fucy5jb20vLisnLAogIGltZzogJyNpbWFnZV9mcmFtZSBpbWcnLAogIG5leHQ6ICcjaW1hZ2VfZnJhbWUgaW1nJywKICBjdXJwYWdlOiAnc2VsZWN0W25hbWU9cGFnZV0nLAogIG51bXBhZ2VzOiAnc2VsZWN0W25hbWU9cGFnZV0nLAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgZGF0YSA9IGdldEVsKHRoaXMuY3VyY2hhcCkuZ2V0QXR0cmlidXRlKCdvbmNoYW5nZScpLm1hdGNoKC8nW14nXSsnL2cpOwogICAgdmFyIG5leHQgPSBleHRyYWN0SW5mbyh0aGlzLmN1cmNoYXAsIHsgdHlwZTogJ3ZhbHVlJywgdmFsOiAocHJldiA/IC0xIDogMSkgfSk7CiAgICBpZihuZXh0KSByZXR1cm4gbG9jYXRpb24ub3JpZ2luICsgJy8nICsgZGF0YVswXS5zbGljZSgxLCAtMSkgKyAnLycgKyBuZXh0OwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfSwKICBjdXJjaGFwOiAnc2VsZWN0W25hbWU9Y2hhcHRlcl0nLAogIG51bWNoYXBzOiAnc2VsZWN0W25hbWU9Y2hhcHRlcl0nLAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYignLycgKyBXLmltZ191cmxbbnVtXSwgbnVtKTsKICB9Cn0sIHsKICBuYW1lOiAnaW1wZXJpYWxzY2FucycsCiAgbWF0Y2g6ICdeaHR0cHM/Oi8vaW1wZXJpYWxzY2Fucy5jb20vcmVhZC8uKycsCiAgaW1nOiAnI3BhZ2UtaW1nJywKICBuZXh0OiAnI3BhZ2UtdXJsJywKICBjdXJwYWdlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBleHRyYWN0SW5mbygnI3BhZ2Utc2VsZWN0JywgeyB0eXBlOiAnaW5kZXgnLCB2YWw6IC0xIH0pOwogIH0sCiAgbnVtcGFnZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGV4dHJhY3RJbmZvKCcjcGFnZS1zZWxlY3QnKSAtIDE7CiAgfSwKICBjdXJjaGFwOiBmdW5jdGlvbigpIHsKICAgIHZhciBvcHRpb25zID0gZ2V0RWxzKCcjY2hhcHRlci1zZWxlY3Qgb3B0aW9uOm5vdChbZGlzYWJsZWRdKScpOwogICAgdmFyIGNoYXB0ZXIgPSAxOwogICAgb3B0aW9ucy5zb21lKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT09IHZhbHVlLnZhbHVlKSB7CiAgICAgICAgY2hhcHRlciA9IG9wdGlvbnMubGVuZ3RoIC0gaW5kZXg7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGNoYXB0ZXI7CiAgfSwKICBudW1jaGFwczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZXh0cmFjdEluZm8oJyNjaGFwdGVyLXNlbGVjdCcpOwogIH0sCiAgbmV4dGNoYXA6ICcjcGFnZS1jb250cm9sID4gbGk6bnRoLWNoaWxkKDUpID4gYScsCiAgcHJldmNoYXA6ICcjcGFnZS1jb250cm9sID4gbGk6bnRoLWNoaWxkKDEpID4gYScKfSwgewogIG5hbWU6ICdjaHVpeHVlJywKICBtYXRjaDogIl5odHRwcz86Ly93d3cuY2h1aXh1ZS5jb20vbWFuaHVhL1swLTldKy9bMC05XSsuaHRtbCIsCiAgaW1nOiAnI3FUY21zX3BpYycsCiAgbmV4dDogJyNxVGNtc19waWMnLAogIGN1cnBhZ2U6ICcjcVRjbXNfc2VsZWN0X2knLAogIG51bXBhZ2VzOiAnI3FUY21zX3NlbGVjdF9pJywKICBwYWdlczogZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgaWYoIXRoaXMuX3BhZ2VzKSB7CiAgICAgIHRoaXMuX3BhZ2VzID0gVy5xVGNtc19TX21fbXVybC5zcGxpdCgnJHFpbmd0aWFuZHkkJyk7CiAgICB9CiAgICBjYih0aGlzLl9wYWdlc1tudW0gLSAxXSwgbnVtKTsKICB9LAogIG5leHRjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLnFUY21zX1BpY19uZXh0QXJyOwogIH0sCiAgd2FpdDogJyNxVGNtc19waWMnCn0sIHsKICBuYW1lOiAnc2gtYXJhYicsCiAgbWF0Y2g6ICdeaHR0cHM/Oi8vd3d3LnNoLWFyYWIuY29tL21hbmdhLy4rJywKICBpbWc6ICdpbWcucGljdHVyZScsCiAgbmV4dDogJyNvbXYgdGQgPiBhJywKICBjdXJwYWdlOiAnc2VsZWN0W25hbWU9cGFnZV0nLAogIG51bXBhZ2VzOiAnc2VsZWN0W25hbWU9cGFnZV0nLAogIGN1cmNoYXA6ICdzZWxlY3RbbmFtZT1jaGFwdGVyXScsCiAgbnVtY2hhcHM6ICdzZWxlY3RbbmFtZT1jaGFwdGVyXScsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBuZXh0ID0gZXh0cmFjdEluZm8oJ3NlbGVjdFtuYW1lPWNoYXB0ZXJdJywge3R5cGU6J3ZhbHVlJywgdmFsOiAocHJldiA/IC0xIDogMSl9KTsKICAgIGlmIChuZXh0KSByZXR1cm4gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC9bXlwvXSskLywgbmV4dCk7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9Cn0sIHsKICBuYW1lOiAnYnIubWFuZ2Fob3N0LmNvbScsCiAgbWF0Y2g6ICJeaHR0cChzKT86Ly9ici5tYW5nYWhvc3QuY29tL21hbmdhL1teL10rLy4rIiwKICBpbWc6ICdpbWcub3BlbicsCiAgbmV4dDogJy5pbWFnZS1jb250ZW50ID4gYScsCiAgY3VycGFnZTogJy52aWV3ZXJQYWdlJywKICBudW1wYWdlczogJy52aWV3ZXJQYWdlJwp9LCB7CiAgbmFtZTogJ3NwaW55YmFja21hbmdhIGFuZCB0aXRhbmlhc2NhbnMnLAogIG1hdGNoOiAnXmh0dHBzPzovLyhzcGlueWJhY2ttYW5nYS5jb20vXFw/bWFuZ2E9W14mXSsmY2hhcHRlcj0uK3x3d3dcLnRpdGFuaWFzY2Fuc1wuY29tL3JlYWRlci8uKy8uKyknLAogIGltZzogJyN0aGVQaWNMaW5rIGltZycsCiAgbmV4dDogJyN0aGVQaWNMaW5rJywKICBjdXJwYWdlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLmN1cnJlbnQ7CiAgfSwKICBudW1wYWdlczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZ2V0RWwoJyNsb2FkaW5nYmFyIHRyJykuY2hpbGRyZW4ubGVuZ3RoOwogIH0sCiAgY3VyY2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gcGFyc2VJbnQoZ2V0RWxzKCcuc2VsZWN0b3InKVsxXS5maXJzdENoaWxkLnRleHRDb250ZW50Lm1hdGNoKC9bMC05XSsvKVswXSk7CiAgfSwKICBudW1jaGFwczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZ2V0RWxzKCcuc2VsZWN0b3IgLm9wdGlvbnMnKVsxXS5jaGlsZHJlbi5sZW5ndGg7CiAgfSwKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIG5leHRDaGFwID0gZG9jdW1lbnQuc2NyaXB0c1syXS50ZXh0Q29udGVudC5tYXRjaCgvbG9jYXRpb24uaHJlZiA9ICIoW14iXSspIi8pWzFdOwogICAgaWYocHJldikgewogICAgICBbXS5zb21lLmNhbGwoZ2V0RWxzKCcuc2VsZWN0b3IgLm9wdGlvbnMnKVsxXS5jaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQsIGluZGV4LCBjaGlsZHJlbikgewogICAgICAgIGlmKGNoaWxkLmhyZWYgPT09IG5leHRDaGFwKSB7CiAgICAgICAgICBuZXh0Q2hhcCA9IGNoaWxkcmVuW2luZGV4IC0gMl0gJiYgY2hpbGRyZW5baW5kZXggLSAyXS5ocmVmOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBuZXh0Q2hhcDsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0sCiAgcGFnZXM6IGZ1bmN0aW9uKHVybCwgbnVtLCBjYiwgZXgpIHsKICAgIHZhciBuZXh0ID0gdXJsLnJlcGxhY2UoLyg/OihcLykyXC98WzAtOV0qKSQvLCAnJDEnICsgKG51bSArIDEpKTsKICAgIGNiKFcuaW1hZ2VBcnJheVtudW0gLSAxXSwgbmV4dCk7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhLmFlJywKICBtYXRjaDogImh0dHBzPzovL3d3dy5tYW5nYS5hZS9bXi9dKy9bXi9dKy8iLAogIGltZzogJyNzaG93Y2hhcHRlcmNvbnRhaW5lciBpbWcnLAogIG5leHQ6ICcjc2hvd2NoYXB0ZXJjb250YWluZXIgYScsCiAgY3VycGFnZTogJ2EuY2hwYWdlJywKICBuZXh0Y2hhcDogJy5jaGFwdGVyOmxhc3QtY2hpbGQnLAogIHByZXZjaGFwOiAnLmNoYXB0ZXI6Zmlyc3QtY2hpbGQnCn0sIHsKICBuYW1lOiAnbWFuZ2Fmb3JhbGwnLAogIG1hdGNoOiAiaHR0cHM/Oi8vbWFuZ2Fmb3JhbGwuY29tL21hbmdhL1teL10rL1teL10rLyIsCiAgaW1nOiAnI3BhZ2UgPiBpbWcnLAogIG5leHQ6ICcjcGFnZSA+IGltZycsCiAgbnVtcGFnZXM6ICcjY2hhcHRlciA+IGRpdjpudGgtY2hpbGQoMSkgPiBkaXYgPiBkaXYudWstd2lkdGgtbGFyZ2UtMS0zLnVrLXdpZHRoLW1lZGl1bS0xLTMudWstd2lkdGgtc21hbGwtMS0xLnVrLXRleHQtbGVmdC51ay10ZXh0LWNlbnRlci1zbWFsbCA+IGRpdiA+IGRpdiA+IGRpdiA+IHVsJywKICBjdXJwYWdlOiAnI2NoYXB0ZXIgPiBkaXY6bnRoLWNoaWxkKDEpID4gZGl2ID4gZGl2LnVrLXdpZHRoLWxhcmdlLTEtMy51ay13aWR0aC1tZWRpdW0tMS0zLnVrLXdpZHRoLXNtYWxsLTEtMS51ay10ZXh0LWxlZnQudWstdGV4dC1jZW50ZXItc21hbGwgPiBkaXYgPiBhLnVrLWJ1dHRvbi51ay1idXR0b24tcHJpbWFyeS5udW1iZXIudWstYnV0dG9uLWRhbmdlcicsCiAgbmV4dGNoYXA6ICcjY2hhcHRlciA+IGRpdjpudGgtY2hpbGQoNSkgPiBkaXYudWstZ3JpZC51ay1ncmlkLWNvbGxhcHNlLnVrLW1hcmdpbi10b3AgPiBkaXYudWstd2lkdGgtbGFyZ2UtMS0zLnVrLXdpZHRoLW1lZGl1bS0xLTMudWstd2lkdGgtc21hbGwtMS0xLnVrLXRleHQtbGVmdC51ay10ZXh0LWNlbnRlci1zbWFsbCA+IGEnLAogIHByZXZjaGFwOiAnI2NoYXB0ZXIgPiBkaXY6bnRoLWNoaWxkKDUpID4gZGl2LnVrLWdyaWQudWstZ3JpZC1jb2xsYXBzZS51ay1tYXJnaW4tdG9wID4gZGl2LnVrLXdpZHRoLWxhcmdlLTEtMy51ay13aWR0aC1tZWRpdW0tMS0zLnVrLXdpZHRoLXNtYWxsLTEtMS51ay10ZXh0LXJpZ2h0LnVrLXRleHQtY2VudGVyLXNtYWxsID4gYScsCiAgcGFnZXM6IGZ1bmN0aW9uKHVybCwgbnVtLCBjYiwgZXgpIHsKICAgIGNiKFcucGFnZXNbbnVtIC0gMV0udXJsLCBudW0pOwogIH0KfSwgewogIG5hbWU6ICdoZWxsb2NvbWljJywKICBtYXRjaDogImh0dHBzPzovL2hlbGxvY29taWMuY29tL1teL10rL1teL10rL3BbMC05XSsiLAogIGltZzogJy5jb3Zlcklzc3VlIGltZycsCiAgbmV4dDogJy5jb3Zlcklzc3VlIGEnLAogIG51bXBhZ2VzOiAnI2UxJywKICBjdXJwYWdlOiAnI2UxJywKICBuZXh0Y2hhcDogJyNlMicsCiAgcHJldmNoYXA6ICcjZTInLAogIGN1cmNoYXA6ICcjZTInLAogIG51bWNoYXBzOiAnI2UyJwp9LCB7CiAgbmFtZTogJ3JlYWQtY29taWMtb25saW5lJywKICBtYXRjaDogIl5odHRwcz86Ly9yZWFkY29taWNvbmxpbmVcXC50by9Db21pYy9bXi9dKy8uKyIsCiAgaW1nOiAnI2RpdkltYWdlIGltZycsCiAgbmV4dDogJyNkaXZJbWFnZSBpbWcnLAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLmxzdEltYWdlcy5sZW5ndGg7CiAgfSwKICBjdXJwYWdlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBnZXRFbHMoJyNkaXZJbWFnZSBpbWcnKS5sZW5ndGggPiAxID8gMSA6IFcuY3VyckltYWdlICsgMTsKICB9LAogIG5leHRjaGFwOiAnI3NlbGVjdEVwaXNvZGUsIC5zZWxlY3RFcGlzb2RlJywKICBwcmV2Y2hhcDogJyNzZWxlY3RFcGlzb2RlLCAuc2VsZWN0RXBpc29kZScsCiAgcGFnZXM6IGZ1bmN0aW9uKHVybCwgbnVtLCBjYiwgZXgpIHsKICAgIGNiKFcubHN0SW1hZ2VzW251bSAtIDFdLCBudW0pOwogIH0KfSwgewogIG5hbWU6ICdtYW5nYWVkZW4nLAogIG1hdGNoOiAiXmh0dHBzPzovLyh3d3dcXC4pP21hbmdhZWRlblxcLmNvbS8oZW58aXQpLyhlbnxpdCktbWFuZ2EvLisiLAogIGltZzogJyNtYWluSW1nJywKICBuZXh0OiAnI25leHRBJywKICBudW1wYWdlczogJyNwYWdlU2VsZWN0JywKICBjdXJwYWdlOiAnI3BhZ2VTZWxlY3QnLAogIG51bWNoYXBzOiAnI2NvbWJvYm94JywKICBjdXJjaGFwOiAnI2NvbWJvYm94JywKICBpbnZjaGFwOiB0cnVlLAogIG5leHRjaGFwOiBmdW5jdGlvbiAocHJldikgewogICAgdmFyIGNib3ggPSBnZXRFbCgnI2NvbWJvYm94Jyk7CiAgICB2YXIgb3B0ID0gY2JveFtwcmV2ID8gY2JveC5zZWxlY3RlZEluZGV4ICsgMSA6IGNib3guc2VsZWN0ZWRJbmRleCAtIDFdOwogICAgdmFyIHNwYW4gPSBnZXRFbCgnc3Bhbi5oaWRlTTAgYScpOwogICAgcmV0dXJuIG9wdCAmJiBzcGFuICYmIHNwYW4uaHJlZiArIHBhcnNlSW50KG9wdC52YWx1ZSkgKyAnLzEvJzsKICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9Cn0sIHsKICBuYW1lOiAnY29taWNhc3RsZScsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vY29taWNhc3RsZVxcLm9yZy9yZWFkLS4rIiwKICBpbWc6ICcuY2hhcHRlci1pbWcnLAogIG5leHQ6ICcuY2hhcHRlci1jb250ZW50ID4gc2VsZWN0ICsgYS5sYWJlbCcsCiAgbnVtcGFnZXM6ICcuY2hhcHRlci1jb250ZW50ID4gc2VsZWN0JywKICBjdXJwYWdlOiAnLmNoYXB0ZXItY29udGVudCA+IHNlbGVjdCcsCiAgbnVtY2hhcHM6ICcuZm9ybS1jb250cm9sJywKICBjdXJjaGFwOiAnLmZvcm0tY29udHJvbCcsCiAgbmV4dGNoYXA6ICcuZm9ybS1jb250cm9sJywKICBwcmV2Y2hhcDogJy5mb3JtLWNvbnRyb2wnLAogIGludmNoYXA6IHRydWUKfSwgewogIG5hbWU6ICdteW1oOCcsCiAgbWF0Y2g6ICJeaHR0cHM/Oi8vKHd3d1xcLik/bXltaDhcXC5jb20vY2hhcHRlci8uKyIsCiAgaW1nOiAnI3ZpZXdpbWcnLAogIG5leHQ6IHJldXNlLm5hLAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLm1heHBhZ2VzOwogIH0sCiAgY3VycGFnZTogJyNKX3Nob3dwYWdlID4gc3BhbicsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBidXR0b24gPSBwcmV2ID8gZ2V0RWwoJ2Rpdi5tM3AgPiBpbnB1dDpmaXJzdC1vZi10eXBlJykgOiBnZXRFbCgnZGl2Lm0zcCA+IGlucHV0Omxhc3Qtb2YtdHlwZScpOwogICAgcmV0dXJuIGJ1dHRvbiAmJiBidXR0b24uYXR0cmlidXRlcy5vbmNsaWNrLnZhbHVlLm1hdGNoKC9cLmhyZWY9JyhbXiddKyknLylbMV07CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYihXLldlYmltZ1NlcnZlclVSTFswXSArIFcuaW1hZ2VzbGlzdFtudW1dLCBudW0pOwogIH0sCiAgd2FpdDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5pbWFnZXNsaXN0Lmxlbmd0aCA+IDA7CiAgfQp9LCB7CiAgbmFtZTogJ3VuaW9ubWFuZ2FzJywKICBtYXRjaDogImh0dHBzPzovLyh3d3dcXC4pP3VuaW9ubWFuZ2FzXFwubmV0L2xlaXRvci8uKyIsCiAgaW1nOiAnLnNsaWNrLWFjdGl2ZSBpbWcucmVhbCcsCiAgbmV4dDogcmV1c2UubmEsCiAgbnVtcGFnZXM6ICcuc2VsZWN0UGFnZScsCiAgY3VycGFnZTogJy5zZWxlY3RQYWdlJywKICBudW1jaGFwczogJyNjYXBfbWFuZ2ExJywKICBjdXJjaGFwOiAnI2NhcF9tYW5nYTEnLAogIG5leHRjaGFwOiAnI2NhcF9tYW5nYTEnLAogIHByZXZjaGFwOiAnI2NhcF9tYW5nYTEnLAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBjYihXLnBhZ2VzW251bSAtIDFdLCBudW0pOwogIH0sCiAgd2FpdDogZnVuY3Rpb24oKSB7CiAgICBXLnBhZ2VzID0gZ2V0RWxzKCdpbWcucmVhbCcpLm1hcChmdW5jdGlvbihlbCkgewogICAgICByZXR1cm4gZWwuc3JjIHx8IGVsLmRhdGFzZXQubGF6eTsKICAgIH0pOwogICAgcmV0dXJuIFcucGFnZXMgJiYgVy5wYWdlcy5sZW5ndGggPiAwOwogIH0KfSwgewogIG5hbWU6ICdvdGFrdXNtYXNoJywKICBtYXRjaDogImh0dHBzPzovL3d3d1xcLm90YWt1c21hc2hcXC5jb20vKHJlYWQtY29taWNzfHJlYWQtbWFuZ2EpLy4rIiwKICBpbWc6ICdpbWcucGljdHVyZScsCiAgbmV4dDogJ3NlbGVjdFtuYW1lPXBhZ2VdICsgYScsCiAgY3VycGFnZTogJ3NlbGVjdFtuYW1lPXBhZ2VdJywKICBudW1wYWdlczogJ3NlbGVjdFtuYW1lPXBhZ2VdJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgdmFyIG5leHRDaGFwID0gZXh0cmFjdEluZm8oJ3NlbGVjdFtuYW1lPWNoYXB0ZXJdJywge3R5cGU6ICd2YWx1ZScsIHZhbDogcHJldiA/IDEgOiAtMX0pOwogICAgcmV0dXJuIG5leHRDaGFwID8gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8ocmVhZC0oY29taWNzfG1hbmdhKVwvW15cL10rKS4qLywgJyQxLycgKyBuZXh0Q2hhcCkgOiBudWxsOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfSwKICBudW1jaGFwczogJ3NlbGVjdFtuYW1lPWNoYXB0ZXJdJywKICBjdXJjaGFwOiAnc2VsZWN0W25hbWU9Y2hhcHRlcl0nLAogIGludmNoYXA6IHRydWUKfSwgewogIG5hbWU6ICdtYW5nYWhvbWUnLAogIG1hdGNoOiAiaHR0cHM/Oi8vd3d3XFwubWFuZ2Fob21lXFwuY29tL21hbmdhLy4rLy4rIiwKICBpbWc6ICcjaW1hZ2UnLAogIG5leHQ6ICcjdmlld2VyID4gYScsCiAgY3VycGFnZTogJy5tYW5nYXJlYWQtcGFnZSBzZWxlY3QnLAogIG51bXBhZ2VzOiAnLm1hbmdhcmVhZC1wYWdlIHNlbGVjdCcsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBidXR0b25zID0gZ2V0RWxzKCcubWFuZ2FyZWFkLWZvb3RlciAubGVmdCA+IC5idG4tdGhyZWUnKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnV0dG9ucy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYnV0dG9uc1tpXS50ZXh0Q29udGVudC5pbmRleE9mKHByZXYgPyAnUHJldiBDaGFwdGVyJyA6ICdOZXh0IENoYXB0ZXInKSA+IC0gMSkgewogICAgICAgIHJldHVybiBidXR0b25zW2ldLmhyZWY7CiAgICAgIH0KICAgIH0KICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0sCiAgd2FpdDogJyNpbWFnZScKfSwgewogIG5hbWU6ICdyZWFkY29taWNzJywKICBtYXRjaDogImh0dHBzPzovLyh3d3dcXC4pP3JlYWRjb21pY3NcXC50di8uKy9jaGFwdGVyLVswLTldKygvWzAtOV0rfCQpIiwKICBpbWc6ICcjbWFpbl9pbWcnLAogIG5leHQ6ICcubmF2Lm5leHQnLAogIGN1cnBhZ2U6ICdzZWxlY3RbbmFtZT1wYWdlX3NlbGVjdF0nLAogIG51bXBhZ2VzOiAnc2VsZWN0W25hbWU9cGFnZV9zZWxlY3RdJywKICBuZXh0Y2hhcDogJ3NlbGVjdFtuYW1lPWNoYXB0ZXJfc2VsZWN0XScsCiAgcHJldmNoYXA6ICdzZWxlY3RbbmFtZT1jaGFwdGVyX3NlbGVjdF0nLAogIGN1cmNoYXA6ICdzZWxlY3RbbmFtZT1jaGFwdGVyX3NlbGVjdF0nLAogIG51bWNoYXBzOiAnc2VsZWN0W25hbWU9Y2hhcHRlcl9zZWxlY3RdJywKICB3YWl0OiAnc2VsZWN0W25hbWU9cGFnZV9zZWxlY3RdJwp9LCB7CiAgbmFtZTogJ2NhcnRvb25tYWQnLAogIG1hdGNoOiAiaHR0cHM/Oi8vKHd3d1xcLik/KGNhcnRvb25tYWR8Y29taWNuYWQpXC5jb20vY29taWMvWzAtOV0rXC5odG1sIiwKICBpbWc6ICd0cjpudGgtY2hpbGQoNSkgPiB0ZCA+IHRhYmxlID4gdGJvZHkgPiB0cjpudGgtY2hpbGQoMSkgPiB0ZCA+IGEgPiBpbWcnLAogIG5leHQ6ICdhLm9ucGFnZSthJywKICBjdXJwYWdlOiAnYS5vbnBhZ2UnLAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBleHRyYWN0SW5mbygnc2VsZWN0W25hbWU9anVtcF0nKSAtIDE7CiAgfSwKICBuZXh0Y2hhcDogZnVuY3Rpb24oKSB7CiAgICBsZXQgZmlsdGVyID0gZ2V0RWxzKCcucGFnZXMnKS5maWx0ZXIoZnVuY3Rpb24oaSkgewogICAgICByZXR1cm4gaS50ZXh0Q29udGVudC5tYXRjaCgn5LiL5LiA6KmxJyk7CiAgICB9KTsKICAgIHJldHVybiBmaWx0ZXIubGVuZ3RoID8gZmlsdGVyWzBdLmhyZWYgOiBudWxsOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgbGV0IGZpbHRlciA9IGdldEVscygnLnBhZ2VzJykuZmlsdGVyKGZ1bmN0aW9uKGkpIHsKICAgICAgICByZXR1cm4gaS50ZXh0Q29udGVudC5tYXRjaCgn5LiK5LiA6KmxJyk7CiAgICB9KTsKICAgIHJldHVybiBmaWx0ZXIubGVuZ3RoID8gZmlsdGVyWzBdLmhyZWYgOiBudWxsOwogIH0sCn0sIHsKICBuYW1lOiAnaWthbm1hbicsCiAgbWF0Y2g6ICJodHRwcz86Ly8od3d3fHR3KVwuKGlrYW5tYW58bWFuaHVhZ3VpKVwuY29tL2NvbWljL1swLTldKy9bMC05XStcLmh0bWwiLAogIGltZzogJyNtYW5nYUZpbGUnLAogIG5leHQ6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gVy5fbmV4dDsKICB9LAogIGN1cnBhZ2U6ICcjcGFnZScsCiAgbnVtcGFnZXM6ICcjcGFnZVNlbGVjdCcsCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKHByZXYpIHsKICAgIHZhciBjaGFwID0gcHJldiA/IFcuX3ByZXZjaGFwIDogVy5fbmV4dGNoYXA7CiAgICBpZiAoY2hhcCA+IDApIHsKICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvKFwvY29taWNcL1swLTldK1wvKVswLTldK1wuaHRtbC4qLywgIiQxIiArIGNoYXAgKyAiLmh0bWwiKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIHByZXZjaGFwOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm5leHRjaGFwKHRydWUpOwogIH0sCiAgd2FpdDogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0RWwoJyNtYW5nYUZpbGUnKSkgewogICAgICBXLl9uZXh0Y2hhcCA9IFcuY0luZm8ubmV4dElkOwogICAgICBXLl9wcmV2Y2hhcCA9IFcuY0luZm8ucHJldklkOwogICAgICB2YXIgZXggPSBleHRyYWN0SW5mby5iaW5kKHRoaXMpOwogICAgICBXLl9uZXh0ID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oX3BbMC05XSspP1wuaHRtbC4qLywgJ19wJyArIChleCgnY3VycGFnZScpICsgMSkgKyAnLmh0bWwnKTsKICAgICAgVy5fYmFzZSA9IGV4KCdpbWcnKS5yZXBsYWNlKC9bXlwvXSskLywgJycpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICB2YXIgbmV4dHVybCA9ICB1cmwucmVwbGFjZSgvKF9wWzAtOV0rKT9cLmh0bWwuKi8sICdfcCcgKyAobnVtICsgMSkgKyAnLmh0bWwnKTsKICAgIHZhciBpbWd1cmwgPSBXLl9iYXNlICsgVy5jSW5mby5maWxlc1tudW0gLSAxXTsKICAgIGNiKGltZ3VybCwgbmV4dHVybCk7CiAgfQp9LCB7CiAgbmFtZTogJ21hbmdhc2FpbCBhbmQgbWFuZ2F0YWlsJywKICBtYXRjaDogJ2h0dHBzPzovL3d3d1wubWFuZ2Eoc2FpbHx0YWlsKVwuY29tL1teL10rJywKICBpbWc6ICcjaW1hZ2VzIGltZycsCiAgbmV4dDogJyNpbWFnZXMgYScsCiAgY3VycGFnZTogJyNlZGl0LXNlbGVjdC1wYWdlJywKICBudW1wYWdlczogJyNlZGl0LXNlbGVjdC1wYWdlJywKICBuZXh0Y2hhcDogZnVuY3Rpb24ocHJldikgewogICAgcmV0dXJuIGxvY2F0aW9uLm9yaWdpbiArICcvbm9kZS8nICsgZXh0cmFjdEluZm8oJyNlZGl0LXNlbGVjdC1ub2RlJywge3R5cGU6ICd2YWx1ZScsIHZhbDogcHJldiA/IC0xIDogMX0pOwogIH0sCiAgcHJldmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubmV4dGNoYXAodHJ1ZSk7CiAgfSwKICBjdXJjaGFwOiAnI3NlbGVjdF9ub2RlJywKICBudW1jaGFwczogJyNzZWxlY3Rfbm9kZScKfSwgewogIG5hbWU6ICdrb21pa3N0YXRpb24nLAogIG1hdGNoOiAiXmh0dHBzPzovL3d3d1wua29taWtzdGF0aW9uXC5jb20vLisvLisvLisiLAogIGltZzogJyNtYWlucGFnZScsCiAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5fYmFzZSArICc/cGFnZT0nICsgKFcuZ2xiQ3VycmVudHBhZ2UgKyAxKTsKICB9LAogIG51bXBhZ2VzOiAnI2luZGV4IHNlbGVjdCcsCiAgY3VycGFnZTogJyNpbmRleCBzZWxlY3QnLAogIHBhZ2VzOiBmdW5jdGlvbih1cmwsIG51bSwgY2IsIGV4KSB7CiAgICBuZXh0ID0gVy5fYmFzZSArICc/cGFnZT0nICsgKG51bSArIDEpOwogICAgY2IoVy5wYWdlc1tudW0gLSAxXSwgbmV4dCk7CiAgfSwKICB3YWl0OiBmdW5jdGlvbigpIHsKICAgIFcuX2Jhc2UgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1s/I10uKyQvLCAnJyk7CiAgICByZXR1cm4gVy5wYWdlczsKICB9Cn0sIHsKICBuYW1lOiAnZ21hbmdhJywKICBtYXRjaDogIl5odHRwcz86Ly9nbWFuZ2EubWUvbWFuZ2FzLyIsCiAgaW1nOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLnBhZ2VzW1cuZmlyc3RJbWcgLSAxXTsKICB9LAogIG5leHQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYgKyAnIycgKyAoVy5maXJzdEltZyArIDEpOwogIH0sCiAgbnVtcGFnZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFcudG90YWxJbWdzOwogIH0sCiAgY3VycGFnZTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5maXJzdEltZzsKICB9LAogIG5leHRjaGFwOiBmdW5jdGlvbihwcmV2KSB7CiAgICB2YXIgbnVtID0gcGFyc2VJbnQoZXh0cmFjdEluZm8oJyNjaGFwdGVyJywge3R5cGU6ICd2YWx1ZScsIHZhbDogcHJldiA/IDEgOiAtMX0pKTsKICAgIHJldHVybiBudW0gJiYgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oXC9tYW5nYXNcL1teXC9dK1wvKVswLTldKyhcL1teXC9dKykvLCAnJDEnICsgbnVtICsgJyQyJyk7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5uZXh0Y2hhcCh0cnVlKTsKICB9LAogIG51bWNoYXBzOiAnI2NoYXB0ZXInLAogIGN1cmNoYXA6ICcjY2hhcHRlcicsCiAgaW52Y2hhcDogdHJ1ZSwKICBwYWdlczogZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgdmFyIG5leHR1cmwgPSBsb2NhdGlvbi5ocmVmICsgJyMnICsgKG51bSArIDEpOwogICAgY2IoVy5wYWdlc1tudW0gLSAxXSwgbmV4dHVybCk7CiAgfSwKICB3YWl0OiBmdW5jdGlvbigpIHsKICAgIFcucGFnZXMgPSBXLnJlbGVhc2VfcGFnZXMgJiYgVy5yZWxlYXNlX3BhZ2VzWzFdOwogICAgcmV0dXJuIFcucGFnZXM7CiAgfQp9LCB7CiAgbmFtZTogJzkzMG1oJywKICBtYXRjaDogImh0dHA6Ly93d3dcLjkzMG1oXC5jb20vbWFuaHVhL1xcZCsvXFxkKy5odG1sIiwKICBpbWc6ICcjaW1hZ2VzID4gaW1nJywKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBsb2NhdGlvbi5vcmlnaW4gKyBsb2NhdGlvbi5wYXRobmFtZSArICc/cD0nICsgKFcuU2luVGhlbWUuZ2V0UGFnZSgpICsgMSk7CiAgfSwKICBwYWdlczogZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgY2IobmV3IFVSTChXLnBhZ2VJbWFnZSkub3JpZ2luICsgJy8nICsgVy5jaGFwdGVyUGF0aCArIFcuY2hhcHRlckltYWdlc1tudW0gLSAxXSwgbnVtIC0gMSk7CiAgfSwKICBjdXJwYWdlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLlNpblRoZW1lLmdldFBhZ2UoKTsKICB9LAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLmNoYXB0ZXJJbWFnZXMubGVuZ3RoOwogIH0sCiAgbmV4dGNoYXA6IGZ1bmN0aW9uKCl7CiAgICByZXR1cm4gVy5uZXh0Q2hhcHRlckRhdGEuaWQgJiYgVy5uZXh0Q2hhcHRlckRhdGEuaWQgPiAwID8gVy5jb21pY1VybCArIFcubmV4dENoYXB0ZXJEYXRhLmlkICsgJy5odG1sJyA6IG51bGw7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKXsKICAgIHJldHVybiBXLnByZXZDaGFwdGVyRGF0YS5pZCAmJiBXLnByZXZDaGFwdGVyRGF0YS5pZCA+IDAgPyBXLmNvbWljVXJsICsgVy5wcmV2Q2hhcHRlckRhdGEuaWQgKyAnLmh0bWwnIDogbnVsbDsKICB9LAogIHdhaXQ6ICcjaW1hZ2VzID4gaW1nJwp9LCB7CiAgbmFtZTogJ+a8q+eVq+eOiycsCiAgbWF0Y2g6ICJodHRwczovL3d3d1wubWFuZ2Fib3hcLm1lL3JlYWRlci9cXGQrL2VwaXNvZGVzL1xcZCsvIiwKICBpbWc6ICdpbWcuanNOZXh0JywKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiAnIyc7CiAgfSwKICBwYWdlczogZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgY2IoVy5wYWdlc1tudW0gLSAxXS5zcmMsIG51bSAtIDEpOwogIH0sCiAgbnVtcGFnZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFcucGFnZXMubGVuZ3RoOwogIH0sCiAgbmV4dGNoYXA6ICcubGFzdFNsaWRlcl9uZXh0QnV0dG9uJywKICB3YWl0OiBmdW5jdGlvbiAoKXsKICAgIFcucGFnZXMgPSBnZXRFbHMoJ2ltZy5qc05leHQnKTsKICAgIHJldHVybiB0cnVlOwogIH0KfSwgewogIG5hbWU6ICcyY29taWMuY29tIOWLlea8q+aYkycsCiAgbWF0Y2g6ICJodHRwOi8vdHdvY29taWMuY29tL3ZpZXcvY29taWNfXFxkKy5odG1sIiwKICBpbWc6ICcjVGhlSW1nJywKICBuZXh0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiAnIyc7CiAgfSwKICBwYWdlczogZnVuY3Rpb24odXJsLCBudW0sIGNiLCBleCkgewogICAgVy5wKys7CiAgICB2YXIgc3MgPSBXLnNzOwogICAgdmFyIGMgPSBXLmM7CiAgICB2YXIgdGkgPSBXLnRpOwogICAgdmFyIG5uID0gVy5ubjsKICAgIHZhciBwID0gVy5wOwogICAgdmFyIG1tID0gVy5tbTsKICAgIHZhciBmID0gVy5mOwogICAgdmFyIGltZyA9ICdodHRwOi8vaW1nJyArIHNzKGMsIDQsIDIpICsgJy44Y29taWMuY29tLycgKyBzcyhjLCA2LCAxKSArICcvJyArIHRpICsgJy8nICsgc3MoYywgMCwgNCkgKyAnLycgKyBubihwKSArICdfJyArIHNzKGMsIG1tKHApICsgMTAsIDMsIGYpICsgJy5qcGcnOwogICAgY2IoaW1nLCBudW0gLSAxKTsKICB9LAogIG51bXBhZ2VzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLnBzICogMTsKICB9LAogIGN1cnBhZ2U6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFcucDsKICB9LAogIG51bWNoYXBzOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBXLmNoczsKICB9LAogIGN1cmNoYXA6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFcuY2g7CiAgfSwKICBuZXh0Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5jaCA8IFcuY2hzID8gVy5yZXBsYWNldXJsKCdjaCcsIFcubmkpIDogZmFsc2U7CiAgfSwKICBwcmV2Y2hhcDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gVy5jaCA+IDEgPyBXLnJlcGxhY2V1cmwoJ2NoJywgVy5waSkgOiBmYWxzZTsKICB9LAogIHdhaXQ6JyNUaGVJbWcnCn1dOwovLyBFTkQgT0YgSU1QTAoKdmFyIGxvZyA9IGZ1bmN0aW9uKG1zZywgdHlwZSkgewogIHR5cGUgPSB0eXBlIHx8ICdsb2cnOwogIGlmICh0eXBlID09PSAnZXhpdCcpIHsKICAgIGxvZygnZXhpdDogJyArIG1zZywgJ2Vycm9yJyk7CiAgICB0aHJvdyAnbWxvYWRlciBlcnJvcic7CiAgfSBlbHNlIHsKICAgIHRyeSB7CiAgICAgIGNvbnNvbGVbdHlwZV0oJyVjJyArIHNjcmlwdE5hbWUgKyAnICcgKyB0eXBlICsgJzonLCAnZm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjpncmVlbjsnLCBtc2cpOwogICAgfSBjYXRjaChlKSB7IH0KICB9Cn07Cgp2YXIgZ2V0RWwgPSBmdW5jdGlvbihxLCBjKSB7CiAgaWYgKCFxKSByZXR1cm47CiAgcmV0dXJuIChjIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKHEpOwp9OwoKdmFyIGdldEVscyA9IGZ1bmN0aW9uKHEsIGMpIHsKICByZXR1cm4gW10uc2xpY2UuY2FsbCgoYyB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChxKSk7Cn07Cgp2YXIgYWpheCA9IGZ1bmN0aW9uKG9iaikgewogIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICB4aHIub3BlbihvYmoubWV0aG9kIHx8ICdnZXQnLCBvYmoudXJsLCBvYmouYXN5bmMgfHwgdHJ1ZSk7CiAgeGhyLm9ubG9hZCA9IG9iai5vbmxvYWQ7CiAgeGhyLm9uZXJyb3IgPSBvYmoub25lcnJvcjsKICB4aHIucmVzcG9uc2VUeXBlID0gb2JqLnJlc3BvbnNlVHlwZSB8fCAndGV4dCc7CiAgaWYob2JqLmJlZm9yZVNlbmQpIG9iai5iZWZvcmVTZW5kKHhocik7CiAgeGhyLnNlbmQob2JqLmRhdGEpOwp9OwoKdmFyIHN0b3JlR2V0ID0gZnVuY3Rpb24oa2V5KSB7CiAgdmFyIHJlczsKICBpZiAodHlwZW9mIEdNX2dldFZhbHVlID09PSAidW5kZWZpbmVkIikgewogICAgcmVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsKICB9IGVsc2UgewogICAgcmVzID0gR01fZ2V0VmFsdWUoa2V5KTsKICB9CiAgdHJ5IHsKICAgIHJldHVybiBKU09OLnBhcnNlKHJlcyk7CiAgfSBjYXRjaChlKSB7CiAgICByZXR1cm4gcmVzOwogIH0KfTsKCnZhciBzdG9yZVNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTsKICBpZiAodHlwZW9mIEdNX3NldFZhbHVlID09PSAidW5kZWZpbmVkIikgewogICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpOwogIH0KICByZXR1cm4gR01fc2V0VmFsdWUoa2V5LCB2YWx1ZSk7Cn07Cgp2YXIgc3RvcmVEZWwgPSBmdW5jdGlvbihrZXkpIHsKICBpZiAodHlwZW9mIEdNX2RlbGV0ZVZhbHVlID09PSAidW5kZWZpbmVkIikgewogICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgfQogIHJldHVybiBHTV9kZWxldGVWYWx1ZShrZXkpOwp9OwoKdmFyIGFyZURlZmluZWQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gW10uZXZlcnkuY2FsbChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykgewogICAgcmV0dXJuIGFyZyAhPT0gdW5kZWZpbmVkICYmIGFyZyAhPT0gbnVsbDsKICB9KTsKfTsKCnZhciB1cGRhdGVPYmogPSBmdW5jdGlvbihvcmlnLCBleHQpIHsKICB2YXIga2V5OwogIGZvciAoa2V5IGluIGV4dCkgewogICAgaWYgKG9yaWcuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBleHQuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICBvcmlnW2tleV0gPSBleHRba2V5XTsKICAgIH0KICB9CiAgcmV0dXJuIG9yaWc7Cn07Cgp2YXIgZXh0cmFjdEluZm8gPSBmdW5jdGlvbihzZWxlY3RvciwgbW9kLCBjb250ZXh0KSB7CiAgc2VsZWN0b3IgPSB0aGlzW3NlbGVjdG9yXSB8fCBzZWxlY3RvcjsKICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gc2VsZWN0b3IuY2FsbCh0aGlzLCBjb250ZXh0KTsKICB9CiAgdmFyIGVsZW0gPSBnZXRFbChzZWxlY3RvciwgY29udGV4dCksCiAgICAgIG9wdGlvbjsKICBtb2QgPSBtb2QgfHwge307CiAgaWYgKGVsZW0pIHsKICAgIHN3aXRjaCAoZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIGNhc2UgJ2ltZyc6CiAgICAgICAgcmV0dXJuIChtb2QuYWx0UHJvcCAmJiBlbGVtLmdldEF0dHJpYnV0ZShtb2QuYWx0UHJvcCkpIHx8IGVsZW0uc3JjIHx8IGVsZW0uZ2V0QXR0cmlidXRlKCdzcmMnKTsKICAgICAgY2FzZSAnYSc6CiAgICAgICAgaWYobW9kLnR5cGUgPT09ICdpbmRleCcpCiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWxlbS50ZXh0Q29udGVudCk7CiAgICAgICAgcmV0dXJuIGVsZW0uaHJlZiB8fCBlbGVtLmdldEF0dHJpYnV0ZSgnaHJlZicpOwogICAgICBjYXNlICd1bCc6CiAgICAgICAgcmV0dXJuIGVsZW0uY2hpbGRyZW4ubGVuZ3RoOwogICAgICBjYXNlICdzZWxlY3QnOgogICAgICAgIHN3aXRjaCAobW9kLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2luZGV4JzoKICAgICAgICAgICAgdmFyIGlkeCA9IGVsZW0ub3B0aW9ucy5zZWxlY3RlZEluZGV4ICsgMSArIChtb2QudmFsIHx8IDApOwogICAgICAgICAgICBpZihtb2QuaW52SWR4KSBpZHggPSBlbGVtLm9wdGlvbnMubGVuZ3RoIC0gaWR4ICsgMTsKICAgICAgICAgICAgcmV0dXJuIGlkeDsKICAgICAgICAgIGNhc2UgJ3ZhbHVlJzoKICAgICAgICAgIGNhc2UgJ3RleHQnOgogICAgICAgICAgICBvcHRpb24gPSBlbGVtLm9wdGlvbnNbZWxlbS5vcHRpb25zLnNlbGVjdGVkSW5kZXggKyAobW9kLnZhbCB8fCAwKV0gfHwge307CiAgICAgICAgICAgIHJldHVybiBtb2QudHlwZSA9PT0gJ3ZhbHVlJyA/IG9wdGlvbi52YWx1ZSA6IG9wdGlvbi50ZXh0Q29udGVudDsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBlbGVtLm9wdGlvbnMubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICBzd2l0Y2ggKG1vZC50eXBlKSB7CiAgICAgICAgICBjYXNlICdpbmRleCc6CiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbGVtLnRleHRDb250ZW50KTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBlbGVtLnRleHRDb250ZW50OwogICAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIG51bGw7Cn07Cgp2YXIgYWRkU3R5bGUgPSBmdW5jdGlvbihpZCwgcmVwbGFjZSkgewogIGlmKCF0aGlzLk1MU3R5bGVzKSB0aGlzLk1MU3R5bGVzID0ge307CiAgaWYoIXRoaXMuTUxTdHlsZXNbaWRdKSB7CiAgICB0aGlzLk1MU3R5bGVzW2lkXSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICB0aGlzLk1MU3R5bGVzW2lkXS5kYXRhc2V0Lm5hbWUgPSAnbWwtc3R5bGUtJyArIGlkOwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLk1MU3R5bGVzW2lkXSk7CiAgfQogIHZhciBzdHlsZSA9IHRoaXMuTUxTdHlsZXNbaWRdOwogIHZhciBjc3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikuam9pbignXG4nKTsKICBpZihyZXBsYWNlKSB7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGNzczsKICB9IGVsc2UgewogICAgc3R5bGUudGV4dENvbnRlbnQgKz0gY3NzOwogIH0KfTsKCnZhciB0b1N0eWxlU3RyID0gZnVuY3Rpb24ob2JqLCBzZWxlY3RvcikgewogIHZhciBzdGFjayA9IFtdLAogICAgICBrZXk7CiAgZm9yIChrZXkgaW4gb2JqKSB7CiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgc3RhY2sucHVzaChrZXkgKyAnOicgKyBvYmpba2V5XSk7CiAgICB9CiAgfQogIGlmIChzZWxlY3RvcikgewogICAgcmV0dXJuIHNlbGVjdG9yICsgJ3snICsgc3RhY2suam9pbignOycpICsgJ30nOwogIH0gZWxzZSB7CiAgICByZXR1cm4gc3RhY2suam9pbignOycpOwogIH0KfTsKCnZhciB0aHJvdHRsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBsaW1pdCkgewogIHZhciB3YWl0ID0gZmFsc2U7CiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgaWYgKCF3YWl0KSB7CiAgICAgIGNhbGxiYWNrKCk7CiAgICAgIHdhaXQgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHdhaXQgPSBmYWxzZTsKICAgICAgfSwgbGltaXQpOwogICAgfQogIH07Cn07Cgp2YXIgcXVlcnkgPSBmdW5jdGlvbigpIHsKICB2YXIgbWFwID0ge307CiAgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihwYWlyKSB7CiAgICBwYWlyID0gcGFpci5zcGxpdCgnPScpOwogICAgbWFwW3BhaXJbMF1dID0gcGFpclsxXTsKICB9KTsKICByZXR1cm4gbWFwOwp9OwoKdmFyIGNyZWF0ZUJ1dHRvbiA9IGZ1bmN0aW9uKHRleHQsIGFjdGlvbiwgc3R5bGVTdHIpIHsKICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDsKICBidXR0b24ub25jbGljayA9IGFjdGlvbjsKICBidXR0b24uc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlU3RyIHx8ICcnKTsKICByZXR1cm4gYnV0dG9uOwp9OwoKdmFyIGdldFZpZXdlciA9IGZ1bmN0aW9uKHByZXZDaGFwdGVyLCBuZXh0Q2hhcHRlcikgewogIHZhciB2aWV3ZXJDc3MgPSB0b1N0eWxlU3RyKHsKICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ2JsYWNrICFpbXBvcnRhbnQnLAogICAgJ2ZvbnQnOiAnMC44MTNlbSBtb25vc3BhY2UgIWltcG9ydGFudCcsCiAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInLAogIH0sICdib2R5JyksCiAgICAgIGltYWdlc0NzcyA9IHRvU3R5bGVTdHIoewogICAgICAgICdtYXJnaW4tdG9wJzogJzEwcHgnLAogICAgICAgICdtYXJnaW4tYm90dG9tJzogJzEwcHgnLAogICAgICAgICd0cmFuc2Zvcm0tb3JpZ2luJzogJ3RvcCBjZW50ZXInCiAgICAgIH0sICcubWwtaW1hZ2VzJyksCiAgICAgIGltYWdlQ3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ21heC13aWR0aCc6ICcxMDAlJywKICAgICAgICAnZGlzcGxheSc6ICdibG9jaycsCiAgICAgICAgJ21hcmdpbic6ICczcHggYXV0bycKICAgICAgfSwgJy5tbC1pbWFnZXMgaW1nJyksCiAgICAgIGNvdW50ZXJDc3MgPSB0b1N0eWxlU3RyKHsKICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjMjIyJywKICAgICAgICAnY29sb3InOiAnd2hpdGUnLAogICAgICAgICdib3JkZXItcmFkaXVzJzogJzEwcHgnLAogICAgICAgICd3aWR0aCc6ICczMHB4JywKICAgICAgICAnbWFyZ2luLWxlZnQnOiAnYXV0bycsCiAgICAgICAgJ21hcmdpbi1yaWdodCc6ICdhdXRvJywKICAgICAgICAnbWFyZ2luLXRvcCc6ICctMTJweCcsCiAgICAgICAgJ3BhZGRpbmctbGVmdCc6ICc1cHgnLAogICAgICAgICdwYWRkaW5nLXJpZ2h0JzogJzVweCcsCiAgICAgICAgJ2JvcmRlcic6ICcxcHggc29saWQgd2hpdGUnLAogICAgICAgICd6LWluZGV4JzogJzEwMCcsCiAgICAgICAgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJwogICAgICB9LCAnLm1sLWNvdW50ZXInKSwKICAgICAgbmF2Q3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ3RleHQtZGVjb3JhdGlvbic6ICdub25lJywKICAgICAgICAnY29sb3InOiAnd2hpdGUnLAogICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJyM0NDQnLAogICAgICAgICdwYWRkaW5nJzogJzNweCAxMHB4JywKICAgICAgICAnYm9yZGVyLXJhZGl1cyc6ICc1cHgnLAogICAgICAgICd0cmFuc2l0aW9uJzogJzI1MG1zJwogICAgICB9LCAnLm1sLWNoYXAtbmF2IGEnKSwKICAgICAgbmF2SG92ZXJDc3MgPSB0b1N0eWxlU3RyKHsKICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjNTU1JwogICAgICB9LCAnLm1sLWNoYXAtbmF2IGE6aG92ZXInKSwKICAgICAgYm94Q3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJywKICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjMjIyJywKICAgICAgICAnY29sb3InOiAnd2hpdGUnLAogICAgICAgICdwYWRkaW5nJzogJzdweCcsCiAgICAgICAgJ2JvcmRlci10b3AtbGVmdC1yYWRpdXMnOiAnNXB4JywKICAgICAgICAnY3Vyc29yJzogJ2RlZmF1bHQnCiAgICAgIH0sICcubWwtYm94JyksCiAgICAgIHN0YXRzQ3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ2JvdHRvbSc6ICcwJywKICAgICAgICAncmlnaHQnOiAnMCcsCiAgICAgICAgJ29wYWNpdHknOiAnMC40JywKICAgICAgICAndHJhbnNpdGlvbic6ICcyNTBtcycKICAgICAgfSwgJy5tbC1zdGF0cycpLAogICAgICBzdGF0c0NvbGxhcHNlQ3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ2NvbG9yJzogJ29yYW5nZScsCiAgICAgICAgJ2N1cnNvcic6ICdwb2ludGVyJwogICAgICB9LCAnLm1sLXN0YXRzLWNvbGxhcHNlJyksCiAgICAgIHN0YXRzSG92ZXJDc3MgPSB0b1N0eWxlU3RyKHsKICAgICAgICAnb3BhY2l0eSc6ICcxJwogICAgICB9LCAnLm1sLXN0YXRzOmhvdmVyJyksCiAgICAgIGZsb2F0aW5nTXNnQ3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ2JvdHRvbSc6ICczMHB4JywKICAgICAgICAncmlnaHQnOiAnMCcsCiAgICAgICAgJ2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnOiAnNXB4JywKICAgICAgICAndGV4dC1hbGlnbic6ICdsZWZ0JywKICAgICAgICAnZm9udCc6ICdpbmhlcml0JywKICAgICAgICAnbWF4LXdpZHRoJzogJzk1JScsCiAgICAgICAgJ3otaW5kZXgnOiAnMTAxJywKICAgICAgICAnd2hpdGUtc3BhY2UnOiAncHJlLXdyYXAnCiAgICAgIH0sICcubWwtZmxvYXRpbmctbXNnJyksCiAgICAgIGZsb2F0aW5nTXNnQW5jaG9yQ3NzID0gdG9TdHlsZVN0cih7CiAgICAgICAgJ2NvbG9yJzogJ29yYW5nZScKICAgICAgfSwgJy5tbC1mbG9hdGluZy1tc2cgYScpLAogICAgICBidXR0b25Dc3MgPSB0b1N0eWxlU3RyKHsKICAgICAgICAnY3Vyc29yJzogJ3BvaW50ZXInCiAgICAgIH0sICcubWwtYnV0dG9uJyksCiAgICAgIGtleVNldHRpbmdDc3MgPSB0b1N0eWxlU3RyKHsKICAgICAgICAnd2lkdGgnOiAnMzVweCcKICAgICAgfSwgJy5tbC1zZXR0aW5nLWtleSBpbnB1dCcpLAogICAgICBhdXRvbG9hZFNldHRpbmdDc3MgPSB0b1N0eWxlU3RyKHsKICAgICAgICAndmVydGljYWwtYWxpZ24nOiAnbWlkZGxlJwogICAgICB9LCAnLm1sLXNldHRpbmctYXV0b2xvYWQnKTsKICAvLyBjbGVhciBhbGwgc3R5bGVzIGFuZCBzY3JpcHRzCiAgdmFyIHRpdGxlID0gZG9jdW1lbnQudGl0bGU7CiAgZG9jdW1lbnQuaGVhZC5pbm5lckhUTUwgPSAnPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xIj48bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMy4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyI+JzsKICBkb2N1bWVudC50aXRsZSA9IHRpdGxlOwogIGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lID0gJyc7CiAgZG9jdW1lbnQuYm9keS5zdHlsZSA9ICcnOwogIC8vIG5hdmlnYXRpb24KICB2YXIgbmF2ID0gJzxkaXYgY2xhc3M9Im1sLWNoYXAtbmF2Ij4nICsgKHByZXZDaGFwdGVyID8gJzxhIGNsYXNzPSJtbC1jaGFwLXByZXYiIGhyZWY9IicgKyBwcmV2Q2hhcHRlciArICciPlByZXYgQ2hhcHRlcjwvYT4gJyA6ICcnKSArCiAgICAgICc8YSBjbGFzcz0ibWwtZXhpdCIgaHJlZj0iJyArIGxvY2F0aW9uLmhyZWYgKyAnIiBkYXRhLWV4aXQ9InRydWUiPkV4aXQ8L2E+ICcgKwogICAgICAobmV4dENoYXB0ZXIgPyAnPGEgY2xhc3M9Im1sLWNoYXAtbmV4dCIgaHJlZj0iJyArIG5leHRDaGFwdGVyICsgJyI+TmV4dCBDaGFwdGVyPC9hPicgOiAnJykgKyAnPC9kaXY+JzsKICAvLyBtZXNzYWdlIGFyZWEKICB2YXIgZmxvYXRpbmdNc2cgPSAnPHByZSBjbGFzcz0ibWwtYm94IG1sLWZsb2F0aW5nLW1zZyI+PC9wcmU+JzsKICAvLyBzdGF0cwogIHZhciBzdGF0cyA9ICc8ZGl2IGNsYXNzPSJtbC1ib3ggbWwtc3RhdHMiPjxzcGFuIHRpdGxlPSJoaWRlIHN0YXRzIiBjbGFzcz0ibWwtc3RhdHMtY29sbGFwc2UiPiZndDsmZ3Q7PC9zcGFuPjxzcGFuIGNsYXNzPSJtbC1zdGF0cy1jb250ZW50Ij48c3BhbiBjbGFzcz0ibWwtc3RhdHMtcGFnZXMiPjwvc3Bhbj4gJyArCiAgICAgICc8aSBjbGFzcz0iZmEgZmEtaW5mbyBtbC1idXR0b24gbWwtaW5mby1idXR0b24iIHRpdGxlPSJTZWUgdXNlcnNjcmlwdCBpbmZvcm1hdGlvbiBhbmQgaGVscCI+PC9pPiAnICsKICAgICAgJzxpIGNsYXNzPSJmYSBmYS1iYXItY2hhcnQgbWwtYnV0dG9uIG1sLW1vcmUtc3RhdHMtYnV0dG9uIiB0aXRsZT0iU2VlIHBhZ2Ugc3RhdHMiPjwvaT4gJyArCiAgICAgICc8aSBjbGFzcz0iZmEgZmEtY29nIG1sLWJ1dHRvbiBtbC1zZXR0aW5ncy1idXR0b24iIHRpdGxlPSJBZGp1c3QgdXNlcnNjcmlwdCBzZXR0aW5ncyI+PC9pPiAnICsKICAgICAgJzxpIGNsYXNzPSJmYSBmYS1yZWZyZXNoIG1sLWJ1dHRvbiBtbC1tYW51YWwtcmVsb2FkIiB0aXRsZT0iTWFudWFsbHkgcmVmcmVzaCBuZXh0IGNsaWNrZWQgaW1hZ2UuIj48L2k+PC9zcGFuPjwvZGl2Pic7CiAgLy8gY29tYmluZSB1aSBlbGVtZW50cwogIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gbmF2ICsgJzxkaXYgY2xhc3M9Im1sLWltYWdlcyI+PC9kaXY+JyArIG5hdiArIGZsb2F0aW5nTXNnICsgc3RhdHM7CiAgLy8gYWRkIG1haW4gc3R5bGVzCiAgYWRkU3R5bGUoJ21haW4nLCB0cnVlLCB2aWV3ZXJDc3MsIGltYWdlc0NzcywgaW1hZ2VDc3MsIGNvdW50ZXJDc3MsIG5hdkNzcywgbmF2SG92ZXJDc3MsIHN0YXRzQ3NzLCBzdGF0c0NvbGxhcHNlQ3NzLCBzdGF0c0hvdmVyQ3NzLCBib3hDc3MsIGZsb2F0aW5nTXNnQ3NzLCBidXR0b25Dc3MsIGtleVNldHRpbmdDc3MsIGF1dG9sb2FkU2V0dGluZ0NzcywgZmxvYXRpbmdNc2dBbmNob3JDc3MpOwogIC8vIGFkZCB1c2VyIHN0eWxlcwogIHZhciB1c2VyQ3NzID0gc3RvcmVHZXQoJ21sLXNldHRpbmctY3NzLXByb2ZpbGVzJyk7CiAgdmFyIGN1clByb2YgPSBzdG9yZUdldCgnbWwtc2V0dGluZy1jc3MtY3VycmVudCcpIHx8ICdEZWZhdWx0JzsKICBpZih1c2VyQ3NzICYmIHVzZXJDc3MubGVuZ3RoID4gMCkgdXNlckNzcyA9IHVzZXJDc3MuZmlsdGVyKGZ1bmN0aW9uKHApIHsgcmV0dXJuIHAubmFtZSA9PT0gY3VyUHJvZjsgfSk7CiAgdXNlckNzcyA9IHVzZXJDc3MgJiYgdXNlckNzcy5sZW5ndGggPiAwID8gdXNlckNzc1swXS5jc3MgOiAoc3RvcmVHZXQoJ21sLXNldHRpbmctY3NzJykgfHwgJycpOwogIGFkZFN0eWxlKCd1c2VyJywgdHJ1ZSwgdXNlckNzcyk7CiAgLy8gc2V0IHVwIHJldHVybiBVSSBvYmplY3QKICB2YXIgVUkgPSB7CiAgICBpbWFnZXM6IGdldEVsKCcubWwtaW1hZ2VzJyksCiAgICBzdGF0c0NvbnRlbnQ6IGdldEVsKCcubWwtc3RhdHMtY29udGVudCcpLAogICAgc3RhdHNQYWdlczogZ2V0RWwoJy5tbC1zdGF0cy1wYWdlcycpLAogICAgc3RhdHNDb2xsYXBzZTogZ2V0RWwoJy5tbC1zdGF0cy1jb2xsYXBzZScpLAogICAgYnRuTWFudWFsUmVsb2FkOiBnZXRFbCgnLm1sLW1hbnVhbC1yZWxvYWQnKSwKICAgIGJ0bkluZm86IGdldEVsKCcubWwtaW5mby1idXR0b24nKSwKICAgIGJ0bk1vcmVTdGF0czogZ2V0RWwoJy5tbC1tb3JlLXN0YXRzLWJ1dHRvbicpLAogICAgZmxvYXRpbmdNc2c6IGdldEVsKCcubWwtZmxvYXRpbmctbXNnJyksCiAgICBidG5OZXh0Q2hhcDogZ2V0RWwoJy5tbC1jaGFwLW5leHQnKSwKICAgIGJ0blByZXZDaGFwOiBnZXRFbCgnLm1sLWNoYXAtcHJldicpLAogICAgYnRuRXhpdDogZ2V0RWwoJy5tbC1leGl0JyksCiAgICBidG5TZXR0aW5nczogZ2V0RWwoJy5tbC1zZXR0aW5ncy1idXR0b24nKSwKICAgIGlzVHlwaW5nOiBmYWxzZSwKICAgIGlnbm9yZTogZmFsc2UsCiAgICBtb3JlU3RhdHM6IGZhbHNlLAogICAgY3VycmVudFByb2ZpbGU6IHN0b3JlR2V0KCdtbC1zZXR0aW5nLWNzcy1jdXJyZW50JykgfHwgJycKICB9OwogIC8vIG1lc3NhZ2UgZnVuYwogIHZhciBtZXNzYWdlSWQgPSBudWxsOwogIHZhciBzaG93RmxvYXRpbmdNc2cgPSBmdW5jdGlvbihtc2csIHRpbWVvdXQsIGh0bWwpIHsKICAgIGNsZWFyVGltZW91dChtZXNzYWdlSWQpOwogICAgbG9nKG1zZyk7CiAgICBpZihodG1sKSB7CiAgICAgIFVJLmZsb2F0aW5nTXNnLmlubmVySFRNTCA9IG1zZzsKICAgIH0gZWxzZSB7CiAgICAgIFVJLmZsb2F0aW5nTXNnLnRleHRDb250ZW50ID0gbXNnOwogICAgfQogICAgaWYoIW1zZykgVUkubW9yZVN0YXRzID0gZmFsc2U7CiAgICBVSS5mbG9hdGluZ01zZy5zdHlsZS5kaXNwbGF5ID0gbXNnID8gJycgOiAnbm9uZSc7CiAgICBpZih0aW1lb3V0KSB7CiAgICAgIG1lc3NhZ2VJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgc2hvd0Zsb2F0aW5nTXNnKCcnKTsKICAgICAgfSwgdGltZW91dCk7CiAgICB9CiAgfTsKICB2YXIgaXNNZXNzYWdlRmxvYXRpbmcgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiAhIVVJLmZsb2F0aW5nTXNnLmlubmVySFRNTDsKICB9OwogIC8vIGNvbmZpZ3VyZSBpbml0aWFsIHN0YXRlCiAgVUkuZmxvYXRpbmdNc2cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAvLyBzZXQgdXAgbGlzdGVuZXJzCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldnQpIHsKICAgIGlmIChldnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnQScgJiYgZXZ0LmJ1dHRvbiAhPT0gMikgewogICAgICB2YXIgc2hvdWxkUmVsb2FkID0gZXZ0LnRhcmdldC5ocmVmLmluZGV4T2YoJyMnKSAhPT0gLTEgJiYgZXZ0LnRhcmdldC5ocmVmLnNwbGl0KCcjJylbMF0gPT09IGRvY3VtZW50LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXSAmJiBldnQuYnV0dG9uID09PSAwOyAgLy8gZml4IGZvciBiYXRvdG8gaHR0cHMgd2VpcmRuZXNzCiAgICAgIGlmKGV2dC50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ21sLWNoYXAnKSAhPT0gLTEpIHsKICAgICAgICBsb2coJ25leHQgY2hhcHRlciB3aWxsIGF1dG9sb2FkJyk7CiAgICAgICAgc3RvcmVTZXQoJ2F1dG9sb2FkJywgJ3llcycpOwogICAgICAgIGlmKHNob3VsZFJlbG9hZCkgewogICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gZXZ0LnRhcmdldC5ocmVmOwogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKHRydWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmKGV2dC50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ21sLWV4aXQnKSAhPT0gLTEpIHsKICAgICAgICBsb2coJ2V4aXRpbmcgY2hhcHRlciwgc3RvcCBhdXRvbG9hZCcpOwogICAgICAgIHN0b3JlU2V0KCdhdXRvbG9hZCcsICdubycpOwogICAgICAgIGlmKHNob3VsZFJlbG9hZCkgewogICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSk7CiAgVUkuYnRuTW9yZVN0YXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7CiAgICBpZihpc01lc3NhZ2VGbG9hdGluZygpICYmIFVJLmxhc3RGbG9hdCA9PT0gZXZ0LnRhcmdldCkgewogICAgICBzaG93RmxvYXRpbmdNc2coJycpOwogICAgfSBlbHNlIHsKICAgICAgVUkubGFzdEZsb2F0ID0gZXZ0LnRhcmdldDsKICAgICAgVUkubW9yZVN0YXRzID0gdHJ1ZTsKICAgICAgc2hvd0Zsb2F0aW5nTXNnKFsKICAgICAgICAnPHN0cm9uZz5TdGF0czo8L3N0cm9uZz4nLAogICAgICAgIHBhZ2VTdGF0cy5sb2FkTGltaXQgKyAnIHBhZ2VzIHBhcnNlZCcsCiAgICAgICAgcGFnZVN0YXRzLm51bUxvYWRlZCArICcgaW1hZ2VzIGxvYWRlZCcsCiAgICAgICAgKHBhZ2VTdGF0cy5sb2FkTGltaXQgLSBwYWdlU3RhdHMubnVtTG9hZGVkKSArICcgaW1hZ2VzIGxvYWRpbmcnLAogICAgICAgIChwYWdlU3RhdHMubnVtUGFnZXMgfHwgJ1Vua25vd24gbnVtYmVyIG9mJykgKyAnIHBhZ2VzIGluIGNoYXB0ZXInLAogICAgICAgIChwYWdlU3RhdHMuY3VyQ2hhcCAhPT0gbnVsbCAmJiBwYWdlU3RhdHMubnVtQ2hhcHMgIT09IG51bGwgPyAoKHBhZ2VTdGF0cy5jdXJDaGFwIC0gMSkgKyAnLycgKyBwYWdlU3RhdHMubnVtQ2hhcHMgKyAnIGNoYXB0ZXJzIHJlYWQgJyArICgoKHBhZ2VTdGF0cy5jdXJDaGFwIC0gMSkgLyBwYWdlU3RhdHMubnVtQ2hhcHMgKiAxMDApLnRvRml4ZWQoMikgKyAnJScpICsgJyBvZiBzZXJpZXMnKSA6ICcnKSwKICAgICAgXS5qb2luKCc8YnI+JyksIG51bGwsIHRydWUpOwogICAgfQogIH0pOwogIFVJLmJ0bk1hbnVhbFJlbG9hZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkgewogICAgdmFyIGltZ0NsaWNrID0gZnVuY3Rpb24oZSkgewogICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7CiAgICAgIFVJLmltYWdlcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGltZ0NsaWNrLCBmYWxzZSk7CiAgICAgIFVJLmltYWdlcy5zdHlsZS5jdXJzb3IgPSAnJzsKICAgICAgaWYodGFyZ2V0Lm5vZGVOYW1lID09PSAnSU1HJyAmJiB0YXJnZXQucGFyZW50Tm9kZS5jbGFzc05hbWUgPT09ICdtbC1pbWFnZXMnKSB7CiAgICAgICAgc2hvd0Zsb2F0aW5nTXNnKCcnKTsKICAgICAgICBpZighdGFyZ2V0LnRpdGxlKSB7CiAgICAgICAgICBzaG93RmxvYXRpbmdNc2coJ1JlbG9hZGluZyAiJyArIHRhcmdldC5zcmMgKyAnIicsIDMwMDApOwogICAgICAgICAgaWYodGFyZ2V0LmNvbXBsZXRlKSB0YXJnZXQub25sb2FkID0gbnVsbDsKICAgICAgICAgIHRhcmdldC5zcmMgPSB0YXJnZXQuc3JjICsgKHRhcmdldC5zcmMuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JykgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2hvd0Zsb2F0aW5nTXNnKCdDYW5jZWxsZWQgbWFudWFsIHJlbG9hZC4uLicsIDMwMDApOwogICAgICB9CiAgICB9OwogICAgc2hvd0Zsb2F0aW5nTXNnKCdMZWZ0IGNsaWNrIHRoZSBpbWFnZSB5b3Ugd291bGQgbGlrZSB0byByZWxvYWQuXG5DbGljayBvbiB0aGUgcGFnZSBtYXJnaW4gdG8gY2FuY2VsLicpOwogICAgVUkuaW1hZ2VzLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsKICAgIFVJLmltYWdlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGltZ0NsaWNrLCBmYWxzZSk7CiAgfSk7CiAgVUkuc3RhdHNDb2xsYXBzZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkgewogICAgdmFyIHRlc3QgPSBVSS5zdGF0c0NvbGxhcHNlLnRleHRDb250ZW50ID09PSAnPj4nOwogICAgc3RvcmVTZXQoJ21sLXN0YXRzLWNvbGxhcHNlZCcsIHRlc3QpOwogICAgVUkuc3RhdHNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSB0ZXN0ID8gJ25vbmUnIDogJyc7CiAgICBVSS5zdGF0c0NvbGxhcHNlLnRleHRDb250ZW50ID0gdGVzdCA/ICc8PCcgOiAnPj4nOwogIH0pOwogIC8vIHJlc3RvcmUgY29sbGFwc2Ugc3RhdGUKICBpZihzdG9yZUdldCgnbWwtc3RhdHMtY29sbGFwc2VkJykpIFVJLnN0YXRzQ29sbGFwc2UuY2xpY2soKTsKICBVSS5mbG9hdGluZ01zZy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKGV2dCkgewogICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7CiAgICBpZih0YXJnZXQuZGF0YXNldC5pZ25vcmUpIFVJLmlnbm9yZSA9IHRydWU7CiAgICBpZigodGFyZ2V0Lm5vZGVOYW1lID09PSAnSU5QVVQnICYmIHRhcmdldC50eXBlID09PSAndGV4dCcpIHx8IHRhcmdldC5ub2RlTmFtZSA9PT0gJ1RFWFRBUkVBJykgVUkuaXNUeXBpbmcgPSB0cnVlOwogIH0sIHRydWUpOwogIFVJLmZsb2F0aW5nTXNnLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbihldnQpIHsKICAgIHZhciB0YXJnZXQgPSBldnQudGFyZ2V0OwogICAgaWYodGFyZ2V0LmRhdGFzZXQuaWdub3JlKSBVSS5pZ25vcmUgPSBmYWxzZTsKICAgIGlmKCh0YXJnZXQubm9kZU5hbWUgPT09ICdJTlBVVCcgJiYgdGFyZ2V0LnR5cGUgPT09ICd0ZXh0JykgfHwgdGFyZ2V0Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnKSBVSS5pc1R5cGluZyA9IGZhbHNlOwogIH0sIHRydWUpOwogIFVJLmJ0bkluZm8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldnQpIHsKICAgIGlmKGlzTWVzc2FnZUZsb2F0aW5nKCkgJiYgVUkubGFzdEZsb2F0ID09PSBldnQudGFyZ2V0KSB7CiAgICAgIHNob3dGbG9hdGluZ01zZygnJyk7CiAgICB9IGVsc2UgewogICAgICBVSS5sYXN0RmxvYXQgPSBldnQudGFyZ2V0OwogICAgICBzaG93RmxvYXRpbmdNc2coWwogICAgICAgICc8c3Ryb25nPkluZm9ybWF0aW9uOjwvc3Ryb25nPicsCiAgICAgICAgJzxzdHJvbmc+SU1QT1JUQU5UOjwvc3Ryb25nPiBUaGUgc2NyaXB0IGhhcyBiZWVuIHVwZGF0ZWQgdG8gZXhjbHVkZSBOU0ZXIHNpdGVzJywKICAgICAgICAnaW4gb3JkZXIgdG8gZ2FpbiBhY2Nlc3MgdG8gdGhhdCBmdW5jdGlvbmFsaXR5IHlvdVwnbGwgaGF2ZSB0byBpbnN0YWxsIHRoZSBmb2xsb3dpbmcgYWRkb24gc2NyaXB0LicsCiAgICAgICAgJzxhIGhyZWY9Imh0dHBzOi8vc2xlYXp5Zm9yay5vcmcvZW4vc2NyaXB0cy8xMjY1Ny1tYW5nYS1sb2FkZXItbnNmdyIgdGFyZ2V0PSJfYmxhbmsiPmh0dHBzOi8vc2xlYXp5Zm9yay5vcmcvZW4vc2NyaXB0cy8xMjY1Ny1tYW5nYS1sb2FkZXItbnNmdzwvYT4nLAogICAgICAgICcnLAogICAgICAgICdOZXcgZmVhdHVyZSEgWW91IGNhbiBub3cgZGVmaW5lIGN1c3RvbSBDU1MgaW4gdGhlIG5ldyBzZXR0aW5ncyBwYW5lbCAoYWNjZXNzaWJsZSB0aHJvdWdoIHRoZSBnZWFyIGljb24gYXQgdGhlIGJvdHRvbSBsZWZ0KS4nLAogICAgICAgICdUaGUgQ1NTIHdpbGwgYmUgc2F2ZWQgYW5kIHJlYXBwbGllZCBlYWNoIHRpbWUgdGhlIHNjcmlwdCBsb2Fkcy4gWW91IGNhbiBjaGFuZ2UgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHBhZ2UsJywKICAgICAgICAndGhlIHdpZHRoIG9mIHRoZSBpbWFnZXMgYW5kIHByZXR0eSBtdWNoIGFueXRoaW5nIGVsc2UuJywKICAgICAgICAnJywKICAgICAgICAnQ1NTIGZlYXR1cmUgaGFzIG5vdyBiZWVuIGVuaGFuY2VkIHRvIHN1cHBvcnQgbXVsdGlwbGUgcHJvZmlsZXMgeW91IGNhbiBzd2l0Y2ggYmV0d2Vlbi4nLAogICAgICAgICcnLAogICAgICAgICc8c3Ryb25nPkRlZmF1bHQgS2V5YmluZGluZ3M6PC9zdHJvbmc+JywKICAgICAgICAnWiAtIHByZXZpb3VzIGNoYXB0ZXInLAogICAgICAgICdYIC0gZXhpdCcsCiAgICAgICAgJ0MgLSBuZXh0IGNoYXB0ZXInLAogICAgICAgICdXIC0gc2Nyb2xsIHVwJywKICAgICAgICAnUyAtIHNjcm9sbCBkb3duJywKICAgICAgICAnKyAtIHpvb20gaW4nLAogICAgICAgICctIC0gem9vbSBvdXQnLAogICAgICAgICcwIC0gcmVzZXQgem9vbScsCiAgICAgICAgJ0NsaWNrIHRoZSBpbmZvIGJ1dHRvbiBhZ2FpbiB0byBjbG9zZSB0aGlzIG1lc3NhZ2UuJwogICAgICBdLmpvaW4oJzxicj4nKSwgbnVsbCwgdHJ1ZSk7CiAgICB9CiAgfSk7CiAgVUkuYnRuU2V0dGluZ3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldnQpIHsKICAgIGlmKGlzTWVzc2FnZUZsb2F0aW5nKCkgJiYgVUkubGFzdEZsb2F0ID09PSBldnQudGFyZ2V0KSB7CiAgICAgIHNob3dGbG9hdGluZ01zZygnJyk7CiAgICB9IGVsc2UgewogICAgICBVSS5sYXN0RmxvYXQgPSBldnQudGFyZ2V0OwogICAgICAvLyBzdGFydCBncmlkIGFuZCBmaXJzdCBjb2x1bW4KICAgICAgdmFyIHNldHRpbmdzID0gJzx0YWJsZT48dHI+PHRkPic7CiAgICAgIC8vIEN1c3RvbSBDU1MKICAgICAgdmFyIGNzc1Byb2ZpbGVzID0gc3RvcmVHZXQoJ21sLXNldHRpbmctY3NzLXByb2ZpbGVzJyk7CiAgICAgIGlmKCFjc3NQcm9maWxlcyB8fCBjc3NQcm9maWxlcy5sZW5ndGggPT09IDApIHsKICAgICAgICBjc3NQcm9maWxlcyA9IFt7bmFtZTogJ0RlZmF1bHQnLCBjc3M6IHN0b3JlR2V0KCdtbC1zZXR0aW5nLWNzcycpIHx8ICcnfV07CiAgICAgICAgc3RvcmVTZXQoJ21sLXNldHRpbmctY3NzLXByb2ZpbGVzJywgY3NzUHJvZmlsZXMpOwogICAgICB9CiAgICAgIGNzc1Byb2ZpbGVzLnB1c2goeyBuYW1lOiAnTmV3IFByb2ZpbGUuLi4nLCBhZGROZXc6IHRydWUgfSk7CiAgICAgIHZhciBwcm9mID0gY3NzUHJvZmlsZXMuZmlsdGVyKGZ1bmN0aW9uKHApIHsgcmV0dXJuIHAubmFtZSA9PT0gVUkuY3VycmVudFByb2ZpbGU7IH0pWzBdIHx8IGNzc1Byb2ZpbGVzWzBdOwogICAgICBzZXR0aW5ncyArPSAnQ1NTIChjdXN0b20gY3NzIGZvciBNYW5nYSBMb2FkZXIpOjxicj4nICsKICAgICAgICAnPHNlbGVjdCBjbGFzcz0ibWwtc2V0dGluZy1jc3MtcHJvZmlsZSI+JyArCiAgICAgICAgY3NzUHJvZmlsZXMubWFwKGZ1bmN0aW9uKHByb2ZpbGUpIHsgcmV0dXJuICc8b3B0aW9uICcgKyAocHJvZmlsZS5uYW1lID09PSBwcm9mLm5hbWUgPyAnc2VsZWN0ZWQnIDogJycpICsgJz4nICsgcHJvZmlsZS5uYW1lICsgJzwvb3B0aW9uPic7IH0pLmpvaW4oJycpICsKICAgICAgICAnPC9zZWxlY3Q+PGJ1dHRvbiBjbGFzcz0ibWwtc2V0dGluZy1kZWxldGUtcHJvZmlsZSI+eDwvYnV0dG9uPjxicj4nICsKICAgICAgICAnPHRleHRhcmVhIHN0eWxlPSJ3aWR0aDogMzAwcHg7IGhlaWdodDogMzAwcHg7IiB0eXBlPSJ0ZXh0IiBjbGFzcz0ibWwtc2V0dGluZy1jc3MiPicgKyBwcm9mLmNzcyArICc8L3RleHRhcmVhPjxicj48YnI+JzsKICAgICAgLy8gc3RhcnQgbmV3IGNvbHVtbgogICAgICBzZXR0aW5ncyArPSAnPC90ZD48dGQ+JzsKICAgICAgLy8gS2V5YmluZGluZ3MKICAgICAgdmFyIGtleVRhYmxlSHRtbCA9IE9iamVjdC5rZXlzKFVJLmtleXMpLm1hcChmdW5jdGlvbihhY3Rpb24pIHsKICAgICAgICByZXR1cm4gJzx0cj48dGQ+JyArIGFjdGlvbiArICc8L3RkPjx0ZD48aW5wdXQgZGF0YS1pZ25vcmU9InRydWUiIGRhdGEta2V5PSInICsgYWN0aW9uICsgJyIgdHlwZT0idGV4dCIgdmFsdWU9IicgKyBVSS5rZXlzW2FjdGlvbl0gKyAnIj48L3RkPjwvdHI+JzsKICAgICAgfSkuam9pbignJyk7CiAgICAgIHNldHRpbmdzICs9ICdLZXliaW5kaW5nczo8YnI+PHRhYmxlIGNsYXNzPSJtbC1zZXR0aW5nLWtleSI+JyArIGtleVRhYmxlSHRtbCArICc8L3RhYmxlPjxicj4nOwogICAgICAvLyBBdXRvbG9hZAogICAgICBzZXR0aW5ncyArPSAnQXV0by1sb2FkOiA8aW5wdXQgY2xhc3M9Im1sLXNldHRpbmctYXV0b2xvYWQiIHR5cGU9ImNoZWNrYm94IiAnICsgKHN0b3JlR2V0KCdtQXV0b2xvYWQnKSAmJiAnY2hlY2tlZCcgfHwgJycpICsgJz48YnI+PGJyPic7CiAgICAgIC8vIExvYWQgYWxsIG9yIGp1c3QgTiBwYWdlcwogICAgICBzZXR0aW5ncyArPSAiIyBvZiBwYWdlcyB0byBsb2FkOjxicj4iICsKICAgICAgICAnVHlwZSAiYWxsIiB0byBsb2FkIGFsbDxicj5kZWZhdWx0IGlzIDEwPGJyPicgKwogICAgICAgICc8aW5wdXQgY2xhc3M9Im1sLXNldHRpbmctbG9hZG51bSIgc2l6ZT0iMyIgdHlwZT0idGV4dCIgdmFsdWU9IicgKyAoc3RvcmVHZXQoJ21Mb2FkTnVtJykgfHwgMTApICsgJyIgLz48YnI+PGJyPic7CiAgICAgIC8vIGNsb3NlIGdyaWQgYW5kIGNvbHVtbgogICAgICBzZXR0aW5ncyArPSAnPC90ZD48L3RyPjwvdGFibGU+JzsKICAgICAgLy8gU2F2ZSBidXR0b24KICAgICAgc2V0dGluZ3MgKz0gJzxidXR0b24gY2xhc3M9Im1sLXNldHRpbmctc2F2ZSI+U2F2ZTwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJtbC1zZXR0aW5nLWNsb3NlIj5DbG9zZTwvYnV0dG9uPiA8c3BhbiBjbGFzcz0ibWwtc2V0dGluZy1zYXZlLWZsYXNoIj48L3NwYW4+JzsKICAgICAgc2hvd0Zsb2F0aW5nTXNnKHNldHRpbmdzLCBudWxsLCB0cnVlKTsKICAgICAgLy8gaGFuZGxlIGtleWJpbmRpbmcgZGV0ZWN0aW9uCiAgICAgIGdldEVsKCcubWwtc2V0dGluZy1rZXknKS5vbmtleWRvd24gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgIGlmKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnSU5QVVQnKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgdGFyZ2V0LnZhbHVlID0gZS53aGljaCB8fCBlLmNoYXJDb2RlIHx8IGUua2V5Q29kZTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8vIGRlbGV0ZSBjc3MgcHJvZmlsZQogICAgICBnZXRFbCgnLm1sLXNldHRpbmctZGVsZXRlLXByb2ZpbGUnLCBVSS5mbG9hdGluZ01zZykub25jbGljayA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZihbJ0RlZmF1bHQnLCAnTmV3IFByb2ZpbGUuLi4nXS5pbmRleE9mKHByb2YubmFtZSkgPT09IC0xKSB7CiAgICAgICAgICBpZihjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHByb2ZpbGUgIicgKyBwcm9mLm5hbWUgKyAnIj8nKSkgewogICAgICAgICAgICB2YXIgaW5kZXggPSBjc3NQcm9maWxlcy5pbmRleE9mKHByb2YpOwogICAgICAgICAgICBjc3NQcm9maWxlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICB2YXIgc2VsID0gZ2V0RWwoJy5tbC1zZXR0aW5nLWNzcy1wcm9maWxlJyk7CiAgICAgICAgICAgIHNlbC5yZW1vdmUoaW5kZXgpOwogICAgICAgICAgICBzZWwuc2VsZWN0ZWRJbmRleCA9IDA7CiAgICAgICAgICAgIHNlbC5vbmNoYW5nZSh7dGFyZ2V0OiBzZWx9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoJ0Nhbm5vdCBkZWxldGUgcHJvZmlsZTogIicgKyBwcm9mLm5hbWUgKyAnIicpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLy8gY2hhbmdlIHNlbGVjdGVkIGNzcyBwcm9maWxlCiAgICAgIGdldEVsKCcubWwtc2V0dGluZy1jc3MtcHJvZmlsZScsIFVJLmZsb2F0aW5nTXNnKS5vbmNoYW5nZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgY3NzQm94ID0gZ2V0RWwoJy5tbC1zZXR0aW5nLWNzcycpOwogICAgICAgIHByb2YuY3NzID0gY3NzQm94LnZhbHVlOwogICAgICAgIHByb2YgPSBjc3NQcm9maWxlc1tlLnRhcmdldC5zZWxlY3RlZEluZGV4XTsKICAgICAgICBpZihwcm9mLmFkZE5ldykgewogICAgICAgICAgLy8gZW50ZXIgbmV3IG5hbWUKICAgICAgICAgIHZhciBuZXdOYW1lID0gJyc7CiAgICAgICAgICB3aGlsZSghbmV3TmFtZSB8fCBjc3NQcm9maWxlcy5maWx0ZXIoZnVuY3Rpb24ocCkgeyByZXR1cm4gcC5uYW1lID09PSBuZXdOYW1lOyB9KS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIG5ld05hbWUgPSBwcm9tcHQoJ0VudGVyIHRoZSBuYW1lIGZvciB0aGUgbmV3IHByb2ZpbGUgKG11c3QgYmUgdW5pcXVlKScpOwogICAgICAgICAgICBpZighbmV3TmFtZSkgewogICAgICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdGVkSW5kZXggPSAwOwogICAgICAgICAgICAgIGUudGFyZ2V0Lm9uY2hhbmdlKHt0YXJnZXQ6IGUudGFyZ2V0fSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBhZGQgbmV3IHByb2ZpbGUgdG8gYXJyYXkKICAgICAgICAgIHZhciBsYXN0ID0gY3NzUHJvZmlsZXMucG9wKCk7CiAgICAgICAgICBjc3NQcm9maWxlcy5wdXNoKHtuYW1lOiBuZXdOYW1lLCBjc3M6ICcnfSwgbGFzdCk7CiAgICAgICAgICBwcm9mID0gY3NzUHJvZmlsZXNbY3NzUHJvZmlsZXMubGVuZ3RoIC0gMl07CiAgICAgICAgICAvLyBhZGQgbmV3IHByb2ZpbGUgdG8gc2VsZWN0IGJveAogICAgICAgICAgdmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgb3B0aW9uLnRleHQgPSBuZXdOYW1lOwogICAgICAgICAgZS50YXJnZXQuYWRkKG9wdGlvbiwgZS50YXJnZXQub3B0aW9ucy5sZW5ndGggLSAxKTsKICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdGVkSW5kZXggPSBlLnRhcmdldC5vcHRpb25zLmxlbmd0aCAtIDI7CiAgICAgICAgfQogICAgICAgIGNzc0JveC52YWx1ZSA9IHByb2YuY3NzOwogICAgICAgIFVJLmN1cnJlbnRQcm9maWxlID0gcHJvZi5uYW1lOwogICAgICAgIGFkZFN0eWxlKCd1c2VyJywgdHJ1ZSwgcHJvZi5jc3MpOwogICAgICB9OwogICAgICAvLyBoYW5kbGUgc2F2ZSBidXR0b24KICAgICAgZ2V0RWwoJy5tbC1zZXR0aW5nLXNhdmUnLCBVSS5mbG9hdGluZ01zZykub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIHBlcnNpc3QgY3NzCiAgICAgICAgdmFyIGNzcyA9IGdldEVsKCcubWwtc2V0dGluZy1jc3MnLCBVSS5mbG9hdGluZ01zZykudmFsdWUudHJpbSgpOwogICAgICAgIHByb2YuY3NzID0gY3NzOwogICAgICAgIGFkZFN0eWxlKCd1c2VyJywgdHJ1ZSwgY3NzKTsKICAgICAgICB2YXIgbGFzdCA9IGNzc1Byb2ZpbGVzLnBvcCgpOwogICAgICAgIHN0b3JlU2V0KCdtbC1zZXR0aW5nLWNzcy1wcm9maWxlcycsIGNzc1Byb2ZpbGVzKTsKICAgICAgICBjc3NQcm9maWxlcy5wdXNoKGxhc3QpOwogICAgICAgIHN0b3JlU2V0KCdtbC1zZXR0aW5nLWNzcy1jdXJyZW50JywgVUkuY3VycmVudFByb2ZpbGUpOwogICAgICAgIC8vIGtleWJpbmRpbmdzCiAgICAgICAgZ2V0RWxzKCcubWwtc2V0dGluZy1rZXkgaW5wdXQnKS5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgICBVSS5rZXlzW2lucHV0LmRhdGFzZXQua2V5XSA9IHBhcnNlSW50KGlucHV0LnZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICBzdG9yZVNldCgnbWwtc2V0dGluZy1rZXknLCBVSS5rZXlzKTsKICAgICAgICAvLyBhdXRvbG9hZAogICAgICAgIHN0b3JlU2V0KCdtQXV0b2xvYWQnLCBnZXRFbCgnLm1sLXNldHRpbmctYXV0b2xvYWQnKS5jaGVja2VkKTsKICAgICAgICAvLyBsb2FkbnVtCiAgICAgICAgdmFyIGxvYWRudW0gPSBnZXRFbCgnLm1sLXNldHRpbmctbG9hZG51bScpLnZhbHVlOwogICAgICAgIG1Mb2FkTnVtID0gZ2V0RWwoJy5tbC1zZXR0aW5nLWxvYWRudW0nKS52YWx1ZSA9IGxvYWRudW0udG9Mb3dlckNhc2UoKSA9PT0gJ2FsbCcgPyAnYWxsJyA6IChwYXJzZUludChsb2FkbnVtKSB8fCAxMCk7CiAgICAgICAgc3RvcmVTZXQoJ21Mb2FkTnVtJywgbUxvYWROdW0pOwogICAgICAgIC8vIGZsYXNoIG5vdGlmeQogICAgICAgIHZhciBmbGFzaCA9IGdldEVsKCcubWwtc2V0dGluZy1zYXZlLWZsYXNoJyk7CiAgICAgICAgZmxhc2gudGV4dENvbnRlbnQgPSAnU2F2ZWQhJzsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmbGFzaC50ZXh0Q29udGVudCA9ICcnOyB9LCAxMDAwKTsKICAgICAgfTsKICAgICAgLy8gaGFuZGxlIGNsb3NlIGJ1dHRvbgogICAgICBnZXRFbCgnLm1sLXNldHRpbmctY2xvc2UnLCBVSS5mbG9hdGluZ01zZykub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIHNob3dGbG9hdGluZ01zZygnJyk7CiAgICAgIH07CiAgICB9CiAgfSk7CiAgLy8gem9vbQogIHZhciBsYXN0Wm9vbSwgb3JpZ2luYWxab29tLG5ld1pvb21Qb3N0aW9uOwogIHZhciBjaGFuZ2Vab29tID0gZnVuY3Rpb24oYWN0aW9uLCBlbGVtKSB7CiAgICB2YXIgcmF0aW9ab29tID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApLyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KTsKICAgIHZhciBjdXJJbWFnZSA9IGdldEN1cnJlbnRJbWFnZSgpOwogICAgaWYoIWxhc3Rab29tKSB7CiAgICAgIGxhc3Rab29tID0gb3JpZ2luYWxab29tID0gTWF0aC5yb3VuZChjdXJJbWFnZS5jbGllbnRXaWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoICogMTAwKTsKICAgIH0KICAgIHZhciB6b29tID0gbGFzdFpvb207CiAgICBpZihhY3Rpb24gPT09ICcrJykgem9vbSArPSA1OwogICAgaWYoYWN0aW9uID09PSAnLScpIHpvb20gLT0gNTsKICAgIGlmKGFjdGlvbiA9PT0gJz0nKSB7CiAgICAgIGxhc3Rab29tID0gb3JpZ2luYWxab29tOwogICAgICBhZGRTdHlsZSgnaW1hZ2Utd2lkdGgnLCB0cnVlLCAnJyk7CiAgICAgIHNob3dGbG9hdGluZ01zZygncmVzZXQgem9vbScsIDUwMCk7CiAgICAgIG5ld1pvb21Qb3N0aW9uID0oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCkqcmF0aW9ab29tOwogICAgICB3aW5kb3cuc2Nyb2xsKDAsIG5ld1pvb21Qb3N0aW9uKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgem9vbSA9IE1hdGgubWF4KDEwLCBNYXRoLm1pbih6b29tLCAxMDApKTsKICAgIGxhc3Rab29tID0gem9vbTsKICAgIGFkZFN0eWxlKCdpbWFnZS13aWR0aCcsIHRydWUsIHRvU3R5bGVTdHIoewogICAgICB3aWR0aDogem9vbSArICclJwogICAgfSwgJy5tbC1pbWFnZXMgaW1nJykpOwogICAgc2hvd0Zsb2F0aW5nTXNnKCd6b29tOiAnICsgem9vbSArICclJywgNTAwKTsKICAgIG5ld1pvb21Qb3N0aW9uID0oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCkqcmF0aW9ab29tOwogICAgd2luZG93LnNjcm9sbCgwLCBuZXdab29tUG9zdGlvbik7CiAgfTsKICAvLyBrZXliaW5kaW5ncwogIFVJLmtleXMgPSB7CiAgICBQUkVWX0NIQVA6IDkwLCBFWElUOiA4OCwgTkVYVF9DSEFQOiA2NywKICAgIFNDUk9MTF9VUDogODcsIFNDUk9MTF9ET1dOOiA4MywKICAgIFpPT01fSU46IDE4NywgWk9PTV9PVVQ6IDE4OSwgUkVTRVRfWk9PTTogNDgKICB9OwogIC8vIG92ZXJyaWRlIGRlZmF1bHRzIGZvciBmaXJlZm94IHNpbmNlIGRpZmZlcmVudCBrZXljb2RlcwogIGlmKHR5cGVvZiBJbnN0YWxsVHJpZ2dlciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIFVJLmtleXMuWk9PTV9JTiA9IDYxOwogICAgVUkua2V5cy5aT09NX09VVCA9IDE3MzsKICAgIFVJLmtleXMuUkVTRVRfWk9PTSA9IDQ4OwogIH0KICBVSS5zY3JvbGxBbXQgPSA1MDsKICAvLyBvdmVycmlkZSB0aGUgZGVmYXVsdHMgd2l0aCB0aGUgdXNlciBkZWZpbmVkIG9uZXMKICB1cGRhdGVPYmooVUkua2V5cywgc3RvcmVHZXQoJ21sLXNldHRpbmcta2V5JykgfHwge30pOwogIFVJLl9rZXlzID0ge307CiAgT2JqZWN0LmtleXMoVUkua2V5cykuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHsKICAgIFVJLl9rZXlzW1VJLmtleXNbYWN0aW9uXV0gPSBhY3Rpb247CiAgfSk7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldnQpIHsKICAgIC8vIGlnbm9yZSBrZXliaW5kaW5ncyB3aGVuIHRleHQgaW5wdXQgaXMgZm9jdXNlZAogICAgaWYoVUkuaXNUeXBpbmcpIHsKICAgICAgaWYoIVVJLmlnbm9yZSkgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgY29kZSA9IGV2dC53aGljaCB8fCBldnQuY2hhckNvZGUgfHwgZXZ0LmtleUNvZGU7CiAgICAvLyBzdG9wIHByb3BhZ2F0aW9uIGlmIGtleSBpcyByZWdpc3RlcmVkCiAgICBpZihjb2RlIGluIFVJLmtleXMpIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIC8vIHBlcmZvcm0gYWN0aW9uCiAgICBzd2l0Y2goY29kZSkgewogICAgICBjYXNlIFVJLmtleXMuUFJFVl9DSEFQOgogICAgICAgIGlmKFVJLmJ0blByZXZDaGFwKSB7CiAgICAgICAgICBVSS5idG5QcmV2Q2hhcC5jbGljaygpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBVSS5rZXlzLkVYSVQ6CiAgICAgICAgVUkuYnRuRXhpdC5jbGljaygpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFVJLmtleXMuTkVYVF9DSEFQOgogICAgICAgIGlmKFVJLmJ0bk5leHRDaGFwKSB7CiAgICAgICAgICBVSS5idG5OZXh0Q2hhcC5jbGljaygpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBVSS5rZXlzLlNDUk9MTF9VUDoKICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgLVVJLnNjcm9sbEFtdCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgVUkua2V5cy5TQ1JPTExfRE9XTjoKICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgVUkuc2Nyb2xsQW10KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBVSS5rZXlzLlpPT01fSU46CiAgICAgICAgY2hhbmdlWm9vbSgnKycsIFVJLmltYWdlcyk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgVUkua2V5cy5aT09NX09VVDoKICAgICAgICBjaGFuZ2Vab29tKCctJywgVUkuaW1hZ2VzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBVSS5rZXlzLlJFU0VUX1pPT006CiAgICAgICAgY2hhbmdlWm9vbSgnPScsIFVJLmltYWdlcyk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSwgdHJ1ZSk7CiAgcmV0dXJuIFVJOwp9OwoKdmFyIGdldEN1cnJlbnRJbWFnZSA9IGZ1bmN0aW9uKCkgewogIHZhciBpbWFnZTsKICBnZXRFbHMoJy5tbC1pbWFnZXMgaW1nJykuc29tZShmdW5jdGlvbihpbWcpIHsKICAgIGltYWdlID0gaW1nOwogICAgcmV0dXJuIGltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPiAyMDA7CiAgfSk7CiAgcmV0dXJuIGltYWdlOwp9OwoKdmFyIGdldENvdW50ZXIgPSBmdW5jdGlvbihpbWdOdW0pIHsKICB2YXIgY291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGNvdW50ZXIuY2xhc3NMaXN0LmFkZCgnbWwtY291bnRlcicpOwogIGNvdW50ZXIudGV4dENvbnRlbnQgPSBpbWdOdW07CiAgcmV0dXJuIGNvdW50ZXI7Cn07Cgp2YXIgYWRkSW1hZ2UgPSBmdW5jdGlvbihzcmMsIGxvYywgaW1nTnVtLCBjYWxsYmFjaykgewogIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpLAogICAgICBjb3VudGVyID0gZ2V0Q291bnRlcihpbWdOdW0pOwogIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgIGxvZygnZmFpbGVkIHRvIGxvYWQgJyArIHNyYyk7CiAgICBpbWFnZS5vbmxvYWQgPSBudWxsOwogICAgaW1hZ2Uuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3doaXRlJzsKICAgIGltYWdlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsKICAgIGltYWdlLnRpdGxlID0gJ1JlbG9hZCAiJyArIHNyYyArICciPyc7CiAgICBpbWFnZS5zcmMgPSBJTUFHRVMucmVmcmVzaF9sYXJnZTsKICAgIGltYWdlLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgaW1hZ2Uub25sb2FkID0gY2FsbGJhY2s7CiAgICAgIGltYWdlLnRpdGxlID0gJyc7CiAgICAgIGltYWdlLnN0eWxlLmN1cnNvciA9ICcnOwogICAgICBpbWFnZS5zcmMgPSBzcmM7CiAgICB9OwogIH07CiAgaW1hZ2Uub25sb2FkID0gY2FsbGJhY2s7CiAgaW1hZ2Uuc3JjID0gc3JjOwogIGxvYy5hcHBlbmRDaGlsZChpbWFnZSk7CiAgbG9jLmFwcGVuZENoaWxkKGNvdW50ZXIpOwp9OwoKdmFyIGxvYWRNYW5nYSA9IGZ1bmN0aW9uKGltcCkgewogIHZhciBleCA9IGV4dHJhY3RJbmZvLmJpbmQoaW1wKSwKICAgICAgaW1nVXJsID0gZXgoJ2ltZycsIGltcC5pbWdtb2QpLAogICAgICBuZXh0VXJsID0gZXgoJ25leHQnKSwKICAgICAgbnVtUGFnZXMgPSBleCgnbnVtcGFnZXMnKSwKICAgICAgY3VyUGFnZSA9IGV4KCdjdXJwYWdlJywgewogICAgICAgIHR5cGU6ICdpbmRleCcKICAgICAgfSkgfHwgMSwKICAgICAgbmV4dENoYXB0ZXIgPSBleCgnbmV4dGNoYXAnLCB7CiAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICB2YWw6IChpbXAuaW52Y2hhcCAmJiAtMSkgfHwgMQogICAgICB9KSwKICAgICAgcHJldkNoYXB0ZXIgPSBleCgncHJldmNoYXAnLCB7CiAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICB2YWw6IChpbXAuaW52Y2hhcCAmJiAxKSB8fCAtMQogICAgICB9KSwKICAgICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksCiAgICAgIGQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKSwKICAgICAgYWRkQW5kTG9hZCA9IGZ1bmN0aW9uKGltZywgbmV4dCkgewogICAgICAgIGlmKCFpbWcpIHRocm93IG5ldyBFcnJvcignZmFpbGVkIHRvIHJldHJpZXZlIGltZyBmb3IgcGFnZSAnICsgY3VyUGFnZSk7CiAgICAgICAgdXBkYXRlU3RhdHMoKTsKICAgICAgICBhZGRJbWFnZShpbWcsIFVJLmltYWdlcywgY3VyUGFnZSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICBwYWdlc0xvYWRlZCArPSAxOwogICAgICAgICAgdXBkYXRlU3RhdHMoKTsKICAgICAgICB9KTsKICAgICAgICBpZighbmV4dCAmJiBjdXJQYWdlIDwgbnVtUGFnZXMpIHRocm93IG5ldyBFcnJvcignZmFpbGVkIHRvIHJldHJpZXZlIG5leHQgdXJsIGZvciBwYWdlICcgKyBjdXJQYWdlKTsKICAgICAgICBsb2FkTmV4dFBhZ2UobmV4dCk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZVN0YXRzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdXBkYXRlT2JqKHBhZ2VTdGF0cywgewogICAgICAgICAgbnVtTG9hZGVkOiBwYWdlc0xvYWRlZCwKICAgICAgICAgIGxvYWRMaW1pdDogY3VyUGFnZSwKICAgICAgICAgIG51bVBhZ2VzOiBudW1QYWdlcwogICAgICAgIH0pOwogICAgICAgIGlmKFVJLm1vcmVTdGF0cykgewogICAgICAgICAgZm9yKHZhciBpPTI7aS0tOykgVUkuYnRuTW9yZVN0YXRzLmNsaWNrKCk7CiAgICAgICAgfQogICAgICAgIFVJLnN0YXRzUGFnZXMudGV4dENvbnRlbnQgPSAnICcgKyBwYWdlc0xvYWRlZCArIChudW1QYWdlcyA/ICcvJyArIG51bVBhZ2VzIDogJycpICsgJyBsb2FkZWQnOwogICAgICB9LAogICAgICBnZXRQYWdlSW5mbyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBwYWdlID0gZC5ib2R5OwogICAgICAgIGQuYm9keS5pbm5lckhUTUwgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIGZpbmQgaW1hZ2UgYW5kIGxpbmsgdG8gbmV4dCBwYWdlCiAgICAgICAgICBhZGRBbmRMb2FkKGV4KCdpbWcnLCBpbXAuaW1nbW9kLCBwYWdlKSwgZXgoJ25leHQnLCBudWxsLCBwYWdlKSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gNTAzICYmIHJldHJpZXMgPiAwKSB7CiAgICAgICAgICAgIGxvZygneGhyIHN0YXR1cyAnICsgeGhyLnN0YXR1cyArICcgcmV0cmlldmluZyAnICsgeGhyLnJlc3BvbnNlVVJMICsgJywgJyArIHJldHJpZXMtLSArICcgcmV0cmllcyByZW1haW5pbmcnKTsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgeGhyLm9wZW4oJ2dldCcsIHhoci5yZXNwb25zZVVSTCk7CiAgICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZyhlKTsKICAgICAgICAgICAgbG9nKCdlcnJvciBnZXR0aW5nIGRldGFpbHMgZnJvbSBuZXh0IHBhZ2UsIGFzc3VtaW5nIGVuZCBvZiBjaGFwdGVyLicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgbG9hZE5leHRQYWdlID0gZnVuY3Rpb24odXJsKSB7CiAgICAgICAgaWYgKG1Mb2FkTnVtICE9PSAnYWxsJyAmJiBjb3VudCAlIG1Mb2FkTnVtID09PSAwKSB7CiAgICAgICAgICBpZiAocmVzdW1lVXJsKSB7CiAgICAgICAgICAgIHJlc3VtZVVybCA9IG51bGw7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bWVVcmwgPSB1cmw7CiAgICAgICAgICAgIGxvZygnd2FpdGluZyBmb3IgdXNlciB0byBzY3JvbGwgZnVydGhlciBiZWZvcmUgbG9hZGluZyBtb3JlIGltYWdlcywgbG9hZGVkICcgKyBjb3VudCArICcgcGFnZXMgc28gZmFyLCBuZXh0IHVybCBpcyAnICsgcmVzdW1lVXJsKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAobnVtUGFnZXMgJiYgY3VyUGFnZSArIDEgPiBudW1QYWdlcykgewogICAgICAgICAgbG9nKCdyZWFjaGVkICJudW1QYWdlcyIgJyArIG51bVBhZ2VzICsgJywgYXNzdW1pbmcgZW5kIG9mIGNoYXB0ZXInKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGxhc3RVcmwgPT09IHVybCkgewogICAgICAgICAgbG9nKCdsYXN0IHVybCAoJyArIGxhc3RVcmwgKyAnKSBpcyB0aGUgc2FtZSBhcyBjdXJyZW50ICgnICsgdXJsICsgJyksIGFzc3VtaW5nIGVuZCBvZiBjaGFwdGVyJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGN1clBhZ2UgKz0gMTsKICAgICAgICBjb3VudCArPSAxOwogICAgICAgIGxhc3RVcmwgPSB1cmw7CiAgICAgICAgcmV0cmllcyA9IDU7CiAgICAgICAgaWYgKGltcC5wYWdlcykgewogICAgICAgICAgaW1wLnBhZ2VzKHVybCwgY3VyUGFnZSwgYWRkQW5kTG9hZCwgZXgsIGdldFBhZ2VJbmZvKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGNvbG9uSWR4ID0gdXJsLmluZGV4T2YoJzonKTsKICAgICAgICAgIGlmKGNvbG9uSWR4ID4gLTEpIHsKICAgICAgICAgICAgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyB1cmwuc2xpY2UoY29sb25JZHggKyAxKTsKICAgICAgICAgIH0KICAgICAgICAgIHhoci5vcGVuKCdnZXQnLCB1cmwpOwogICAgICAgICAgaW1wLmJlZm9yZXhociAmJiBpbXAuYmVmb3JleGhyKHhocik7CiAgICAgICAgICB4aHIub25sb2FkID0gZ2V0UGFnZUluZm87CiAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBsb2coJ2ZhaWxlZCB0byBsb2FkIHBhZ2UsIGFib3J0aW5nJywgJ2Vycm9yJyk7CiAgICAgICAgICB9OwogICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvdW50ID0gMSwKICAgICAgcGFnZXNMb2FkZWQgPSBjdXJQYWdlIC0gMSwKICAgICAgbGFzdFVybCwgVUksIHJlc3VtZVVybCwgcmV0cmllczsKICBpZiAoIWltZ1VybCB8fCAoIW5leHRVcmwgJiYgY3VyUGFnZSA8IG51bVBhZ2VzKSkgewogICAgbG9nKCdmYWlsZWQgdG8gcmV0cmlldmUgJyArICghaW1nVXJsID8gJ2ltYWdlIHVybCcgOiAnbmV4dCBwYWdlIHVybCcpLCAnZXhpdCcpOwogIH0KCiAgLy8gZ2F0aGVyIGNoYXB0ZXIgc3RhdHMKICBwYWdlU3RhdHMuY3VyQ2hhcCA9IGV4KCdjdXJjaGFwJywgewogICAgdHlwZTogJ2luZGV4JywKICAgIGludklkeDogISFpbXAuaW52Y2hhcAogIH0pOwogIHBhZ2VTdGF0cy5udW1DaGFwcyA9IGV4KCdudW1jaGFwcycpOwoKICAvLyBkbyBzb21lIGNoZWNrcyBvbiB0aGUgY2hhcHRlciB1cmxzCiAgbmV4dENoYXB0ZXIgPSAobmV4dENoYXB0ZXIgJiYgbmV4dENoYXB0ZXIudHJpbSgpID09PSBsb2NhdGlvbi5ocmVmICsgJyMnID8gbnVsbCA6IG5leHRDaGFwdGVyKTsKICBwcmV2Q2hhcHRlciA9IChwcmV2Q2hhcHRlciAmJiBwcmV2Q2hhcHRlci50cmltKCkgPT09IGxvY2F0aW9uLmhyZWYgKyAnIycgPyBudWxsIDogcHJldkNoYXB0ZXIpOwoKICBVSSA9IGdldFZpZXdlcihwcmV2Q2hhcHRlciwgbmV4dENoYXB0ZXIpOwoKICBVSS5zdGF0c1BhZ2VzLnRleHRDb250ZW50ID0gJyAwLzEgbG9hZGVkLCAnICsgbnVtUGFnZXMgKyAnIHRvdGFsJzsKCiAgaWYgKG1Mb2FkTnVtICE9PSAnYWxsJykgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlKGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKCFyZXN1bWVVcmwpIHJldHVybjsgLy8gZXhpdCBlYXJseSBpZiB3ZSBkb24ndCBoYXZlIGEgcG9zaXRpb24gdG8gcmVzdW1lIGF0CiAgICAgIGlmKCFVSS5pbWFnZUhlaWdodCkgewogICAgICAgIFVJLmltYWdlSGVpZ2h0ID0gZ2V0RWwoJy5tbC1pbWFnZXMgaW1nJykuY2xpZW50SGVpZ2h0OwogICAgICB9CiAgICAgIHZhciBzY3JvbGxCb3R0b20gPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCAtICgoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgKyB3aW5kb3cuaW5uZXJIZWlnaHQpOwogICAgICBpZiAoc2Nyb2xsQm90dG9tIDwgVUkuaW1hZ2VIZWlnaHQgKiAyKSB7CiAgICAgICAgbG9nKCd1c2VyIHNjcm9sbCBuZWFyaW5nIGVuZCwgbG9hZGluZyBtb3JlIGltYWdlcyBzdGFydGluZyBmcm9tICcgKyByZXN1bWVVcmwpOwogICAgICAgIGxvYWROZXh0UGFnZShyZXN1bWVVcmwpOwogICAgICB9CiAgICB9LCAxMDApKTsKICB9CgogIGFkZEFuZExvYWQoaW1nVXJsLCBuZXh0VXJsKTsKCn07Cgp2YXIgd2FpdEFuZExvYWQgPSBmdW5jdGlvbihpbXApIHsKICBpc0xvYWRlZCA9IHRydWU7CiAgaWYoaW1wLndhaXQpIHsKICAgIHZhciB3YWl0VHlwZSA9IHR5cGVvZiBpbXAud2FpdDsKICAgIGlmKHdhaXRUeXBlID09PSAnbnVtYmVyJykgewogICAgICBzZXRUaW1lb3V0KGxvYWRNYW5nYS5iaW5kKG51bGwsIGltcCksIGltcC53YWl0IHx8IDApOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGlzUmVhZHkgPSB3YWl0VHlwZSA9PT0gJ2Z1bmN0aW9uJyA/IGltcC53YWl0LmJpbmQoaW1wKSA6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBnZXRFbChpbXAud2FpdCk7CiAgICAgIH07CiAgICAgIHZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYoaXNSZWFkeSgpKSB7CiAgICAgICAgICBsb2coJ0NvbmRpdGlvbiBmdWxmaWxsZWQsIGxvYWRpbmcnKTsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7CiAgICAgICAgICBsb2FkTWFuZ2EoaW1wKTsKICAgICAgICB9CiAgICAgIH0sIDIwMCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGxvYWRNYW5nYShpbXApOwogIH0KfTsKCnZhciBNTG9hZGVyTG9hZEltcHMgPSBmdW5jdGlvbihpbXBzKSB7CiAgdmFyIHN1Y2Nlc3MgPSBpbXBzLnNvbWUoZnVuY3Rpb24oaW1wKSB7CiAgICBpZiAoaW1wLm1hdGNoICYmIChuZXcgUmVnRXhwKGltcC5tYXRjaCwgJ2knKSkudGVzdChwYWdlVXJsKSkgewogICAgICBjdXJyZW50SW1wTmFtZSA9IGltcC5uYW1lOwogICAgICBpZiAoVy5CTV9NT0RFIHx8IChhdXRvbG9hZCAhPT0gJ25vJyAmJiAobUF1dG9sb2FkIHx8IGF1dG9sb2FkKSkpIHsKICAgICAgICBsb2coJ2F1dG9sb2FkaW5nLi4uJyk7CiAgICAgICAgd2FpdEFuZExvYWQoaW1wKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICAvLyBzZXR1cCBsb2FkIGhvdGtleQogICAgICB2YXIgbG9hZEhvdEtleSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZihlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09IDE4OCkgeyAvLyBjdHJsICsgLCAoY29tbWEpCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBidG5Mb2FkLmNsaWNrKCk7CiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGxvYWRIb3RLZXkpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsb2FkSG90S2V5KTsKICAgICAgLy8gYXBwZW5kIGJ1dHRvbiB0byBkb20gdGhhdCB3aWxsIHRyaWdnZXIgdGhlIHBhZ2UgbG9hZAogICAgICBidG5Mb2FkID0gY3JlYXRlQnV0dG9uKCdMb2FkIE1hbmdhJywgZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgd2FpdEFuZExvYWQoaW1wKTsKICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICB9LCBidG5Mb2FkQ3NzKTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidG5Mb2FkKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSk7CgogIGlmICghc3VjY2VzcykgewogICAgbG9nKCdubyBpbXBsZW1lbnRhdGlvbiBmb3IgJyArIHBhZ2VVcmwsICdlcnJvcicpOwogIH0KfTsKCnZhciBwYWdlVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYsCiAgICBidG5Mb2FkQ3NzID0gdG9TdHlsZVN0cih7CiAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsCiAgICAgICdib3R0b20nOiAwLAogICAgICAncmlnaHQnOiAwLAogICAgICAncGFkZGluZyc6ICc1cHgnLAogICAgICAnbWFyZ2luJzogJzAgMTBweCAxMHB4IDAnLAogICAgICAnei1pbmRleCc6ICc5OTk5OTk5OTk5JwogICAgfSksCiAgICBjdXJyZW50SW1wTmFtZSwgYnRuTG9hZDsKCi8vIGluZGljYXRlcyB3aGV0aGVyIFVJIGxvYWRlZAp2YXIgaXNMb2FkZWQgPSBmYWxzZTsKLy8gdXNlZCB3aGVuIHN3aXRjaGluZyBjaGFwdGVycwp2YXIgYXV0b2xvYWQgPSBzdG9yZUdldCgnYXV0b2xvYWQnKTsKLy8gbWFudWFsbHkgc2V0IGJ5IHVzZXIgaW4gbWVudQp2YXIgbUF1dG9sb2FkID0gc3RvcmVHZXQoJ21BdXRvbG9hZCcpIHx8IGZhbHNlOwovLyBzaG91bGQgd2UgbG9hZCBsZXNzIHBhZ2VzIGF0IGEgdGltZT8KdmFyIG1Mb2FkTnVtID0gc3RvcmVHZXQoJ21Mb2FkTnVtJykgfHwgMTA7Ci8vIGhvbGRlciBmb3Igc3RhdGlzdGljcwp2YXIgcGFnZVN0YXRzID0gewogIG51bVBhZ2VzOiBudWxsLCBudW1Mb2FkZWQ6IG51bGwsIGxvYWRMaW1pdDogbnVsbCwgY3VyQ2hhcDogbnVsbCwgbnVtQ2hhcHM6IG51bGwKfTsKCi8vIGNsZWFyIGF1dG9sb2FkCnN0b3JlRGVsKCdhdXRvbG9hZCcpOwoKbG9nKCdzdGFydGluZy4uLicpOwoKLy8gZXh0cmEgY2hlY2sgZm9yIHNldHRpbmdzIChoYWNrKSBvbiBkdW1iIGZpcmVmb3gvc2NyaXB0aXNoLCBzZXR0aW5ncyBhcmVuJ3QgdWRwYXRlZCB1bnRpbCBkb2N1bWVudCBlbmQKVy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oZSkgewogIGlmKCFpc0xvYWRlZCkgcmV0dXJuOwogIC8vIHVzZWQgd2hlbiBzd2l0Y2hpbmcgY2hhcHRlcnMKICBhdXRvbG9hZCA9IHN0b3JlR2V0KCdhdXRvbG9hZCcpOwogIC8vIG1hbnVhbGx5IHNldCBieSB1c2VyIGluIG1lbnUKICBtQXV0b2xvYWQgPSBzdG9yZUdldCgnbUF1dG9sb2FkJykgfHwgZmFsc2U7CiAgLy8gc2hvdWxkIHdlIGxvYWQgbGVzcyBwYWdlcyBhdCBhIHRpbWU/CiAgbUxvYWROdW0gPSBzdG9yZUdldCgnbUxvYWROdW0nKSB8fCAxMDsKICBpZihhdXRvbG9hZCB8fCBtQXV0b2xvYWQpIHsKICAgIGJ0bkxvYWQuY2xpY2soKTsKICB9Cn0pOwpNTG9hZGVyTG9hZEltcHMoaW1wbGVtZW50YXRpb25zKTsK"},{"name":"fuskator defuskating LoL","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://fuskator.com/expanded/*","https://fuskator.com/thumbs/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1555250111103,"data":{}},"enabled":true,"position":12,"uuid":"375ec362-b647-4ff9-bd6c-e594d6463977","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBmdXNrYXRvciBkZWZ1c2thdGluZyBMb0wKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjEKLy8gQGRlc2NyaXB0aW9uICB0cnkgdG8gdGFrZSBvdmVyIHRoZSB3b3JsZCEKLy8gQGF1dGhvciAgICAgICBZb3UKLy8gQG1hdGNoICAgICAgICBodHRwczovL2Z1c2thdG9yLmNvbS9leHBhbmRlZC8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly9mdXNrYXRvci5jb20vdGh1bWJzLyoKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJidG5TaW1pbGFyIikuY2xpY2soKTsKfSkoKTs="},{"name":"wp.pl","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*.abczdrowie.pl/*","*://*.autokrata.pl/*","*://*.autokult.pl/*","*://*.biztok.pl/*","*://*.gadzetomania.pl/*","*://*.hotmoney.pl/*","*://*.kafeteria.pl/*","*://*.kafeteria.tv/*","*://*.komediowo.pl/*","*://*.komorkomania.pl/*","*://*.money.pl/*","*://*.money.pl/*","*://*.pudelek.tv/*","*://*.sfora.pl/*","*://*.snobka.pl/*","*://*.wawalove.pl/*","*://*.wp.pl/*","*://*.wp.tv/*","*://*.wrzuta.pl/*","*://*.pudelek.pl/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1559501124876,"data":{}},"enabled":true,"position":13,"file_url":"https://raw.githubusercontent.com/MajkiIT/polish-ads-filter/master/polish-adblock-filters/polish_adblock.user.js","uuid":"60d8b02c-560f-46b5-a020-dc4ea51346f1","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICB3cC5wbAovLyBAdmVyc2lvbiAgICAgIDAuMgovLyBAZGVzY3JpcHRpb24gIFBvemJ5Y2llIHNpw4TihKIgcmVrbGFtIGkga29tdW5pa2F0dSBvIGFkYmxvY2t1IG5hIHN0cm9uYWNoIG5hbGXDhcK8w4TigKZjeWNoIGRvIHdwLnBsCi8vIEBhdXRob3IgICAgICAgRjR6Ci8vIEBtYXRjaCAgICAgICAgKjovLyouYWJjemRyb3dpZS5wbC8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouYXV0b2tyYXRhLnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5hdXRva3VsdC5wbC8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouYml6dG9rLnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5nYWR6ZXRvbWFuaWEucGwvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLmhvdG1vbmV5LnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5rYWZldGVyaWEucGwvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLmthZmV0ZXJpYS50di8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoua29tZWRpb3dvLnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5rb21vcmtvbWFuaWEucGwvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLm1vbmV5LnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5tb25leS5wbC8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoucHVkZWxlay50di8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouc2ZvcmEucGwvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnNub2JrYS5wbC8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoud2F3YWxvdmUucGwvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLndwLnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi53cC50di8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoud3J6dXRhLnBsLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5wdWRlbGVrLnBsLyoKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQHVwZGF0ZVVSTCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vTWFqa2lJVC9wb2xpc2gtYWRzLWZpbHRlci9tYXN0ZXIvcG9saXNoLWFkYmxvY2stZmlsdGVycy9wb2xpc2hfYWRibG9jay51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vTWFqa2lJVC9wb2xpc2gtYWRzLWZpbHRlci9tYXN0ZXIvcG9saXNoLWFkYmxvY2stZmlsdGVycy9wb2xpc2hfYWRibG9jay51c2VyLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKGIpIHsKICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgICAgImFkdmVydGlzZW1lbnQiICE9IGFyZ3VtZW50c1swXSAmJiBiLmFwcGx5KHdpbmRvdywgYXJndW1lbnRzKQogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMod2luZG93LCB7CiAgICAgICAgaGFzU2VudGluZWw6IHsKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0OiBmdW5jdGlvbigpIHt9CiAgICAgICAgfSwKICAgICAgICBhZGRFdmVudExpc3RlbmVyOiB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAgIGIgPSBhCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KQp9KSh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcik7Cg=="}]}